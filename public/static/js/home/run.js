/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
 v2.0.3 (c) Kyle Simpson
 MIT License
 */

(function(global){
    var _$LAB = global.$LAB,

        // constants for the valid keys of the options object
        _UseLocalXHR = "UseLocalXHR",
        _AlwaysPreserveOrder = "AlwaysPreserveOrder",
        _AllowDuplicates = "AllowDuplicates",
        _CacheBust = "CacheBust",
        /*!START_DEBUG*/_Debug = "Debug",/*!END_DEBUG*/
        _BasePath = "BasePath",

        // stateless variables used across all $LAB instances
        root_page = /^[^?#]*\//.exec(location.href)[0],
        root_domain = /^\w+\:\/\/\/?[^\/]+/.exec(root_page)[0],
        append_to = document.head || document.getElementsByTagName("head"),

        // inferences... ick, but still necessary
        opera_or_gecko = (global.opera && Object.prototype.toString.call(global.opera) == "[object Opera]") || ("MozAppearance" in document.documentElement.style),

        /*!START_DEBUG*/
        // console.log() and console.error() wrappers
        log_msg = function(){},
        log_error = log_msg,
        /*!END_DEBUG*/

        // feature sniffs (yay!)
        test_script_elem = document.createElement("script"),
        explicit_preloading = typeof test_script_elem.preload == "boolean", // http://wiki.whatwg.org/wiki/Script_Execution_Control#Proposal_1_.28Nicholas_Zakas.29
        real_preloading = explicit_preloading || (test_script_elem.readyState && test_script_elem.readyState == "uninitialized"), // will a script preload with `src` set before DOM append?
        script_ordered_async = !real_preloading && test_script_elem.async === true, // http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order

        // XHR preloading (same-domain) and cache-preloading (remote-domain) are the fallbacks (for some browsers)
        xhr_or_cache_preloading = !real_preloading && !script_ordered_async && !opera_or_gecko
    ;

    /*!START_DEBUG*/
    // define console wrapper functions if applicable
    if (global.console && global.console.log) {
        if (!global.console.error) global.console.error = global.console.log;
        log_msg = function(msg) { global.console.log(msg); };
        log_error = function(msg,err) { global.console.error(msg,err); };
    }
    /*!END_DEBUG*/

    // test for function
    function is_func(func) { return Object.prototype.toString.call(func) == "[object Function]"; }

    // test for array
    function is_array(arr) { return Object.prototype.toString.call(arr) == "[object Array]"; }

    // make script URL absolute/canonical
    function canonical_uri(src,base_path) {
        var absolute_regex = /^\w+\:\/\//;

        // is `src` is protocol-relative (begins with // or ///), prepend protocol
        if (/^\/\/\/?/.test(src)) {
            src = location.protocol + src;
        }
        // is `src` page-relative? (not an absolute URL, and not a domain-relative path, beginning with /)
        else if (!absolute_regex.test(src) && src.charAt(0) != "/") {
            // prepend `base_path`, if any
            src = (base_path || "") + src;
        }
        // make sure to return `src` as absolute
        return absolute_regex.test(src) ? src : ((src.charAt(0) == "/" ? root_domain : root_page) + src);
    }

    // merge `source` into `target`
    function merge_objs(source,target) {
        for (var k in source) { if (source.hasOwnProperty(k)) {
            target[k] = source[k]; // TODO: does this need to be recursive for our purposes?
        }}
        return target;
    }

    // does the chain group have any ready-to-execute scripts?
    function check_chain_group_scripts_ready(chain_group) {
        var any_scripts_ready = false;
        for (var i=0; i<chain_group.scripts.length; i++) {
            if (chain_group.scripts[i].ready && chain_group.scripts[i].exec_trigger) {
                any_scripts_ready = true;
                chain_group.scripts[i].exec_trigger();
                chain_group.scripts[i].exec_trigger = null;
            }
        }
        return any_scripts_ready;
    }

    // creates a script load listener
    function create_script_load_listener(elem,registry_item,flag,onload) {
        elem.onload = elem.onreadystatechange = function() {
            if ((elem.readyState && elem.readyState != "complete" && elem.readyState != "loaded") || registry_item[flag]) return;
            elem.onload = elem.onreadystatechange = null;
            onload();
        };
    }

    // script executed handler
    function script_executed(registry_item) {
        registry_item.ready = registry_item.finished = true;
        for (var i=0; i<registry_item.finished_listeners.length; i++) {
            registry_item.finished_listeners[i]();
        }
        registry_item.ready_listeners = [];
        registry_item.finished_listeners = [];
    }

    // make the request for a scriptha
    function request_script(chain_opts,script_obj,registry_item,onload,preload_this_script) {
        // setTimeout() "yielding" prevents some weird race/crash conditions in older browsers
        setTimeout(function(){
            var script, src = script_obj.real_src, xhr;

            // don't proceed until `append_to` is ready to append to
            if ("item" in append_to) { // check if `append_to` ref is still a live node list
                if (!append_to[0]) { // `append_to` node not yet ready
                    // try again in a little bit -- note: will re-call the anonymous function in the outer setTimeout, not the parent `request_script()`
                    setTimeout(arguments.callee,25);
                    return;
                }
                // reassign from live node list ref to pure node ref -- avoids nasty IE bug where changes to DOM invalidate live node lists
                append_to = append_to[0];
            }
            script = document.createElement("script");
            if (script_obj.type) script.type = script_obj.type;
            if (script_obj.charset) script.charset = script_obj.charset;

            // should preloading be used for this script?
            if (preload_this_script) {
                // real script preloading?
                if (real_preloading) {
                    /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("start script preload: "+src);/*!END_DEBUG*/
                    registry_item.elem = script;
                    if (explicit_preloading) { // explicit preloading (aka, Zakas' proposal)
                        script.preload = true;
                        script.onpreload = onload;
                    }
                    else {
                        script.onreadystatechange = function(){
                            if (script.readyState == "loaded") onload();
                        };
                    }
                    script.src = src;
                    // NOTE: no append to DOM yet, appending will happen when ready to execute
                }
                // same-domain and XHR allowed? use XHR preloading
                else if (preload_this_script && src.indexOf(root_domain) == 0 && chain_opts[_UseLocalXHR]) {
                    xhr = new XMLHttpRequest(); // note: IE never uses XHR (it supports true preloading), so no more need for ActiveXObject fallback for IE <= 7
                    /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("start script preload (xhr): "+src);/*!END_DEBUG*/
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState == 4) {
                            xhr.onreadystatechange = function(){}; // fix a memory leak in IE
                            registry_item.text = xhr.responseText + "\n//@ sourceURL=" + src; // http://blog.getfirebug.com/2009/08/11/give-your-eval-a-name-with-sourceurl/
                            onload();
                        }
                    };
                    xhr.open("GET",src);
                    xhr.send();
                }
                // as a last resort, use cache-preloading
                else {
                    /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("start script preload (cache): "+src);/*!END_DEBUG*/
                    script.type = "text/cache-script";
                    create_script_load_listener(script,registry_item,"ready",function() {
                        append_to.removeChild(script);
                        onload();
                    });
                    script.src = src;
                    append_to.insertBefore(script,append_to.firstChild);
                }
            }
            // use async=false for ordered async? parallel-load-serial-execute http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
            else if (script_ordered_async) {
                /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("start script load (ordered async): "+src);/*!END_DEBUG*/
                script.async = false;
                create_script_load_listener(script,registry_item,"finished",onload);
                script.src = src;
                append_to.insertBefore(script,append_to.firstChild);
            }
            // otherwise, just a normal script element
            else {
                /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("start script load: "+src);/*!END_DEBUG*/
                create_script_load_listener(script,registry_item,"finished",onload);
                script.src = src;
                append_to.insertBefore(script,append_to.firstChild);
            }
        },0);
    }

    // create a clean instance of $LAB
    function create_sandbox() {
        var global_defaults = {},
            can_use_preloading = real_preloading || xhr_or_cache_preloading,
            queue = [],
            registry = {},
            instanceAPI
        ;

        // global defaults
        global_defaults[_UseLocalXHR] = true;
        global_defaults[_AlwaysPreserveOrder] = false;
        global_defaults[_AllowDuplicates] = false;
        global_defaults[_CacheBust] = false;
        /*!START_DEBUG*/global_defaults[_Debug] = false;/*!END_DEBUG*/
        global_defaults[_BasePath] = "";

        // execute a script that has been preloaded already
        function execute_preloaded_script(chain_opts,script_obj,registry_item) {
            var script;

            function preload_execute_finished() {
                if (script != null) { // make sure this only ever fires once
                    script = null;
                    script_executed(registry_item);
                }
            }

            if (registry[script_obj.src].finished) return;
            if (!chain_opts[_AllowDuplicates]) registry[script_obj.src].finished = true;

            script = registry_item.elem || document.createElement("script");
            if (script_obj.type) script.type = script_obj.type;
            if (script_obj.charset) script.charset = script_obj.charset;
            create_script_load_listener(script,registry_item,"finished",preload_execute_finished);

            // script elem was real-preloaded
            if (registry_item.elem) {
                registry_item.elem = null;
            }
            // script was XHR preloaded
            else if (registry_item.text) {
                script.onload = script.onreadystatechange = null;	// script injection doesn't fire these events
                script.text = registry_item.text;
            }
            // script was cache-preloaded
            else {
                script.src = script_obj.real_src;
            }
            append_to.insertBefore(script,append_to.firstChild);

            // manually fire execution callback for injected scripts, since events don't fire
            if (registry_item.text) {
                preload_execute_finished();
            }
        }

        // process the script request setup
        function do_script(chain_opts,script_obj,chain_group,preload_this_script) {
            var registry_item,
                registry_items,
                ready_cb = function(){ script_obj.ready_cb(script_obj,function(){ execute_preloaded_script(chain_opts,script_obj,registry_item); }); },
                finished_cb = function(){ script_obj.finished_cb(script_obj,chain_group); }
            ;

            script_obj.src = canonical_uri(script_obj.src,chain_opts[_BasePath]);
            script_obj.real_src = script_obj.src +
                // append cache-bust param to URL?
                (chain_opts[_CacheBust] ? ((/\?.*$/.test(script_obj.src) ? "&_" : "?_") + ~~(Math.random()*1E9) + "=") : "")
            ;

            if (!registry[script_obj.src]) registry[script_obj.src] = {items:[],finished:false};
            registry_items = registry[script_obj.src].items;

            // allowing duplicates, or is this the first recorded load of this script?
            if (chain_opts[_AllowDuplicates] || registry_items.length == 0) {
                registry_item = registry_items[registry_items.length] = {
                    ready:false,
                    finished:false,
                    ready_listeners:[ready_cb],
                    finished_listeners:[finished_cb]
                };

                request_script(chain_opts,script_obj,registry_item,
                    // which callback type to pass?
                    (
                        (preload_this_script) ? // depends on script-preloading
                            function(){
                                registry_item.ready = true;
                                for (var i=0; i<registry_item.ready_listeners.length; i++) {
                                    registry_item.ready_listeners[i]();
                                }
                                registry_item.ready_listeners = [];
                            } :
                            function(){ script_executed(registry_item); }
                    ),
                    // signal if script-preloading should be used or not
                    preload_this_script
                );
            }
            else {
                registry_item = registry_items[0];
                if (registry_item.finished) {
                    finished_cb();
                }
                else {
                    registry_item.finished_listeners.push(finished_cb);
                }
            }
        }

        // creates a closure for each separate chain spawned from this $LAB instance, to keep state cleanly separated between chains
        function create_chain() {
            var chainedAPI,
                chain_opts = merge_objs(global_defaults,{}),
                chain = [],
                exec_cursor = 0,
                scripts_currently_loading = false,
                group
            ;

            // called when a script has finished preloading
            function chain_script_ready(script_obj,exec_trigger) {
                /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("script preload finished: "+script_obj.real_src);/*!END_DEBUG*/
                script_obj.ready = true;
                script_obj.exec_trigger = exec_trigger;
                advance_exec_cursor(); // will only check for 'ready' scripts to be executed
            }

            // called when a script has finished executing
            function chain_script_executed(script_obj,chain_group) {
                /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("script execution finished: "+script_obj.real_src);/*!END_DEBUG*/
                script_obj.ready = script_obj.finished = true;
                script_obj.exec_trigger = null;
                // check if chain group is all finished
                for (var i=0; i<chain_group.scripts.length; i++) {
                    if (!chain_group.scripts[i].finished) return;
                }
                // chain_group is all finished if we get this far
                chain_group.finished = true;
                advance_exec_cursor();
            }

            // main driver for executing each part of the chain
            function advance_exec_cursor() {
                while (exec_cursor < chain.length) {
                    if (is_func(chain[exec_cursor])) {
                        /*!START_DEBUG*/if (chain_opts[_Debug]) log_msg("$LAB.wait() executing: "+chain[exec_cursor]);/*!END_DEBUG*/
                        try { chain[exec_cursor++](); } catch (err) {
                            /*!START_DEBUG*/if (chain_opts[_Debug]) log_error("$LAB.wait() error caught: ",err);/*!END_DEBUG*/
                        }
                        continue;
                    }
                    else if (!chain[exec_cursor].finished) {
                        if (check_chain_group_scripts_ready(chain[exec_cursor])) continue;
                        break;
                    }
                    exec_cursor++;
                }
                // we've reached the end of the chain (so far)
                if (exec_cursor == chain.length) {
                    scripts_currently_loading = false;
                    group = false;
                }
            }

            // setup next chain script group
            function init_script_chain_group() {
                if (!group || !group.scripts) {
                    chain.push(group = {scripts:[],finished:true});
                }
            }

            // API for $LAB chains
            chainedAPI = {
                // start loading one or more scripts
                script:function(){
                    for (var i=0; i<arguments.length; i++) {
                        (function(script_obj,script_list){
                            var splice_args;

                            if (!is_array(script_obj)) {
                                script_list = [script_obj];
                            }
                            for (var j=0; j<script_list.length; j++) {
                                init_script_chain_group();
                                script_obj = script_list[j];

                                if (is_func(script_obj)) script_obj = script_obj();
                                if (!script_obj) continue;
                                if (is_array(script_obj)) {
                                    // set up an array of arguments to pass to splice()
                                    splice_args = [].slice.call(script_obj); // first include the actual array elements we want to splice in
                                    splice_args.unshift(j,1); // next, put the `index` and `howMany` parameters onto the beginning of the splice-arguments array
                                    [].splice.apply(script_list,splice_args); // use the splice-arguments array as arguments for splice()
                                    j--; // adjust `j` to account for the loop's subsequent `j++`, so that the next loop iteration uses the same `j` index value
                                    continue;
                                }
                                if (typeof script_obj == "string") script_obj = {src:script_obj};
                                script_obj = merge_objs(script_obj,{
                                    ready:false,
                                    ready_cb:chain_script_ready,
                                    finished:false,
                                    finished_cb:chain_script_executed
                                });
                                group.finished = false;
                                group.scripts.push(script_obj);

                                do_script(chain_opts,script_obj,group,(can_use_preloading && scripts_currently_loading));
                                scripts_currently_loading = true;

                                if (chain_opts[_AlwaysPreserveOrder]) chainedAPI.wait();
                            }
                        })(arguments[i],arguments[i]);
                    }
                    return chainedAPI;
                },
                // force LABjs to pause in execution at this point in the chain, until the execution thus far finishes, before proceeding
                wait:function(){
                    if (arguments.length > 0) {
                        for (var i=0; i<arguments.length; i++) {
                            chain.push(arguments[i]);
                        }
                        group = chain[chain.length-1];
                    }
                    else group = false;

                    advance_exec_cursor();

                    return chainedAPI;
                }
            };

            // the first chain link API (includes `setOptions` only this first time)
            return {
                script:chainedAPI.script,
                wait:chainedAPI.wait,
                setOptions:function(opts){
                    merge_objs(opts,chain_opts);
                    return chainedAPI;
                }
            };
        }

        // API for each initial $LAB instance (before chaining starts)
        instanceAPI = {
            // main API functions
            setGlobalDefaults:function(opts){
                merge_objs(opts,global_defaults);
                return instanceAPI;
            },
            setOptions:function(){
                return create_chain().setOptions.apply(null,arguments);
            },
            script:function(){
                return create_chain().script.apply(null,arguments);
            },
            wait:function(){
                return create_chain().wait.apply(null,arguments);
            },

            // built-in queuing for $LAB `script()` and `wait()` calls
            // useful for building up a chain programmatically across various script locations, and simulating
            // execution of the chain
            queueScript:function(){
                queue[queue.length] = {type:"script", args:[].slice.call(arguments)};
                return instanceAPI;
            },
            queueWait:function(){
                queue[queue.length] = {type:"wait", args:[].slice.call(arguments)};
                return instanceAPI;
            },
            runQueue:function(){
                var $L = instanceAPI, len=queue.length, i=len, val;
                for (;--i>=0;) {
                    val = queue.shift();
                    $L = $L[val.type].apply(null,val.args);
                }
                return $L;
            },

            // rollback `[global].$LAB` to what it was before this file was loaded, the return this current instance of $LAB
            noConflict:function(){
                global.$LAB = _$LAB;
                return instanceAPI;
            },

            // create another clean instance of $LAB
            sandbox:function(){
                return create_sandbox();
            }
        };

        return instanceAPI;
    }

    // create the main instance of $LAB
    global.$LAB = create_sandbox();


    /* The following "hack" was suggested by Andrea Giammarchi and adapted from: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html
     NOTE: this hack only operates in FF and then only in versions where document.readyState is not present (FF < 3.6?).

     The hack essentially "patches" the **page** that LABjs is loaded onto so that it has a proper conforming document.readyState, so that if a script which does
     proper and safe dom-ready detection is loaded onto a page, after dom-ready has passed, it will still be able to detect this state, by inspecting the now hacked
     document.readyState property. The loaded script in question can then immediately trigger any queued code executions that were waiting for the DOM to be ready.
     For instance, jQuery 1.4+ has been patched to take advantage of document.readyState, which is enabled by this hack. But 1.3.2 and before are **not** safe or
     fixed by this hack, and should therefore **not** be lazy-loaded by script loader tools such as LABjs.
     */
    (function(addEvent,domLoaded,handler){
        if (document.readyState == null && document[addEvent]){
            document.readyState = "loading";
            document[addEvent](domLoaded,handler = function(){
                document.removeEventListener(domLoaded,handler,false);
                document.readyState = "complete";
            },false);
        }
    })("addEventListener","DOMContentLoaded");

})(this);


/*!
 * Run.js
 * URL:http://www.faisco.com
 * Only for Guest mode
 * Sort as
 * 		Utils/ModuleFunction/Other Global InitFunction
 * Sort time @2011-10-22
 * Partition time @2012-05-16
 */

var $default = {
    ajaxPrefix:"/home/"
};
if (typeof Run == "undefined") {
    Run = {}
}
Run.getAjaxUrl = function (url) {
    if (typeof url === 'undefined') {
        return document.location.pathname + document.location.search;
    }
    var ajaxPrefix = "";
    if (url.indexOf($default.ajaxPrefix) >= 0) {
        ajaxPrefix = "";
    }
    return a + b
};
Run.showMenu = function (n) {
    var r = n.id;
    if (Helper.isNull(r)) {
        r = ""
    }
    var p = n.host;
    var m = 0;
    if (!Helper.isNull(n.mode)) {
        m = n.mode
    }
    if (Helper.isNull(n.fixpos)) {
        n.fixpos = true
    }
    var k = n.rulerObj;
    var f = n.navSysClass;
    if (Helper.isNull(f)) {
        f = ""
    }
    var e = 0;
    if (!Helper.isNull(n.closeMode)) {
        e = n.closeMode
    }
    var j = 0;
    var q = 0;
    if (m == 1) {
        j = p.offset().left + p.width();
        q = p.offset().top
    } else {
        j = p.offset().left;
        q = p.offset().top + p.height()
    }
    var c = $("#g_menu" + r);
    if (c.length != 0) {
        if (e == 0) {
            c.attr("_mouseIn", 1);
            return c
        } else {
            c.attr("_mouseIn", 0);
            Run.hideMenu();
            return null
        }
    }
    $(".g_menu").each(function () {
        $(this).remove()
    });
    var B = n.data;
    if (n.data == null || n.data == "") {
        return null
    }
    c = $("<div id='g_menu" + r + "' tabindex='0' hidefocus='true' class='g_menu " + n.cls + " " + (n.clsIndex ? n.cls + "Index" + n.clsIndex : "") + " " + f + "' style='display:block;outline:none;'></div>");
    if (typeof n.container === "string") {
        var l = $("#g_menu" + r + "Container");
        if (l.length < 1) {
            l = $(n.container);
            l.attr("id", "g_menu" + r + "Container")
        }
        l.appendTo($("body"));
        c.appendTo(l)
    } else {
        c.appendTo($("body"))
    }
    var u = $("<div class='content contentLayer1'></div>");
    u.appendTo(c);
    Run.addMenuItem(B, u, n);
    if (n.fixpos) {
        if (q + c.height() + 20 > $(document).height()) {
            q = p.offset().top - c.height()
        }
    }
    c.css("left", j - Helper.getCssInt(u, "border-left-width") + "px");
    c.css("top", q + "px");
    if (e == 0) {
        c.mouseleave(function () {
            c.attr("_mouseIn", 0);
            setTimeout(function () {
                Run.hideMenu()
            }, 100)
        });
        c.mouseover(function () {
            c.attr("_mouseIn", 1)
        });
        c.click(function () {
            c.attr("_mouseIn", 0);
            Run.hideMenu()
        });
        p.mouseleave(function () {
            c.attr("_mouseIn", 0);
            setTimeout(function () {
                Run.hideMenu()
            }, 100)
        });
        p.mouseover(function () {
            c.attr("_mouseIn", 1)
        })
    } else {
        p.mousedown(function () {
            c.attr("_mouseIn", 2)
        });
        c.bind("blur", function () {
            if (c.attr("_mouseIn") != 2) {
                c.attr("_mouseIn", 0);
                setTimeout(function () {
                    Run.hideMenu()
                }, 100)
            }
        });
        c.focus()
    }
    if (typeof Run.g_bindMenuMousewheel == "undefined") {
        Run.g_bindMenuMousewheel = 1;
        $("body").bind("mousewheel", function () {
            $("#g_menu").remove()
        })
    }
    c.attr("_mouseIn", 1);
    c.slideDown(200);
    Run.calcMenuSize(c, n);
    var s = $("#g_menu" + r + ">div.content>table>tbody>tr>td.center>table.item");
    var w = $("#g_menu" + r);
    var C = (w.outerWidth() - w.width()) + (w.find(".content").outerWidth() - w.find(".content").width()) + (w.find(".content .middle").outerWidth() - w.find(".content .middle").width()) + (w.find(".content .middle .left").outerWidth() - w.find(".content .middle .right").outerWidth()) + (w.find(".content .middle .center").outerWidth() - w.find(".content .middle .center").width());
    var a = s.first().css("clear");
    var b = s.first().outerWidth();
    var i = s.length;
    if (a == "none") {
        if (i > 1 && b > 0) {
            var y = b * i;
            var v = document.documentElement.clientWidth;
            var t = w.offset().left;
            var h = w.offset().right;
            var A = w.width();
            var d = p.offset().left;
            var g = k.outerWidth();
            var x = k.offset().left;
            var o = x + g;
            if (d > v / 2) {
                if (y < v && y > v / 2) {
                    var z = o - y;
                    w.offset({left: z - C});
                    w.find(".content>.middle").width("100%")
                }
                if (y < v && y < v / 2 && (o - t) < y) {
                    var z = o - y;
                    w.offset({left: z - C});
                    w.find(".content>.middle").width("100%")
                }
                if (y > v) {
                    if (v < A) {
                        w.offset({left: 0});
                        w.find(".content>.middle").width("100%")
                    } else {
                        w.offset({left: x});
                        w.find(".content>.middle").width("100%")
                    }
                }
            } else {
                if (y < v && (v - d) < y) {
                    var z = v - y;
                    w.offset({left: z - C});
                    w.find(".content>.middle").width("100%")
                }
                if (y < v && (o - t) < y) {
                    var z = o - y;
                    w.offset({left: z - C});
                    w.find(".content>.middle").width("100%")
                }
                if (y > v) {
                    if (v < A) {
                        w.offset({left: 0});
                        w.find(".content>.middle").width("100%")
                    } else {
                        w.offset({left: x});
                        w.find(".content>.middle").width("100%")
                    }
                }
            }
        }
    }
    return c
};
Run.addMenuItem = function (t, b, j, g) {
    if (t.length <= 0) {
        return
    }
    g = g || "outMenu";
    var d = ["<table class='top " + g + "Top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table>", "<table class='middle " + g + "Middle' cellpadding='0' cellspacing='0'><tr><td class='left'></div></td><td class='center'><div class='" + g + "Triangle'></td><td class='right'></td></tr></table>", "<table class='bottom " + g + "Bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table>"];
    var n = $(d.join(""));
    n.appendTo(b);
    n = n.parent().find(".middle .center");
    for (var o = 0; o < t.length; ++o) {
        var q = t[o];
        var f = q.sub;
        var p = q.href;
        var u = q.onclick;
        var s = q.target;
        var e = q.disable;
        var c = "";
        if (!p && !u) {
            p = "";
            u = ""
        } else {
            if (!p) {
                p = " href='javascript:;'"
            } else {
                if (e && typeof(f) != "undefined") {
                    if (f != "") {
                        p = ""
                    } else {
                        p = ' href="' + p + '" style="cursor:pointer;"'
                    }
                } else {
                    p = ' href="' + p + '" style="cursor:pointer;"'
                }
            }
            if (!u) {
                u = ""
            } else {
                u = ' onclick="' + u + '"'
            }
            if (!s) {
                s = ""
            }
        }
        var l = parseInt(Math.random() * 100000);
        var h = [];
        var r = o + 1;
        h.push("<table class='item itemIndex" + r + "' itemId='");
        h.push(l);
        h.push("' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a hidefocus='true' ");
        h.push(p);
        h.push(u);
        h.push(s);
        if (q.title) {
            h.push(" title='" + q.title + "'")
        }
        h.push(">" + q.html + "</a></td><td class='itemRight'></td></tr></table>");
        var k = $(h.join(""));
        if (f) {
            k.addClass("itemPopup")
        }
        if (n.find(" > .subMenu").length >= 1) {
            k.insertBefore(n.find(" > .subMenu").first())
        } else {
            k.appendTo(n)
        }
        if (f) {
            if (f.length == 0) {
            }
            var m = $("<div class='subMenu' itemId='" + l + "'><div class='content contentLayer2'></div></div>");
            m.appendTo(n);
            var a = m.find(" > .content");
            Run.addMenuItem(f, a, j, "thirdMenu");
            m.mouseleave(function () {
                $(this).attr("_mouseIn", 0);
                setTimeout(function () {
                    Run.hideSubMenu()
                }, 100);
                if (j.navBar == true && Helper.isIE()) {
                    var w = $("#g_menu" + j.id);
                    var y = w.find(".contentLayer1");
                    var i = y.outerHeight(true);
                    var x = y.outerWidth(true);
                    var v = y.children(".middle").first().outerWidth(true);
                    w.css({width: x + "px", height: i + "px"});
                    y.css({width: v + "px"})
                }
            });
            m.mouseover(function () {
                $(this).attr("_mouseIn", 1)
            });
            m.click(function () {
                $(this).attr("_mouseIn", 0);
                Run.hideSubMenu()
            })
        }
        k.hover(function () {
            var A = $(this);
            var K = null;
            $(this).parent().find(" > .subMenu").each(function (M, L) {
                if ($(this).attr("itemId") == A.attr("itemId")) {
                    K = $(this)
                }
            });
            if (K != null && K.length == 1) {
                if (K.css("display") == "none") {
                    if (K.attr("_hadShow") != 1) {
                        var v = A.position().left + A.width();
                        var F = A.position().top;
                        if (j.fixpos) {
                            var G = A.offset().top + K.height() + 20 - $(document).height();
                            if (G > 0) {
                                F = F - G
                            }
                        }
                        K.css("left", v + "px");
                        K.css("top", F + "px");
                        K.slideDown(200);
                        Run.calcMenuSize(K, j);
                        K.attr("_hadShow", 1)
                    } else {
                        K.slideDown(200)
                    }
                }
                K.attr("_mouseIn", 1);
                if (j.navBar == true && Helper.isIE()) {
                    var i = $("#g_menu" + j.id);
                    var y = i.find(".contentLayer1");
                    var w = K.find(".contentLayer2");
                    var J = y.outerHeight(true);
                    var E = y.outerWidth(true);
                    var D = y.children(".middle").first().outerWidth(true);
                    var I = w.outerHeight(true);
                    var x = w.outerWidth(true);
                    var H = K.position().top;
                    var z = (I + H) - J;
                    var C = z > 0 ? (J + z) : J;
                    var B = E + x;
                    i.css({width: B + "px", height: C + "px"});
                    y.css({width: D + "px"})
                }
            } else {
                if ($(this).parents(".subMenu").length <= 0) {
                    if (j.navBar == true && Helper.isIE()) {
                        var i = $("#g_menu" + j.id);
                        var y = i.find(".contentLayer1");
                        var D = y.children(".middle").first().outerWidth(true);
                        var C = y.outerHeight(true);
                        var B = y.outerWidth(true);
                        i.css({width: B + "px", height: C + "px"});
                        y.css({width: D + "px"})
                    }
                }
            }
            A.addClass("itemHover");
            A.addClass("itemHoverIndex" + (A.index() + 1));
            $(".g_menu").attr("_mouseIn", 1)
        }, function () {
            var i = $(this);
            var v = null;
            $(this).parent().find(" > .subMenu").each(function () {
                if ($(this).attr("itemId") == i.attr("itemId")) {
                    v = $(this)
                }
            });
            if (v != null && v.length == 1) {
                v.attr("_mouseIn", 0);
                setTimeout(function () {
                    Run.hideSubMenu()
                }, 100)
            } else {
                i.removeClass("itemHover");
                i.removeClass("itemHoverIndex" + (i.index() + 1))
            }
        }).click(function () {
            $(".g_menu").attr("_mouseIn", 0);
            setTimeout(function () {
                Run.hideMenu()
            }, 100)
        });
        if (j.closeMode == 1) {
            k.mousedown(function () {
                $(".g_menu").attr("_mouseIn", 2)
            })
        }
    }
};
Run.calcMenuSize = function (a, d) {
    a.find(" > .content").each(function () {
        var l = 0;
        var k = $(" > .middle", this);
        if (!Helper.isNull(d.minWidth)) {
            l = d.minWidth - Helper.getCssInt(k.find(".left").first(), "width") - Helper.getCssInt(k.find(".right").first(), "width")
        }
        var m = l;
        var j = k.find(" > tbody > tr > .center > .item");
        j.each(function () {
            if ($(this).width() > l) {
                m = $(this).outerWidth();
                l = $(this).width()
            }
        });
        j.width(m);
        j.find(" > tbody > tr > .itemCenter").each(function () {
            var q = $(this);
            var n = q.parent().find(" > .itemLeft");
            var o = q.parent().find(" > .itemRight");
            q.css("width", (l - n.outerWidth() - o.outerWidth() - q.outerWidth() + q.width()) + "px");
            var p = q.find("a");
            p.css("width", (q.width() - p.outerWidth() + p.width()) + "px")
        });
        $(" > .top", this).width(k.width());
        $(" > .bottom", this).width(k.width())
    });
    var c = Helper.top.$(".outMenuTriangle"), b = (parseInt(c.css("borderBottomWidth")) || 0), g = c.length > 0,
        h = d.host, f = h.outerWidth(), e = Helper.top.$(".outMenuMiddle").width(), i = 0;
    i = (Math.min(f, e) - b) / 2;
    if (g && b) {
        c.css("left", i)
    }
};
Run.hideMenu = function () {
    if (Helper.top._uiMode) {
        return
    }
    $(".g_menu").each(function () {
        var a = $(this);
        if (a.length != 1) {
            return
        }
        if (a.attr("_mouseIn") == 1) {
            return
        }
        a.remove()
    })
};
Run.hideSubMenu = function () {
    if (Helper.top._uiMode) {
        return
    }
    $(".g_menu .subMenu").each(function () {
        var a = $(this);
        if (a.length != 1) {
            return
        }
        if (a.attr("_mouseIn") == 1) {
            return
        }
        a.css("display", "none");
        a.parent().find(" > .item").each(function () {
            if ($(this).attr("itemId") == a.attr("itemId")) {
                $(this).removeClass("itemHover")
            }
        })
    })
};
Run.popupWindow = function (a) {
    var b = true;
    if (!Helper.isNull(a.saveBeforePopup)) {
        b = a.saveBeforePopup
    }
    if (b && Run.checkSaveBar(a)) {
        return
    }
    if ($.isFunction(Run.removeAllEditLayer)) {
        Run.removeAllEditLayer()
    }
    if (a.version == 2) {
        Helper.popupWindowVersionTwo.createPopupWindow(a)
    } else {
        Helper.popupWindow(a)
    }
};
Run.total = function (c) {
    var g = {colId: -1, pdId: -1, ndId: -1};
    var d = $.extend({}, g, c);
    if (d.colId == null || d.colId == "" || d.colId < 0) {
        d.colId = -1
    }
    if (d.pdId == null || d.pdId == "" || d.pdId < 0) {
        d.pdId = -1
    }
    if (d.ndId == null || d.ndId == "" || d.ndId < 0) {
        d.ndId = -1
    }
    var a = "", b = navigator.userAgent;
    if (!b.match(/AppleWebKit.*Mobile.*/) && !Helper.isIpad()) {
        a = "pc"
    } else {
        if (Helper.isIpad()) {
            a = "ipad"
        } else {
            if (Helper.isAndroid()) {
                a = "android"
            } else {
                if (Helper.isIphone()) {
                    a = "iphone"
                } else {
                    a = "other"
                }
            }
        }
    }
    var e = "ajax/statistics_h.php?cmd=visited";
    var f = [];
    f.push("&colId=" + d.colId);
    f.push("&pdId=" + d.pdId);
    f.push("&ndId=" + d.ndId);
    f.push("&browserType=" + Helper.getBrowserType());
    f.push("&screenType=" + Helper.getScreenType(Helper.Screen().width, Helper.Screen().height));
    f.push("&sc=" + d.sc);
    f.push("&rf=" + Helper.encodeUrl(d.rf));
    f.push("&visitUrl=" + Helper.encodeUrl(document.location.href));
    f.push("&visitEquipment=" + a);
    $.ajax({
        url: e, type: "post", cache: false, data: f.join(""), success: function (h) {
        }
    })
};
Run.siteStatVisitTime = function () {
    var a = "ajax/statistics_h.php?cmd=visitTime";
    var b = [];
    $.ajax({
        url: a, type: "post", cache: false, data: b.join(""), success: function (c) {
        }
    })
};
Run.report = function (a) {
    setTimeout(function () {
        if (window.performance) {
            var d = performance.timing;
            var l = d.fetchStart - d.navigationStart;
            var g = d.redirectEnd - d.redirectStart;
            var i = d.domainLookupStart - d.fetchStart;
            var m = d.unloadEventEnd - d.unloadEventStart;
            var b = d.domainLookupEnd - d.domainLookupStart;
            var e = d.connectEnd - d.connectStart;
            var f = d.responseEnd - d.requestStart;
            var n = d.domInteractive - d.responseEnd;
            var o = d.domComplete - d.domInteractive;
            var k = d.loadEventEnd - d.loadEventStart;
            var h = d.loadEventEnd - d.navigationStart;
            var j = [];
            j.push("&dt=" + b);
            j.push("&ct=" + e);
            j.push("&rt=" + f);
            j.push("&wt=" + n);
            j.push("&pt=" + o);
            j.push("&bt=" + Helper.getBrowserType());
            var c = "ajax/statistics_h.php?cmd=report";
            $.ajax({
                url: c, type: "post", cache: false, data: j.join(""), success: function (p) {
                }
            })
        }
    }, 500)
};
Run.fileUpload2 = function (e, c, f) {
    var d = {
        title: "添加文件",
        showTitle: true,
        checkSaveBar: false,
        crossiframe: "",
        type: [],
        maxSize: 1,
        maxUploadList: 1,
        maxChoiceList: 1,
        imgMode: 2,
        imgMaxWidth: 4096,
        imgMaxHeight: 4096,
        netFileMode: false
    };
    if (c) {
        $.extend(d, c)
    }
    if (d.title === "添加图片" && d.maxSize > 5) {
        d.maxSize = 5
    }
    if (Helper.top._siteVer != "undefined" && Helper.top._siteVer == 10) {
        d.maxSize = 1
    }
    var b = d.title;
    if (d.type.length > 0 && d.showTitle) {
        if (Helper.top._siteVer != "undefined" && Helper.top._siteVer == 10) {
            b += "<span style='font-size:12px; color:#666;'> (&nbsp;只能添加" + d.type.join(",") + ", 免费版大小不超过" + d.maxSize + "MB&nbsp;)</span>"
        } else {
            b += "<span style='font-size:12px; color:#666;'> (&nbsp;只能添加" + d.type.join(",") + ", 大小不超过" + d.maxSize + "MB&nbsp;)</span>"
        }
    } else {
        b += "<span style='font-size:12px; color:#666;'> (&nbsp;上传大小不超过" + d.maxSize + "MB&nbsp;)</span>"
    }
    var a = {
        title: b,
        frameSrcUrl: (top._siteDomain ? top._siteDomain : "") + "/manage/fileUploadV2.php?settings=" + Helper.encodeUrl($.toJSON(d)) + "&ram=" + Math.random() + "&crossiframe=" + Helper.encodeUrl(d.crossiframe),
        width: 950,
        height: 690,
        saveBeforePopup: false,
        callArgs: "add",
        closeFunc: f,
        version: 2,
        popUpWinClass: "fileUploadV2"
    };
    if (c.saveBeforePopup !== undefined) {
        a.saveBeforePopup = c.saveBeforePopup
    }
    if (e) {
        $(e).unbind("click").bind("click", function () {
            Run.popupWindow(a)
        })
    } else {
        Run.popupWindow(a)
    }
};
Run.initIframeLoading = function (b, d, g, f) {
    var h = b + d;
    var c = Helper.top.$("#" + h).parent().width();
    var a = Helper.top.$("#" + h).parent().height();
    var e = 1;
    $("#" + h).attr("src", g).load(function () {
        $("#moduleLoading" + d).hide();
        $("#refreshFrame" + d).hide();
        Helper.top.$("#" + h).parent().show();
        e = 2
    });
    if (f) {
        $("#moduleLoading" + d).show();
        Helper.top.$("#" + h).parent().hide();
        $("#refreshFrame" + d).hide()
    } else {
        setTimeout(function () {
            if (e == 1) {
                var i = "<div id='moduleLoading" + d + "' class='ajaxLoading2' style='width:" + c + "px;height:" + a + "px'></div>";
                Helper.top.$("#" + h).parent().before(i);
                Helper.top.$("#" + h).parent().hide()
            }
        }, 3000)
    }
    setTimeout(function () {
        if (e == 1) {
            $("#moduleLoading" + d).hide();
            if (f) {
                $("#refreshFrame" + d).show()
            } else {
                var i = "<div id='refreshFrame" + d + "' style='width:" + c + "px;height:" + a + "px;text-align:center;padding-top:5px;'><a href=\"javascript:Run.initModuleWeather('" + b + "'," + d + ", '" + g + "', true);\">" + LS.refresh + "</a></div>";
                Helper.top.$("#" + h).parent().before(i)
            }
            e = 3
        }
    }, 30000)
};
Run.logMsg = function (c) {
    if (!c) {
        return
    }
    var b = "";
    var a = c.indexOf("&");
    if (a >= 0) {
        b = c.slice(a, c.length - 1)
    }
    $.ajax({type: "GET", url: "/ajax/log_h.php?cmd=log&msg=" + Helper.encodeUrl(c), data: b})
};
Run.logDog = function (b, a) {
    $.ajax({type: "GET", url: "/ajax/log_h.php?cmd=dog&dogId=" + Helper.encodeUrl(b) + "&dogSrc=" + Helper.encodeUrl(a)})
};
Run.logProf = function (b, a) {
    $.ajax({type: "GET", url: "/ajax/log_h.php?cmd=prof&profId=" + Helper.encodeUrl(b) + "&profVal=" + Helper.encodeUrl(a)})
};
Run.popupBox = function (q) {
    var f = {
        boxId: 0,
        title: "",
        htmlContent: "",
        width: 500,
        height: "",
        boxName: "",
        opacity: "0.5",
        displayBg: true,
        autoClose: 0,
        extClass: "",
        popupBoxZIndex: 0
    };
    f = $.extend(f, q);
    var a = parseInt(f.boxId);
    if (a == 0 || a == null) {
        a = parseInt(Math.random() * 10000)
    }
    if (f.displayBg) {
        Helper.bg(a, f.opacity, f.popupBoxZIndex)
    }
    var o = "";
    if (f.height != "") {
        o = " min-height:" + (f.height - 45) + "px;"
    }
    var e = ["<div id='popupBoxContent", a, "' style='width:", f.width, "px;", o, " padding-bottom: 20px;", "' class='popupCnBg'>", f.htmlContent, "</div>"];
    var j = Helper.top.document.documentElement.clientHeight;
    var d = Helper.top.$("body").scrollTop();
    if (d <= 0) {
        d = Helper.top.$("html").scrollTop()
    }
    if (d <= 0) {
        d = $(window).scrollTop()
    }
    var h = "";
    var n = "";
    var c = "";
    if (f.boxName == "qqLogin") {
        h = "style='padding-top:20px;'";
        n = "style='margin-top:20px;'"
    } else {
        if (f.boxName == "addrInfo") {
            h = "style='margin-top:21px;'";
            n = "style='margin-top:20px;'"
        } else {
            if (f.boxName == "mallAmountZero") {
                h = "style='height:15px;'";
                n = "style='margin-top:10px;'"
            } else {
                if (f.boxName == "confirmReceipt") {
                    n = "style='margin-top:10px;'"
                } else {
                    if (f.boxName == "mallBuy") {
                        n = "style='margin-top:10px'"
                    } else {
                        if (f.boxName == "memberFdPwd") {
                            h = "style='margin-top:20px;'";
                            n = "style='margin-top:20px'"
                        }
                    }
                }
            }
        }
    }
    if (f.popupBoxZIndex) {
        c = "z-index:" + f.popupBoxZIndex
    }
    var m = ["<div id='popupBox", a, "' class='formBox " + f.extClass + "' style='width:", f.width, "px;", o, "left:", (Helper.top.document.documentElement.clientWidth - f.width) / 2, "px; " + c + "'>", "<div class='formTLRun'><div ", h, "class='formTCRun ", f.title == "" ? "formMulLanRun" : "", "'>", f.title, "</div></div>", "<div class='formMSG' style='position:relative;'>", e.join(""), "</div>", "<a href='javascript:void(0);' class='formXRun popupBClose' hidefocus='true' onclick='return false;'", n, "></a>", "</div>"];
    m = m.join("");
    var l = Helper.top.$(m).appendTo("body");
    var k = (j - f.height) / 2;
    if (f.height == "") {
        k = (j - $(".popupCnBg").height()) / 2
    }
    $(l).css("top", k + d);
    var i = Helper.top.$("#popupBg" + a).outerHeight(true), g = Helper.top.$("#popupBoxContent" + a).outerHeight(true) + 120,
        p = 100 - (g - i) > 0 ? 100 - (g - i) : 0;
    if (i < g) {
        l.css("top", p + "px")
    }
    l.hide();
    l.fadeIn();
    function b(r) {
        return Object.prototype.toString.call(r) === "[object Function]"
    }

    l.ready(function () {
        l.draggable({
            start: function () {
                Helper.top.$("body").disableSelection()
            }, handle: ".formTLRun", stop: function () {
                Helper.top.$("body").enableSelection()
            }
        });
        l.find(".popupBClose").bind("click", function () {
            if (b(f.closeFunc)) {
                f.closeFunc()
            }
            Helper.top.$("#popupBg" + a).remove();
            l.remove()
        })
    });
    if (f.autoClose != 0) {
        setTimeout(function () {
            l.find(".popupBClose").click()
        }, f.autoClose)
    }
    return l
};
Run.hasXScrollBar = function () {
    var a;
    if (Helper.top._manageMode) {
        a = $("#web")
    } else {
        a = $("#g_main")
    }
    if (a.length > 0) {
        return a.width() > $(window).width()
    }
};
Run.checkEnv = function (p) {
    function l(t, s) {
        var n = 0;
        if (t < 960) {
            return
        }
        if (s.length > 0) {
            n = $("#g_main").scrollLeft() + s.offset().left + s.width();
            return (n - o) > (t / 2)
        }
    }

    function e(s) {
        var n = false;
        if (s.attr("_intab") > 0 || s.attr("_inmulmcol") > 0 || s.attr("_side") == 1) {
            return
        }
        if (l(i, s)) {
            j.push(s.prop("id"))
        }
    }

    var d = $(window), i = d.width(), m = 0, o = 0, j = [], k = [], r = $("#logoImg:visible"), c = $("#corpTitle"),
        f = $("#nav"), b = false, h = false, g, q, a = $("#web");
    if (!$.isFunction(p)) {
        p = function () {
        }
    }
    if (!Run.hasXScrollBar()) {
        p(k);
        return
    }
    if (Helper.top._manageMode) {
        m = $("#web").width()
    } else {
        m = $("#g_main").width()
    }
    o = (m / 2);
    if (a.length > 0 && a.height() > d.height()) {
        i = i - Helper.getScrollWidth()
    }
    Helper.top.$(".absForms >.form").each(function (s, n) {
        e($(n))
    });
    Helper.top.$(".floatForms >.form").each(function (s, n) {
        e($(n))
    });
    if (j.length > 0) {
        k.push("floatModule")
    }
    if (c.length > 0) {
        if (l(i, c)) {
            k.push("title")
        }
    }
    if (f.length > 0) {
        g = f.find(".navContent");
        if (!f.parent("#webNav").hasClass("webNavDefault")) {
            b = true
        }
        if (b) {
            g = f.find(".navContent");
            if (Helper.top._navStyleData.cp.y == 1 || Helper.top._navStyleData.cs.w !== -1) {
                if (g.length > 0 && l(i, g)) {
                    k.push("fullmeasureNav")
                }
            }
        } else {
            if (l(i, f)) {
                k.push("nav1")
            } else {
                f = $("#nav .navMainContent").first();
                if (l(i, f)) {
                    k.push("nav2")
                }
            }
        }
    }
    if (l(i, $("#webContainer"))) {
        k.push("background")
    }
    if (l(i, $("#webBanner"))) {
        if (Run.getWebBackgroundData().wbws === 1) {
            k.push("banner")
        }
    }
    $("#fullmeasureTopForms").find(".fullmeasureContent").each(function (s, t) {
        var n = $(t);
        if (n.width() > $("#webContainer").width() && l(i, n)) {
            k.push("fullmeasure");
            return false
        }
    });
    if (r.length > 0) {
        if (r.width() > 1) {
            if (l(i, r)) {
                k.push("logo")
            }
        } else {
            h = true;
            r.off("load.count error.count").on({
                "load.count": function () {
                    $(this).off("load.count error.count");
                    if (l(i, $(this))) {
                        k.push("logo")
                    }
                    p(k, i)
                }, "error.count": function () {
                    $(this).off("load.count error.count");
                    p(k, i)
                }
            })
        }
    }
    if (!h) {
        p(k, i)
    }
    if (Helper.top._manageMode) {
        $.each(j, function (s, n) {
            $("#" + n).css("border", "dashed black 5px")
        })
    }
};
Run.checkManageEnv = function () {
    if (!Helper.top._manageMode) {
        return
    }
    Run.checkEnv(function (c, e) {
        var a = c.length, g = "", b = "", d = [], f;
        f = {
            floatModule: "--网站浮动模块位置；\n",
            logo: "--网站LOGO的宽度或位置；\n",
            title: "--网站标题宽度或位置；\n",
            fullmeasureNav: "--通栏式导航内容区位置设置项、宽度；\n",
            nav1: "--导航栏宽度或位置。；\n",
            nav2: "--导航应用了网站宽度并且存在水平偏移。请自定义导航内容区宽度；\n",
            banner: "--网站横幅宽度；\n",
            background: "--网站背景宽度；\n",
            fullmeasure: "--通栏宽度；\n"
        };
        while (a > 0) {
            a--;
            if (f[c[a]]) {
                d.push(f[c[a]])
            }
        }
        if (d.length > 0) {
            d.unshift("窗口宽度：" + e + "；\n", "导致模块滚动条出现的原因：\n")
        } else {
            d.push("没有检测到横向超出的元素。")
        }
        g = '<a href="http://it.faisco.cn/page/forum/createShare.php?articleId=1447" style="position:absolute;right:20px;bottom:60px;font-size:14px;" target="_blank">[了解更多]</a>';
        b = '<button style="position:absolute;right:20px;bottom:20px;padding:4px;width:64px;cursor:pointer;padding:0px;" onclick="Run.closeCheckEnvWindow()">确定</button>';
        d.push(g);
        d.push(b);
        d = '<div style="padding:10px;font-size:14px;cursor:pointer">' + $.trim(d.join("<br>")) + "</div>";
        Run.popupWindow({title: "横向滚动条检测结果", divContent: d, closeBtnClass: "J_checkEvnCloseBtn"})
    })
};
Run.checkVisitEnv = function () {
    var b = {
        get: function (c) {
            return sessionStorage ? sessionStorage.getItem(c) : $.cookie(c)
        }, set: function (c, d) {
            if (sessionStorage) {
                sessionStorage.setItem(c, d)
            } else {
                $.cookie(c, d)
            }
        }
    };
    var a = {
        get: function () {
            var c = b.get("fkScrollBarCheck");
            try {
                c = $.parseJSON(c)
            } catch (d) {
            }
            if ($.isArray(c)) {
                return c
            }
            return []
        }, add: function (d) {
            var c = a.get();
            if (c.indexOf(d) === -1) {
                c.push(d);
                b.set("fkScrollBarCheck", $.toJSON(c))
            }
        }, has: function (c) {
            return a.get().indexOf(c) > -1
        }
    };
    if (Helper.top._manageMode) {
        return
    }
    if (a.has(location.href)) {
        return
    }
    Run.checkEnv(function (h) {
        function i(m, l) {
            if (!m || !l) {
                return
            }
            if ($.type(l) === "array") {
                if (!l.length) {
                    return
                }
                l = $.toJSON(l)
            }
            Run.logDog(m, l)
        }

        var g = h.length, e = $(window).width(), d = [], j, c, k, f;
        if (h.length > 0) {
            a.add(location.href)
        }
        k = {
            floatModule: 1,
            nav1: 2,
            nav2: 2,
            background: 3,
            banner: 4,
            logo: 6,
            title: 7,
            fullmeasure: 8,
            fullmeasureNav: 9
        };
        f = {"1200": 200079, "960": 200080};
        if (e >= 1200) {
            j = f["1200"]
        } else {
            if (e >= 960 && e < 1200) {
                j = f["960"]
            }
        }
        while (g > 0) {
            g--;
            c = k[h[g]];
            if (c !== undefined) {
                if (d.indexOf(c) === -1) {
                    d.push(c)
                }
            }
        }
        i(j, d)
    })
};
Run.closeCheckEnvWindow = function () {
    var a = $(".J_checkEvnCloseBtn");
    if (a.length > 0) {
        a.trigger("click")
    }
};
Run.initPdNavfold = function (b) {
    var e = $("#module" + b);
    if (e.find(".g_vertFold").length > 0) {
        var j = e.find(".pdLevel a");
        if (Helper.isIE6() || Helper.isIE7()) {
            $.each(j, function (r, s) {
                if ($(s).width() > 155) {
                    $(s).width(155)
                }
            });
            return
        }
        var c = e.width();
        if (c > 210) {
            j.css("max-width", c - 55 + "px")
        }
        return
    }
    var l = e.find(".g_foldContainerPanel");
    var d = l.length;
    var a = 0;
    var p = 0;
    var k = [];
    var h = [];
    for (var g = 0; g < d; g++) {
        var f = $(l[g]);
        var o = f.position();
        var m = o.top;
        if (e.width() < 452) {
            l.removeClass("g_foldContainerPadding").removeAttr("style");
            e.find(".g_horfoldSepLine").removeClass("g_horfoldSepLine").addClass("g_verfoldSepLine").removeAttr("style");
            l.height();
            break
        }
        if (g == 0) {
            l.addClass("g_foldContainerPadding");
            l = e.find(".g_foldContainerPanel");
            f = $(l[g]);
            m = f.position().top;
            e.find(".g_verfoldSepLine").addClass("g_horfoldSepLine").removeClass("g_verfoldSepLine")
        }
        if (g == d - 1) {
            if (p == m) {
                var q = f.height();
                if (a < q) {
                    a = q
                }
                k.push(f.next());
                h.push(f);
                $.each(k, function (r, s) {
                    $(s).css("height", (a - 5) + "px")
                });
                $.each(h, function (r, s) {
                    $(s).css("height", a + "px")
                });
                break
            }
        }
        if (p != m) {
            $.each(k, function (r, s) {
                $(s).css("height", (a - 5) + "px")
            });
            $.each(h, function (r, s) {
                $(s).css("height", a + "px")
            });
            k = [];
            h = [];
            a = 0;
            f.prev().hide();
            l = e.find(".g_foldContainerPanel");
            f = $(l[g]);
            p = f.position().top
        }
        var q = f.height();
        if (a < q) {
            a = q
        }
        k.push(f.next());
        h.push(f)
    }
    k = [];
    h = [];
    e.find(".g_productNav").fadeTo(400, 1)
};
Run.foldChange = function (b, c) {
    var a = $("#module" + b);
    a.find(".fold_h_J").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    a.find(".foldChange_J").click(function () {
        var f = $(this), e = f.parents(".fold_J"), g = e.attr("foldId"), d = $("#childrenDiv" + g + "M" + b);
        if (d.is(":visible")) {
            d.slideUp(300);
            e.find(".fold_btn_J").removeClass("g_unfold").addClass("g_fold")
        } else {
            d.slideDown(300);
            e.find(".fold_btn_J").removeClass("g_fold").addClass("g_unfold")
        }
    });
    Run.initContentSplitLine(b, c)
};
Run.floatTip = function (d) {
    var q = {moduleId: "", targetId: "", tipText: "", cusClass: "", direction: 3};
    q = $.extend(q, d);
    if (q.moduleId.length == 0 || q.targetId.length == 0 || q.tipText.length == 0) {
        return
    }
    $(Helper.top.document).find(".J_floatTip_" + q.moduleId).remove();
    var k = Helper.isIE6() || Helper.isIE7() || Helper.isIE8();
    var t = [];
    var j = "floatTip_content";
    var r = "floatTip_right";
    var l = "floatTip_arrow";
    var p = "floatTip_left";
    var o = "floatTip_" + q.moduleId + "_" + q.targetId;
    if (k) {
        j += " floatTip_content_IE ";
        r += " floatTip_right_IE ";
        l += " floatTip_arrow_IE ";
        p += " floatTip_left_IE "
    }
    t.push("<div id='" + o + "' class='J_floatTip_" + q.moduleId + " floatTip'>\n");
    t.push("<div class='" + l + "'></div>");
    t.push("<div class='" + r + "'></div>");
    t.push("<div class='" + p + "'></div>");
    t.push("<div class='" + j + q.cusClass + "'>" + q.tipText + "</div>");
    t.push("</div>\n");
    $(Helper.top.document).find("#g_main").append(t.join(""));
    var b = $("#" + q.moduleId);
    var s = $(b).find("#" + q.targetId);
    var a = $("#" + o);
    var h = $(".floatLeftTop").offset().top;
    var c = (Helper.top._manageMode) ? $("#g_main").scrollTop() : $("body").scrollTop();
    if (Helper.isIE6()) {
        c = $("#g_main").scrollTop()
    }
    if (c == 0) {
        c = $("html").scrollTop()
    }
    var e = a.height();
    var m = a.width() * 0.7;
    var g = s.width() * 0.8;
    var f = s.height();
    var n = s.offset().left + (g - m);
    var i = s.offset().top + c - h;
    $("#" + o).show().css({top: i + "px", left: n + "px", "z-index": 9031});
    setTimeout(function () {
        if (k) {
            var u = i - e - 10 + (f / 3);
            $("#" + o).animate({top: u + "px", opacity: 1, filter: "alpha(opacity=100)"}, 300)
        } else {
            var u = i - e + (f / 3);
            $("#" + o).css({top: u + "px", opacity: 1})
        }
    }, 50);
    $(s).unbind("click").bind("click", function () {
        if ($(this).hasClass("focusBg")) {
            $(this).removeClass("focusBg")
        }
        $("#floatTip_" + q.moduleId + "_" + q.targetId).remove()
    })
};
Run.floatTip_clear = function (a) {
    $(Helper.top.document).find(".J_floatTip_" + a).remove()
};
Run.moduleSubPanel = function (m) {
    var e = {that: null, moduleId: null, idStr: "", clsStr: "", contentStr: ""};
    $.extend(e, m);
    if (e.that == null) {
        return
    }
    var a, c = e.moduleId, d = $("#module" + c), l = j(d), n = h(d, c);
    n = n + " modulePattern " + d.attr("class");
    n = n.replace("formInZone", "");
    var b = ["<div id='", e.idStr, "' class='", e.clsStr, " g_m_s_J ", l, "' _mouseIn=1 style='display:none;'>", "<div class='", n, "' style='zoom:0;margin:0;overflow:visible;position:relative;'>", "<div class='formMiddle' style='zoom:0;width:auto;border:0;'>", "<div class='formMiddleCenter' style='zoom:0;width:auto;margin:0;'>", "<div class='formMiddleContent' style='", Helper.isIE6() ? "_display:inline;" : "", "width:auto;margin:0;overflow:visible;'>", e.contentStr, "</div>", "</div>", "</div>", "</div>", "</div>"];
    a = $(b.join(""));
    a.appendTo("body");
    if (d.hasClass("formStyle76")) {
        i()
    } else {
        k()
    }
    function i() {
        var q = d.find(".pd_mall_G_J"), o = d.find(".p_m_cotainer_J"), p;
        q.off("mouseleave.pr").on("mouseleave.pr", function () {
            p = setTimeout(function () {
                g(e.moduleId)
            }, 20)
        });
        a.off("mouseleave.pr").on("mouseleave.pr", function () {
            g(e.moduleId);
            if (parseInt(d.attr("_side")) === 2) {
                Run.startFlutterInterval(d)
            }
            if (parseInt(d.attr("_side")) === 1) {
                var r = d.outerWidth();
                d.animate({left: -r}, {queue: false, duration: 500})
            }
        });
        a.off("mouseenter.pr").on("mouseenter.pr", function () {
            if (p) {
                clearTimeout(p);
                if (parseInt(d.attr("_side")) === 2) {
                    Run.stopFlutterInterval(d)
                }
                if (parseInt(d.attr("_side")) === 1) {
                    d.animate({left: 0}, {queue: false, duration: 500})
                }
            }
        })
    }

    function k() {
        a.mouseleave(function () {
            a.attr("_mouseIn", 0);
            setTimeout(f, 100)
        });
        a.mouseover(function () {
            a.attr("_mouseIn", 1)
        });
        e.that.mouseleave(function () {
            a.attr("_mouseIn", 0);
            setTimeout(f, 100)
        });
        e.that.mouseover(function () {
            a.attr("_mouseIn", 1)
        });
        if (parseInt(d.attr("_side")) === 2) {
            a.mouseleave(function () {
                Run.startFlutterInterval(d)
            });
            a.mouseenter(function () {
                Run.stopFlutterInterval(d)
            })
        }
    }

    function g(q) {
        var p = $("#module" + q).find(".p_m_cotainer_J"), o = $(".g_m_s_J");
        o.has(".form" + q).remove();
        p.removeClass("bold p_m_hover g_border");
        p.find(".p_m_value_J").removeClass("g_stress");
        p.each(function () {
            var r = $(this);
            if (r.attr("_chd") == 1) {
                r.find(".p_m_cotainerR_J").addClass("p_m_more")
            }
        })
    }

    function f() {
        $(".g_m_s_J").each(function () {
            var o = $(this);
            if (o.length != 1) {
                return
            }
            if (o.attr("_mouseIn") == 1) {
                return
            }
            o.remove()
        })
    }

    function j(s) {
        var q = s.attr("_intab") || 0, r = s.attr("_inpack") || 0, v = s.attr("_inmulmcol") || 0,
            o = s.attr("_infullmeasure") || 0, p = 0, u = "", t = "";
        if (q == 0 && v == 0 && o == 0 && r == 0) {
            t = s.parent().attr("class");
            t = t.replace("J_moduleZone", "").replace("fk-webBannerZone", "").replace("fk-moduleZone", "").replace("ui-sortable", "");
            return t
        } else {
            if (q > 0) {
                p = q
            } else {
                if (v > 0) {
                    p = v
                } else {
                    if (o > 0) {
                        p = o
                    } else {
                        if (r > 0) {
                            p = r
                        }
                    }
                }
            }
            u = Helper.top.$("#module" + p);
            return j(u)
        }
    }

    function h(s, p) {
        var u = s.attr("_intab") || 0, o = s.attr("_inmulmcol") || 0, t = s.attr("_infullmeasure") || 0,
            r = s.hasClass("modulePattern") || false, v = "", x = s.attr("class") || "", q = /modulePattern\d+/, w = "";
        if (r) {
            return x.match(q)
        } else {
            if (u == 0 && o == 0 && t == 0) {
                return x.match(q)
            } else {
                if (u > 0) {
                    w = u
                } else {
                    if (o > 0) {
                        w = o
                    } else {
                        if (t > 0) {
                            w = t
                        }
                    }
                }
                v = Helper.top.$("#module" + w);
                return h(v, p)
            }
        }
    }

    return a
};
Run.mobiPlatform = function (b) {
    if (!Helper.top._siteDemo || Helper.top._designAuth) {
        return
    }
    if (typeof(Helper.top.top) != "undefined" && typeof(Helper.top.top.$) != "undefined") {
        var v = Helper.top.top.$(".fk-quickViewTemplateContent");
        if (v.length > 0 && v.is(":visible")) {
            return
        }
    }
    var g = [], h = false, r = "mobiPlatform", m = document.domain, p = {}, d = {}, l = {w: 0, h: 0},
        s = Helper.top.$("body"), y = Helper.getScrollWidth(), j = 400, n = 600,
        c = $.cookie("mobiPlatformBg", {domain: m, path: "/"}) || 0,
        z = parseInt($.cookie("mobiPlatformIconFlag", {domain: m, path: "/"})) || 0, w = "display:none;", q = "",
        o = "", f, x, k, a, u, t;
    var A = {refresh: false};
    $.extend(A, b);
    if (Helper.isIE) {
        if (Helper.isIE6() || Helper.isIE7() || Helper.isIE8()) {
            h = true
        }
    }
    if (z > 0) {
        w = "";
        q = "display:none;";
        o = z == 1 ? "mobiPlatformIcon_right" : "mobiPlatformIcon_left"
    }
    p.big = {};
    p.big.className = "mobiPlatform_big";
    p.big.w = 265;
    p.big.h = 490;
    p.big.cw = 295;
    p.big.ch = 592;
    p.small = {};
    p.small.className = "mobiPlatform_small";
    p.small.w = 265;
    p.small.h = 400;
    p.small.cw = 291;
    p.small.ch = 483;
    l = Run.mobiPlatform.getWindowSize();
    if (l.h <= 800) {
        d = p.small
    } else {
        d = p.big
    }
    Run.mobiPlatform.nowSize = d;
    if (s.children("#mobiPlatform").length < 1) {
        g.push("<div id='mobiPlatform' class='mobiPlatform mobiPlatform-hide " + d.className + "' direction='0' moved='0' style='" + q + "'>");
        g.push("	<div class='J_innerCover mp-innerCover' style='display:none;'></div>");
        g.push("	<div class='J_innerIframe mp-innerIframe" + (h ? " mp-innerIframe2" : "") + "'>");
        if (!h) {
            g.push("		<div class='J_loading mp-loading'>");
            g.push("			<div class='mp-loading-icon mp-loading-iconAction'></div>");
            g.push("		</div>")
        } else {
            g.push("	<div class='mp-updateBtnContainer'>");
            g.push("		<a href='https://www.baidu.com/s?wd=chrome' target='_blank' class='mp-updateBtn'></a>");
            g.push("	</div>")
        }
        g.push("	</div>");
        g.push("	<a href='javascript:;' hidefocus='true' title='隐藏' class='J_closeBtn mp-closeBtn' style='display:none;'></a>");
        g.push("	<div class='J_hoverTip mp-hoverTip' style='display:none;'></div>");
        g.push("</div>");
        g.push("<div id='mobiPlatformIcon' class='mobiPlatformIcon " + o + "' style='" + w + "'>");
        g.push("	<a href='javascript:;' class='mobiPlatformIcon-handle' onclick='Run.mobiPlatform();return false;' hidefocus='true'></a>");
        g.push("</div>");
        Helper.top.$("body").append(g.join(""));
        f = s.children("#mobiPlatform");
        x = s.children("#mobiPlatformIcon");
        a = f.find(".J_closeBtn");
        u = f.find(".J_hoverTip");
        f.draggable({
            scroll: false,
            cursor: "move",
            distance: 10,
            containment: "parent",
            cancel: ".J_innerCover",
            start: function (B, C) {
                f.find(".J_innerCover").show()
            },
            stop: function (B, H) {
                f.find(".J_innerCover").hide();
                f.attr("moved", "1");
                if (!c) {
                    c = 1;
                    $.cookie("mobiPlatformBg", 1, {expires: 365, domain: m, path: "/"})
                }
                d = Run.mobiPlatform.nowSize;
                l = Run.mobiPlatform.getWindowSize();
                var G = true, I = {x: 1, y: 1}, C = 4, F = s.children(".floatLeftTop"), M = F.offset(),
                    E = ~~(F.css("top").replace("px", "")), L = l.h - d.ch, D = L - (H.offset.top - (M.top - E)),
                    K = l.w - d.cw, J = K - (H.offset.left - M.left);
                if (J < (K / 2)) {
                    J -= y;
                    I.x = 1
                } else {
                    I.x = 0
                }
                if (D < (L / 2)) {
                    I.y = 1
                } else {
                    I.y = 0
                }
                if (!(J < K && J > C)) {
                    G = false
                }
                if (!(D < L && D > C)) {
                    G = false
                }
                if (!G) {
                    if (I.y == 1) {
                        if (D <= C) {
                            f.attr("direction", "4")
                        }
                    } else {
                        if (D >= L) {
                            f.attr("direction", "3")
                        }
                    }
                    if (I.x == 1) {
                        if (J <= C) {
                            if (f.attr("direction") == 3) {
                                f.css({bottom: "auto", top: 0})
                            } else {
                                if (f.attr("direction") == 4) {
                                    f.css({bottom: 0, top: "auto"})
                                }
                            }
                            f.attr("direction", "2").css({
                                right: 0,
                                left: "auto"
                            }).animate({right: (-d.cw) + "px"}, j, function () {
                                x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 1, {expires: 365, domain: m, path: "/"})
                            })
                        }
                    } else {
                        if (J >= K) {
                            if (f.attr("direction") == 3) {
                                f.css({bottom: "auto", top: 0})
                            } else {
                                if (f.attr("direction") == 4) {
                                    f.css({bottom: 0, top: "auto"})
                                }
                            }
                            f.attr("direction", "1").css({
                                right: "auto",
                                left: 0
                            }).animate({left: (-d.cw) + "px"}, j, function () {
                                x.removeClass("mobiPlatformIcon_right").addClass("mobiPlatformIcon_left").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 2, {expires: 365, domain: m, path: "/"})
                            })
                        }
                    }
                    if (f.attr("direction") == 3) {
                        f.animate({bottom: "auto", top: (-d.ch) + "px"}, n, function () {
                            x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                            f.hide();
                            $.cookie("mobiPlatformIconFlag", 1, {expires: 365, domain: m, path: "/"})
                        })
                    } else {
                        if (f.attr("direction") == 4) {
                            f.animate({top: (L + d.ch) + "px", bottom: "auto"}, n, function () {
                                x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                                f.hide();
                                $.cookie("mobiPlatformIconFlag", 1, {expires: 365, domain: m, path: "/"})
                            })
                        }
                    }
                }
            }
        });
        if (!h) {
            var e = document.createElement("iframe"), i = f.find(".J_innerIframe");
            e.style.width = d.w + "px";
            e.style.height = d.h + "px";
            e.style.border = "none";
            e.src = Helper.top._mobiAdmHost;
            if (e.attachEvent) {
                e.attachEvent("onload", function () {
                    f.find(".J_loading").remove();
                    f.removeClass("mobiPlatform-hide")
                })
            } else {
                e.onload = function () {
                    f.find(".J_loading").remove();
                    f.removeClass("mobiPlatform-hide")
                }
            }
            i.find("iframe").remove();
            i.append(e);
            k = $(e)
        } else {
            f.removeClass("mobiPlatform-hide")
        }
        Helper.top.$(window).off("resize.mobiPlatform");
        Helper.top.$(window).on("resize.mobiPlatform", function () {
            Run.mobiPlatform({refresh: true})
        });
        a.click(function () {
            d = Run.mobiPlatform.nowSize;
            l = Run.mobiPlatform.getWindowSize();
            rangeHeight = l.h - d.ch;
            rangeWidth = l.w - d.cw;
            nowWidth = rangeWidth - f.offset().left;
            var B = 0;
            var C = f.attr("direction");
            if (f.attr("moved") == "0") {
                if (C == "0") {
                    B = 2
                } else {
                    if (C == "1") {
                        B = 3
                    } else {
                        if (C == "2") {
                            B = 2
                        }
                    }
                }
            } else {
                if (nowWidth < (rangeWidth / 2)) {
                    B = 1
                } else {
                    B = 3
                }
            }
            if (B == 1) {
                f.animate({left: (rangeWidth + d.cw) + "px", right: "auto"}, n, function () {
                    x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                    f.attr("direction", "5").hide()
                })
            } else {
                if (B == 2) {
                    f.animate({left: "auto", right: (-d.cw) + "px"}, n, function () {
                        x.removeClass("mobiPlatformIcon_left").addClass("mobiPlatformIcon_right").fadeIn();
                        f.attr("direction", "5").hide()
                    })
                } else {
                    if (B == 3) {
                        f.animate({left: (-d.cw) + "px", right: "auto"}, n, function () {
                            x.removeClass("mobiPlatformIcon_right").addClass("mobiPlatformIcon_left").fadeIn();
                            f.attr("direction", "1").hide()
                        })
                    }
                }
            }
        });
        f.hover(function () {
            t = Helper.top.$("#mobiPlatformBg");
            if (t.length < 1) {
                var B = [];
                B.push("<div id='mobiPlatformBg' class='popupBg' style='z-index:9032;opacity:0;' >");
                if ($.browser.msie && $.browser.version == 6) {
                    B.push("<iframe id='fixSelectIframe-mobiPlatform' wmode='transparent' style='filter: alpha(opacity=0);opacity: 0;' class='popupBg' style='z-index:-111' src='javascript:'></iframe>")
                } else {
                    B.push("</div>")
                }
                f.before(B.join(""));
                t = Helper.top.$("#mobiPlatformBg")
            }
            t.stop(true).show().animate({opacity: 0.6}, 500);
            if (!c) {
                u.stop(true).show().animate({opacity: 1})
            } else {
                u.hide()
            }
        }, function () {
            t.stop(true).animate({opacity: 0}, 500, function () {
                t.hide()
            });
            if (!c) {
                u.stop(true).animate({opacity: 0}, 400, function () {
                    u.hide()
                })
            } else {
                u.hide()
            }
        })
    } else {
        f = s.children("#mobiPlatform");
        x = s.children("#mobiPlatformIcon");
        if (!h) {
            k = f.find("iframe")
        }
        if (A.refresh) {
            f.attr("class", "mobiPlatform " + d.className);
            if (!h) {
                k.css({width: d.w + "px", height: d.h + "px"})
            }
        }
        if (!A.refresh) {
            f.show();
            if (f.attr("direction") == 2) {
                f.attr("moved", "0").animate({right: "10px"}, j, function () {
                    x.fadeOut()
                })
            } else {
                if (f.attr("direction") == 1) {
                    f.attr("moved", "0").animate({left: "10px"}, j, function () {
                        x.fadeOut()
                    })
                } else {
                    f.attr("direction", 0).attr("moved", "0").css({
                        top: "auto",
                        left: "auto",
                        right: (-d.cw) + "px",
                        bottom: "10px"
                    }).animate({right: "10px"}, j, function () {
                        x.fadeOut()
                    })
                }
            }
            $.cookie("mobiPlatformIconFlag", 0, {expires: 365, domain: m, path: "/"})
        }
    }
};
(function (a) {
    a.getWindowSize = function () {
        var b = {w: 0, h: 0};
        if (window.innerWidth && window.innerHeight) {
            b.w = window.innerWidth;
            b.h = window.innerHeight
        } else {
            if (document.documentElement) {
                b.w = document.documentElement.clientWidth;
                b.h = document.documentElement.clientHeight
            } else {
                if (document.body.clientWidth && document.body.clientHeight) {
                    b.w = document.body.clientWidth;
                    b.h = document.body.clientHeight
                }
            }
        }
        return b
    }
})(Run.mobiPlatform);
Run.Pagenation = (function (d) {
    var c;

    function b(h, f, i) {
        var g = d("#pagenation" + h);
        c = f;
        g.css("text-align", "center");
        e(f, g);
        a(h, g, i)
    }

    function e(h, j) {
        var l = Math.ceil(h.totalSize / h.pageSize), g = h.pageNo || 1;
        if (j.length != 0) {
            var f = [], k = 0;
            f.push("<div class='pagePrev'>");
            if (g == 1) {
                f.push("<span>" + LS.prevPager + "</span>")
            } else {
                f.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.prevPager + "</span></a>")
            }
            f.push("</div>");
            if (g == 1) {
                f.push("<div class='pageNo'><span>1</span></div>")
            } else {
                f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>1</span></a></div>")
            }
            if (g - 2 > 2) {
                f.push("<div class='pageEllipsis'><span>...</span></div>");
                for (k = g - 2; k < g; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            } else {
                for (k = 2; k < g; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            }
            if (g != 1 && g != l) {
                f.push("<div class='pageNo'><span>" + g + "</span></div>")
            }
            if (g + 2 < l - 1) {
                for (k = g + 1; k <= g + 2; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
                f.push("<div class='pageEllipsis'><span>...</span></div>")
            } else {
                for (k = g + 1; k <= l - 1; k++) {
                    f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + k + "</span></a></div>")
                }
            }
            if (g == l) {
                f.push("<div class='pageNo'><span>" + l + "</span></div>")
            } else {
                f.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + l + "</span></a></div>")
            }
            f.push("<div class='pageNext'>");
            if (g == l) {
                f.push("<span>" + LS.nextPager + "</span>")
            } else {
                f.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.nextPager + "</span></a>")
            }
            f.push("</div>");
            j.html(f.join(""))
        }
    }

    function a(g, f, h) {
        d("body").off("click", "#pagenation" + g + " .g_border");
        d("body").on({
            hover: function () {
                d(this).addClass("g_hover")
            }, mouseleave: function () {
                d(this).removeClass("g_hover")
            }, click: function () {
                var j = f.find(".pageNo").not(":has('.g_border')").text();
                var i = 1;
                if (d(this).parent().hasClass("pagePrev")) {
                    i = Number(j) - 1
                } else {
                    if (d(this).parent().hasClass("pageNext")) {
                        i = Number(j) + 1
                    } else {
                        i = Number(d(this).text())
                    }
                }
                c.pageNo = i;
                h(g, i);
                e(c, f)
            }
        }, "#pagenation" + g + " .g_border")
    }

    return b
})(jQuery);
Run.loadCss = function (b, f, e) {
    var c = document.createElement("link");
    supportOnload = "onload" in c, isOldWebKit = +navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i, "$1") < 536, protectNum = 600000;
    f = typeof f == "function" ? f : function () {
    };
    c.rel = "stylesheet";
    c.type = "text/css";
    c.href = b;
    if (typeof e !== "undefined") {
        c.id = e
    }
    document.getElementsByTagName("head")[0].appendChild(c);
    if (isOldWebKit || !supportOnload) {
        setTimeout(function () {
            a(c, f, 0)
        }, 1);
        return
    }
    if (supportOnload) {
        c.onload = d;
        c.onerror = function () {
            d()
        }
    } else {
        c.onreadystatechange = function () {
            if (/loaded|complete/.test(c.readyState)) {
                d()
            }
        }
    }
    function d() {
        c.onload = c.onerror = c.onreadystatechange = null;
        c = null;
        f()
    }

    function a(k, l, j) {
        var i = k.sheet, g;
        j += 1;
        if (j > protectNum) {
            g = true;
            k = null;
            l();
            return
        }
        if (isOldWebKit) {
            if (i) {
                g = true
            }
        } else {
            if (i) {
                try {
                    if (i.cssRules) {
                        g = true
                    }
                } catch (h) {
                    if (h.name === "NS_ERROR_DOM_SECURITY_ERR") {
                        g = true
                    }
                }
            }
        }
        setTimeout(function () {
            if (g) {
                l()
            } else {
                a(k, l, j)
            }
        }, 20)
    }
};
Run.checkScriptLoad = function (f) {
    if (typeof f == "undefined" || f.length < 1) {
        return
    }
    var c = document.scripts, b = c.length - 1, e = "", a = false, d;
    for (d = b; d >= 0; d--) {
        e = c[d].getAttribute("src") || "";
        if (e == f) {
            a = true;
            break
        }
    }
    return a
};
Run.demandLoadJs = function (b, a) {
    if (typeof b == "undefined" || b.length < 1) {
        return
    }
    if (!Run.checkScriptLoad(b)) {
        if (typeof a == "function") {
            $LAB.script(b).wait(function () {
                a()
            })
        } else {
            $LAB.script(b)
        }
    }
};
Run.checkCssLoad = function (c) {
    if (typeof c == "undefined" || c.length < 1) {
        return
    }
    var f = document.styleSheets, b = f.length - 1, d = "", a = false, e;
    for (e = b; e >= 0; e--) {
        src = f[e].href || "";
        if (src == c) {
            a = true;
            break
        }
    }
    return a
};
Run.demandLoadCss = function (a, b) {
    if (typeof a == "undefined" || a.length < 1) {
        return
    }
    if (!Run.checkCssLoad(a)) {
        Run.loadCss(a, b)
    }
};
Run.initContentSplitLine = function (a, c) {
    var b = $("#module" + a);
    if (b.length < 1 || typeof c == "undefined" || c.y != 2) {
        return
    }
    var f = c.w ? c.w : 1, k = c.c ? c.c : "#000", h = Number(c.s), e = b.find(".g_separator");
    if (isNaN(h) || h < 3 || h > 8 || e.length < 1) {
        return
    }
    if (Helper.isIE6() || Helper.isIE7()) {
        e.css({
            fontSize: 0,
            height: 0,
            lineHeight: 0,
            borderColor: c.c,
            borderWidth: c.w + "px",
            borderStyle: "solid",
            borderLeft: "none",
            borderTop: "none",
            borderRight: "none"
        });
        return
    }
    var l = "<span>", g = "", j, d;
    j = ["─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ", "-·-·-·-·-·-·-·-·-·-·-·-·-·-·-·", "-··-··-··-··-··-··-··-··-··-··", "— - — - — - — - — - — - — - — - "];
    g = j[h - 3];
    for (d = 0; d < 3; d++) {
        g += g
    }
    l += g + "</span>";
    e.addClass("g_foldTextLine").html(l);
    Run.checkSplitLineEnough(a)
};
Run.checkSplitLineEnough = function (g) {
    var c = $("#module" + g), d = c.find(".g_separator");
    if (c.length < 1 || d.length < 1) {
        return
    }
    var e = d.find("span"), b = d.width(), a = e.width(), f = e[0].innerHTML;
    doubleText = f + f;
    if (a == 0 || b == 0) {
        e.html(doubleText + f)
    } else {
        if (a < b) {
            e.html(doubleText);
            Run.checkSplitLineEnough(g)
        }
    }
    if (c.hasClass("formStyle11")) {
        d.css("width", c.find(".formMiddleContent").width() + "px")
    }
};
Run.changeTheWebVersion = function (a) {
    $.ajax({
        type: "POST", url: "/ajax/webTools_h.php?cmd=changeWebVersion", data: "verNum=" + a, error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        }, success: function (b) {
            var c = jQuery.parseJSON(b);
            if (c.success) {
                window.location.reload()
            } else {
                alert(c.msg)
            }
        }
    })
};
Run.getCloneAid = function () {
    $.ajax({
        type: "post", url: "/ajax/webTools_h.php", data: "cmd=getCloneAid", beforeSend: function () {
            Helper.ing("正在克隆处理......")
        }, error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        }, success: function (a) {
            var b = jQuery.parseJSON(a);
            if (b.success) {
                Helper.ing("克隆成功, 账号：" + b.account + ", aid：" + b.aid)
            } else {
                Helper.ing(b.msg)
            }
        }
    })
};
Run.cloneWebVersion = function () {
    $.ajax({
        type: "POST", url: "/ajax/webTools_h.php", data: "cmd=getAcctInfo", error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        }, success: function (b) {
            var c = jQuery.parseJSON(b);
            if (c.success) {
                var d = prompt("将当前网站克隆到下面输入的网站(ps:输入的账号必须为内部账号)\n\n请输入账号名：");
                a(d, c)
            }
        }
    });
    function a(c, b) {
        if (c == null) {
            return
        } else {
            if (c.trim() == "") {
                alert("输入用户名不能为空！")
            } else {
                var d = prompt("请输入客户类型：\n\n直销账号为0；  分销账号为1");
                if (d == null) {
                    return
                } else {
                    if (d.trim() == "") {
                        alert("输入客户类型不能为空！");
                        return
                    } else {
                        if (d != 0 && d != 1) {
                            alert("输入客户类型错误！");
                            return
                        } else {
                            $.ajax({
                                type: "POST",
                                url: "/ajax/webTools_h.php",
                                data: "cmd=getAcctInfo&inputAcctName=" + c + "&inputAtype=" + d,
                                error: function () {
                                    Helper.ing("系统异常，请稍后重试", true)
                                },
                                success: function (e) {
                                    var i = jQuery.parseJSON(e);
                                    if (i.success) {
                                        if (i.aid == b.aid) {
                                            alert("所输入的账号与当前网站账号相同，不能克隆！")
                                        } else {
                                            if (!i.isHelperer) {
                                                alert("你所输入网站账号不是内部账号，不能克隆！");
                                                return
                                            }
                                            var g = ["把企业aid：" + b.aid + "，" + b.atypeName + "，" + b.aacct + b.siteVerName + "(原网站)", "\n\n克隆\n\n", "到企业aid：" + i.aid + "，" + i.atypeName + "，" + i.aacct + i.siteVerName + "(目标网站)"];
                                            var h = window.confirm(g.join(""));
                                            if (h) {
                                                var f = window.confirm("确定克隆到id：" + i.aid + "；" + i.atypeName + "账号：" + i.aacct + "？必须检查清楚！！")
                                            }
                                            if (f) {
                                                $.ajax({
                                                    type: "POST",
                                                    url: "/ajax/webTools_h.php",
                                                    data: "cmd=cloneWebRun&fromAid=" + b.aid + "&toAid=" + i.aid,
                                                    error: function () {
                                                        Helper.ing("系统异常，请稍后重试", true)
                                                    },
                                                    success: function (j) {
                                                        var k = jQuery.parseJSON(j);
                                                        if (k.success) {
                                                            alert("克隆成功!");
                                                            window.location.reload()
                                                        } else {
                                                            if (k.msg != null) {
                                                                alert(k.msg)
                                                            } else {
                                                                alert("系统错误，克隆失败！")
                                                            }
                                                        }
                                                    }
                                                })
                                            }
                                        }
                                    } else {
                                        if (i.msg == null) {
                                            alert("系统出错，克隆失败！")
                                        } else {
                                            alert(i.msg)
                                        }
                                    }
                                }
                            })
                        }
                    }
                }
            }
        }
    }
};
Run.updateVersionTwoStyle = function () {
    var a, b;
    a = prompt("请输入更新2.0样式版本号的方式：\n\n指定样式id请输入0；  更新全部样式请输入1");
    if (a == 0) {
        b = prompt("请输入需要更新的2.0样式的id！！！");
        if (!Helper.isNumber(b)) {
            alert("输入有误！");
            return
        }
    } else {
        if (a == 1) {
            var c = "请输入需要更新2.0的样式的类型：\n\n更新全部类型的2.0样式请输入0\n\n更新所有主题样式请输入1\n\n更新所有模块样式请输入2\n\n更新所有导航样式请输入3";
            c += "\n\n更新所有模块组样式（横向）样式请输入4\n\n更新所有模块组样式（竖向）样式请输入5\n\n更新所有模块列样式请输入6\n\n更新所有自由容器样式请输入7";
            var b = prompt(c);
            if (!Helper.isNumber(b)) {
                alert("输入有误！");
                return
            }
        } else {
            if (a == null) {
                return
            } else {
                if (a != 0 && a != 1) {
                    alert("输入有误！");
                    return
                }
            }
        }
    }
    $.ajax({
        type: "POST",
        url: "/ajax/webTools_h.php",
        data: "cmd=updateStyleVersion&updateType=" + a + "&updateId=" + b,
        error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        },
        success: function (d) {
            var e = jQuery.parseJSON(d);
            alert(e.msg)
        }
    })
};
Run.setMallTrialTime = function (e) {
    var f, b = new Date(), d = b.getFullYear(), g = b.getMonth() + 1, a = b.getDate();
    if (e == 0) {
        f = d + "-" + g + "-" + a + " 00:00:00"
    } else {
        if (e == 1) {
            f = d + "-" + g + "-" + (a + 1) + " 00:00:00"
        } else {
            f = prompt("修改商城试用到期时间。格式：2016-06-24 09:00:00", "");
            var c = /^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-)) (20|21|22|23|[0-1]?\d):[0-5]?\d:[0-5]?\d$/;
            if (!f.match(c)) {
                alert("格式错误！请重新输入正确的商城试用到期时间。");
                return
            }
        }
    }
    $.ajax({
        type: "POST",
        url: "/ajax/webTools_h.php",
        data: "cmd=setMallTrialTimeEnd&trialTime=" + f,
        error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        },
        success: function (h) {
            var i = jQuery.parseJSON(h);
            if (i.success) {
                alert(i.msg);
                window.location.reload()
            } else {
                if (i.msg) {
                    alert(i.msg)
                } else {
                    alert("系统错误，修改商城试用结束时间失败！")
                }
            }
        }
    })
};
Run.getModuleStatus = function (d) {
    var e = 1, g = "module" + d, b = Helper.top.$("#" + g), c = b.attr("_side"), a = b.parent(), f = a.attr("id") || "";
    if (c == 2) {
        e = 4
    } else {
        if (c == 1) {
            e = 5
        } else {
            if (f == "floatLeftTopForms" || f == "floatRightTopForms" || f == "floatLeftBottomForms" || f == "floatRightBottomForms") {
                e = 3
            } else {
                if (b.css("position") == "absolute" && a.hasClass("absForms")) {
                    e = 2
                }
            }
        }
    }
    return e
};
Run.jumpToModulePosition = function (e, a, c) {
    var d = $("#module" + e), f = 0;
    if (d.length < 1) {
        if (!c) {
            return
        } else {
            if (c == ("/col.php?id=" + Helper.top._colId)) {
                return
            }
            document.location.href = c + "#fai_" + e + "_" + a
        }
    }
    if (a == "bottom") {
        f = d.height()
    }
    var b = window.location.hash;
    if (b == "" && b.substring(1).split("_")[0] != "fai") {
        window.location.hash = "fai_" + e + "_" + a
    }
    $("html, body, #g_main, #web").animate({scrollTop: document.getElementById("module" + e).offsetTop + f}, {
        duration: 500,
        easing: "swing"
    });
    if (c != "") {
        $("#navCenter").find(".itemHover").removeClass("itemHover")
    }
};
Run.getTopWindow = function () {
    return (typeof Helper != "undefined" && Helper.top) || window
};
Run.changeABVersion = function (a) {
    if (window.localStorage && window.localStorage.setItem && window.localStorage.removeItem) {
        window.localStorage.removeItem("ABVesion");
        if (a) {
            window.localStorage.setItem("ABVesion", Helper.top._aid + "-A")
        } else {
            window.localStorage.setItem("ABVesion", Helper.top._aid + "-B")
        }
    }
    window.location.reload()
};
Run.getABVersion = function () {
    var c = false;
    if (Helper.top._aid % 2 == 1) {
        c = true
    }
    if (window.localStorage && window.localStorage.getItem) {
        var a = window.localStorage.getItem("ABVesion");
        if (a != null && a != "") {
            var b = a.split("-");
            var d = {};
            d.aid = b[0];
            d.ver = b[1];
            if (d.aid == Helper.top._aid) {
                if (d.ver == "A") {
                    c = false
                } else {
                    if (d.ver == "B") {
                        c = true
                    }
                }
            }
        }
    }
    return c
};
(function (c, a, d) {
    a.runRunInit = function () {
        var k = [81, 97], l = k.length, g, h, f, e;
        for (f = 0; f < l; f++) {
            g = c(".formStyle" + k[f]);
            h = g.length;
            for (e = 0; e < h; e++) {
                a.run(g.eq(e).attr("id"))
            }
        }
    };
    var b = {};
    a.init = function (e, f) {
        var g = typeof f == "number" ? f : f.moduleId;
        if (!g) {
            return
        }
        var h = "module" + g;
        b[h] = b[h] || [];
        b[h].push({runFun: e, args: f})
    };
    a.run = function (j) {
        var f, e, h, g;
        if (b && b[j] && b[j].length > 0) {
            h = b[j];
            f = b[j].length;
            for (e = 0; e < f; e++) {
                g = h[e];
                if (g.runFun.indexOf("ImageEffect") < 0) {
                    jzUtils.run({name: g.runFun}, g.args)
                } else {
                    jzUtils.run({name: g.runFun, callMethod: true}, g.args)
                }
            }
            return delete b[j]
        }
        return false
    }
})(jQuery, Run.cacheModuleFunc || (Run.cacheModuleFunc = {}));
Run.onLogout = function () {
    $("#topBarMsg").show();
    $("#topBarMsg").html(LS.topBarLogouting);
    $.ajax({
        type: "post", url: "ajax/login_h.php?cmd=logoutMember", error: function () {
            alert(LS.topBarLogoutError);
            $("#topBarMsg").hide()
        }, success: function (a) {
            var a = jQuery.parseJSON(a);
            if (a.success) {
                top.location.href = "index.php";
                return
            }
            $("#topBarMsg").html(LS.topBarLogoutError)
        }
    })
};
Run.ajaxLoadModuleDom = function (b, a, c) {
    $.ajax({
        type: "post",
        url: "ajax/ajaxLoadModuleDom_h.php",
        data: "cmd=loadModuleDom&colId=" + b + "&extId=" + a + "&ajaxOptionInfo=" + Helper.encodeUrl($.toJSON(c)),
        error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        },
        success: function (d) {
            var d = jQuery.parseJSON(d);
            if (d.success) {
                var j = jQuery.parseJSON(d.rtInfo);
                if (j.topBar) {
                    var f = Helper.top.$("#memberBarArea");
                    f.children().remove();
                    f.append(j.topBar);
                    Run.mallCartInit(Helper.top._colId);
                    Run.mobiWebInit()
                }
                if (j.moduleDomList) {
                    for (var e = 0; e < j.moduleDomList.length; e++) {
                        var h = j.moduleDomList[e];
                        var g = h.moduleId;
                        var k = h.dom;
                        loadWholeModuleDom(g, k)
                    }
                    Run.fixRunWidth(Helper.top._manageMode);
                    Run.fixWebFooterHeight();
                    jzUtils.run({name: "moduleAnimation.publish", base: Run})
                }
            }
        }
    })
};
function loadWholeModuleDom(b, c) {
    var a = Helper.top.$("#module" + b);
    a.children().remove();
    a.prepend(c)
}
Run.bindInTabSwitch = function () {
    $(".formStyle29").each(function () {
        var g = $(this).attr("id").replace("module", "");
        if (Helper.top["tabModule" + g + "Switch"]) {
            $(this).find(".formTabButton").off("mouseenter.tab").addClass("formTabButtonClick")
        } else {
            $(this).find(".formTabButton").off("mouseenter,tab").on("mouseenter.tab", function () {
                $(this).trigger("click")
            }).removeClass("formTabButtonClick")
        }
    });
    var b = new Array();
    var e = Helper.top.location.hash;
    var a = Helper.top.location.search;
    var d = 0;
    if (a) {
        var f = a.indexOf("pageno");
        var c = a.substring(f, a.length);
        a = a.replace(c, "");
        f = a.lastIndexOf("m");
        c = a.substring(0, f + 1);
        d = a.replace(c, "")
    }
    $(".formTabButtonList").each(function () {
        $(this).find(".formTabButton").eq(0).click();
        $.each($(this).find(".formTabButton"), function (g, h) {
            var k = $(h).attr("tabModuleId");
            if (("#module" + k) === e || $("#module" + k).find("#module" + d).length > 0) {
                b.push(parseInt(k));
                return false
            }
            var j = Helper.getUrlParam(Helper.top.location.href, "m" + k + "pageno");
            if (typeof(j) != "undefined" && j.length > 0) {
                b.push(parseInt(k))
            }
        })
    });
    $(".formTabButtonYList").each(function () {
        $(this).find(".formTabButton").eq(0).click();
        $.each($(this).find(".formTabButton"), function (g, h) {
            var k = $(h).attr("tabModuleId");
            if (("#module" + k) === e || $("#module" + k).find("#module" + d).length > 0) {
                b.push(parseInt(k));
                return false
            }
            var j = Helper.getUrlParam(Helper.top.location.href, "m" + k + "pageno");
            if (typeof(j) != "undefined" && j.length > 0) {
                b.push(parseInt(k))
            }
        })
    });
    $.each(b, function (g, h) {
        Run.changeLiCnt(h, false, 29)
    })
};
Run.restartMarquee = function (a, c, d) {
    var f = Helper.top.$("#module" + a),
        g = f.hasClass("formStyle4") || f.hasClass("formStyle5") || f.hasClass("formStyle16") || f.hasClass("formStyle77") || f.hasClass("formStyle31") || f.hasClass("formStyle42"),
        h = f.hasClass("formStyle2") || f.hasClass("formStyle3") || f.hasClass("formStyle8") || f.hasClass("formStyle12") || f.hasClass("formStyle30") || f.hasClass("formStyle41") || f.hasClass("formStyle74"),
        b = g ? "photoList" : "productList";
    var i = f.hasClass("formStyle88") || f.hasClass("formStyle89") || f.hasClass("formStyle90");
    if (i) {
        b = "listPhotos"
    }
    if (c) {
        if (Helper.top[b + a]) {
            var e = Helper.top[b + a].data;
            Helper.stopInterval("marquee" + a);
            if (g) {
                Run.loadPhotoMarquee(a, !e.picScale, e.cusPicSize, e.newMarqueeToward)
            } else {
                if (h) {
                    Run.loadProductMarquee(a, !e.picScale, e.cusPicSize, e.newMarqueeToward)
                } else {
                    if (i) {
                        Run.loadPhotoMarquee(a, e.picScale, e.cusPicSize, e.newMarqueeToward, "listPhotos")
                    }
                }
            }
        } else {
            new Function("Helper.top.changeMarquee" + a + "()")()
        }
    }
    if (d == 29) {
        $("#formTabCntId" + a).parent().find(".formTabCntId").each(function () {
            if ($(this).attr("show")) {
                $(this).show();
                if ($(this).attr("styleId") == 3 || $(this).attr("styleId") == 16 || $(this).attr("styleId") == 90) {
                    var j = $($(this).find(">div")[0]).attr("id").replace("module", "");
                    new Function("Helper.top.changeMarquee" + j + "()")()
                }
            } else {
                $(this).hide()
            }
        })
    }
};
Run.changeLiCnt = function (g, d, a) {
    var c = $("#formTabCntId" + g).parent().find(".formTabCntId").eq(0).find(" >.form"), b = c.attr("id");
    if (b == ("module" + g)) {
        return
    }
    var e = $("#formTabButton" + g);
    e.find(".formTabLeft").addClass("formTabLeftHover").end().find(".formTabMiddle").addClass("formTabMiddleHover").end().find(".formTabRight").addClass("formTabRightHover").end().siblings().find(".formTabLeft").removeClass("formTabLeftHover").end().find(".formTabMiddle").removeClass("formTabMiddleHover").end().find(".formTabRight").removeClass("formTabRightHover").end();
    e.addClass("formTabButtonHover").siblings().removeClass("formTabButtonHover");
    $("#formTabCntId" + g).parent().find(".formTabCntId").each(function () {
        if ($(this).attr("show")) {
            $(this).removeAttr("show");
            $(this).removeClass("formTabCntIdHover")
        }
    });
    var f = $("#formTabCntId" + g);
    f.prependTo(f.parent());
    f.attr("show", true);
    f.addClass("formTabCntIdHover");
    Run.restartMarquee(g, d, a);
    Run.triggerGobalEvent("site_moduleTabSwitch", g);
    Run.fixModuleInTabSwitchBug(g);
    jzUtils.run({name: "moduleAnimation.publish", base: Helper.top.Run});
    jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Helper.top.Run})
};
Run.initTabYStyle = function (d) {
    var c = Helper.top.$("#module" + d), a = c.find(".titleTable");
    if (Helper.isIE6()) {
        var e = c.find(".formMiddleCenter" + d).width(), b = a.width();
        c.find("#formTabContent" + d).css({width: (e - b - 40) + "px", "float": "left"})
    }
};
Run.fixModuleInTabSwitchBug = function (c) {
    var b = $("#module" + c), a;
    if (b.hasClass("formStyle83") && !!!b.data("fk_fixEffect")) {
        Run.adjustPhotoCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle85") && !!!b.data("fk_fixEffect")) {
        Run.adjustPhotoNewCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle98") && !!!b.data("fk_fixEffect")) {
        Run.adjustPhotoMoreCardImgSize(b);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle1") && !!!b.data("fk_fixEffect")) {
        Run.richMarquee(Helper.top["richMarqueeInTab" + c]);
        b.data("fk_fixEffect", 1)
    }
    if (b.hasClass("formStyle7") || b.hasClass("formStyle6")) {
        a = Helper.top["newsScrollOptions" + c];
        if ((typeof a != "undefined") && a.scroll) {
            b.find(".separatorLine").css("display", "")
        }
    }
    if ((b.hasClass("formStyle2") || b.hasClass("formStyle3") || b.hasClass("formStyle4") || b.hasClass("formStyle12") || b.hasClass("formStyle30") || b.hasClass("formStyle74") || b.hasClass("formStyle41") || b.hasClass("formStyle8")) && !!!b.data("fk_fixEffect")) {
        if (Run.ImageEffect && Run.ImageEffect.cashOptions && c.toString() in Run.ImageEffect.cashOptions) {
            jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Run.ImageEffect.cashOptions[c]);
            b.data("fk_fixEffect", 1)
        }
    }
};
Run.callMusicUnload = function (a, c) {
    var b = Run.callMusicPosition(a);
    $.cookie(c, b)
};
Run.callMusicPlayButton = function (e, d, f, c) {
    $("#" + e).bind("click", function () {
        var j = $.cookie(c);
        var i = $(this);
        var h = $("#" + e).attr("bgMusicStatus");
        if (h != j) {
            $.cookie(c, h)
        }
        j = $.cookie(c);
        if (j == "true") {
            $("#" + e).attr("bgMusicStatus", "false");
            $.cookie(c, false);
            Run.reStartMusic(d);
            i.attr("title", "点击暂停播放音乐");
            i.removeClass("bgplayerButtonP")
        } else {
            if (i.hasClass("bgplayerButtonP")) {
                $("#" + e).attr("bgMusicStatus", "false");
                Run.reStartMusic(d);
                i.attr("title", "点击暂停播放音乐");
                i.removeClass("bgplayerButtonP")
            } else {
                var g = Run.callMusicPosition(d);
                $.cookie(f, g);
                $("#" + e).attr("bgMusicStatus", "true");
                $.cookie(c, true);
                Run.stopMusic(d);
                i.attr("title", "点击播放音乐");
                i.addClass("bgplayerButtonP")
            }
        }
    });
    var b = $.cookie(c);
    var a = Helper.top.$("#" + e);
    if (b == "true") {
        a.attr("title", "点击播放音乐");
        a.addClass("bgplayerButtonP");
        a.show()
    } else {
        a.show();
        a.attr("title", "点击暂停播放音乐");
        a.removeClass("bgplayerButtonP")
    }
};
Run.SetPositionZero = function () {
    $.cookie("bgplayerTime", "0");
    var a = $("#bgplayerButton");
    a.attr("title", "点击播放音乐");
    a.addClass("bgplayerButtonP")
};
Run.callMusicPosition = function (a) {
    var b;
    try {
        b = Run.callMusic(a).getMusicPosition()
    } catch (c) {
    }
    return b
};
Run.stopMusic = function (a) {
    var b;
    try {
        b = Run.callMusic(a).stopMusic()
    } catch (c) {
    }
    return b
};
Run.reStartMusic = function (b) {
    var a;
    try {
        a = Run.callMusic(b).reStartMusic()
    } catch (c) {
    }
    return a
};
Run.getMusicLength = function (a) {
    var b = -1;
    try {
        while (b < 0) {
            b = Run.callMusic(a).getSoundLength()
        }
    } catch (c) {
    }
    return b
};
Run.changeVol = function (a, b) {
    try {
        Run.callMusic(a).changeVolume(b)
    } catch (c) {
        console.log(c.stack)
    }
};
Run.callMusic = function (a) {
    var b = document[a] || window[a] || Run.getTopWindow().document[a];
    return b
};
Run.bgmFlushContinue = function () {
    var a = $("#bgplayerButton").attr("bgmusicstatus");
    if (a == "false") {
        $.cookie("bgplayerPause", "false");
        $.cookie("hasMusicPlaying", "false")
    }
    if (a == "false") {
        Run.callMusicUnload("faiBgMusicPlayer", "bgplayerTime")
    }
};
Run.appendQuickTime = function (b) {
    var e = new Array(), d = b.width, c = b.height, a = b.path;
    e.push("<object width='" + d + "' height='" + c + "' classid='clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B' codebase='http://www.apple.com/qtactivex/qtplugin.cab'>");
    e.push("<param name='src' value='" + a + "'>");
    e.push("<param name='controller' value='true'>");
    e.push("<param name='type' value='video/quicktime'>");
    e.push("<param name='autoplay' value='false'>");
    e.push("<param name='target' value='myself'>");
    e.push("<param name='pluginspage' value='http://www.apple.com/quicktime/download/index.html'>");
    e.push("<embed src='" + a + "' width='" + d + "' height='" + c + "' ");
    e.push("controller='true' align='middle' target='myself' type='video/quicktime' autoplay='false' ");
    e.push("pluginspage='http://www.apple.com/quicktime/download/index.html'>");
    e.push("</embed>");
    e.push("</object>");
    $("#" + b.parentId).append(e.join(""))
};
Run.appendWMP = function (b) {
    var a = new Array(), e = b.width, d = b.height, c = b.path;
    a.push("<embed type='application/x-mplayer2' classid='clsid:6bf52a52-394a-11d3-b153-00c04f79faa6' ");
    a.push("src='" + c + "' wmode='opaque' quality='high' ");
    a.push("enablecontextmenu='false' autostart='false' windowlessVideo='true' ");
    a.push("width='" + e + "' height='" + d + "'>");
    a.push("</embed>");
    $("#" + b.parentId).append(a.join(""))
};
Run.vote = function (f, i, d, e) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行投票。");
        return
    }
    var j = $("#voteMsg" + f + i), g = parseInt($.cookie("vote" + f)), a = true;
    var c = new Array();
    j.hide();
    $(".voteItems" + f + i).each(function () {
        var l = {};
        var k = new Array();
        $(this).find(".voteItemCheck").find("input:checked").each(function () {
            var m = $(this).val();
            if (!isNaN(m)) {
                k.push(parseInt(m))
            }
        });
        if (k.length == 0) {
            j.show();
            j.text(LS.voteNotSelect);
            a = false;
            return
        }
        l.itemList = k;
        c.push(l)
    });
    if (!a) {
        return
    }
    $("#vote" + f + i).attr("disabled", true);
    $("#vote" + f + i).faiButton("disable");
    $.ajax({
        type: "post",
        url: "ajax/vote_h.php?cmd=voteItem",
        async: false,
        data: "vid=" + f + "&itemlist=" + Helper.encodeUrl($.toJSON(c)),
        error: function () {
            var l = Run.getDialogContent(false, Helper.format(LS.voteError));
            var k = {htmlContent: l, width: 205, height: 78};
            Run.popupBox(k);
            setTimeout(function () {
                document.location.reload()
            }, 3000)
        },
        success: function (m) {
            var k = jQuery.parseJSON(m);
            if (k.success) {
                j.hide();
                var n = Run.getDialogContent(true, Helper.format(LS.voteSuccess));
                var l = {htmlContent: n, width: 205, height: 78};
                Run.popupBox(l);
                setTimeout(function () {
                    document.location.reload()
                }, 1000);
                $(".voteItems" + f + i).find("input:checked").each(function () {
                    $(this).attr("checked", false)
                });
                if (d > 0) {
                    if (!$.cookie("vote" + f)) {
                        var o = new Date();
                        o.setHours(o.getHours() + d);
                        $.cookie("vote" + f, d, {expires: o})
                    }
                } else {
                    if (d == 0) {
                        $.cookie("vote" + f, null)
                    } else {
                        $.cookie("vote" + f, -1, {expires: 30})
                    }
                }
            } else {
                if (k.login) {
                    j.show();
                    voteMsgs.text(LS.voteErrorByNotLogin)
                } else {
                    j.hide();
                    if (k.needCode) {
                        b();
                        return
                    }
                    var n = Run.getDialogContent(false, k.msg);
                    var l = {htmlContent: n, width: 205, height: 78};
                    Run.popupBox(l);
                    setTimeout(function () {
                        document.location.reload()
                    }, 1000)
                }
            }
            setTimeout(function () {
                $("#vote" + f + i).removeAttr("disabled");
                $("#vote" + f + i).faiButton("enable")
            }, 3000)
        }
    });
    function b() {
        var k = [];
        k.push("<div class='voteCodePanelBg'></div>");
        k.push("<div class='voteCodePanel'><div class='voteCodePanelClose'></div>");
        k.push("<div class='voteCodePanelTitle'><div class='voteCodePanelTitleFont'>输入验证码</div></div>");
        k.push("<div class='voteCodePanelContent'>");
        k.push("<div class='voteCodeLine'>");
        k.push("<div class='voteCodeTitle'>验证码：</div>");
        k.push("<div id='voteCodeInput' class='voteCodeInput'><input id='needVoteCode' class='voteCodeInputText myTradeInputPlaceholder' type='text' onfocus='$(\"#needVoteCode\").css(\"border-color\", \"#E3E2E8\");' placeholder='请输入图片验证码，防止刷票'/></div>");
        k.push("<div class='voteCodePicPanel'><img alt='' class='voteCodePic' onclick='Run.changeCaptchaImg(this, 3)' title='看不清，换一张' id='memberCaptchaImg' src='validateCode.php?Math.random()*1000'></div>");
        k.push("</div>");
        k.push("<div class='voteCodePanelSubmit'>确定</div><div class='voteCodePanelCannel 'voteCodePanelClose'>取消</div>");
        k.push("</div>");
        k.push("</div>");
        $("#g_main").after(k.join(""));
        var l = (Helper.top.document.documentElement.clientWidth - $(".voteCodePanel").width()) / 2;
        var m = (Helper.top.document.documentElement.clientHeight - $(".voteCodePanel").height()) / 2 + $(window).scrollTop();
        $(".voteCodePanel").css({left: l, top: m});
        $(".voteCodePicPanel>.voteCodePic").attr("src", "validateCode.php?" + Math.random() * 1000 + "&validateCodeRegType=3");
        $(".voteCodePanelClose, .voteCodePanelClose").unbind("click").bind("click", function () {
            $(".voteCodePanelBg").remove();
            $(".voteCodePanel").remove()
        });
        $("#needVoteCode").unbind("keyup").bind("keyup", function () {
            $(".voteCodePanelSubmit").css({border: "1px solid #557ce1", "background-color": "#557ce1", color: "white"});
            if ($("#needVoteCode").val() == "") {
                $(".voteCodePanelSubmit").css({
                    border: "1px solid #e7e7eb",
                    "background-color": "#f2f2f5",
                    color: "#d2d2d2"
                })
            }
        });
        $(".voteCodePanelSubmit").unbind("click").bind("click", function () {
            var n = $("#needVoteCode").val();
            $.ajax({
                type: "post",
                url: "/ajax/vote_h.php?cmd=voteItem",
                data: "vid=" + f + "&itemlist=" + Helper.encodeUrl($.toJSON(c)) + "&verificationCode=" + Helper.encodeUrl(n),
                error: function () {
                    alert("服务繁忙，请稍后再试。")
                },
                success: function (o) {
                    o = $.parseJSON(o);
                    if (o.success) {
                        $(".voteCodePanel").remove();
                        $(".voteItems" + f + i).find("input:checked").each(function () {
                            $(this).attr("checked", false)
                        });
                        h()
                    } else {
                        $("#needVoteCode").css("border-color", "red");
                        $(".voteCodePanel").find(".voteCodePic").attr("src", "validateCode.php?" + Math.random() * 1000 + "&validateCodeRegType=3")
                    }
                }
            })
        })
    }

    function h() {
        var k = [];
        k.push("<div class='voteSuccessPanel sweet-alert'><div class='voteSuccessPanelClose'></div>");
        k.push("		<div class='sa-icon sa-success animate'>");
        k.push("			<span class='sa-line sa-tip animateSuccessTip'></span>");
        k.push("			<span class='sa-line sa-long animateSuccessLong'></span>");
        k.push("			<div class='sa-placeholder'></div>");
        k.push("			<div class='sa-fix'></div>");
        k.push("		</div>");
        k.push("		<div class='voteSuccessTitle'>感谢您的投票</div>");
        k.push("</div>");
        $("#g_main ").after(k.join(""));
        var l = (Helper.top.document.documentElement.clientWidth - $(".voteSuccessPanel").width()) / 2;
        var m = (Helper.top.document.documentElement.clientHeight - $(".voteSuccessPanel").height()) / 2 + $(window).scrollTop();
        $(".voteSuccessPanel").css({left: l, top: m});
        $(".voteSuccessPanelClose").unbind("click").bind("click", function () {
            $(".voteCodePanelBg").remove();
            $(".voteSuccessPanel").remove()
        });
        setTimeout(function () {
            $(".voteCodePanelBg").remove();
            $(".voteSuccessPanel").remove()
        }, 2000)
    }
};
Run.initModuleVote = function (d) {
    var e = d.id, c = d.delay, b = d.mid, a = d.isVoted;
    if (c == 0) {
        $.cookie("vote" + e, null)
    } else {
        if (c == -1) {
            if ($.cookie("vote" + e)) {
                $.cookie("vote" + e, -1, {expires: 30})
            }
        } else {
            if ($.cookie("vote" + e) == "-1") {
                $.cookie("vote" + e, null)
            }
        }
    }
    $("#vote" + e + b).click(function () {
        Run.vote(e, b, c, a)
    })
};
Run.fixModuleVoteStyle = function (b, a) {
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteItems" + b + a).find(".voteItemPanel").css({
            width: "100%",
            "padding-bottom": "10px"
        });
        $("#module" + a).find(".voteItems" + b + a).find(".voteItemCheck").css({padding: "10px 0 0px 5px"})
    }
};
Run.fixVoteResultImgStyle = function (c, a, d, b) {
    if ($("#module" + a).width() > 400) {
        if (d != -1 && b == "img") {
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfmImg").each(function () {
                $(this).css("width", $("#module" + a).find(".voteResult").find(".vi-percent").width() - 48)
            })
        }
    }
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteItemImg").find("img").css({
            width: "30px",
            height: "30px"
        });
        if (d != -1 && b == "img") {
            $("#module" + a).find(".voteResult").find(".vi-name").css({"text-align": "center"});
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteItemImg").css({"margin-right": "2px"});
            $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfmImg").each(function () {
                $(this).css("width", $("#module" + a).find(".voteResult").find(".vi-percent").width() - 30);
                $(this).css("margin-top", "4px")
            })
        }
    }
};
Run.fixModuleVoteResultStyle = function (b, a, c) {
    if ($("#module" + a).width() <= 400) {
        $("#module" + a).find(".voteResult").find(".vi-name").css({width: "30%"});
        $("#module" + a).find(".voteResult").find(".vi-percent").css({width: "50%"});
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfm").css({height: "22px"});
        $("#module" + a).find(".voteResult").find(".vi-count").css({width: "20%"});
        $("#module" + a).find(".voteResult").find(".vi-count").find(".voteItemCount").css({"padding-left": "0"})
    }
    if (c != -1) {
        $("#module" + a).find(".voteResult").find(".vi-percent").find(".voteVfm").find(".g_block").each(function () {
            $(this).addClass("g_block" + c)
        })
    }
};
Run.showNavSubMenu = function (b) {
    var a = 0;
    if (b == 1) {
        a = 1
    }
    $.each(Helper.top.$("#nav .navCenter .item"), function (u, q) {
        $(this).unbind();
        if (b == 100) {
            var y = $(this);
            if (y.find(".navSubMenu").length >= 1) {
                return
            }
            var o = y.attr("id");
            var k = [];
            try {
                k = Helper.fkEval(o + "SubMenu")
            } catch (v) {
                return false
            }
            var m = Helper.top._colId;
            var A = Helper.top._fromColId;
            var g = y.attr("colId");
            if (g == m || g == A) {
                y.addClass("itemSelected")
            }
            y.hover(function () {
                $(this).addClass("itemHover")
            }, function () {
                $(this).removeClass("itemHover")
            });
            if (!k || k.length < 1) {
                return
            }
            var d = 0;
            if (g == m || g == A) {
                d = 1
            } else {
                for (var u = 0; u < k.length; ++u) {
                    var c = k[u].colId;
                    if (c == m || c == A) {
                        d = 2;
                        break
                    }
                    if (!Helper.isNull(k[u].sub)) {
                        var r = k[u].sub;
                        for (var q = 0; q < r.length; ++q) {
                            var z = r[q].colId;
                            if (z == m || z == A) {
                                d = 3;
                                break
                            }
                        }
                    }
                    if (d != 0) {
                        break
                    }
                }
            }
            if (k) {
                Run.removeNavHiddenMenu(k)
            }
            if (g == m || g == A) {
                if (k && k.length >= 1) {
                    y.addClass("itemPopupSelected")
                }
            }
            if (d == 0) {
                return
            }
            if (!k || k.length < 1) {
                return
            }
            var f = $("<div class='navSubMenu'></div>");
            var s = $("<div class='content2'><table class='top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='middle' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table></div>");
            s.appendTo(f);
            s = s.find(".middle .center");
            for (var u = 0; u < k.length; ++u) {
                var w = "";
                if (k[u].colId == m || k[u].colId == A) {
                    w = " itemSelected"
                }
                var j = "<table class='item" + w + "' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a href='" + k[u].href + "'>" + k[u].html + "</a></td><td class='itemRight'></td></tr></table>";
                $(j).appendTo(s);
                if (d == 1) {
                    continue
                }
                if (d == 2 && m != k[u].colId && A != k[u].colId) {
                    continue
                }
                if (Helper.isNull(k[u].sub) || k[u].sub.length < 1) {
                    continue
                }
                var r = k[u].sub;
                if (d == 3) {
                    var p = false;
                    for (var q = 0; q < r.length; ++q) {
                        if (r[q].colId == m || r[q].colId == A) {
                            p = true;
                            break
                        }
                    }
                    if (!p) {
                        continue
                    }
                }
                var h = $("<div class='content3'><table class='top' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='middle' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table><table class='bottom' cellpadding='0' cellspacing='0'><tr><td class='left'></td><td class='center'></td><td class='right'></td></tr></table></div>");
                h.appendTo(s);
                h = h.find(".middle .center");
                for (var q = 0; q < r.length; ++q) {
                    var t = "";
                    if (r[q].colId == m || r[q].colId == A) {
                        t = " itemSelected"
                    }
                    var l = "<table class='item" + t + "' cellpadding='0' cellspacing='0'><tr><td class='itemLeft'></td><td class='itemCenter'><a href='" + r[q].href + "'>" + r[q].html + "</a></td><td class='itemRight'></td></tr></table>";
                    $(l).appendTo(h)
                }
            }
            f.insertAfter($(this));
            f.find(".item").hover(function () {
                $(this).addClass("itemHover")
            }, function () {
                $(this).removeClass("itemHover")
            })
        } else {
            var y = $(this);
            var m = Helper.top._colId;
            var A = Helper.top._fromColId;
            var g = y.attr("colId");
            var o = y.attr("id");
            var k = [];
            try {
                k = Helper.fkEval(o + "SubMenu")
            } catch (v) {
                return false
            }
            var x = u + 1;
            var p = false;
            if (m == g || A == g) {
                p = true
            } else {
                if (k && k.length >= 1) {
                    for (var u = 0; u < k.length; ++u) {
                        var c = k[u].colId;
                        if (c == m || c == A) {
                            p = true;
                            break
                        }
                        if (!Helper.isNull(k[u].sub)) {
                            var r = k[u].sub;
                            for (var q = 0; q < r.length; ++q) {
                                var z = r[q].colId;
                                if (z == m || z == A) {
                                    p = true;
                                    break
                                }
                            }
                        }
                        if (p) {
                            break
                        }
                    }
                }
            }
            if (k) {
                Run.removeNavHiddenMenu(k)
            }
            if (p) {
                y.addClass("itemSelected");
                y.addClass("itemSelectedIndex" + x);
                if (k && k.length >= 1) {
                    y.addClass("itemPopupSelected")
                }
            }
            $(this).hover(function () {
                var B = $(this);
                var G = B.attr("id");
                var n = [];
                try {
                    n = Helper.fkEval(G + "SubMenu")
                } catch (E) {
                    return false
                }
                B.addClass("itemHover");
                B.addClass("itemHoverIndex" + x);
                if (n && n.length >= 1) {
                    B.addClass("itemPopupHover")
                }
                var i = "";
                if ($("#nav").hasClass("navStyle")) {
                    var D = $("#nav").attr("class").split(" ");
                    $.each(D, function (e, H) {
                        if (H.search(/navStyle/) != -1) {
                            i += H + " "
                        }
                    })
                } else {
                    if (Helper.top._isTemplateVersion2 || Helper.top._uiMode) {
                        i = "navStyle "
                    }
                }
                var C = "<div class='navSubMenu'></div>";
                var F = Run.showMenu({
                    container: C,
                    mode: a,
                    id: G + "SubMenu",
                    minWidth: B.width(),
                    host: B,
                    clsIndex: x,
                    data: n,
                    fixpos: false,
                    rulerObj: Helper.top.$("#nav"),
                    navSysClass: i,
                    navBar: true
                });
                if (F != null) {
                    F.hover(function () {
                        B.addClass("itemHover");
                        if (n.length > 0) {
                            B.addClass("itemPopupHover")
                        }
                    }, function () {
                        B.removeClass("itemHover");
                        B.removeClass("itemPopupHover")
                    })
                }
            }, function () {
                $(this).removeClass("itemHover");
                $(this).removeClass("itemHoverIndex" + x);
                $(this).removeClass("itemPopupHover");
                if ($(".navSubMenu").length == 0) {
                    $(this).removeClass("itemHover")
                }
            })
        }
    })
};
Run.removeNavHiddenMenu = function (c) {
    for (var b = c.length - 1; b >= 0; --b) {
        if (c[b].hidden) {
            c.splice(b, 1);
            continue
        }
        if (c[b].sub) {
            var a = c[b].sub;
            for (var d = a.length - 1; d >= 0; --d) {
                if (a[d].hidden) {
                    a.splice(d, 1)
                }
            }
        }
    }
};
Run.showNavItemContainer = function () {
    var b = Helper.top.$("#nav"), f = b.find(".navCenter"), k = b.width();
    if (f.length > 0) {
        f.removeAttr("style")
    }
    Run.hideNavItemContainer();
    var m = b.find(".itemContainer"), o = f.outerWidth(true), c = 0;
    var j = b.find(".item"), i = b.find(".itemSep"), a = j.css("float") === "none";
    if (a) {
        return
    }
    Helper.top.$.each(j, function () {
        c += $(this).outerWidth(true)
    });
    Helper.top.$.each(i, function () {
        c += $(this).outerWidth(true)
    });
    m.off("mouseover.navigator").on("mouseover.navigator", ".item", function () {
        var p = 0;
        m.children().each(function (q, r) {
            p += $(r).outerWidth(true)
        });
        if (p > m.width()) {
            m.css("width", p)
        }
    });
    if (Helper.isIE() || Helper.isMozilla()) {
        c += 4
    }
    var e = b.find(".itemPrev"), h = b.find(".itemNext");
    if (Helper.top._isTemplateVersion2) {
        e.css("display", "none");
        h.css("display", "none")
    }
    if (Helper.isIE6() || Helper.isIE7()) {
        k = Helper.top._navStyleData.ns.w
    }
    function l(s) {
        if (!Helper.top._cusResponsive) {
            m.css("width", c + "px")
        }
        h.css("display", "block");
        Helper.top._templateOtherStyleData.h = 0;
        var r = 0, q = 0, w = 0, v;
        if (i.is(":hidden")) {
            v = 0
        } else {
            v = i.width() / 2
        }
        var t = f.offset().left;
        var u = [];
        j.each(function (p) {
            u[p] = $(this).offset().left - t;
            q++
        });
        h.unbind("mousedown").unbind("mouseleave");
        e.unbind("mousedown").unbind("mouseleave");
        h.width(h.data("width"));
        h.mousedown(function () {
            w = u[r + 1] - u[r];
            if (r == 0) {
                w -= v
            }
            r++;
            if (r == q) {
                r = q - 1
            }
            $(this).addClass("itemNextHover");
            m.css("left", (m.position().left - w) + "px");
            if (m.position().left < 0) {
                e.css("display", "block")
            }
            if ((Math.abs(m.position().left) + s) >= c) {
                h.data("width", h.width());
                h.width(0)
            }
        }).mouseleave(function () {
            $(this).removeClass("itemNextHover")
        });
        e.mousedown(function () {
            w = u[r] - u[r - 1];
            if (r == 1) {
                w -= v
            }
            r--;
            if (r < 0) {
                r = 0
            }
            $(this).addClass("itemPrevHover");
            m.css("left", (m.position().left + w) + "px");
            if ((Math.abs(Helper.top.$("#nav .itemContainer").position().left) + s) < c) {
                h.width(h.data("width"))
            }
            if (m.position().left >= 0) {
                e.css("display", "none")
            }
        }).mouseleave(function () {
            $(this).removeClass("itemPrevHover")
        });
        h.off("mouseover.nav").on("mouseover.nav", function () {
            $(this).addClass("itemNextHover")
        });
        e.off("mouseover.nav").on("mouseover.nav", function () {
            $(this).addClass("itemPrevHover")
        })
    }

    if (c > o) {
        l(o)
    } else {
        if (Helper.top.$("#nav")[0].className && Helper.top.$("#nav")[0].className.indexOf("nav2") > -1) {
            var g = m.css("margin-left") ? m.css("margin-left").replace("px", "") : 0, d = c + parseInt(g),
                n = parseInt(d) + 10;
            f.css("width", Math.min(k, n));
            if (k === Math.min(k, n) && c > k) {
                l(k)
            }
            if (Helper.isIE11()) {
                f.css("height", m.outerHeight(true) + "px")
            }
            if (Helper.top._manageMode) {
                jzUtils.run({name: "reSaveNavCenterWidth"}, d)
            }
        }
    }
};
Run.hideNavItemContainer = function () {
    $("#nav .itemContainer").removeAttr("style");
    $("#nav").find(".itemPrev").hide();
    $("#nav").find(".itemNext").hide()
};
Run.hideNavSubMenu = function () {
    Helper.top.$.each(Helper.top.$("#nav .navCenter .item"), function (a, b) {
        $(this).unbind()
    })
};
Run.initModuleNavListGroup = function (c, b) {
    $("#module" + c + " .g_foldValueCenter").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    if (b) {
        var a = $("#module" + c).find(".formMiddle" + c).find("table.g_foldContainerContent").find(".g_foldContainerContentCenter");
        var d = a.find(".g_foldContainerName");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var h = $(this).next();
                if (h.is(":visible")) {
                    var i = $(f.find(".g_unfold")[0]);
                    i.removeClass("g_unfold").addClass("g_fold");
                    h.hide()
                } else {
                    var i = $(f.find(".g_fold")[0]);
                    i.removeClass("g_fold").addClass("g_unfold");
                    h.show()
                }
            })
        })
    }
};
Run.initModuleNavListAcrossDisplay = function (c, d, b, e) {
    var a = $("#module" + c);
    m_formMiddleWidth = a.find(".formMiddle").width(), mSOptions = {
        moduleId: c,
        clsStr: "navAcrossContainer navAPanel"
    };
    a.find(".navA_C_J .navA_J").hover(function () {
        var n = $(this), h = n.attr("_colId"), j = d[h], i = a.attr("_side"), m = a.parent(), l = a.parent().attr("id"),
            k = true;
        mSOptions.that = n;
        if (Helper.isIE6() || Helper.isIE7()) {
            k = false
        } else {
            if (i == 2) {
                k = false
            } else {
                if (i == 1) {
                    k = false
                } else {
                    if (l == "floatLeftTopForms" || l == "floatRightTopForms" || l == "floatLeftBottomForms" || l == "floatRightBottomForms") {
                        k = false
                    } else {
                        if (a.css("position") == "absolute" && m.hasClass("absForms")) {
                            k = false
                        }
                    }
                }
            }
        }
        if (j != null && j.length > 0) {
            var o = [], f = $("#navAcM" + c + "C" + h + "Panel");
            if (f.length == 0) {
                o.push("<div class='s_navList'>");
                $.each(j, function (s, r) {
                    var v = r.allowed;
                    var u = "onclick = 'Helper.ing(LS.memberLoginNoPermission, false);'";
                    if (!_isMemberLogin) {
                        v = true
                    }
                    if (v) {
                        u = " onclick = 'return true;' "
                    }
                    var q = "";
                    if (!!d[r.id]) {
                        q = " navA_more"
                    }
                    var t = "";
                    if (r.openType) {
                        t = "target='_blank';"
                    }
                    o.push("<table class='navAcrossCotent childNavA_J g_item' cellpadding='0' cellspacing='0' _colId=" + r.id + " style='*width:auto;'><tr>");
                    o.push("<td class='navAcrossCotentLeft'></td>");
                    o.push("<td class='navAcrossCotentCenter'>");
                    if (b && !!d[r.id]) {
                        o.push("<a href='javascript:void(0);' style='cursor:default;'>" + r.name + "</a></td>")
                    } else {
                        o.push("<a href='" + (v ? r.url : "javascript:void(0);") + "' " + t + u + ">" + r.name + "</a></td>")
                    }
                    o.push("<td class='navAcrossCotentRight" + q + "'></td>");
                    o.push("</tr></table>")
                });
                o.push("</div>");
                mSOptions.idStr = "navAcM" + c + "C" + h + "Panel";
                mSOptions.contentStr = o.join("");
                f = Run.moduleSubPanel(mSOptions);
                var p = n.offset().left, g = n.offset().top;
                if (!k) {
                    p += n.outerWidth()
                }
                f.css({top: g, left: p}).show()
            }
            if (k) {
                var p = a.offset().left + a.outerWidth();
                a.css("z-index", 9030);
                f.stop(true, false).animate({left: p}, 500)
            }
            f.mouseleave(function () {
                n.removeClass("g_hover")
            });
            f.mouseover(function () {
                n.addClass("g_hover")
            });
            f.find(".childNavA_J").hover(function () {
                var s = $(this), x = s.attr("_colId"), u = d[x];
                mSOptions.that = s;
                if (u != null && u.length > 0) {
                    var r = [], t = $("#navAcM" + c + "C" + x + "Panel");
                    if (t.length == 0) {
                        r.push("<div class='s_navList'>");
                        $.each(u, function (y, C) {
                            var B = C.allowed;
                            var A = "onclick = 'Helper.ing(LS.memberLoginNoPermission, false);'";
                            if (!_isMemberLogin) {
                                B = true
                            }
                            if (B) {
                                A = "onclick = 'return true;'"
                            }
                            var z = "";
                            if (C.openType) {
                                z = "target='_blank';"
                            }
                            r.push("<table class='navAcrossCotent grandNavA_J g_item' cellpadding='0' cellspacing='0' style='*width:auto;'><tr>");
                            r.push("<td class='navAcrossCotentLeft'></td>");
                            r.push("<td class='navAcrossCotentCenter'>");
                            r.push("<a href='" + (B ? C.url : "javascript:void(0);") + "' " + z + A + ">" + C.name + "</a>");
                            r.push("<td class='navAcrossCotentRight'></td>");
                            r.push("</tr></table>")
                        });
                        r.push("</div>");
                        mSOptions.idStr = "navAcM" + c + "C" + x + "Panel";
                        mSOptions.contentStr = r.join("");
                        t = Run.moduleSubPanel(mSOptions);
                        var w = s.offset().left, v = s.offset().top;
                        if (!k) {
                            w += s.outerWidth()
                        }
                        t.css({top: v, left: w}).show();
                        if (k) {
                            var q = s.offset().left + s.outerWidth();
                            t.css("z-index", 1);
                            t.stop(true, false).animate({left: q}, 500)
                        }
                    }
                    t.find(".grandNavA_J").hover(function () {
                        $(this).addClass("g_hover")
                    }, function () {
                        $(this).removeClass("g_hover")
                    });
                    t.mouseleave(function () {
                        f.attr("_mouseIn", 0);
                        n.removeClass("g_hover");
                        s.removeClass("g_hover")
                    });
                    t.mouseover(function () {
                        f.attr("_mouseIn", 1);
                        n.addClass("g_hover");
                        s.addClass("g_hover")
                    });
                    s.mouseleave(function () {
                        f.attr("_mouseIn", 0)
                    })
                }
                s.addClass("g_hover")
            }, function (q) {
                $(this).removeClass("g_hover")
            })
        }
        n.addClass("g_hover")
    }, function (f) {
        $(this).removeClass("g_hover")
    }).mouseleave(function () {
        a.css("z-index", "")
    });
    Run.initContentSplitLine(c, e)
};
Run.onRunFixTop = function () {
    if (Helper.top._navHidden) {
        return
    }
    var d, q = false, c = false, k = false, A = Helper.isIE6(), z = Helper.isIE7(), r = Helper.top.$("#nav"),
        C = Helper.top.$(window), w = Helper.top.$("#g_main"), i = Helper.top.$("#web"), t = Helper.top.$("body"),
        a = Helper.top.$(".webNavTable"), j = Helper.top.$(".webHeaderTable"), m = Helper.top.$(".webBannerTable"),
        p = Helper.top.$(".floatLeftTop"), e = r.parent(), u = Helper.top.$("#sitetips"), o = Helper.top.$("#webBanner"),
        b = Helper.top.$("#webHeader"), l = Helper.top.$("#webNav"), s, n = parseInt(r.css("top").replace("px", "")),
        D = r.offset().top, y = u.height() || 0, h = D - y, g = p.css("top").replace("px", "") || 0,
        x = Helper.top.$(window), F = x;
    if (A || z) {
        c = true;
        F = w
    }
    if (isNaN(n)) {
        n = "auto"
    } else {
        n = n + "px"
    }
    var v;
    if (r.width() == i.width()) {
        k = true;
        v = "100%"
    } else {
        v = r.width() + "px"
    }
    var f = r.offset().left - e.offset().left;
    var B, E;
    F.on("scroll.nav", function () {
        var H = F.scrollTop(), G = parseInt(p.css("top").replace("px", "")) - 1;
        g = G || 0;
        d = Run.getNavInClientPosition(r).left;
        if (!q && h < H) {
            if (A) {
                B = r.parent();
                E = r.offset().left - B.offset().left;
                t.prepend(r);
                r.css({position: "absolute", left: d + "px", top: g + "px", width: v});
                r.css("width", v)
            } else {
                r.addClass("navfixtop");
                r.css({width: v, left: d + "px", top: g + "px"});
                if (k && i.width() > C.width()) {
                    r.css("width", i.width() + "px")
                }
                if (a.find("#nav").length > 0) {
                    s = a
                } else {
                    if (j.find("#nav").length > 0) {
                        s = j
                    } else {
                        if (m.find("#nav").length > 0) {
                            s = m
                        }
                    }
                }
                s.css({zIndex: "30", position: "relative"});
                o.addClass("fix-zIndex");
                b.addClass("fix-zIndex");
                l.addClass("fix-zIndex")
            }
            q = true
        }
        if (q && h >= H) {
            if (A) {
                e.append(r);
                r.css({position: "", width: "", left: "", top: "", zIndex: ""})
            } else {
                r.removeClass("navfixtop");
                r.css({position: "", width: "", left: "", top: ""});
                if (s) {
                    s.css("zIndex", "")
                }
                o.removeClass("fix-zIndex");
                b.removeClass("fix-zIndex");
                l.removeClass("fix-zIndex")
            }
            q = false
        }
    });
    Helper.top.$(window).on("resize.nav", function () {
        if (A && !k && r.offset().top == 0) {
            r.css("left", B.offset().left + E)
        } else {
            if (r.hasClass("navfixtop") && k) {
                if (i.width() < C.width()) {
                    r.css("width", "")
                } else {
                    if (i.width() > C.width()) {
                        setTimeout(function () {
                            r.css("width", i.width() + "px")
                        }, 0)
                    }
                }
            }
            if (r.hasClass("navfixtop") && !k) {
                setTimeout(function () {
                    r.css("left", e.offset().left + f)
                }, 0)
            }
        }
    })
};
Run.getNavInClientPosition = function (b) {
    var a = b[0];
    if (typeof a.getBoundingClientRect !== "undefined") {
        return a.getBoundingClientRect()
    } else {
        var c = Helper.top._manageMode ? Helper.top.$("#g_main") : Helper.top.$(window), e = {left: 0, right: 0},
            d = a.offsetParent;
        e.left = a.offsetLeft;
        e.top = a.offsetTop;
        while (d !== null) {
            e.left += d.offsetLeft;
            e.top += d.offsetTop;
            d = d.offsetParent
        }
        if (b.css("position") == "fixed") {
            e.top = b.css("top")
        }
        return {left: e.left - c.scrollLeft(), top: e.top - c.scrollTop()}
    }
};
Run.onNavCntPositionFixTop = function () {
    if (Helper.top._navHidden || !Helper.top._navStyleData.no) {
        return
    }
    if (Helper.top._manageMode) {
        Run.onManageFixTop()
    } else {
        Run.onRunFixTop()
    }
};
(function () {
    if (Helper.top != window) {
        return
    }
    var g = Helper.top.window.location.hash, d, f, b;
    var c = 0;
    var e;
    var h = $("#module" + e);
    var a = $("#nav a");
    f = Helper.top._manageMode ? "#g_main" : Helper.top.window;
    $(f).bind("scroll", function () {
        a.each(function () {
            e = $(this).attr("_module");
            if (e != null && e != undefined) {
                h = $("#module" + e);
                if (h.length > 0) {
                    var j = h[0].getBoundingClientRect().top;
                    var l = $(window).height();
                    var k = h.height();
                    var i;
                    if (j >= 0) {
                        i = (j < l) && (l - j) >= (k * 0.6);
                        if (i) {
                            $(this).parents(".item").addClass("itemSelected");
                            $(this).parents(".item").siblings().removeClass("itemSelected")
                        }
                    } else {
                        j = Math.abs(j);
                        i = (j < k) && (k - j) >= (k * 0.6);
                        if (i) {
                            $(this).parents(".item").addClass("itemSelected");
                            $(this).parents(".item").siblings().removeClass("itemSelected")
                        }
                    }
                }
            }
        })
    });
    $("#g_main").bind("scroll", function () {
        a.each(function () {
            e = $(this).attr("_module");
            if (e != null && e != undefined) {
                h = $("#module" + e);
                if (h.length > 0) {
                    var j = h[0].getBoundingClientRect().top;
                    var l = $(window).height();
                    var k = h.height();
                    var i;
                    if (j >= 0) {
                        i = (j < l) && (l - j) >= (k * 0.6);
                        if (i) {
                            $(this).parents(".item").addClass("itemSelected");
                            $(this).parents(".item").siblings().removeClass("itemSelected")
                        }
                    } else {
                        j = Math.abs(j);
                        i = (j < k) && (k - j) >= (k * 0.6);
                        if (i) {
                            $(this).parents(".item").addClass("itemSelected");
                            $(this).parents(".item").siblings().removeClass("itemSelected")
                        }
                    }
                }
            }
        })
    })
})();
Run.initModulePhotoSwitch = function (x, D, A, z) {
    var d = Helper.top.$("#module" + x), f = d.find(".formMiddleContent"), m = !D.picScale, v = f.width(), q = f.height(),
        e = D.data, b;
    d.data("photoSwitchData", D);
    d.data("photoSwitchType", A);
    if (z !== "carouselPhotos") {
        if (!m && !D.cusPicSize) {
            for (var t in e) {
                b = e[t];
                b.width = v;
                b.height = q
            }
        }
    }
    if (A == 1) {
        var B = $("#photoSwitch" + x);
        B.css("margin", "0 auto");
        var r = f.width();
        var w = {id: x, switchType: "1", width: r, photoSwitch: B};
        Run.formMiddleContentWidthArray.push(w);
        B.imageSwitch(D);
        if (f.width() < B.width()) {
            B.css("width", f.width())
        }
        var n = B.find(".imageSwitchShowName").eq(0);
        var o = B.find(".imageSwitchBtnArea").eq(0);
        if (o.width() / B.width() >= 0.4) {
            B.find(".spanHiddenName").each(function () {
                $(this).css("width", ((1 - (o.width() + 20) / B.width()) * 100) + "%")
            })
        }
        o.css("bottom", "5px");
        var p = o[0].getBoundingClientRect().left;
        var j = B[0].getBoundingClientRect().left;
        o.width((o.width() + 5) + "px");
        o.css("top", "auto");
        if (n.find(".spanHiddenName") && n.css("display") == "block") {
            n.css("height", "auto");
            if (z == "carouselPhotos") {
                n.find(".spanHiddenName").each(function () {
                    var a = $(this).text();
                    if (a == "") {
                        $(this).css("height", "30px")
                    }
                });
                n.css({
                    top: "auto",
                    bottom: "0",
                    width: B.width() + "px",
                    "margin-left": "2px",
                    "margin-bottom": "2px"
                });
                o.css("bottom", "8px")
            } else {
                n.css({top: "auto", bottom: "0", "padding-bottom": "15px", width: "100%"})
            }
        }
        if (n.find(".spanHiddenName").length == 1) {
            n.css({"padding-bottom": "0", "margin-left": ""})
        }
        var c = B.find(".spanHiddenName").length;
        for (var t = 0; t < c; t++) {
            var u = B.find(".spanHiddenName").eq(t);
            u.css("max-width", "98%");
            if (D.switchWrapName == true) {
                n.css("padding-bottom", "0px");
                u.css({"word-wrap": "break-word", width: "auto"});
                if (Helper.isIE6() || Helper.isIE7()) {
                    if (c > 1) {
                        u.css("padding-bottom", "15px")
                    }
                } else {
                    var h = false;
                    if (u.css("display") == "none") {
                        u.addClass("spanShowName");
                        h = true
                    }
                    var C = j + u[0].clientWidth + 10;
                    if (h) {
                        u.removeClass("spanShowName")
                    }
                    if (p - C >= 5) {
                        u.css({"padding-top": "2px", "padding-bottom": "0px", bottom: "0px"});
                        if (z == "carouselPhotos" && u.text() == "") {
                            u.css("padding-bottom", "30px")
                        }
                    } else {
                        if (c > 1) {
                            u.css("padding-bottom", "15px")
                        }
                    }
                }
            } else {
                if (c == 1) {
                    n.css("padding-bottom", "15px");
                    u.css({"white-space": "nowrap", width: "99%", "padding-top": "2px"})
                } else {
                    if ((o.width() + 20) / B.width() < 0.4) {
                        u.css({"white-space": "nowrap", width: "60%", "padding-top": "2px"})
                    } else {
                        u.css({"white-space": "nowrap", "padding-top": "2px"})
                    }
                }
            }
            if (Helper.isIE6()) {
                for (var y = 0; y < Run.formMiddleContentWidthArray.length; y++) {
                    if (Run.formMiddleContentWidthArray[y].switchType == 1) {
                        $("#photoSwitch" + Run.formMiddleContentWidthArray[y].id).css("width", Run.formMiddleContentWidthArray[y].width + "px")
                    }
                }
            }
        }
    } else {
        if (A == 2) {
            var g = $("#photoDotSwitch" + x);
            var r = f.width();
            var w = {id: x, switchType: "2", width: r, photoDotSwitch: g};
            Run.formMiddleContentWidthArray.push(w);
            g.imageSwitch(D);
            var n = g.find(".imageSwitchShowName").eq(0);
            var l = g.find(".imageSwitchBtnArea").eq(0);
            var s = 0;
            l.css("left", "");
            if (l.width() > g.width()) {
                l.find(".imageSwitchBtn_dot").each(function () {
                    $(this).css("marginRight", 2 + "px")
                });
                if (l.width() > g.width()) {
                    s = 1;
                    l.css("marginLeft", "-" + l.width() / 2 + "px")
                }
            }
            if (s == 0) {
                l.css("marginLeft", "-" + l.width() / 2 + "px");
                l.css("left", "50%")
            }
            if (f.width() < g.width()) {
                g.css("width", f.width())
            }
            if (n.css("display") == "block" && n.find(".spanHiddenName")) {
                if (z == "carouselPhotos") {
                    n.css({height: "auto", top: "auto", bottom: "0", "padding-bottom": "27px"});
                    var k = g.width() - 44;
                    n.css({"margin-left": "2px", "margin-bottom": "2px", width: "auto"});
                    n.find(".spanHiddenName").each(function () {
                        $(this).css({margin: "0px 22px", width: k})
                    });
                    l.css({"text-align": "center", left: "0", right: "0", "margin-left": "10px"});
                    l.find(".imageSwitchBtn_dot").css("float", "none");
                    l.css("padding-bottom", "2px")
                } else {
                    n.css({height: "auto", top: "auto", bottom: "0", "padding-bottom": "15px"});
                    n.find(".spanHiddenName").each(function () {
                        $(this).css("marginLeft", "0px")
                    });
                    n.width("100%")
                }
            }
            if (n.find(".spanHiddenName").length == 1) {
                n.css({"padding-bottom": "0", "margin-left": ""})
            }
            var c = g.find(".spanHiddenName").length;
            for (var t = 0; t < c; t++) {
                var u = g.find(".spanHiddenName").eq(t);
                if (D.switchWrapName == true) {
                    u.css("word-wrap", "break-word")
                } else {
                    u.css("white-space", "nowrap")
                }
            }
            if (Helper.isIE6()) {
                for (var y = 0; y < Run.formMiddleContentWidthArray.length; y++) {
                    if (Run.formMiddleContentWidthArray[y].switchType == 2) {
                        $("#photoDotSwitch" + Run.formMiddleContentWidthArray[y].id).css("width", Run.formMiddleContentWidthArray[y].width + "px");
                        if (Run.formMiddleContentWidthArray[y].width < 300) {
                            l.css("align", "center");
                            l.css("width", Run.formMiddleContentWidthArray[y].width + "px")
                        }
                    }
                }
            }
        }
    }
};
Run.refreshModulePhotoSwitch = function (b) {
    var c = Helper.top.$("#module" + b);
    if (c.length > 0) {
        var a = c.data("photoSwitchData");
        var d = c.data("photoSwitchType");
        if (d == 1) {
            c.find("#photoSwitch" + b).empty()
        } else {
            if (d == 2) {
                c.find("#photoDotSwitch" + b).empty()
            }
        }
        if (typeof a != "undefined") {
            Run.initModulePhotoSwitch(b, a, d)
        }
    }
};
Run.loadPhotoMarquee = function (u, F, C, n, x) {
    var e = Helper.top["Photo" + u].ieOpt, h = Helper.top["Photo" + u].tgOpt, o = Helper.top["Photo" + u].callbackArgs;
    var b = $("#module" + u);
    if (Helper.isNull(b)) {
        return
    }
    if (x == "listPhotos") {
        C = 1
    }
    b.find(".demo0>div").each(function () {
        if ($(this).attr("cloneDiv")) {
            $(this).remove()
        }
    });
    var w = 0;
    var t = b.find(".photoMarqueeForm");
    if (!C) {
        t.each(function () {
            var H = $(this).attr("faiWidth");
            var G = $(this).attr("faiHeight");
            if (Helper.isNull(G)) {
                return
            }
            var L = $(this).find(".imgDiv");
            var K = L.width();
            var I = L.height();
            var J = Helper.Img.calcSize(H, G, K, I, Helper.Img.MODE_SCALE_FILL);
            if (J.height > w) {
                w = J.height
            }
        })
    }
    if (e.effType >= 4 && e.effType < 6) {
        Run.clearImageEffectContent_photo("module" + u, "propDiv")
    }
    var d = 0;
    var i = 0;
    var D = 0;
    var g = 0;
    var B = 0;
    var p = 0;
    var E = Run.getFormMiddleContentHeight(b, u);
    t.each(function () {
        var I = $(this);
        var R = I.attr("faiHeight");
        if (Helper.isNull(R)) {
            return
        }
        var Q = I.attr("faiWidth");
        var V = I.find(".imgDiv");
        var S = V.width();
        if (C) {
            w = V.height()
        }
        var P = {width: S, height: w};
        var O = V.find(".J_photoImgPanel");
        var M = V.find("img");
        if (F == 2) {
            var N = M.attr("iWidth");
            var H = M.attr("iHeight");
            var L = N / H;
            var K = S / w;
            if (K <= L) {
                M.css("width", L * w + "px");
                M.css("height", w + "px");
                M.css("marginTop", "");
                M.css("marginLeft", ((S - L * w) / 2) + "px");
                O.css({width: S, height: w, position: "relative", overflow: "hidden"})
            } else {
                M.css("height", S / L + "px");
                M.css("width", S + "px");
                M.css("marginLeft", "");
                M.css("marginTop", ((w - S / L) / 2) + "px");
                O.css({width: S, height: w, position: "relative", overflow: "hidden"})
            }
        } else {
            if (typeof F == "number") {
                F = !!!F
            }
            if (F) {
                if (C) {
                    P = Helper.Img.calcSize(Q, R, S, w, Helper.Img.MODE_SCALE_FILL)
                } else {
                    P = Helper.Img.calcSize(Q, R, S, w, Helper.Img.MODE_SCALE_DEFLATE_HEIGHT)
                }
            }
            if (O.length > 0) {
                O.css({
                    marginLeft: "",
                    marginTop: "",
                    width: P.width + "px",
                    height: P.height + "px",
                    position: "relative",
                    overflow: "hidden",
                    margin: "0 auto"
                });
                M.css("marginLeft", "").css("marginTop", "")
            }
            M.css("width", P.width + "px");
            M.css("height", P.height + "px")
        }
        var J = V.width();
        if (J < P.width) {
            J = P.width
        }
        var U = I.find(".propDiv");
        if (U.width() != J) {
            U.css("width", J + "px")
        }
        if (V.width() != J) {
            V.css("width", J + "px")
        }
        if (V.height() != w) {
            V.css("height", w + "px");
            if ($.browser.msie && $.browser.version == 6) {
                V.addClass("wocaie6").removeClass("wocaie6")
            }
        }
        if (I.height() > g && (n == 0 || n == 1)) {
            g = $(this).height()
        }
        if (E > g && (n == 2 || n == 3)) {
            g = E
        }
        var G = I.outerWidth(true);
        var T = I.outerHeight(true);
        if (G > B) {
            B = G
        }
        d += G
    });
    i = d;
    if ($(".photoMarqueeForm").length > 0) {
        Run.unifiedAttrVal(b, ".photoMarqueeForm", "height")
    }
    var m = b.find(".demo");
    var A = b.find(".demo0");
    D = A.outerHeight();
    if (g > 0) {
        m.css("height", g + "px")
    }
    if (n == 0 || n == 1) {
        A.css("width", d + "px");
        var a = m.width(), z = A.width();
        if (z <= a) {
            jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
                moduleId: u,
                imgEffOption: e,
                tagetOption: h,
                callback: Run.createImageEffectContent_photo,
                callbackArgs: o
            });
            return
        }
    }
    if (n == 2 || n == 3) {
        var g = m.height(), j = A.height();
        if (j <= g) {
            jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
                moduleId: u,
                imgEffOption: e,
                tagetOption: h,
                callback: Run.createImageEffectContent_photo,
                callbackArgs: o
            });
            return
        }
    }
    if (t.length == 0) {
        return
    }
    var k = t.first().outerWidth(true);
    if (k == 0) {
        return
    }
    var s = 0, c = t.length - 1;
    t.each(function (H, I) {
        if (s > a) {
            return false
        }
        var G = $(I).clone().attr("cloneDiv", "true");
        tmpId = G.children("div.imgDiv").attr("id");
        G.children("div.imgDiv").attr("id", tmpId + "_clone");
        if (0 === H && (n == 2 || n == 3)) {
            $(I).css("clear", "both");
            G.css("clear", "both")
        }
        if (Helper.isIE6() || Helper.isIE7()) {
            if (H === c) {
                $(t[H]).after('<div style="clear:both;"></div>');
                G.after('<div style="clear:both;"></div>')
            }
        }
        A.append(G);
        s += G.outerWidth(true)
    });
    var r = d + s;
    if (n == 0 || n == 1) {
        A.css("width", r + "px")
    }
    function y() {
        d--;
        m.scrollLeft(d);
        if (d == 0) {
            m.scrollLeft(i);
            d = i
        }
    }

    function f() {
        var G = m.scrollLeft();
        G++;
        m.scrollLeft(G);
        if (G == d) {
            m.scrollLeft(0)
        }
    }

    function v() {
        var G = m.scrollTop();
        G--;
        m.scrollTop(G);
        if (G == 0) {
            m.scrollTop(D)
        }
    }

    function l() {
        var G = m.scrollTop();
        G++;
        m.scrollTop(G);
        if (G == D) {
            m.scrollTop(0)
        }
    }

    if (n == 0) {
        m.scrollLeft(2 * d);
        Helper.addInterval("marquee" + u, y, 35)
    } else {
        if (n == 1) {
            Helper.addInterval("marquee" + u, f, 35)
        } else {
            if (n == 2) {
                m.scrollTop(2 * D);
                Helper.addInterval("marquee" + u, v, 35)
            } else {
                if (n == 3) {
                    Helper.addInterval("marquee" + u, l, 35)
                }
            }
        }
    }
    m.mouseover(function () {
        Helper.stopInterval("marquee" + u)
    }).mouseleave(function () {
        Helper.startInterval("marquee" + u)
    });
    setTimeout(function () {
        Helper.startInterval("marquee" + u)
    }, 100);
    if (!b.data("first1")) {
        b.data("first1", true);
        b.data("options", {id: u, scale: F, fixHeight: C, phoMarqueeDirection: n, flag: x})
    }
    if (b.data("first2") && Helper.top._manageMode) {
        var q = b.data("photoOptions");
        Run.initModulePhotoListItemManage(q);
        if (x == "listPhotos") {
            Run.moduleListPhotosItemManage.init(q)
        }
    }
    jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
        moduleId: u,
        imgEffOption: e,
        tagetOption: h,
        callback: Run.createImageEffectContent_photo,
        callbackArgs: o
    });
    Run.restartPhotoMarquee(b)
};
Run.restartPhotoMarquee = function (a) {
    if (!a.data("first2")) {
        a.data("first2", true);
        a.on("Helper_onModuleSizeChange", function () {
            var b = a.data("options");
            Helper.stopInterval("marquee" + b.id);
            Run.loadPhotoMarquee(b.id, b.scale, b.fixHeight, b.phoMarqueeDirection, b.flag)
        });
        a.on("Helper_onModuleLayoutChange", function () {
            var b = a.data("options");
            Helper.stopInterval("marquee" + b.id);
            Run.loadPhotoMarquee(b.id, b.scale, b.fixHeight, b.phoMarqueeDirection, b.flag)
        })
    }
};
Run.getFormMiddleContentHeight = function (b, a) {
    var m = b.height(), f = b.find(".formTop").first(), e = b.find(".formBanner" + a).first(),
        i = b.find(".formMiddle").first(), k = b.find(".formBottom").first(), c = 0;
    if (f.css("display") != "none") {
        c = f.outerHeight(true)
    }
    var j = 0;
    if (e.css("display") != "none") {
        j = e.outerHeight(true)
    }
    var h = 0;
    if (k.css("display") != "none") {
        h = k.outerHeight(true)
    }
    var g = m - c - j - h - Helper.getFrameHeight(i);
    var l = i.find(".formMiddleCenter").first();
    g = g - Helper.getFrameHeight(l);
    var d = i.find(".formMiddleContent").first();
    g = g - Helper.getFrameHeight(d);
    return g
};
Run.loadPhotoGallery = function (w) {
    var M = w.id, J = w.scale, f = w.cus;
    var K = w.flag;
    var d = $("#" + M), a = d.find("div.photo-container");
    if (w.effType >= 4 && w.effType < 6) {
        Run.clearImageEffectContent_photo(w.id, "prop-container")
    }
    if (K == "listPhotos") {
        f = 1
    }
    if (a.length != 0) {
        for (var aa = 0; aa < a.length; aa++) {
            if (K == "listPhotos") {
                if ($(a[aa]).children().hasClass("J_sortDiv")) {
                    $(a[aa]).children().children().unwrap()
                }
            }
            var Y = $(a[aa]).children("div.img-container"), m = Y.width(), H = Y.height();
            var l = Y.find("img"), F = l.attr("fHeight"), B = l.attr("fWidth"), S = Y.find(".J_photoImgPanel");
            if (J == 2) {
                var ab = l.attr("iWidth");
                var b = l.attr("iHeight");
                var X = ab / b;
                var r = m / H;
                if (r <= X) {
                    l.css("width", X * H + "px");
                    l.css("height", H + "px");
                    l.css("marginTop", "");
                    l.css("marginLeft", ((m - X * H) / 2) + "px");
                    S.css({width: m, height: H, position: "relative", overflow: "hidden"})
                } else {
                    l.css("height", m / X + "px");
                    l.css("width", m + "px");
                    l.css("marginLeft", "");
                    l.css("marginTop", ((H - m / X) / 2) + "px");
                    S.css({width: m, height: H, position: "relative", overflow: "hidden"})
                }
            } else {
                var k = Helper.Img.calcSize(B, F, m, H, Helper.Img.MODE_SCALE_FILL);
                if (typeof J == "number") {
                    J = !!!J
                }
                if (S.length > 0) {
                    if (J) {
                        S.css({
                            marginLeft: "",
                            marginTop: "",
                            width: k.width + "px",
                            height: k.height + "px",
                            position: "relative",
                            overflow: "hidden",
                            margin: "0 auto"
                        })
                    } else {
                        S.css({
                            marginLeft: "",
                            marginTop: "",
                            width: m + "px",
                            height: H + "px",
                            position: "relative",
                            overflow: "hidden",
                            margin: "0 auto"
                        })
                    }
                    l.css("marginLeft", "").css("marginTop", "")
                }
                if (J) {
                    l.width(k.width);
                    l.height(k.height)
                } else {
                    l.width(m);
                    l.height(H)
                }
            }
        }
        var O = d.find(".gallery-control"), p = d.find(".gallery-control-prev"), U = d.find(".gallery-control-next"),
            L = p.height(), e = p.width();
        var R = a.first(), V = R.children("div.img-container"), C = V.outerWidth(true), t = V.outerHeight(true),
            A = R.children("div.prop-container"), h = 0;
        if (A.length > 0) {
            h = A.first().outerHeight(true) * A.length
        }
        var D = t + h;
        a.height(D);
        a.width(C);
        a.find("div.prop-container").width(C);
        var z = d.find("div.photo-gallery-preview");
        z.height(D);
        var y = d.find("div.photo-gallery-inner"), o = y.outerHeight();
        if (o < L) {
            var N = y.height(), T = o - N;
            var Q = Math.ceil((L - o) / 2);
            var q = Math.ceil(T / 2) + Q;
            y.css("padding-top", q + "px").css("padding-bottom", q + "px")
        }
        var I = (y.outerHeight() / 2) - (L / 2);
        O.css("top", I + "px");
        var c = 1, ac = p.innerWidth() - e, E = d.find("div.formMiddleContent").width(), s = E - ac - (e * 2),
            ae = R.outerWidth(true), W = R.outerWidth(), g = ae - W;
        if (s > ae) {
            c = parseInt(s / ae)
        }
        var G = (c * ae) - g;
        z.width(G);
        var ad = a.length;
        var u = ad % c == 0 ? ad / c : Math.floor(ad / c) + 1;
        d.find("div.photo-gallery-container").width(ad * ae);
        var n = a.length < c ? a.length : c;
        for (var Z = 0; Z < n; Z++) {
            var l = $(a[Z]).find("img");
            if (!l.attr("src")) {
                l.attr("src", l.attr("lzurl"))
            }
            l.show()
        }
        d.find(".photo-gallery-inner").mouseover(function () {
            if (u > 1) {
                O.css("display", "block")
            }
        }).mouseleave(function () {
            O.css("display", "none")
        });
        p.addClass("gallery-control-prev-disabled");
        if (u == 1) {
            U.addClass("gallery-control-next-disabled")
        }
        p.click(function () {
            var x = $(this);
            if (x.hasClass("gallery-control-prev-disabled")) {
                return false
            }
            var af = x.parent(), j = af.find("div.photo-gallery-container"), ag = af.find(".gallery-control-next");
            if (ag.hasClass("gallery-control-next-disabled")) {
                ag.removeClass("gallery-control-next-disabled")
            }
            if (j.position().left == 0 || j.is(":animated")) {
                return false
            }
            var i = G + g;
            j.animate({left: "+=" + i + "px"}, function () {
                if (j.position().left == 0) {
                    x.addClass("gallery-control-prev-disabled")
                }
            })
        });
        U.click(function () {
            var ak = $(this);
            if (ak.hasClass("gallery-control-next-disabled")) {
                return false
            }
            var af = ak.parent(), i = af.find("div.photo-gallery-container"), x = af.find(".gallery-control-prev");
            if (x.hasClass("gallery-control-prev-disabled")) {
                x.removeClass("gallery-control-prev-disabled")
            }
            var al = G + g, am = -(u - 1) * (al);
            left_position = parseInt(i.css("left").replace("px"));
            if (left_position == am || i.is(":animated")) {
                return false
            }
            if (!ak.data("loading_finish")) {
                var aj = (Math.abs(left_position) / (ae * c)) + 1;
                var j = aj <= 1 ? 1 * c : aj * c, ah = j + c > a.length ? a.length : j + c;
                for (var ag = j; ag < ah; ag++) {
                    var ai = $($(a[ag]).find("img")[0]);
                    if (!ai.attr("src")) {
                        ai.attr("src", ai.attr("lzurl"))
                    }
                    ai.show()
                }
            }
            i.animate({left: "-=" + al + "px"}, function () {
                var an = parseInt(i.css("left").replace("px", ""));
                if (an == am) {
                    ak.data("loading_finish", true);
                    ak.addClass("gallery-control-next-disabled")
                }
            })
        })
    } else {
        var P = d.find("div.addNoProTips");
        d.find("div.photo-gallery").height(100).html(P)
    }
    if (d.find(".prop-wordwrap-container").length > 0) {
        d.find(".photo-container").height("auto");
        var v = 0;
        d.find(".photo-container").each(function () {
            var i = $(this).height();
            if (i > v) {
                v = i
            }
        });
        d.find(".photo-container").each(function () {
            $(this).height(v)
        });
        d.find(".photo-gallery-preview").height(v);
        Run.unifiedAttrVal(d, ".prop-wordwrap-container", "height")
    }
    if (K == "listPhotos") {
        if (a.length != 0) {
            for (var aa = 0; aa < a.length; aa++) {
                if ($(a[aa]).children().hasClass("J_sortDiv")) {
                    return false
                } else {
                    $(a[aa]).children().wrapAll("<div class='J_sortDiv'></div>")
                }
            }
        }
        if (p && p.length > 0) {
            p.hover(function () {
                if (!$(this).hasClass("gallery-control-prev-disabled")) {
                    $(this).addClass("g_hover")
                }
            }, function () {
                $(this).removeClass("g_hover")
            })
        }
        if (p && U.length > 0) {
            U.hover(function () {
                if (!$(this).hasClass("gallery-control-next-disabled")) {
                    $(this).addClass("g_hover")
                }
            }, function () {
                $(this).removeClass("g_hover")
            })
        }
    }
};
var isInShareContent = false;
Run.loadPhotoResultMarquee = function (f) {
    var m = f.id, t = f.scale;
    var c = $("#module" + m);
    var s = c.find(".J_imgDiv");
    var r = c.find(".showPhotoContent");
    var p = c.find(".photoMarquee");
    var a = s.outerWidth(true);
    var o = parseInt(r.width() / a);
    s = c.find(".J_imgDiv");
    var e = a * s.length;
    p.width(e);
    var q = e / 2;
    if (r.width() < p.width()) {
        Helper.addInterval("marquee" + m, h, 35)
    }
    s.hover(function () {
        Helper.stopInterval("marquee" + m);
        s.removeClass("J_selectedDiv");
        $(this).addClass("J_selectedDiv");
        var u = $(this).find("img");
        $(this).find(".imgMask").show();
        d(u)
    }, function () {
        Helper.startInterval("marquee" + m);
        $(this).find(".imgMask").hide()
    });
    function d(B) {
        var v = B.attr("bigpicurl");
        var F = B.attr("bigpicwidth");
        var w = B.attr("bigpicheight");
        var E = B.attr("_href");
        var C = B.data("basic");
        var x = $("#module" + m);
        var z = x.find(".J_photoBasicContent");
        if (C) {
            z.show();
            z.html(C);
            z.attr("title", C)
        } else {
            z.hide()
        }
        var D = x.find(".photoGroupUp .imgContainer img");
        var u = x.find(".photoGroupUp .imgContainer a");
        if (!t) {
            var G = Helper.Img.calcSize(F, w, 852, 453, Helper.Img.MODE_SCALE_FILL);
            D.width(G.width);
            D.height(G.height);
            if (G.height < 452) {
                D.css("margin-top", (452 - G.height) / 2)
            } else {
                D.css("margin-top", 0)
            }
            z.width(G.width - 240);
            var y = D.position();
            z.css("left", y.left)
        } else {
            D.width(x.width());
            D.css("height", "452px");
            z.width(x.width() - 240)
        }
        var A = D.attr("src");
        if (A != v) {
            D.attr("src", v);
            D.attr("alt", B.attr("alt"))
        }
        if ($.trim(E) == "") {
            u.attr("href", "javascirpt:void(0)")
        } else {
            u.attr("href", E)
        }
    }

    var k = c.find(".J_photoShowPrev");
    k.click(function () {
        var v = c.find(".J_selectedDiv").prev();
        if (v.length == 0 || !v.hasClass("J_imgFirst")) {
            v = c.find(".J_imgFirst:last")
        }
        s.removeClass("J_selectedDiv");
        $(v).addClass("J_selectedDiv");
        var u = $(v).find("img");
        d(u)
    });
    var l = c.find(".J_photoShowNext");
    l.click(function () {
        var v = c.find(".J_selectedDiv").next();
        if (v.length == 0 || !v.hasClass("J_imgFirst")) {
            v = c.find(".J_imgFirst:first")
        }
        s.removeClass("J_selectedDiv");
        $(v).addClass("J_selectedDiv");
        var u = $(v).find("img");
        d(u)
    });
    s.eq(0).mouseover().mouseleave();
    Helper.startInterval("marquee" + m);
    var r = c.find(".showPhotoContent");

    function h() {
        var u = r.scrollLeft();
        u++;
        r.scrollLeft(u);
        if (u == q) {
            r.scrollLeft(0)
        }
    }

    var g = false;
    var i = c.find(".J_showList"), j = c.find(".J_shareContent"), n = c.find(".J_shareListMore");
    i.mouseover(function () {
        j.show();
        i.addClass("showList-hover");
        g = true;
        n.addClass("shareListMore-hover")
    });
    i.mouseleave(function () {
        setTimeout("if(!isInShareContent){$('.J_shareContent').hide();$('.J_showList').removeClass('showList-hover');$('.J_shareListMore').removeClass('shareListMore-hover')}");
        g = false
    });
    j.mouseover(function () {
        isInShareContent = true
    });
    j.mouseleave(function () {
        isInShareContent = false;
        if (!g) {
            j.hide();
            i.removeClass("showList-hover");
            n.removeClass("shareListMore-hover")
        }
    });
    var b = c.find(".pageDiv");
    b.mouseover(function () {
        b.addClass("pageDiv-hover")
    });
    b.mouseleave(function () {
        b.removeClass("pageDiv-hover")
    })
};
Run.loadPhotoSmallPic = function (e) {
    var m = e.id, A = e.scale, d = e.cus;
    var t = e.flag;
    var c = $("#" + m);
    c.on("Helper_onModuleSizeChange", function () {
        Run.smallPicPhotoModuleFix(m, t)
    });
    c.on("Helper_onModuleLayoutChange", function () {
        Run.smallPicPhotoModuleFix(m, t)
    });
    var z = c.find("div.photoSmallPicBox");
    var r = c.find(".photoSmallPicUpForms").height();
    var n = c.find(".photoSmallPicDownForms").height();
    c.find(".photoSmallPicForms").height(r + n);
    var y = c.find(".photoSmallPicForms").width();
    c.find(".photoSmallPicUpForms").width(y);
    c.find(".photoSmallPicUpFormsMid").width(y);
    c.find(".photoSmallPicDownForms").width(y);
    var o = c.find(".photoSmallPrePic_control").outerWidth(true);
    c.find(".photoSmallPicDownFormsMid").css("width", y - 2 * o - 20 + "px");
    var k = c.find(".photoSmallPrePicContainer");
    var a = c.find(".photoSmallPrePicOuter").outerWidth(true);
    var x = 0;
    if (Helper.isIE6()) {
        x = 2
    }
    k.width(a * z.length + x);
    var f = k.width();
    var b = c.find(".photoSmallPicDownFormsMid").width();
    if (c.hasClass("formStyle93") && f < b) {
        k.css("margin-left", (b - f) / 2 + "px")
    }
    var u = c.find(".photoSmallPicUpFormsMid").outerHeight() / 2 - 46;
    c.find(".photoSmallPic_control").css("top", u + "px");
    var w = z.length;
    var i = Math.floor(b / a) + 1;
    var v = w % i == 0 ? w / i : Math.floor(w / i) + 1;
    if (v == 1 && b < k.width()) {
        v = 2
    }
    var l = z.length < i ? z.length : i;
    for (var s = 0; s < l; s++) {
        var B = $(z[s]).find("img");
        Run.loadPhotoSmallPicItem(B, t)
    }
    var p = c.find(".photoSmallPicDownForms a.g_imgPrev"), q = c.find(".photoSmallPicDownForms a.g_imgNext"),
        g = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_left"),
        h = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_right");
    p.addClass("photoSmallPic-control-prev-disabled");
    if (v == 1) {
        q.addClass("photoSmallPic-control-next-disabled")
    }
    g.addClass("photoBigPic-control-prev-disabled");
    if (w == 1) {
        h.addClass("photoBigPic-control-next-disabled")
    }
    c.find(".photoSmallPicUpFormsMid").mouseover(function () {
        $(".photoSmallPic_control").css("display", "block")
    }).mouseleave(function () {
        $(".photoSmallPic_control").css("display", "none")
    });
    if (t != "carouselPhotos") {
        c.find(".photoContainerLeft").mouseenter(function () {
            var j = $(this).parents(".form").attr("id");
            if (_manageMode == true) {
                Run.initModulePhotoSmallPicItemManage(j, e.isOpenImgEff)
            }
        }).mouseleave(function () {
            var j = $(this).parents(".form");
            var C = j.find("div.photoContainerLeft");
            if (_manageMode == true) {
                if (e.isOpenImgEff) {
                    Run.removeEditLayer(C, null, 5)
                } else {
                    Run.removeEditLayer(C, null, 106)
                }
            }
        })
    }
    z.mouseover(function () {
        $(this).parent().addClass("photoSmallPrePicOuterHover").addClass("g_border").addClass("g_borderHover")
    });
    z.mouseleave(function () {
        $(this).parent().removeClass("photoSmallPrePicOuterHover").removeClass("g_borderHover").removeClass("g_border")
    });
    c.find(".photoSmallPicUpFormsMid .photoContainerLeft img").attr("onload", "Run.removePhotoSmallPicMask(" + m.replace("module", "") + ")");
    z.click(function () {
        var ai = $(this).find("img");
        var G = $("#" + m);
        var L = G.find(".photoSmallPicUpFormsMid .photoContainerLeft img");
        Run.loadPhotoSmallPicItem($(this).parent().next().find("img"), t);
        Run.loadPhotoSmallPicItem(ai, t);
        var M = e.scale;
        var D = $(this).parent();
        D.siblings(".photoSmallPrePicOuter").find("div.photoSmallPicBox").removeClass("photoSmallPrePicSelected");
        $(this).addClass("photoSmallPrePicSelected");
        D.siblings(".photoSmallPrePicOuter").removeClass("photoSmallPrePicOuterClick").removeClass("g_borderSelected");
        D.addClass("photoSmallPrePicOuterClick").addClass("g_borderSelected");
        var ag = G.find("#bigImgDetail");
        ag.remove();
        G.find(".imgContainer").append(L);
        var X = G.find(".photoContainerLeft").width(), S = G.find(".photoContainerLeft").height();
        var Y = ai.attr("bigpicurl");
        var F = ai.attr("bigpicwidth");
        var K = ai.attr("bigpicheight");
        var W = ai.attr("productname");
        var j = ai.attr("ifshowname");
        var P = ai.attr("aattribute");
        if (t == "carouselPhotos") {
            D.css({overflow: "visible"});
            D.siblings(".photoSmallPrePicOuter").find(".cs_triangle_up").hide();
            D.find(".cs_triangle_up").show().addClass("g_borderSelected");
            var T = ai.attr("pic");
            G.find(".imgContainer").attr("id", "photoList" + T);
            if (_manageMode) {
                var H = G.data("carouselPhotosOptions");
                Run.moduleCarouselPhotosItemManage.init(H)
            }
        }
        if (M) {
            var R = Helper.Img.calcSize(F, K, X, S, Helper.Img.MODE_SCALE_FILL);
            L.width(R.width);
            L.height(R.height)
        } else {
            L.css("width", X).css("height", S)
        }
        var C = [];
        C.push("<div class='loadingImg' style='width:" + X + "px;height:" + S + "px;'>");
        C.push("<table cellspacing='0' cellpadding='0' class='loadingImgTable' style='width:" + X + "px;height:" + S + "px;'><tbody><tr><td class='loadingImgTd'>");
        C.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        C.push("</td></tr></tbody></table>");
        C.push("</div>");
        G.find(".photoSmallPic_td").append(C.join(""));
        var ab = L.attr("src");
        if (ab == Y) {
            L.attr("src", "")
        }
        L.attr("src", Y);
        L.css("margin", "auto");
        var ah = ai.attr("alt");
        L.attr("alt", ah);
        if (t == "carouselPhotos") {
            G.find(".photoContainerLeft").css("margin-top", "1.5px");
            G.find(".photoContainerLeft .imgContainer").css("width", X).css("height", S)
        } else {
            G.find(".photoContainerLeft").css("overflow", "hidden")
        }
        L.wrap("<a id='bigImgDetail' " + P + "></a>");
        G.find("#imgInnerNameDiv p").html(Helper.encodeHtml(W));
        var ad = G.find("#imgInnerNameDiv");
        if (t == "carouselPhotos") {
            var aa = parseInt(ad.css("padding-left").replace("px", "")) + parseInt(ad.css("padding-right").replace("px", ""));
            ad.width(L.width() - aa);
            G.find(".photoNameContainer").width(L.width() - aa);
            ad.css({overflow: "hidden", margin: "0 auto", bottom: "0", left: "0", right: "0"})
        } else {
            ad.width(L.width());
            G.find(".photoNameContainer").width(L.width());
            var V = (G.find(".photoContainerLeft").height() - L.height()) / 2 + L.height() - ad.outerHeight(true);
            var af = V % 2 == 0 ? V : Math.floor(V / 2) * 2;
            ad.css("top", af + "px");
            var Z = (G.find(".photoSmallPicUpFormsMid").width() - L.width()) / 2;
            ad.css("left", Z + "px").css("overflow", "hidden")
        }
        if (e.isOpenImgEff) {
            Run.bindImageEffectCusEvent_photo(G.find(".photoSmallPic_td"), e.tgOpt)
        }
        var Q = G.find(".photoSmallPrePicSelected").parent().index();
        g.removeClass("photoBigPic-control-prev-disabled");
        h.removeClass("photoBigPic-control-next-disabled");
        p.removeClass("photoSmallPic-control-prev-disabled");
        q.removeClass("photoSmallPic-control-next-disabled");
        var O = G.find(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var ac = parseInt(O.css("left").replace("px"));
        var E = Math.abs(ac) / a;
        var ae = E + i - 1 > w - 1 ? w - 1 : E + i - 1;
        var N = G.find(".photoSmallPicDownFormsMid").width();
        var J, I;
        if (Q == 0) {
            g.addClass("photoBigPic-control-prev-disabled");
            if (ac == 0) {
                p.addClass("photoSmallPic-control-prev-disabled")
            }
        }
        if (Q == (w - 1)) {
            h.addClass("photoBigPic-control-next-disabled");
            J = E;
            I = w - 1;
            if ((I - J + 1) * a <= N && ac >= (w - i - 1) * a) {
                q.addClass("photoSmallPic-control-next-disabled")
            }
        }
        G.data("positionLeft", ac);
        var U = G.find(".photoSmallPrePicSelected").attr("phoid");
        G.find("div.photoContainerLeft").attr("phoid", U).attr("photoname", W).attr("id", "containerLeft_PhotosmallPic" + U)
    }).eq(0).click();
    g.click(function () {
        var G = $(this);
        if (G.hasClass("photoBigPic-control-prev-disabled")) {
            return false
        }
        var C = $("#" + m);
        var j = C.find(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var E = Math.ceil(C.find(".photoSmallPicDownFormsMid").width() / a);
        var J = C.data("positionLeft");
        var F = Math.abs(J) / a;
        var I = F + E - 1 > w - 1 ? w - 1 : F + E - 1;
        var H = C.find(".photoSmallPrePicSelected").parent();
        var K = H.index();
        if (K >= F && K <= I) {
            if (K == F) {
                J += a
            }
        } else {
            J = -(K - 1) * a;
            j.css("left", "0px")
        }
        if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var D = H.prev().find("div.photoSmallPicBox");
        C.find("div.photoContainerLeft").attr("phoid", D.attr("phoid")).attr("photoname", D.find("img").attr("productname")).attr("id", "containerLeft_PhotosmallPic" + D.attr("phoid"));
        j.animate({left: J + "px"}, function () {
            H.prev().find("div.photoSmallPicBox").click()
        })
    });
    h.click(function () {
        var G = $(this);
        if (G.hasClass("photoBigPic-control-next-disabled")) {
            return false
        }
        var C = $("#" + m);
        var j = $(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var E = Math.ceil(C.find(".photoSmallPicDownFormsMid").width() / a);
        var J = C.data("positionLeft");
        var F = Math.abs(J) / a;
        var I = F + E - 1 > w - 1 ? w - 1 : F + E - 1;
        var H = C.find(".photoSmallPrePicSelected").parent();
        var K = H.index();
        if (K >= F && K <= I) {
            if (K == I) {
                J -= 2 * a
            }
        } else {
            J = -(K - 1) * a;
            j.css("left", "0px")
        }
        if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var D = H.next().find("div.photoSmallPicBox");
        C.find("div.photoContainerLeft").attr("phoid", D.attr("phoid")).attr("photoname", D.find("img").attr("productname")).attr("id", "containerLeft_PhotosmallPic" + D.attr("phoid"));
        j.animate({left: J + "px"}, function () {
            H.next().find("div.photoSmallPicBox").click()
        })
    });
    q.click(function () {
        var N = $(this);
        var E = $("#" + m);
        if (N.hasClass("photoSmallPic-control-next-disabled")) {
            return false
        }
        var j = N.parents(".photoSmallPicDownForms").find(".photoSmallPrePicContainer"),
            G = N.parents(".photoSmallPicDownForms").find("a.g_imgPrev"),
            F = Math.floor(E.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        if (G.hasClass("photoSmallPic-control-prev-disabled")) {
            G.removeClass("photoSmallPic-control-prev-disabled")
        }
        var O = (F - 1) * a, M = parseInt(j.css("left").replace("px"));
        var L = Math.abs(M) / a;
        var P = L + F - 1 > w - 1 ? w - 1 : L + F - 1;
        var K = E.find(".photoSmallPicDownFormsMid").width();
        if (j.is(":animated")) {
            return false
        }
        var D;
        var C, I;
        if (P >= w - 1) {
            C = L;
            I = w - 1;
            if ((I - C + 1) * a <= K) {
                D = true;
                N.addClass("photoSmallPic-control-next-disabled")
            }
        } else {
            C = P;
            I = P + F - 1
        }
        for (var H = C; H <= I; H++) {
            var J = $(z[H]).find("img");
            Run.loadPhotoSmallPicItem(J, t)
        }
        if (!D) {
            j.animate({left: "-=" + O + "px"})
        }
    });
    p.click(function () {
        var G = $(this);
        if (G.hasClass("photoSmallPic-control-prev-disabled")) {
            return false
        }
        var C = G.parents(".photoSmallPicDownForms").find(".photoSmallPrePicContainer");
        var I = Math.floor(c.find(".photoSmallPicDownFormsMid").width() / a) + 1;
        var F = G.parents(".photoSmallPicDownForms").find("a.g_imgNext");
        if (F.hasClass("photoSmallPic-control-next-disabled")) {
            F.removeClass("photoSmallPic-control-next-disabled")
        }
        var E = parseInt(C.css("left").replace("px"));
        var H = Math.abs(E) / a;
        var D = H - I + 1 > 0 ? H - I + 1 : 0;
        if (D == 0) {
            G.addClass("photoSmallPic-control-prev-disabled")
        }
        var j = (H - D) * a;
        if (C.is(":animated")) {
            return false
        }
        C.animate({left: "+=" + j + "px"})
    })
};
Run.removePhotoSmallPicMask = function (a) {
    $("#module" + a).find(".loadingImg").remove()
};
Run.loadPhotoSmallPicItem = function (e, d) {
    if (!e.attr("src")) {
        e.attr("src", e.attr("lzurl"))
    }
    var f = parseInt(e.attr("sWidth")), b = parseInt(e.attr("sHeight"));
    var a = f > b ? f : b;
    var c = f > b ? "width" : "height";
    if (a > 71) {
        if (d == "carouselPhotos") {
            if (a > 76) {
                e.css(c, 76);
                e.css("height", 60);
                e.css("width", 76)
            }
        } else {
            e.css(c, 71)
        }
    } else {
        e.css("width", f).css("height", b)
    }
    e.show()
};
Run.smallPicPhotoModuleFix = function (v, r) {
    var c = $("#" + v), y = c.find("div.photoSmallPicBox");
    var p = c.find(".photoSmallPicUpForms").height();
    var l = c.find(".photoSmallPicDownForms").height();
    c.find(".photoSmallPicForms").height(p + l);
    var x = c.find(".photoSmallPicForms").width();
    c.find(".photoSmallPicUpFormsMid").width(x);
    c.find(".photoSmallPicDownForms").width(x);
    c.find(".photoSmallPicUpForms").width(x);
    var m = c.find(".photoSmallPrePic_control").outerWidth(true);
    c.find(".photoSmallPicDownFormsMid").css("width", x - 2 * m - 20 + "px");
    var d = $(".photoSmallPicUpForms").width();
    var i = c.find(".photoSmallPrePicContainer");
    var a = $(".photoSmallPrePicOuter").outerWidth(true);
    var w = 0;
    if (Helper.isIE6()) {
        w = 2
    }
    i.width(a * y.length + w);
    var e = i.width();
    var b = c.find(".photoSmallPicDownFormsMid").width();
    var s = c.find(".photoSmallPicUpFormsMid").outerHeight() / 2 - 46;
    c.find(".photoSmallPic_control").css("top", s + "px");
    var u = y.length;
    var h = Math.floor(b / a) + 1;
    var t = u % h == 0 ? u / h : Math.floor(u / h) + 1;
    if (t == 1 && b < i.width()) {
        t = 2
    }
    var n = c.find(".photoSmallPicDownForms a.g_imgPrev"), o = c.find(".photoSmallPicDownForms a.g_imgNext"),
        f = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_left"),
        g = c.find(".photoSmallPicUpForms a.photoSmallPicArrow_right");
    if (t == 1) {
        n.addClass("photoSmallPic-control-prev-disabled");
        o.addClass("photoSmallPic-control-next-disabled")
    }
    var k = y.length < h ? y.length : h;
    for (var q = 0; q < k; q++) {
        var z = $(y[q]).find("img");
        if (!z.attr("src")) {
            Run.loadPhotoSmallPicItem(z, r)
        }
    }
    c.find(".photoSmallPrePicSelected").click()
};
Run.loadPhotoList = function (b, e, f, i, g) {
    var c = $("#module" + b);
    if (Helper.isNull(c)) {
        return
    }
    var j = 0;
    if (g == "listPhotos") {
        f = 1
    }
    if (!f) {
        c.find(".photoForm").each(function () {
            var l = $(this).attr("faiWidth");
            var k = $(this).attr("faiHeight");
            if (Helper.isNull(k)) {
                return
            }
            var p = $(this).find(".imgDiv");
            var o = p.width();
            var m = p.height();
            var n = Helper.Img.calcSize(l, k, o, m, Helper.Img.MODE_SCALE_FILL);
            if (n.height > j) {
                j = n.height
            }
        })
    }
    if (i >= 4 && i < 6) {
        Run.clearImageEffectContent_photo("module" + b, "parametersDiv")
    }
    var h = c.find(".nameWordWrap");
    if (h.length > 0) {
        var a = 0;
        h.each(function () {
            var k = $(this).height();
            if (k > a) {
                a = k
            }
        });
        h.each(function () {
            $(this).height(a)
        })
    }
    var d = 0;
    c.find(".photoForm").each(function () {
        var t = $(this).attr("faiHeight");
        if (Helper.isNull(t)) {
            return
        }
        var s = $(this).attr("faiWidth");
        var v = $(this).find(".imgDiv");
        var u = v.width();
        if (f) {
            j = v.height()
        }
        var r = {width: u, height: j};
        var n = v.find("img");
        var q = v.find(".J_photoImgPanel");
        if (e == 2) {
            var o = n.attr("iWidth");
            var k = n.attr("iHeight");
            var m = o / k;
            var l = u / j;
            v.css("height", j + "px");
            if (l <= m) {
                n.css("width", m * j + "px");
                n.css("height", j + "px");
                n.css("marginTop", "");
                n.css("marginLeft", ((u - m * j) / 2) + "px");
                q.css({width: u, height: j, position: "relative", overflow: "hidden"})
            } else {
                n.css("height", u / m + "px");
                n.css("width", u + "px");
                n.css("marginLeft", "");
                n.css("marginTop", ((j - u / m) / 2) + "px");
                q.css({width: u, height: j, position: "relative", overflow: "hidden"})
            }
        } else {
            if (typeof e == "number") {
                e = !!!e
            }
            if (e) {
                r = Helper.Img.calcSize(s, t, u, j, Helper.Img.MODE_SCALE_FILL)
            }
            if (q.length > 0) {
                q.css({
                    marginLeft: "",
                    marginTop: "",
                    width: r.width + "px",
                    height: r.height + "px",
                    position: "relative",
                    overflow: "hidden",
                    margin: "0 auto"
                });
                n.css("marginLeft", "").css("marginTop", "")
            }
            n.css("width", r.width + "px");
            n.css("height", r.height + "px");
            v.css("height", j + "px")
        }
        $(this).find(".photoParameters").css("height", "auto");
        var p = $(this).height();
        if (p > d) {
            d = p
        }
    });
    c.find(".photoForm").css("height", d + "px")
};
Run.multiPhoto = function (n, m, e) {
    var f = false;
    var p = "leftIcon";
    var s = "rightIcon";
    var r = "horizontal";
    var b = false;
    var o = {};
    o = $.extend({}, o, e);
    if (o.leftIconID != null) {
        p = o.leftIconID
    }
    if (o.rightIconID != null) {
        s = o.rightIconID
    }
    if (o.direction != null) {
        r = o.direction
    }
    if (o.zoom != null) {
        b = o.zoom == "true" ? true : false
    }
    var h = n;
    var t = n.width();
    var c = n.height();
    var i = h.find("> ul");
    var d = h.find("li");
    var l = h.find("li .g_border");
    var a = d.outerWidth(true);
    var g = d.outerHeight(true);
    var k = d.length;
    var q = 0;
    if (r == "horizontal") {
        q = parseInt(t / a)
    } else {
        q = parseInt(c / g)
    }
    if (r == "horizontal") {
        if (Helper.isIE6()) {
            a++
        }
        var j = (a) * k;
        i.css("width", j + "px")
    } else {
        var u = g * k;
        i.css("height", u + "px")
    }
    if (n.hasClass("J_imgDivsStyle5")) {
        f = true
    }
    $("#" + p).mouseover(function () {
        if ((k >= q) && ((Math.abs(i.position().left) + h.width()) >= i.width())) {
            $(this).addClass("g_imgPrevHover")
        }
    }).mouseout(function () {
        $(this).removeClass("g_imgPrevHover")
    }).click(function () {
        if (i.position().left < 0 || i.position().top < 0) {
            if (i.is(":animated")) {
                return
            }
            if (r == "horizontal") {
                i.animate({left: (i.position().left + a) + "px"}, "slow")
            } else {
                if (r == "vertical") {
                    i.animate({top: (i.position().top + g) + "px"}, "slow")
                }
            }
            if (Math.abs(i.position().left) <= a) {
                $(this).addClass("g_imgPrevNotClick")
            }
            $("#" + s).removeClass("g_imgNextNotClick")
        }
    });
    $("#" + s).mouseover(function () {
        if ((k >= q) && ((Math.abs(i.position().left) + h.width()) <= i.width())) {
            $(this).addClass("g_imgNextHover")
        }
    }).mouseout(function () {
        $(this).removeClass("g_imgNextHover")
    }).click(function () {
        if (i.is(":animated")) {
            return
        }
        if (k >= q) {
            if (r == "horizontal") {
                if ((Math.abs(i.position().left) + h.width()) < i.width()) {
                    if ((Math.abs(i.position().left) + h.width() + a) >= i.width()) {
                        $(this).addClass("g_imgNextNotClick")
                    }
                    $("#" + p).removeClass("g_imgPrevNotClick");
                    i.animate({left: (i.position().left - a) + "px"}, "slow")
                } else {
                    $(this).removeClass("g_imgNextHover");
                    $(this).addClass("g_imgNextNotClick")
                }
            } else {
                if ((Math.abs(i.position().top) + h.height()) < i.height()) {
                    i.animate({top: (i.position().top - g) + "px"}, "slow")
                } else {
                    $(this).removeClass("g_imgNextHover");
                    $(this).addClass("g_imgNextNotClick")
                }
            }
        }
    });
    d.mouseover(function () {
        d.removeClass("g_borderHover");
        $(this).addClass("g_borderHover");
        if (f) {
            if (_manageMode && b) {
                Run.removeEditLayer(m, null, 106)
            }
            d.removeClass("fk-mainBorderColor");
            $(this).addClass("fk-mainBorderColor")
        }
        var v = $(this).find("a").attr("href");
        if (v == m.find("a").attr("href")) {
            return
        }
        m.find("a").attr("href", v);
        var B = $(this).attr("faiWidth");
        var E = $(this).attr("faiHeight");
        var C = m.width();
        var y = m.height();
        if (m.data("divWidth")) {
            C = m.data("divWidth")
        }
        if (m.data("divHeight")) {
            y = m.data("divHeight")
        }
        var D;
        if (f) {
            D = Helper.Img.calcSize(B, E, C, y, Helper.Img.MODE_SCALE_FILL)
        } else {
            D = Helper.Img.calcSize(B, E, C, y, Helper.Img.MODE_SCALE_DEFLATE_FILL)
        }
        var z = m.find("img");
        if (z.is(":animated")) {
            return
        }
        var x = m.find("td");
        var w = x.width();
        var F = x.height();
        var A = [];
        A.push("<div class='ProductDetailloadingImg' style='width:" + w + "px;height:" + F + "px;'>");
        A.push("<table cellspacing='0' cellpadding='0' class='ProductDetailloadingImgTable' style='width:" + w + "px;height:" + F + "px;'><tbody><tr><td class='ProductDetailloadingImgTd'>");
        A.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        A.push("</td></tr></tbody></table>");
        A.push("</div>");
        x.append(A.join(""));
        $(z).load(function () {
            $(".ProductDetailloadingImg").remove();
            $(".multiPhotoImgLoad").fadeOut("slow", function () {
                $(this).remove()
            })
        });
        setTimeout(function () {
            if (!$(z).load()) {
                var G = $("<div class='multiPhotoImgLoad'></div>");
                if (m.find(".multiPhotoImgLoad").length == 0) {
                    G.appendTo(m)
                }
            }
        }, 1000);
        z.css("width", D.width + "px");
        z.css("height", D.height + "px");
        z.attr("src", v);
        m.attr("faiHref", v);
        if (b) {
            m.find(".cloud-zoom").data("zoom").destroy();
            m.find(".cloud-zoom").CloudZoom({imageWidth: B, imageHeight: E})
        }
    }).mouseleave(function () {
    })
};
Run.createImageEffectContent_photo = function (j, l, c, p) {
    var f = $(j).parents("." + c.targetParent);
    var k = $(j).find(".imageEffects");
    var d = $(f).attr("photoName");
    var m = $(f).attr("photoDisc");
    var i = l[Run.ImageEffect.DATA.KEY.FULL_MASK_OPEN_DISC];
    var n = l[Run.ImageEffect.DATA.KEY.HALF_MASK_OPEN_DISC];
    var o = c.nameHidden;
    if (o && !i && !n) {
        return
    }
    g();
    h(l, c.nameWordWrap);
    function g() {
        var s = [];
        var q = l.effType;
        var r = "";
        if (q == 4) {
            r = "photoFullMask"
        } else {
            if (q == 5) {
                r = "photoHalfMask"
            }
        }
        s.push("<div class='props " + r + "'>");
        s.push("<div class='propList g_specialClass'>");
        if (!o) {
            s.push("<div class='photoName g_specialClass'>" + d + "</div>")
        }
        if (i && m.length > 0 && q == 4) {
            s.push("<div class='photoDisc'>" + m + "</div>")
        }
        if (n && m.length > 0 && q == 5) {
            s.push("<div class='photoDisc'>" + m + "</div>")
        }
        s.push("</div>");
        s.push("</div>");
        $(k).append(s.join(""))
    }

    function h(w, q) {
        var u = $(k).find(".photoName");
        var z = $(k).find(".photoDisc");
        var A = 3;
        if (u.length != 0 && !o) {
            e(w, q);
            Run.clamp($(u)[0], {clamp: A})
        }
        if (z.length != 0 && w.effType == 4 && i) {
            b(w);
            Run.clamp($(z)[0], {clamp: A});
            setTimeout(function () {
                var C = $(k).height();
                var E = $(k).find(".props").height();
                if (E > C && !o) {
                    var B = $(z).height();
                    var D = E - C;
                    A = (B) - D + "px";
                    Run.clamp($(z)[0], {clamp: A})
                }
            }, 100)
        }
        if (w.effType == 4) {
            var s = k.parent().find(".J_photoImg");
            if (s.attr("picsca") === "2") {
                var v = s.css("margin-top");
                if (v.replace("px", "") !== "0") {
                    k.css("margin-top", v)
                }
            }
        }
        if (w.effType == 5) {
            var r = $(k).height() / 3;
            var y = $(k).find(".props");
            var x = $(y).height() + 10;
            var t = r;
            a(w);
            if (x > r) {
                t = x
            }
            $(k).css("height", t).css("bottom", "-" + t + "px")
        }
    }

    function e(u, v) {
        var r = $(k).find(".photoName");
        var t = "";
        $(r).removeAttr("style");
        if (u.effType == 4) {
            var s = u[Run.ImageEffect.DATA.KEY.FULL_MASK_CUS_NAME];
            var w = u[Run.ImageEffect.DATA.KEY.FULL_MASK_NAME_ALIG];
            var q = u[Run.ImageEffect.DATA.KEY.FULL_MASK_NAME_STYLE];
            if (s && typeof q == "string" && q.length > 0) {
                q = $.parseJSON(q);
                t += "color: " + q.fc + ";";
                t += (q.fb == 1) ? " font-weight: bold;" : ""
            }
            if (typeof w == "number") {
                t += " text-align:" + ((w == 1) ? "center;" : (w == 2) ? "left;" : "right;")
            }
        }
        if (v) {
            if (l.effType == 4) {
                t += " word-wrap: break-word;"
            } else {
                t += " overflow: visible; text-overflow: clip; white-space: normal; word-wrap: break-word;"
            }
        } else {
            t += " overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
        }
        if (u.effType == 5) {
            if (l.style == 88 || l.style == 89 || l.style == 90) {
                t += " padding-top: 2%;"
            } else {
                t += " padding-top: 2.5%;"
            }
        }
        $(r).attr("style", t)
    }

    function b(w) {
        var q = $(k).find(".photoDisc");
        var v = "";
        var s = w[Run.ImageEffect.DATA.KEY.FULL_MASK_CUS_DISC];
        var r = w[Run.ImageEffect.DATA.KEY.FULL_MASK_DISC_STYLE];
        var u = w[Run.ImageEffect.DATA.KEY.FULL_MASK_DISC_ALIG];
        $(q).removeAttr("style");
        if (s && typeof r == "string" && r.length > 0) {
            r = $.parseJSON(r);
            v += " color: " + r.fc + ";"
        }
        if (typeof u == "number") {
            v += " text-align:" + ((u == 1) ? "center;" : (u == 2) ? "left;" : "right;")
        }
        if (!o) {
            var t = (Helper.isIE6() || Helper.isIE7()) ? 16 : 18;
            v += " margin-top: " + t + "px;"
        }
        $(q).attr("style", v)
    }

    function a(v) {
        var s = $(k).find(".photoDisc");
        var u = "";
        var t = v[Run.ImageEffect.DATA.KEY.HALF_MASK_CUS_DISC];
        var w = v[Run.ImageEffect.DATA.KEY.HALF_MASK_DISC_STYLE];
        var r = v[Run.ImageEffect.DATA.KEY.HALF_MASK_DISC_ALIG];
        var q = v[Run.ImageEffect.DATA.KEY.HALF_MASK_OPEN_DISC];
        if (!q) {
            return
        }
        if (t && typeof w == "string" && w.length > 0) {
            w = $.parseJSON(w);
            u += " color: " + w.fc + ";"
        }
        if (typeof r == "number") {
            u += " text-align:" + ((r == 1) ? "center;" : (r == 2) ? "left;" : "right;")
        }
        $(s).attr("style", u)
    }
};
Run.clearImageEffectContent_photo = function (b, a) {
    $("#" + b).find("." + a).remove()
};
Run.bindImageEffectCusEvent_photo = function (g, c) {
    var f = $(g).find(".imageEffects");
    var a = true;
    var e = $(g).parents("." + c.targetParent).find("a");
    var d = $(e).attr("href");
    var b = (typeof d == "undefined" || d.length == 0 || d.indexOf("javascirpt") > 0 || d.indexOf("return") > 0 || e.length == 0) ? false : true;
    if (!b) {
        a = false
    }
    if (a) {
        $(f).css("cursor", "pointer")
    } else {
        $(f).css("cursor", "default")
    }
    $(f).unbind("click").bind("click", function () {
        var l = $(this).parents("." + c.targetParent).find("a");
        if (Helper.isNull(l)) {
            return
        }
        var i = $(l).attr("href");
        var h = $(l).attr("onclick");
        var j = $(l).attr("target");
        var k = (typeof i == "undefined" || i.length == 0 || i.indexOf("javascirpt") > 0 || i.indexOf("return") > 0 || e.length == 0) ? false : true;
        if (typeof h != "undefined") {
            $(l).click()
        } else {
            if (k) {
                window.open(i, j)
            }
        }
    })
};
Run.formMiddleContentWidthArray = new Array();
Run.initModuleWeather = function (a, b, d, c) {
    Run.initIframeLoading(a, b, d, c)
};
Run.initModuleWeather2 = function (b, j, a, d, l) {
    var f = (a == 11 ? 2 : 1), i = 0, k = "json", e = Helper.isIE6(), g = [];
    var m = "//platform.sina.com.cn/weather/forecast?app_key=1315597423&city=" + encodeURIComponent(j) + "&startday=" + i + "&lenday=" + f + "&format=" + k + "&auth_type=uuid&auth_value=0123456789012345&callback=?";
    $(".formMiddleContent" + b).css("overflow", "hidden");
    $(".formMiddleContent" + b).append("<div class='weather2Loading'></div>");
    if ($("#toolTips" + a).length > 0) {
        $("#toolTips" + a).remove()
    }
    if (a == 13 || a == 14 || a == 15) {
        var h = j;
        if (h.indexOf("香港") == -1 && h.indexOf("澳门") == -1) {
            h = j + "市"
        }
        var c = "//wthrcdn.etouch.cn/weather_mini?city=" + encodeURIComponent(h) + "&callback=?";
        $.getJSON(c, function (t) {
            if (!t || t.status != 1000) {
                if (!d) {
                    return
                }
                Run.initModuleWeather2(b, d, a);
                return
            }
            var p = t.data.city;
            var v = t.data.wendu;
            var q = t.data.forecast[0].fengli;
            var u = t.data.forecast[0].fengxiang;
            var r = t.data.forecast[0].type;
            var n = t.data.aqi;
            var o = "";
            var s = "";
            if (n >= 0 && n <= 50) {
                s = "优"
            } else {
                if (n > 50 && n <= 100) {
                    s = "良"
                } else {
                    if (n > 100 && n <= 150) {
                        s = "轻度污染"
                    } else {
                        if (n > 150 && n <= 200) {
                            s = "中度污染"
                        } else {
                            if (n > 200 && n <= 300) {
                                s = "重度污染"
                            } else {
                                if (n > 300) {
                                    s = "严重污染"
                                }
                            }
                        }
                    }
                }
            }
            switch (r) {
                case"暴雨":
                    o = "baoyu";
                    break;
                case"大暴雨":
                    o = "dabaoyu";
                    break;
                case"大雪":
                    o = "daxue";
                    break;
                case"大雨":
                    o = "dayu";
                    break;
                case"多云":
                    o = "duoyun";
                    break;
                case"雷阵雨":
                    o = "leizhenyu";
                    break;
                case"霾":
                    o = "mai";
                    break;
                case"晴":
                    o = "qing";
                    break;
                case"雾":
                    o = "wu";
                    break;
                case"小雪":
                    o = "xiaoxue";
                    break;
                case"小雨":
                    o = "xiaoyu";
                    break;
                case"雪":
                    o = "xue";
                    break;
                case"阴":
                    o = "yin";
                    break;
                case"雨夹雪":
                    o = "yujiaxue";
                    break;
                case"阵雨":
                    o = "zhenyu";
                    break;
                case"中雪":
                    o = "zhongxue";
                    break;
                case"中雨":
                    o = "zhongyu";
                    break;
                case"中到大雨":
                    o = "zhongyu";
                    break;
                case"小到中雨":
                    o = "xiaoyu";
                    break;
                case"中到大雪":
                    o = "zhongxue";
                    break;
                case"小到中雪":
                    o = "xiaoxue";
                    break;
                case"大到暴雨":
                    o = "baoyu";
                    break;
                default:
                    o = "kongbai"
            }
            if (a == 13) {
                if (e) {
                    $(".formMiddleContent" + b).css("height", 80 + "px")
                }
                g.push("<div class='weather2' style='width:300px;'>");
                g.push("<div class='left" + a + "'>");
                g.push("<div class='firstLine" + a + "'>");
                g.push("<div class='cityName" + a + "'>" + p + "</div>");
                g.push("<div class='currentTemperature" + a + "'>");
                g.push("<font face='微软雅黑' color='#fdbf43'>" + v + "℃</font>");
                g.push("</div>");
                g.push("</div>");
                g.push("<div class='secondLine" + a + "'>");
                g.push("<div class='weatherCon" + a + "'>");
                g.push("<span class='weatherCon2" + a + "'>" + r + "</span>");
                g.push("</div>");
                g.push("<div class='fenli" + a + "'>" + q + "</div>");
                g.push("</div>");
                g.push("</div>");
                g.push("<div class='right" + a + "'>");
                g.push("<div class='images" + a + "'>");
                g.push("<img class='image1" + a + "' title='" + r + "' src='" + _resRoot + "/image/site/weather/" + o + "22." + (e ? "gif'" : "png'") + "/>");
                g.push("</div>");
                g.push("</div>")
            } else {
                if (a == 14) {
                    if (e) {
                        $(".formMiddleContent" + b).css("height", 80 + "px")
                    }
                    g.push("<div class='weather2' style='width:250px;'>");
                    g.push("<div class='left" + a + "' style='width: 90px;'>");
                    g.push("<div class='images" + a + "'>");
                    g.push("<img class='image1" + a + "' title='" + r + "' src='" + _resRoot + "/image/site/weather/" + o + "11." + (e ? "gif'" : "png'") + "/>");
                    g.push("</div>");
                    g.push("</div>");
                    g.push("<div class='right" + a + "'>");
                    g.push("<div class='firstLine" + a + "'>");
                    g.push("<div class='cityName" + a + "'>" + p + "</div>");
                    g.push("<div class='currentTemperature" + a + "'>");
                    g.push("<font face='微软雅黑' color='#fdbf43'>" + v + "℃</font>");
                    g.push("</div>");
                    g.push("</div>");
                    g.push("<div class='secondLine" + a + "'>");
                    g.push("<div class='weatherCon" + a + "'>");
                    g.push("<span class='weatherCon2" + a + "'>" + r + "</span>");
                    g.push("</div>");
                    g.push("<div class='fenli" + a + "'>" + q + "</div>");
                    g.push("</div>");
                    g.push("</div>")
                } else {
                    if (a == 15) {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 80 + "px")
                        }
                        g.push("<div class='weather2' style='width:350px;'>");
                        g.push("<div class='left" + a + "' style='width: 90px;'>");
                        g.push("<div class='images" + a + "'>");
                        g.push("<img class='image1" + a + "' title='" + r + "' src='" + _resRoot + "/image/site/weather/" + o + "33." + (e ? "gif'" : "png'") + "/>");
                        g.push("</div>");
                        g.push("</div>");
                        g.push("<div class='right" + a + "'>");
                        g.push("<div class='firstLine" + a + "'>");
                        g.push("<div class='cityName" + a + "'>" + p + "</div>");
                        g.push("<div class='weatherCon" + a + "'>");
                        g.push("" + r + "</div>");
                        g.push("<div class='fenli" + a + "'>" + q + "</div>");
                        g.push("</div>");
                        g.push("<div class='secondLine" + a + "'>");
                        g.push("<div class='currentTemperature" + a + "'>");
                        g.push("<font face='微软雅黑'>" + v + "℃</font>");
                        g.push("</div>");
                        g.push("<div class='weatherAqi" + a + "'>");
                        g.push("<span class='weatherAqi2" + a + "'>空气质量: " + n + " " + s + "</span>");
                        g.push("</div>");
                        g.push;
                        g.push("</div>");
                        g.push("</div>")
                    }
                }
            }
            if (g.length == 0) {
                var w = "<div id='toolTips" + a + "' style='margin: 0 auto;width: 120px; cursor:pointer;' onclick='Run.initModuleWeather2( " + b + ',"' + j + '", ' + a + ',"' + d + "\")'>网络缓慢，请重新加载</div>";
                $(".formMiddleContent" + b + " .includeWeather" + a).append(w)
            } else {
                $(".formMiddleContent" + b + " .includeWeather" + a).append(g.join(""))
            }
            $(".formMiddleContent" + b + " .weather2Loading").remove()
        })
    } else {
        $.getJSON(m, function (C) {
            if (!C || C.status.code != 0) {
                if (!d) {
                    return
                }
                Run.initModuleWeather2(b, d, a);
                return
            }
            var v = $(".formMiddleContent" + b + " .weather2"), z = C.data.city[0].days.day, D = false;
            for (var A = 0; A < z.length; A++) {
                var o = z[A].f1 ? z[A].f1 : "qing", n = z[A].f2 ? z[A].f2 : "qing", B = (o == n ? true : false),
                    u = z[A].t1 ? z[A].t1 : "0", t = z[A].t2 ? z[A].t2 : "0", q = z[A].s1, p = z[A].s2, y = z[A].d1,
                    x = z[A].d2, s = z[A].p1, w = C.data.city[0].info.name;
                v.find(".cityName" + a).text(w);
                if (a != 12 && a != 11) {
                    g.push("<ul class='weather2'>");
                    g.push("<li class='cityName" + a + "'>");
                    g.push("" + w + "</li>");
                    g.push("<li class='weatherCon" + a + "'>");
                    if (a == 1) {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 27 + "px")
                        }
                        g.push("" + p + "</li>")
                    } else {
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 33 + "px")
                        }
                        if (a == 3 || a == 11) {
                            if (!B) {
                                g.push("<img style='margin-right: 5px;' class='image1" + a + "' title='" + q + "' src='" + _resRoot + "/image/site/weather/" + o + "1." + (e ? "gif'" : "png'") + "/>")
                            }
                        }
                        g.push("<img class='image2" + a + "' title='" + p + "' src='" + _resRoot + "/image/site/weather/" + n + "1." + (e ? "gif'" : "png'") + "/>")
                    }
                    g.push("</li>");
                    g.push("<li class='temperature" + a + "'>");
                    g.push("<span class='temperature1" + a + "'>");
                    g.push("" + u + "</span> ~");
                    g.push("<span class='temperature2" + a + "'>");
                    g.push("" + t + "</span>");
                    g.push("</li>");
                    if (a == 7) {
                        g.push("<li class='weatherCondition" + a + "'>");
                        g.push("" + s + "</li>")
                    }
                    g.push("</ul>")
                } else {
                    if (a == 11) {
                        $(".formMiddleContent" + b + " .includeWeather" + a).width(560);
                        if (e) {
                            $(".formMiddleContent" + b).css("height", 81 + "px")
                        }
                        var E = "";
                        A == 0 ? E = "今天" : E = "明天";
                        g.push("<div class='weather2'  style='width:278px;'>");
                        g.push("<div class='cityName" + a + "'>" + (!D ? w : "") + "</div>");
                        g.push("<img class='image1" + a + "' title='" + q + "' src='" + _resRoot + "/image/site/weather/" + o + "11." + (e ? "gif'" : "png'") + "/>");
                        g.push("<div class='weatherToday" + a + "'>");
                        g.push("<div class='weatherTodayInfo" + a + "'>");
                        g.push("<span class='weatherTodayDate" + a + "'>" + E + " ");
                        g.push("" + u + " ~ </span>");
                        g.push("" + t + "<span class='temperature1" + a + "'>");
                        g.push("</span> ");
                        g.push("<span class='temperature2" + a + "'>");
                        g.push("</span>");
                        g.push("</div>");
                        g.push("<div class='weatherCon" + a + "'>");
                        if (!B) {
                            g.push("<span class='weatherCon1" + a + "'>" + q + "</span>");
                            g.push("<span>转</span>")
                        }
                        g.push("<span class='weatherCon2" + a + "'>" + p + "</span>");
                        g.push("</div>");
                        g.push("</div>");
                        g.push("</div>");
                        D = true
                    } else {
                        if (a == 12) {
                            if (e) {
                                $(".formMiddleContent" + b).css("height", 135 + "px")
                            }
                            g.push("<div class='weather2' style='width:250px;'>");
                            g.push("<div class='left" + a + "' style='width: 90px;'>");
                            g.push("<div class='cityName" + a + "'>" + w + "</div>");
                            g.push("<div class='images" + a + "'>");
                            g.push("<img class='image1" + a + "' title='" + q + "' src='" + _resRoot + "/image/site/weather/" + o + "11." + (e ? "gif'" : "png'") + "/>");
                            g.push("</div>");
                            g.push("<div class='weatherCon" + a + "'>");
                            if (!B) {
                                g.push("<span class='weatherCon1" + a + "'>" + q + "</span>");
                                g.push("<span>转</span>")
                            }
                            g.push("<span class='weatherCon2" + a + "'>" + p + "</span>");
                            g.push("</div>");
                            g.push("</div>");
                            g.push("<div class='right" + a + "'>");
                            g.push("<div class='temperatureInclude" + a + "'>");
                            g.push("<div style='float: left;'>温&nbsp;&nbsp;度：</div>");
                            g.push("<div class='temperature" + a + "'>");
                            g.push("<span class='temperature1" + a + "'>" + u + "");
                            g.push("</span> ~");
                            g.push("<span class='temperature2" + a + "'>" + t + "");
                            g.push("</span>");
                            g.push("</div>");
                            g.push("</div>");
                            g.push("<div class='windInclude" + a + "'>");
                            g.push("<div style='float: left;'>风&nbsp;&nbsp;力：</div>");
                            g.push("<div class='wind" + a + "'>");
                            g.push("" + s + "</div>");
                            g.push("</div>");
                            g.push("<div class='windDirectionInclude" + a + "'>");
                            g.push("<div style='float: left;'>风&nbsp;&nbsp;向：</div>");
                            g.push("<div class='windDirection" + a + "'>");
                            if (y == "") {
                                g.push("" + x + "</div>")
                            } else {
                                g.push("" + y + "</div>")
                            }
                            g.push("</div>");
                            g.push("</div>")
                        }
                    }
                }
            }
            if (g.length == 0) {
                var r = "<div id='toolTips" + a + "' style='margin: 0 auto;width: 120px; cursor:pointer;' onclick='Run.initModuleWeather2( " + b + ',"' + j + '", ' + a + ',"' + d + "\")'>网络缓慢，请重新加载</div>";
                $(".formMiddleContent" + b + " .includeWeather" + a).append(r)
            } else {
                $(".formMiddleContent" + b + " .includeWeather" + a).append(g.join(""))
            }
            $(".formMiddleContent" + b + " .weather2Loading").remove()
        })
    }
};
Run.initWeatherOfIP = function (b, a) {
    $.ajax({
        url: "http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js",
        type: "POST",
        dataType: "script",
        success: function (c) {
            var d = remote_ip_info.city;
            Run.initModuleWeather2(b, d, a)
        }
    })
};
Run.initModuleDate = function () {
    var a = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
        c = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], d, e, b;
    return {
        init: function (f, g) {
            d = f, e = g;
            b = $("#module" + d + "Date");
            this.start()
        }, start: function () {
            this.go();
            if (e == 2 || e == 3 || e == 5 || e == 7 || e == 8) {
                setInterval(this.go, 8001)
            }
        }, go: function () {
            var n = new Date(), l = n.getFullYear(), i = n.getMonth() + 1, p = n.getDate(), o = n.getDay(), f = a[o],
                j = c[o], k = n.getHours() + "", g = n.getMinutes() + "", q = "";
            if (k.length == 1) {
                k = "0" + k
            }
            if (g.length == 1) {
                g = "0" + g
            }
            if (e == 1) {
                q = l + "年" + i + "月" + p + "日 " + f
            } else {
                if (e == 2) {
                    q = l + "年" + i + "月" + p + "日 " + k + ":" + g
                } else {
                    if (e == 3) {
                        q = l + "年" + i + "月" + p + "日 " + f + " " + k + ":" + g
                    } else {
                        if (e == 4) {
                            q = l + "-" + i + "-" + p
                        } else {
                            if (e == 5) {
                                q = l + "-" + i + "-" + p + " " + k + ":" + g
                            } else {
                                if (e == 6) {
                                    q = i + "/" + p + "/" + l + " " + j
                                } else {
                                    if (e == 7) {
                                        q = i + "/" + p + "/" + l + " " + k + ":" + g
                                    } else {
                                        q = i + "/" + p + "/" + l + " " + j + " " + k + ":" + g
                                    }
                                }
                            }
                        }
                    }
                }
            }
            b.text(q)
        }
    }
}();
(function (a) {
    jQuery.fn.extend({
        bannerImageSwitch: function (c) {
            if (typeof Helper == "undefined") {
                alert("must import fai.js");
                return
            }
            var b = a.extend({
                title: true,
                desc: false,
                btn: true,
                repeat: "no-repeat",
                position: "50% 50%",
                titleSize: 14,
                titleFont: "Verdana,宋体",
                titleColor: "#FFF",
                titleTop: 4,
                titleLeft: 4,
                descSize: 12,
                descFont: "Verdana,宋体",
                descColor: "#FFF",
                descTop: 2,
                descLeft: 4,
                btnWidth: 15,
                btnHeight: 15,
                btnMargin: 4,
                btnType: 1,
                playTime: 4000,
                animateTime: 1500,
                animateStyle: "o",
                index: 0,
                wideScreen: false,
                btnFunc: function () {
                }
            }, c);
            return a(this).each(function () {
                var f = a(this);
                var I = b.width || f.width();
                var U = b.height || f.height();
                var P = b.data.length;
                var S = b.index;
                var e = I < f.width() ? I : f.width();
                var J = f.width();
                var w = (Run.checkBrowser() && Helper.top._bannerData.at > 0) ? true : false;
                var n = 1000;
                var B = Run.getWebBackgroundData();
                var m = B.wbs ? true : false;
                var O = (b.width <= f.width()) ? b.width : "100%";
                if (m) {
                    var L = Helper.top._manageMode ? Helper.getScrollWidth() : 0;
                    U = (U >= n) ? n : U;
                    var p, z = false;
                    if ((Helper.top.$(".g_web").width() + L) > a(window).width()) {
                        p = Helper.top.$(".g_web").width() + L
                    } else {
                        p = a(window).width();
                        z = true
                    }
                    J = J > (p - L) ? p - L : J;
                    O = J;
                    e = J;
                    if (Helper.top._wideBanner && z) {
                        Helper.top.$("#g_main").width("auto");
                        Helper.top.$("#web").width("auto")
                    }
                }
                f.css("overflow", "hidden");
                f.height(U);
                var W = a('<div class="imageSwitchShowName photoSwitchBg" />').appendTo(f).css("position", "absolute").css("display", "none").css("zIndex", 2).css("width", a.browser.msie && a.browser.version == 6 ? a(f).parent().parent().width() + "px" : a(f).parent().width() + "px").css("height", 30 + "px").css("line-height", 30 + "px");
                if (P == 0) {
                    W.css("visibility", "hidden")
                }
                if (b.showImageName) {
                    W.css("display", "block")
                }
                var N = "none";
                if (b.data.length > 1) {
                    N = b.btn ? "block" : "none"
                }
                if (b.btnType != 0) {
                    var Y = a('<div class="imageSwitchBtnArea"/>').appendTo(f).css("position", "absolute").css("zIndex", 3).css("display", N)
                }
                a("<div />").appendTo(f);
                var V = "";
                if (w) {
                    V = "billboard billboard" + Helper.top._bannerData.at
                }
                var l = a('<div class="switchGroup ' + V + '"/>').appendTo(f).css("width", O).css("position", "relative").height("y,show-y".indexOf(b.animateStyle) != -1 ? U * P : U).css("overflow", "hidden").css("margin", "0 auto");
                if (b.wideScreen) {
                    l.css("width", "100%")
                }
                var aa = 0;
                var u = "100%";
                if (b.btnType == 0) {
                    b.animateStyle = "x"
                }
                var T = [];
                var ab = "";
                var v = "";
                var g = "";
                var h = "";
                var C = "";
                var o = "";
                var R = "";
                if (b.btnType == 0) {
                    ab = "arrowImg"
                } else {
                    if (b.btnType == 1) {
                        ab = "numImg"
                    } else {
                        ab = "dotImg"
                    }
                }
                a.each(b.data, function (ae, ah) {
                    var ad = "";
                    var ag = "";
                    R = "";
                    C = "";
                    o = "";
                    if (a.trim(ah.edgeLeft) != "") {
                        C = "background:" + ah.edgeLeft + ";"
                    }
                    if (a.trim(ah.edgeRight) != "") {
                        o = "background:" + ah.edgeRight + ";"
                    }
                    if (!ah.href) {
                        ad = "onclick='return false;'"
                    }
                    if (ah.onclick) {
                        ad = "onclick='" + ah.onclick + "'"
                    }
                    T = [];
                    v = "";
                    v += "position:absolute;width:100%;";
                    if (b.btnType == 0) {
                        if (b.wideScreen || m) {
                            v += "left:" + ((ae - S) * J) + "px;"
                        } else {
                            v += "left:" + ((ae - S) * b.width) + "px;"
                        }
                    }
                    if (w) {
                        T.push("<div class='billboard_item " + ab + "'>\n")
                    } else {
                        T.push("<div class='" + ab + "' id='" + ab + ae + "' style='" + v + "'>\n")
                    }
                    g = "";
                    g += "width:100%;";
                    g += "height:" + U + "px;";
                    g += "cursor:" + (ah.href ? "pointer" : "default") + ";";
                    g += "background-position:" + b.position + ";";
                    g += "background-repeat:" + b.repeat + ";";
                    g += "overflow:hidden;";
                    g += "display:block;";
                    g += "outline:none;";
                    g += "margin:0 auto;";
                    g += "position:relative;";
                    g += "z-index:1;";
                    if (m) {
                        g += "background-size:cover;"
                    }
                    if (ah.width && ah.width > 0) {
                        h = ("<img src='" + ah.src + "' width='" + ah.width + "' height='" + ah.height + "' />\n")
                    } else {
                        h = "";
                        g += "background-image:url(" + ah.src + ");"
                    }
                    if (b.wideScreen) {
                        T.push("<a class='J_bannerEdge J_bannerEdgeLeft bannerEdge bannerEdgeLeft' hidefocus='true' title='" + (ah.tip ? ah.tip : "") + "' href='" + (ah.href ? Helper.encodeHtml(ah.href) : "javascript:;") + "' target='" + (ah.target ? ah.target : "") + "' " + ad + " style='" + C + "'></a>");
                        T.push("<a class='J_bannerEdge J_bannerEdgeRight bannerEdge bannerEdgeRight' hidefocus='true' title='" + (ah.tip ? ah.tip : "") + "' href='" + (ah.href ? Helper.encodeHtml(ah.href) : "javascript:;") + "' target='" + (ah.target ? ah.target : "") + "' " + ad + " style='" + o + "'></a>")
                    }
                    T.push("<a class='J_bannerItem' hidefocus='true' title='" + (ah.tip ? ah.tip : "") + "' href='" + (ah.href ? Helper.encodeHtml(ah.href) : "javascript:;") + "' target='" + (ah.ot == 1 ? "_blank" : "") + "' style='" + g + "' " + ad + ">\n");
                    T.push(h);
                    T.push("</a>\n");
                    T.push("</div>\n");
                    l.append(T.join(""));
                    if (b.btnType == 1) {
                        var af = a('<a class="imageSwitchBtn" />').appendTo(Y).html("<span>" + (ae + 1) + "</span>")
                    } else {
                        if (b.btnType == 2) {
                            var af = a('<a class="imageSwitchBtn_dot" />').appendTo(Y)
                        }
                    }
                    if (ae == S) {
                        R = "spanShowName"
                    }
                    var ac = a('<span class="spanHiddenName ' + R + '"/>').appendTo(W).css("margin-left", 10 + "px").text(ah.name);
                    if (b.btnType != 0) {
                        if (ae == S) {
                            if (b.btnType == 1) {
                                af.addClass("imageSwitchBtnSel")
                            } else {
                                af.addClass("imageSwitchBtnSel_dot")
                            }
                        }
                    }
                    if (b.btnType == 1) {
                        aa += Helper.getDivWidth(af)
                    }
                });
                if (b.btnType == 0) {
                    if (P > 1) {
                        var H = a('<a class="imageSwitchBtn_arrow arrow_prev" />').appendTo(f).css({
                            position: "absolute",
                            zIndex: 3
                        });
                        var X = a('<a class="imageSwitchBtn_arrow arrow_next" />').appendTo(f).css({
                            position: "absolute",
                            zIndex: 3
                        })
                    }
                }
                if (b.btnType == 1) {
                    Y.width(aa)
                }
                var k = f.parent();
                var x = k.width();
                if (a.browser.msie && a.browser.version == 6) {
                    x = k.parent().width()
                }
                var Q = k.height();
                if (x > b.width) {
                    x = b.width + (x - b.width) / 2
                }
                if (x > f.width()) {
                    x = f.width()
                }
                if (Q > U) {
                    Q = U
                }
                if (P > 1) {
                    if (b.btnType != 0) {
                        if (Helper.top.$("#banner").length > 0) {
                            if (b.btnType == 1) {
                                if (I >= f.width()) {
                                    Y.css("right", "40px")
                                } else {
                                    Y.css("right", "50%");
                                    Y.css("marginRight", "-" + I / 2 + "px")
                                }
                            } else {
                                if (b.btnType == 2) {
                                    Y.css("left", "50%");
                                    Y.css("marginLeft", "-" + Y.width() / 2 + "px")
                                }
                            }
                        } else {
                            Y.css("left", (x - aa) + "px")
                        }
                    } else {
                        var y = f.width() - I;
                        if (I <= f.width()) {
                            y = y - y * 0.5
                        } else {
                            y = 0
                        }
                        H.css("left", y);
                        X.css("right", y)
                    }
                }
                if (b.btnType != 0) {
                    var M = Y.children("a");
                    var A = l.find(".J_bannerItem")
                } else {
                    var d = X;
                    var D = H
                }
                var F = W.children("span");
                var q = x - aa;
                if (P > 1) {
                    if (b.btnType != 0) {
                        W.css("top", (Q - Y.height() - 9) + "px").css("left", 0 + "px")
                    } else {
                        W.css("top", Q + "px").css("left", 0 + "px")
                    }
                    var E = a.browser.msie && a.browser.version == 6 ? parseInt(j() + 30) : parseInt(j() + 20);
                    if (q > E) {
                        if (b.btnType == 1) {
                            Y.css("top", (Q - Y.height() - 6) + "px")
                        } else {
                            if (b.btnType == 2) {
                                Y.css("bottom", "5px")
                            } else {
                                H.css("top", "50%");
                                H.css("marginTop", "-" + H.height() / 2 + "px");
                                X.css("top", "50%");
                                X.css("marginTop", "-" + X.height() / 2 + "px")
                            }
                        }
                    } else {
                        if (b.btnType == 1) {
                            Y.css("top", (Q - Y.height() - 30) + "px")
                        } else {
                            if (b.btnType == 2) {
                                Y.css("bottom", "5px")
                            } else {
                                H.css("top", "50%");
                                H.css("marginTop", "-" + H.height() / 2 + "px");
                                X.css("top", "50%");
                                X.css("marginTop", "-" + X.height() / 2 + "px")
                            }
                        }
                    }
                }
                function j() {
                    if (F.length > 0) {
                        var ad = a(F[0]).width();
                        for (var ac = 1; ac < F.length; ac++) {
                            if (ad < a(F[ac]).width()) {
                                ad = a(F[ac]).width()
                            }
                        }
                        return ad
                    }
                    return 0
                }

                if ("o,show,none".indexOf(b.animateStyle) != -1) {
                    A.each(function (ac, ad) {
                        if (S != ac) {
                            if (!w) {
                                a(this).hide()
                            }
                            if (b.wideScreen) {
                                a(this).siblings(".J_bannerEdge").hide()
                            }
                        }
                    })
                }
                if (P == 1) {
                    F.eq(0).addClass("spanShowName")
                }
                if (P > 1) {
                    if (w) {
                        Run.bannerAnimate.init({
                            container: Helper.top.$("#banner .switchGroup"),
                            effectIndex: Helper.top._bannerData.at,
                            currentIndex: b.index,
                            speed: Helper.top._bannerData.a,
                            duration: Helper.top._bannerData.i
                        });
                        if (b.btnType != 0) {
                            M.click(function (ad) {
                                ad.stopPropagation();
                                var ac = M.index(this);
                                Run.bannerAnimate.stop();
                                Run.bannerAnimate.goTo(ac)
                            })
                        } else {
                            d.click(function (ac) {
                                ac.stopPropagation();
                                Run.bannerAnimate.next()
                            });
                            D.click(function (ac) {
                                ac.stopPropagation();
                                Run.bannerAnimate.prev()
                            })
                        }
                        f.mouseover(function () {
                            Run.bannerAnimate.stop()
                        });
                        f.mouseout(function () {
                            Run.bannerAnimate.autoPlay()
                        })
                    } else {
                        if (b.btnType != 0) {
                            M.click(function (ad) {
                                ad.stopPropagation();
                                var ac = M.index(this);
                                if (ac == S) {
                                    return
                                }
                                if (b.btnType == 1) {
                                    M.eq(S).removeClass("imageSwitchBtnSel");
                                    M.eq(ac).addClass("imageSwitchBtnSel")
                                } else {
                                    M.eq(S).removeClass("imageSwitchBtnSel_dot");
                                    M.eq(ac).addClass("imageSwitchBtnSel_dot")
                                }
                                F.eq(S).removeClass("spanShowName");
                                F.eq(ac).addClass("spanShowName");
                                switch (b.animateStyle) {
                                    case"o":
                                        A.eq(S).fadeOut(b.animateTime, "failinear");
                                        A.eq(ac).fadeIn(b.animateTime, "failinear");
                                        if (b.wideScreen) {
                                            A.eq(S).siblings().fadeOut(b.animateTime, "failinear");
                                            A.eq(ac).siblings().fadeIn(b.animateTime, "failinear")
                                        }
                                        break;
                                    case"x":
                                        l.animate({marginLeft: -ac * I}, b.animateTime);
                                        break;
                                    case"y":
                                        l.animate({marginTop: -ac * U}, b.animateTime);
                                        break;
                                    case"show":
                                    case"show-x":
                                    case"show-y":
                                        A.eq(S).hide(b.animateTime);
                                        A.eq(ac).show(b.animateTime);
                                        break;
                                    case"none":
                                        A.eq(S).hide();
                                        A.eq(ac).show();
                                        if (b.wideScreen) {
                                            A.eq(S).siblings().hide();
                                            A.eq(ac).siblings().show()
                                        }
                                        break
                                }
                                S = ac;
                                var ae = Helper.top.$("#bannerGetHref");
                                if (ae) {
                                    ae.css({
                                        width: b.data[ac].imgWidth,
                                        left: (f.width() - b.data[ac].imgWidth) / 2 + "px"
                                    });
                                    ae.css({
                                        height: b.data[ac].imgHeight,
                                        top: (f.height() - b.data[ac].imgHeight) / 2 + "px"
                                    })
                                }
                            });
                            function t() {
                                M.eq((S + 1) % P).click()
                            }
                        } else {
                            var s = S;
                            F.eq(s).addClass("spanShowName");
                            function r(ad) {
                                ad.stopPropagation();
                                if (Helper.top.$(".arrowImg").is(":animated")) {
                                    return
                                }
                                F.eq(s).removeClass("spanShowName");
                                if (s == P - 1) {
                                    s = -1
                                }
                                F.eq(++s).addClass("spanShowName");
                                var ac = e;
                                if (b.wideScreen) {
                                    ac = J
                                }
                                Helper.top.$("#arrowImg" + s).css({left: ac + "px"});
                                Helper.top.$(".arrowImg").animate({left: "-=" + ac + "px"}, b.animateTime);
                                var ae = Helper.top.$("#bannerGetHref");
                                if (ae) {
                                    ae.css({
                                        width: b.data[s].imgWidth,
                                        left: (f.width() - b.data[s].imgWidth) / 2 + "px"
                                    });
                                    ae.css({
                                        height: b.data[s].imgHeight,
                                        top: (f.height() - b.data[s].imgHeight) / 2 + "px"
                                    })
                                }
                            }

                            d.on("click", r);
                            d.hover(function () {
                                d.addClass("arrow_next_hover")
                            }, function () {
                                d.removeClass("arrow_next_hover")
                            });
                            function i(ad) {
                                ad.stopPropagation();
                                if (Helper.top.$(".arrowImg").is(":animated")) {
                                    return
                                }
                                F.eq(s).removeClass("spanShowName");
                                if (s == 0) {
                                    s = P
                                }
                                var ac = e;
                                if (b.wideScreen) {
                                    ac = J
                                }
                                F.eq(--s).addClass("spanShowName");
                                Helper.top.$("#arrowImg" + s).css({left: "-" + ac + "px"});
                                Helper.top.$(".arrowImg").animate({left: "+=" + ac + "px"}, b.animateTime);
                                var ae = Helper.top.$("#bannerGetHref");
                                if (ae) {
                                    ae.css({
                                        width: b.data[s].imgWidth,
                                        left: (f.width() - b.data[s].imgWidth) / 2 + "px"
                                    });
                                    ae.css({
                                        height: b.data[s].imgHeight,
                                        top: (f.height() - b.data[s].imgHeight) / 2 + "px"
                                    })
                                }
                            }

                            D.on("click", i);
                            D.hover(function () {
                                D.addClass("arrow_prev_hover")
                            }, function () {
                                D.removeClass("arrow_prev_hover")
                            });
                            function G() {
                                d.click()
                            }
                        }
                        var Z = "imageSwitch" + Math.random();
                        if (b.btnType != 0) {
                            Helper.addInterval(Z, t, parseInt(b.playTime + b.animateTime))
                        } else {
                            Helper.addInterval(Z, G, parseInt(b.playTime + b.animateTime))
                        }
                        var K = setTimeout(function () {
                            if (b.btnType != 0) {
                                t()
                            } else {
                                G()
                            }
                            Helper.startInterval(Z)
                        }, b.playTime);
                        if (typeof b.mouseoverId != "undefined") {
                            a(Helper.top.$(f).find("." + b.mouseoverId)[0]).mouseover(function () {
                                K && clearTimeout(K);
                                Helper.stopInterval(Z)
                            });
                            a(Helper.top.$(f).find("." + b.mouseoverId)[0]).mouseout(function () {
                                K && clearTimeout(K);
                                Helper.startInterval(Z)
                            })
                        } else {
                            f.mouseover(function () {
                                K && clearTimeout(K);
                                Helper.stopInterval(Z)
                            });
                            f.mouseout(function () {
                                K && clearTimeout(K);
                                Helper.startInterval(Z)
                            })
                        }
                    }
                }
            })
        }
    })
})(jQuery);
Run.initBanner = function (v, e, g) {
    if (Helper.top._uiMode) {
        return
    }
    var o = false;
    var a = Helper.top.$("#webBanner");
    var c = Helper.top.$("#banner");
    var x = Run.getWebBackgroundData();
    var u = x.wbs ? true : false;
    if (Helper.top._templateLayout == 0 || Helper.top._templateLayout == 1 || Helper.top._templateLayout == 9 || Helper.top._templateLayout == 10) {
        var p = Helper.top._manageMode ? Run.getWebBackgroundData().wbh : Helper.top._webBannerHeight;
        if (p > -1) {
            v.height = p;
            if (c.siblings(".nav").length > 0) {
                var q = c.attr("normalheight");
                if (q == -1) {
                    q = c.css("height").replace("px", "")
                }
                var s = c.siblings(".nav").height() || 0;
                if (p > -1) {
                    v.height = a.height() - s;
                    if (a.height() < (parseInt(q) + parseInt(s))) {
                        o = true
                    }
                }
                if (c.attr("normalheight") == -1 && o) {
                    c.css({height: v.height + "px"})
                }
            }
        }
    }
    if (v._open) {
        if (e._open && Helper.flashChecker().f) {
            v.mouseoverId = "bannerGetHref"
        } else {
            v.mouseoverId = "switchGroup"
        }
        c.children().remove();
        c.bannerImageSwitch(v);
        var r = c.width();
        var b = c.height();
        var i = Helper.top._manageMode ? Helper.getScrollWidth() : 0;
        var n = Helper.top.$(window).width() > Helper.top.$("#web").width() ? Helper.top.$(window).width() : Helper.top.$("#web").width();
        if (o) {
            b = v.height
        }
        if (u) {
            r = Helper.top.$("#webBanner").width();
            r = (r > n) ? n - i : r;
            b = Helper.top.$("#webBanner").height()
        }
        var d = (Helper.top.$("#containerFormsCenter").find("div").eq(0).attr("id"));
        var l = Helper.top.$("#banner .switchGroup");
        Helper.top.$("#banner .switchGroup .J_bannerItem").each(function (A) {
            if (!v.data[A]) {
                return false
            }
            var z = v.data[A] ? v.data[A].imgWidth : 0;
            if (r >= z && !u) {
                $(this).css("width", v.data[A].imgWidth);
                var y = l.width() - v.data[A].imgWidth;
                if (Helper.isIE()) {
                    y = y + (y % 2)
                }
                $(this).siblings(".J_bannerEdge").css("width", y / 2)
            } else {
                $(this).css("width", r);
                var y = l.width() - r;
                if (Helper.isIE()) {
                    y = y + (y % 2)
                }
                $(this).siblings(".J_bannerEdge").css("width", y / 2)
            }
            if (b >= v.data[A].imgHeight && !u) {
                if (Run.checkBrowser() && Helper.top._bannerData.at > 0) {
                    $(this).css("height", b)
                } else {
                    $(this).css("height", v.data[A].imgHeight);
                    $(this).parent().css("paddingTop", (b - v.data[A].imgHeight) / 2 + "px")
                }
                $(this).siblings(".J_bannerEdge").height(v.data[A].imgHeight);
                $(this).siblings(".J_bannerEdge").css("top", (b - v.data[A].imgHeight) / 2 + "px")
            } else {
                $(this).css("height", b);
                $(this).siblings(".J_bannerEdge").height(b)
            }
        });
        c.css("background", "none")
    } else {
        Run.refreshDefaultBannerEdge()
    }
    if (e._open && Helper.flashChecker().f) {
        if ($.browser.mozilla && $.browser.version == "49.0") {
            return
        }
        var h = 0;
        var w = 0;
        var f = Helper.top.$("#banner").width();
        if (f > 960) {
            f = 960;
            h = parseInt((Helper.top.$("#webBanner").width() - 960) / 2)
        }
        var j = Helper.top.$("#banner").height();
        if (e.position == 1) {
            f = f / 2
        } else {
            if (e.position == 2) {
                f = f / 2;
                h += f
            } else {
                if (e.position == 3) {
                    h += e.positionLeft;
                    w = e.positionTop
                }
            }
        }
        if (typeof Helper != "undefined" && typeof Helper.top._resRoot != "undefined") {
            resRoot = Helper.top._resRoot
        }
        if (typeof e.color1 == "undefined") {
            e.color1 = "#000"
        }
        if (typeof e.color2 == "undefined") {
            e.color2 = "#FFFFFF"
        }
        var t = "text1=" + Helper.encodeUrl(e.text1) + "&text2=" + Helper.encodeUrl(e.text2) + "&size1=" + e.size1 + "&size2=" + e.size2 + "&color1=0x" + e.color1.substr(1, e.color1.length - 1) + "&color2=0x" + e.color2.substr(1, e.color2.length - 1) + "&style1=" + e.style1 + "&style2=" + e.style2;
        var m = ['<div class="effectShow" id="effectShow" style="position:absolute; top:' + w + "px; left:" + h + 'px; z-index:1;">', '<object id="effectShow_swf" type="application/x-shockwave-flash"  data="' + Helper.top._resRoot + "/image/site/effects/" + e.type + ".swf?" + $.md5(t) + '" width="' + f + '" height="' + j + '">', '<param name="movie" value="' + Helper.top._resRoot + "/image/site/effects/" + e.type + ".swf?" + $.md5(t) + '"/>', '<param name="quality" value="high" />', '<param name="wmode" value="transparent" />', '<param name="flashvars" value="' + t + '"/>', '<embed id="effectShowEmbed" name="effectShow_swf" type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" src="', Helper.top._resRoot, "/image/site/effects/" + e.type + ".swf?" + $.md5(t) + '" wmode="transparent" quality="high" menu="false" play="true" loop="true" width="', f, '" height="', j, 'flashvars="' + t + '"', '" >', "</embed>", "</object>", "</div>"];
        m = m.join("");
        if (g == 4) {
            var k = '<div id="bannerGetHref" class="bannerGetHref" style="position:absolute; top:0; left:' + h + "px; width:" + f + "px; height:100%; z-index:1; background:url('" + resRoot + '/image/site/transpace.png\');" onmouseover="Run.bannerInitHref();"  onmouseout="Run.startBannerInterval();" onclick="Run.bannerGetHref();"></div>';
            m = m + k
        }
        c.append(m);
        var b = c.height();
        var r = c.width();
        if (v.data && v.data.length > 0) {
            Helper.top.$("#bannerGetHref").css({
                width: v.data[0].imgWidth,
                height: v.data[0].imgHeight,
                left: (r - v.data[0].imgWidth) / 2 + "px",
                top: (b - v.data[0].imgHeight) / 2 + "px"
            })
        }
    }
    if (v._open && $(".webBanner").width() != 960) {
        $(window).resize(function (y) {
            if (!y.target.nodeType || y.target.nodeType == 9) {
                setTimeout(function () {
                    Run.refreshBanner(0)
                }, 500)
            }
        })
    }
    Run.adjustBannerFlash()
};
Run.adjustBannerWidth = (function () {
    function b() {
        var i = Helper.top.$(window), f = Helper.top.$("#webBanner"), e = Helper.top.$("#web");
        webBgData = Run.getWebBackgroundData();
        if (f.length < 1) {
            return
        }
        if (webBgData.wbw != -1) {
            var d = Helper.top._manageMode ? Helper.getScrollWidth() : 0,
                h = (parseInt(f.css("borderLeftWidth").replace("px", "")) + parseInt(f.css("borderRightWidth").replace("px", ""))) || 0,
                g = webBgData.wbw + h, c = e.width();
            if (c - d < g && c < g) {
                a(c - h)
            }
            i.off("resize.banner");
            i.on("resize.banner", function () {
                if (Helper.top._isTemplateVersion2 && webBgData.wbws == 2) {
                } else {
                    c = e.width();
                    if (i.width() - d < g && c < g) {
                        a(c - h)
                    } else {
                        a(webBgData.wbw)
                    }
                }
            })
        } else {
            i.off("resize.banner")
        }
    }

    function a(c) {
        Helper.top.Helper.setCtrlStyleCss("styleWebRun", "", ".webBanner", "width", c + "px !important");
        Helper.top.Helper.setCtrlStyleCss("styleWebRun", "", ".webBanner .banner", "width", "auto !important");
        Helper.top.Helper.setCtrlStyleCss("styleWebRun", "", ".webBanner .switchGroup", "width", c + "px !important")
    }

    return b
})();
Run.startBannerInterval = function () {
    var a = 0;
    if (Helper.intervalFunc != undefined) {
        a = Helper.intervalFunc.length
    }
    if (a > 0) {
        var b = Helper.intervalFunc[0].id;
        if (typeof b != "undefined" && b.substring(0, 11) == "imageSwitch") {
            Helper.startInterval(b)
        }
    }
    if (Helper.top._bannerData.n && Helper.top._bannerData.n.length > 1 && Run.checkBrowser() && Helper.top._bannerData.at > 0) {
        Run.bannerAnimate.autoPlay()
    }
};
Run.stopBannerInterval = function () {
    var a = 0;
    if (Helper.intervalFunc != undefined) {
        a = Helper.intervalFunc.length
    }
    if (a > 0) {
        var b = Helper.intervalFunc[0].id;
        if (typeof b != "undefined" && b.substring(0, 11) == "imageSwitch") {
            Helper.stopInterval(b)
        }
    }
    if (Helper.top._bannerData.n && Helper.top._bannerData.n.length > 1 && Run.checkBrowser() && Helper.top._bannerData.at > 0) {
        Run.bannerAnimate.stop()
    }
};
Run.bannerInitHref = function () {
    Run.stopBannerInterval();
    var c = false;
    var a = Helper.top.$("#banner");
    var b = -1;
    a.find(".spanHiddenName").each(function (d, e) {
        if ($(this).hasClass("spanShowName")) {
            b = d;
            return false
        }
    });
    if (b == -1) {
        return
    }
    a.find(".switchGroup").children().each(function (d, e) {
        if (d == b && Helper.top.$(e).find("a").eq(0).attr("href") != "javascript:;") {
            Helper.top.$("#bannerGetHref").css("cursor", "pointer");
            c = true;
            return false
        }
    });
    if (c == false) {
        Helper.top.$("#bannerGetHref").css("cursor", "default")
    }
};
Run.bannerGetHref = function () {
    var a = Helper.top.$("#banner");
    var c = -1;
    a.find(".spanHiddenName").each(function (d, e) {
        if ($(this).hasClass("spanShowName")) {
            c = d;
            return false
        }
    });
    if (c == -1) {
        return
    }
    var b = "";
    a.find(".switchGroup").children().each(function (d, f) {
        if (d == c) {
            var e = Helper.top.$(f).find("a").eq(0);
            b = e.attr("href");
            if (b == "javascript:;") {
                $(e).click()
            }
            return false
        }
    });
    if (b != "javascript:;") {
        window.open(b)
    }
};
Run.adjustBannerFlash = function () {
    var b = Helper.top.$("#banner");
    var c = Helper.top.$("#imgPageFlash");
    if (c.length > 0) {
        var a = b.width();
        var d = c.width();
        if (a < d) {
            c.css({position: "absolute", left: -(d - a) / 2 + "px"})
        } else {
            c.css({position: "", left: ""})
        }
    }
};
Run.refreshBanner = function (i) {
    if (Helper.top._uiMode) {
        return
    }
    var a = Helper.top.$("#webBanner");
    var e = Helper.top.$("#banner");
    if (Helper.top._bannerData.h) {
        Helper.top.$("#banner").css("display", "none");
        return
    }
    if (typeof i == "undefined") {
        i = 0
    }
    if (Helper.top._bannerData.s == 3 && !Helper.top._bannerData.f.p) {
        Helper.top._bannerData.s = 0
    }
    if (Helper.top._bannerData.s == 4 && Helper.top._bannerData.n.length == 0) {
        Helper.top._bannerData.s = 0
    }
    Helper.top.$("#banner").css("display", "block");
    if (Helper.top._bannerData.s == 0) {
        Helper.top.$("#banner").removeAttr("style");
        Helper.top.$("#banner").children().remove();
        var o = [];
        o.push("<div class='" + e.attr("class") + " defaultBannerMain'></div>");
        o.push("<div class='defaultBannerEdge defaultBannerEdgeLeft'></div>");
        o.push("<div class='defaultBannerEdge defaultBannerEdgeRight'></div>");
        e.append(o.join(""));
        if (Helper.top._templateLayout == 0 || Helper.top._templateLayout == 1 || Helper.top._templateLayout == 9 || Helper.top._templateLayout == 10) {
            var j = Helper.top._manageMode ? Run.getWebBackgroundData().wbh : Helper.top._webBannerHeight;
            if (j > -1) {
                if (e.siblings(".nav").length > 0) {
                    var f = e.css("height").replace("px", "");
                    var d = e.siblings(".nav").height();
                    if (a.height() < (parseInt(f) + d)) {
                        f = a.height() - d;
                        e.css({height: f + "px"})
                    }
                }
            }
        }
        Run.refreshDefaultBannerEdge()
    } else {
        if (Helper.top._bannerData.s == 3) {
            Helper.top.$("#banner").css("background", "none");
            Helper.top.$("#banner").css("height", Helper.top._bannerData.f.h + "px");
            Helper.top.$("#banner").children().remove();
            var g = '<embed type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" id="imgPageFlash" src="' + Helper.top._bannerData.f.p + '" wmode="opaque" quality="high" menu="false" play="true" loop="true" width="' + Helper.top._bannerData.f.w + '" height="' + Helper.top._bannerData.f.h + '" ></embed>';
            Helper.top.$("#banner").append(g);
            Run.adjustBannerFlash()
        } else {
            if (Helper.top._bannerData.s == 4) {
                Helper.top.Run.refreshBannerImageSwitch(i)
            }
        }
    }
    if (Helper.top._bannerData.o) {
        if ($.browser.mozilla && $.browser.version == "49.0") {
            return
        }
        var p = 0;
        var m = 0;
        var l = Helper.top.$("#banner").width();
        var c = Helper.top.$("#banner").height();
        if (l > 960) {
            l = 960;
            p = parseInt((Helper.top.$("#webBanner").width() - 960) / 2)
        }
        if (Helper.top._bannerData.p == 1) {
            l = l / 2
        } else {
            if (Helper.top._bannerData.p == 2) {
                l = l / 2;
                p += l
            } else {
                if (Helper.top._bannerData.p == 3) {
                    p += Helper.top._bannerData.pl;
                    m = Helper.top._bannerData.pt
                }
            }
        }
        if (typeof Helper != "undefined" && typeof Helper.top._resRoot != "undefined") {
            resRoot = Helper.top._resRoot
        }
        if (typeof Helper.top._bannerData.ce.c1 == "undefined") {
            Helper.top._bannerData.ce.c1 = "#000"
        }
        if (typeof Helper.top._bannerData.ce.c2 == "undefined") {
            Helper.top._bannerData.ce.c2 = "#FFFFFF"
        }
        var k = "text1=" + Helper.encodeUrl(Helper.top._bannerData.ce.t1) + "&text2=" + Helper.encodeUrl(Helper.top._bannerData.ce.t2) + "&size1=" + Helper.top._bannerData.ce.sz1 + "&size2=" + Helper.top._bannerData.ce.sz2 + "&color1=0x" + Helper.top._bannerData.ce.c1.substr(1, Helper.top._bannerData.ce.c1.length - 1) + "&color2=0x" + Helper.top._bannerData.ce.c2.substr(1, Helper.top._bannerData.ce.c2.length - 1) + "&style1=" + Helper.top._bannerData.ce.s1 + "&style2=" + Helper.top._bannerData.ce.s2;
        var h = Helper.top._resRoot + "/image/site/effects/" + Helper.top._bannerData.t + ".swf?" + $.md5(k);
        var b = ['<div class="effectShow" id="effectShow" style="position:absolute; top:' + m + "px; left:" + p + 'px; z-index:1;">', '<object id="effectShow_swf"  type="application/x-shockwave-flash"  data="' + h + '" width="' + l + '" height="' + c + '">', '<param name="movie" value="' + h + '" />', '<param name="quality" value="high" />', '<param name="flashvars" value="' + k + '"/>', '<param name="wmode" value="transparent" />', '<embed name="effectShow_swf"  wmode="transparent" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-4445535400000" id="effectFlash" src="' + h + '" quality="high" menu="false" play="true" loop="true" width="' + l + '" height="' + c + '" flashvars="' + k + '" >', "</embed>", "</object>", "</div>"];
        b = b.join("");
        if (Helper.top._bannerData.s == 4) {
            var n = '<div id="bannerGetHref" class="bannerGetHref" style="position:absolute; top:0; left:' + p + "px; width:" + l + "px; height:100%;z-index:1; background:url('" + resRoot + '/image/site/transpace.png\');"  onmouseover="Run.bannerInitHref();" onmouseout="Run.startBannerInterval();" onclick="Run.bannerGetHref();"></div>';
            b = b + n
        }
        Helper.top.$("#banner").append(b);
        if (Helper.top._bannerData.n && Helper.top._bannerData.n.length > 0) {
            Helper.top.$("#bannerGetHref").css({
                width: Helper.top._bannerData.n[i].w,
                height: Helper.top._bannerData.n[i].h,
                left: (Helper.top.$("#banner").width() - Helper.top._bannerData.n[i].w) / 2 + "px",
                top: (Helper.top.$("#banner").height() - Helper.top._bannerData.n[i].h) / 2 + "px"
            })
        }
    } else {
        Helper.top.$("#effectShow").remove()
    }
};
Run.getWebBackgroundData = function () {
    return Helper.top._useTemplateBackground ? Helper.top._templateBackgroundData : Helper.top._customBackgroundData
};
Run.refreshBannerImageSwitch = function (g) {
    var c = 0;
    var q = 0;
    var h = new Array();
    var i = new Array();
    var s = new Array();
    var k = Helper.top._bannerData.bt;
    var o = false;
    var b = Helper.top.$("#webBanner");
    var e = Helper.top.$("#banner");
    var u = Run.getWebBackgroundData();
    var t = u.wbs ? true : false;
    $.each(Helper.top._bannerData.n, function (x, B) {
        var z = B.el || "";
        var A = B.er || "";
        var w = parseInt(B.h);
        var y = parseInt(B.w);
        if (w > c) {
            c = w
        }
        if (y > q) {
            q = y
        }
        if (B.e != 0) {
            var v = B.jUrl || "javascript:;";
            if (Helper.top._manageMode) {
                if ($(".panelLibItem[vid=" + B.i + "]").data("JURL") != undefined) {
                    v = $(".panelLibItem[vid=" + B.i + "]").data("JURL")
                }
                if (B.urlChange == 1) {
                    v = B.jUrl || "javascript:;"
                }
            }
            if (v.length > 12 && v.substring(0, 10) == "javascript") {
                h.push({
                    src: B.p,
                    href: "javascript:;",
                    onclick: v.substring(11) + "return false;",
                    ot: B.ot,
                    imgWidth: y,
                    imgHeight: w,
                    edgeLeft: z,
                    edgeRight: A
                })
            } else {
                h.push({src: B.p, href: v, ot: B.ot, imgWidth: y, imgHeight: w, edgeLeft: z, edgeRight: A})
            }
        } else {
            h.push({src: B.p, imgWidth: y, imgHeight: w, edgeLeft: z, edgeRight: A})
        }
        i.push(y);
        s.push(w)
    });
    if (Helper.top._templateLayout == 0 || Helper.top._templateLayout == 1 || Helper.top._templateLayout == 9 || Helper.top._templateLayout == 10) {
        var d = Helper.top._manageMode ? Run.getWebBackgroundData().wbh : Helper.top._webBannerHeight;
        if (d > -1) {
            c = d;
            if (e.siblings(".nav").length > 0) {
                var p = e.attr("normalheight");
                if (p == -1) {
                    p = e.css("height").replace("px", "")
                }
                var r = r = e.siblings(".nav").height() || 0;
                if (d > -1 && b.height() < (p + r)) {
                    o = true;
                    c = b.height() - r
                }
            }
        }
    }
    c = t ? Helper.top.$("#banner").height() : c;
    Helper.top.$("#banner").css("background", "none");
    Helper.top.$("#banner").children().remove();
    Helper.top.$("#banner").css("height", c + "px");
    Helper.top.$("#banner").bannerImageSwitch({
        data: h,
        index: g,
        width: q,
        height: c,
        from: "banner",
        playTime: Helper.top._bannerData.i,
        animateTime: Helper.top._bannerData.a,
        btnType: k,
        wideScreen: Helper.top._bannerData.ws
    });
    var a = Helper.top.$("#banner").width();
    var l = Helper.top.$("#banner").height();
    var j = Helper.top._manageMode ? Helper.getScrollWidth() : 0;
    var n = Helper.top.$(window).width() > Helper.top.$("#web").width() ? Helper.top.$(window).width() : Helper.top.$("#web").width();
    if (o) {
        l = c
    }
    if (t) {
        a = Helper.top.$("#webBanner").width();
        a = (a > n) ? n - j : a
    }
    var f = (Helper.top.$("#containerFormsCenter").find("div").eq(0).attr("id"));
    var m = Helper.top.$("#banner .switchGroup");
    Helper.top.$("#banner .switchGroup .J_bannerItem").each(function (w) {
        if (a >= i[w] && !t) {
            $(this).css("width", i[w]);
            var v = m.width() - i[w];
            if (Helper.isIE()) {
                v = v + (v % 2)
            }
            $(this).siblings(".J_bannerEdge").css("width", (v / 2) + "px")
        } else {
            $(this).css("width", a);
            var v = m.width() - a;
            if (Helper.isIE()) {
                v = v + (v % 2)
            }
            $(this).siblings(".J_bannerEdge").css("width", (v / 2) + "px")
        }
        if (l >= s[w] && !t) {
            if (Run.checkBrowser() && Helper.top._bannerData.at > 0) {
                $(this).css("height", l)
            } else {
                $(this).css("height", s[w]);
                $(this).parent().css("paddingTop", (l - s[w]) / 2 + "px")
            }
            $(this).siblings(".J_bannerEdge").css("height", s[w]);
            $(this).siblings(".J_bannerEdge").css("top", (l - s[w]) / 2 + "px")
        } else {
            $(this).css("height", l);
            $(this).siblings(".J_bannerEdge").css("height", l)
        }
    })
};
Run.refreshDefaultBannerEdge = function () {
    var b = Helper.top.$("#banner");
    if (b.length > 0) {
        var c = b.attr("defaultwidth") || 960;
        if (b.children(".defaultBannerEdge").length > 0) {
            var a = b.width() - c;
            a = (a + (a % 2)) / 2;
            b.children(".defaultBannerEdge").css("width", a)
        }
    }
};
Run.checkBrowser = (function () {
    var c = ["animation", "MozAnimation", "webkitAnimation", "msAnimation", "OAnimation"],
        e = ["transform", "MozTransform", "webkitTransform", "msTransform", "OTransform"],
        b = ["opacity", "MozOpacity", "webkitOpacity", "msOpacity", "OOpacity"], d = document.createElement("div"),
        a = {};
    return function (g) {
        if (typeof a[g] == "boolean") {
            return a[g]
        }
        switch (g) {
            case"animation":
                props = c;
                break;
            case"transform":
                props = e;
                break;
            case"opacity":
                props = b;
                break;
            default:
                props = c
        }
        for (var h = 0, f = props.length; h < f; h++) {
            if (d.style[props[h]] !== undefined) {
                a[g] = true;
                return a[g]
            }
        }
        a[g] = false;
        return a[g]
    }
})();
Run.bannerAnimate = {};
(function (h, q, i) {
    var C = false, u = 1, b = 0, g = -1, d = -1,
        c = {autoPlay: true, currentIndex: 0, speed: 1500, duration: 4000, effectIndex: 1}, E, t = false, w = true, m,
        o, y = 0, A = 0, j = 0, s;
    q.init = function (F) {
        C = Run.checkBrowser();
        if (!C) {
            return
        }
        if (!F.container) {
            return
        }
        e();
        l();
        D(F);
        k();
        z()
    };
    function e() {
        if (Helper.isSafari()) {
        } else {
            if (navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)) {
            } else {
                return
            }
        }
        Helper.top.$("#banner").addClass("fk-fixPerspective")
    }

    function l() {
        t = false;
        clearTimeout(m);
        for (var F = 0; F < y; F++) {
            r(s.eq(F)[0], p)
        }
    }

    function z() {
        n();
        if (E.autoPlay) {
            B()
        }
    }

    function B() {
        if (!t) {
            clearTimeout(m);
            m = setTimeout(q.next, E.duration)
        }
    }

    function v() {
        Run.refreshBanner(b)
    }

    q.autoPlay = function () {
        w = true;
        B()
    };
    q.next = function () {
        var F = b + 1;
        if (F >= s.length) {
            F = 0
        }
        q.goTo(F, false)
    };
    q.prev = function () {
        var F = b - 1;
        if (F < 0) {
            F = s.length - 1
        }
        q.goTo(F, true)
    };
    q.stop = function () {
        if (!w) {
            return
        }
        w = false;
        clearTimeout(m)
    };
    q.goTo = function (L, K) {
        if (isNaN(L) || L >= y || L < 0 || L == b) {
            return
        }
        if (t) {
            return
        }
        d = L;
        if (typeof K === "undefined") {
            var K = (d > b ? false : true)
        }
        var M = Helper.top.$("#banner").find(".imageSwitchBtnArea"), F = Helper.top.$("#banner").find(".imageSwitchShowName"),
            H = F.children("span"), J = M.children("a"), Q = s.eq(b), I = s.eq(d);
        if (Helper.top._bannerData.bt == 0) {
        } else {
            if (Helper.top._bannerData.bt == 1) {
                J.removeClass("imageSwitchBtnSel");
                J.eq(d).addClass("imageSwitchBtnSel")
            } else {
                if (Helper.top._bannerData.bt == 2) {
                    J.removeClass("imageSwitchBtnSel_dot");
                    J.eq(d).addClass("imageSwitchBtnSel_dot")
                }
            }
        }
        H.removeClass("spanShowName");
        H.eq(d).addClass("spanShowName");
        I.css("display", "block");
        if (u == 11) {
            var O = ["15% 15%", "85% 85%", "15% 85%", "85% 15%"];
            var G = ["billboardItem_11_on_zoomOut", "billboardItem_11_on_zoomIn"];
            var P = O[Math.floor(Math.random() * O.length)];
            var N = G[Math.floor(Math.random() * G.length)];
            I.addClass(N).removeClass("billboardItem_11_off");
            x(I, "transformOrigin", P);
            Q.addClass("billboardItem_11_off");
            Q.removeClass("billboardItem_11_on_zoomIn billboardItem_11_on_zoomOut billboardItem_11_start")
        } else {
            Q.removeClass("billboardItem_" + u + "_on billboardItem_" + u + "_on_reverse");
            Q.addClass("billboardItem_" + u + "_off");
            I.removeClass("billboardItem_" + u + "_off billboardItem_" + u + "_off_reverse");
            I.addClass("billboardItem_" + u + "_on");
            if (K) {
                Q.addClass("billboardItem_" + u + "_off_reverse");
                I.addClass("billboardItem_" + u + "_on_reverse")
            }
        }
        t = true;
        g = b;
        b = d;
        f(I[0], p)
    };
    function p() {
        if (r(this, p)) {
            t = false;
            s.eq(g).css("display", "none");
            if (w) {
                clearTimeout(m);
                if (E.effectIndex == 13) {
                    v()
                } else {
                    m = setTimeout(function () {
                        q.next()
                    }, E.duration)
                }
            } else {
                if (E.effectIndex == 13) {
                    v()
                }
            }
        }
    }

    function n() {
        var H;
        for (var G = 0; G < s.length; G++) {
            H = s.eq(G);
            x(H, "animationDuration", E.speed + "ms")
        }
        var F = s.eq(E.currentIndex);
        F.addClass("billboardItem_" + u + "_start");
        s.css("display", "none");
        F.css("display", "block")
    }

    function f(F, G) {
        F.addEventListener("animationend", G, false);
        F.addEventListener("webkitAnimationEnd", G, false);
        F.addEventListener("oAnimationEnd", G, false);
        F.addEventListener("oanimationend", G, false);
        F.addEventListener("msAnimationEnd", G, false);
        return true
    }

    function r(F, G) {
        F.removeEventListener("animationend", G, false);
        F.removeEventListener("webkitAnimationEnd", G, false);
        F.removeEventListener("oAnimationEnd", G, false);
        F.removeEventListener("oanimationend", G, false);
        F.removeEventListener("msAnimationEnd", G, false);
        return true
    }

    function k() {
        A = o.width() || 0;
        j = Helper.top.$("#banner").height() || 0;
        var O;
        var M = Run.getWebBackgroundData();
        var K = M.wbs ? true : false;
        var I = Helper.top._manageMode ? Helper.getScrollWidth() : 0;
        var F = Helper.top.$(window).width() - I;
        if (K) {
            A = (A > F) ? F : A
        }
        if (E.effectIndex == 13) {
            o.addClass("billboard" + u)
        }
        o.css("height", j + "px");
        for (var H = 0; H < s.length; H++) {
            O = s.eq(H);
            O.addClass("billboardItem_" + u + " billboardAnim");
            O.css({width: A + "px", height: j + "px"});
            if (u == 6) {
                x(O, "transformOrigin", "50% 50% " + (-A / 2) + "px")
            } else {
                if (u == 7) {
                    x(O, "transformOrigin", "50% 50% " + (-j / 2) + "px")
                } else {
                    if (u == 8 || u == 9) {
                        var L = h(document.createElement("div"));
                        L.addClass("billboard_item billboardItem_" + u + " billboardItem_" + u + "_" + (H + 1));
                        for (var G = 1; G <= 3; G++) {
                            var J = h(document.createElement("div"));
                            J.addClass("billboardTile billboardTile_" + G + " billboardAnim");
                            x(J, "animationDuration", E.speed + "ms");
                            if (u == 8) {
                                x(J, "transformOrigin", "50% 50% " + (-A / 2) + "px")
                            } else {
                                x(J, "transformOrigin", "50% 50% " + (-j / 2) + "px")
                            }
                            var P = O.clone();
                            P.attr("class", "billboardImg").removeAttr("style");
                            P.find(".J_bannerItem").addClass("billboardImgInner");
                            h(J).append(P);
                            h(L).append(J)
                        }
                        O.before(L);
                        O.remove()
                    } else {
                        if (u == 10 || u == 12) {
                            var L = h(document.createElement("div"));
                            L.addClass("billboard_item billboardItem_" + u + " billboardItem_" + u + "_" + (H + 1));
                            L.css({width: "100%", height: j + "px"});
                            for (var G = 1; G <= 4; G++) {
                                var J = h(document.createElement("div"));
                                J.addClass("billboardTile billboardTile_" + G);
                                var N = h(document.createElement("div"));
                                N.addClass("billboardAnim billboardTileImg");
                                x(N, "animationDuration", E.speed + "ms");
                                J.append(N);
                                var P = O.clone();
                                P.attr("class", "billboardImg").removeAttr("style");
                                P.find(".J_bannerItem").addClass("billboardImgInner");
                                N.append(P);
                                L.append(J)
                            }
                            O.before(L);
                            O.remove()
                        }
                    }
                }
            }
        }
        if (u == 8 || u == 9 || u == 10 || u == 12) {
            s = o.children();
            y = s.length
        }
    }

    function D(F) {
        g = -1;
        d = -1;
        E = h.extend({}, c, F);
        u = E.effectIndex;
        if (E.effectIndex == 13) {
            u = a(1, 12)
        }
        b = E.currentIndex;
        w = E.autoPlay;
        o = E.container;
        s = o.children();
        y = s.length
    }

    function x(H, I, G) {
        var F = I.substring(0, 1).toUpperCase() + I.substring(1);
        H.css("Webkit" + F, G);
        H.css("Moz" + F, G);
        H.css("ms" + F, G);
        H.css("O" + F, G);
        H.css(I, G)
    }

    function a(H, F) {
        var G = F - H + 1;
        return Math.floor(Math.random() * G + H)
    }
})(jQuery, Run.bannerAnimate);
Run.initModuleProductSearch = function (e) {
    var d = $("#module" + e + " .productSearch");
    d.autocomplete({
        source: function (g, f) {
            jQuery.ajax({
                url: "ajax/product_h.php",
                data: "cmd=getKeywordList&limit=6&term=" + Helper.encodeUrl(d.val()) + "&prgmid=" + e,
                type: "GET",
                dataType: "json",
                success: function (h) {
                    f($.map(h, function (i) {
                        return {label: i, value: i}
                    }))
                }
            })
        }, delay: 100, select: function (g, h) {
            var f = h.item.label;
            Run.searchProduct(e, f)
        }
    });
    d.keypress(function (f) {
        if (f.keyCode == 13) {
            Run.searchProduct(e)
        }
    });
    var c = $("#module" + e);
    var b = c.find(".searchBox").attr("class");
    var a = c.find(".recommandKeyBox");
    if (b == "searchBox") {
        a.css("vertical-align", "7px")
    } else {
        a.css("vertical-align", "11px")
    }
};
Run.searchProduct = function (d, a) {
    var e = $("#module" + d), c, f, b;
    if (e.find(".fk-newSearchBox").length) {
        c = e.find(".fk-newSearchInput")
    } else {
        c = e.find("input.g_itext")
    }
    f = c.val();
    if (c.attr("_searching")) {
        return
    }
    if (a) {
        f = a
    }
    if (f.trim() == "") {
        Helper.ing("请输入搜索内容", true);
        return
    }
    Helper.top.location.href = "pr.php?keyword=" + Helper.encodeUrl($.trim(f)) + "&_pp=0_" + d
};
Run.searchProductByKey = function (c, d, b) {
    var a = "pr.php?keyword=" + Helper.encodeUrl($.trim(d)) + "&_pp=0_" + c;
    if (Helper.top._manageMode) {
        Run.redirectUrl(a, "_self", b, 1, 0)
    } else {
        Helper.top.location.href = a
    }
};
Run.changeTxtLenght = function () {
    var b = Helper.top.$(".head_txt").length;
    var a = [];
    for (var d = 0; d < b; d++) {
        var c = $(".head_txt").eq(d).width();
        a.push(c)
    }
    var e = Math.max.apply(null, a);
    $(".head_txt").css("width", e)
};
Run.memberCenterInit = function (b, d, f, c, e, a) {
    if (c) {
        $("#module" + d).find(".formBanner").hide()
    }
    $(".mCenter .mCenterLeft li").click(function () {
        $(".mCenter .mCenterTitle:first-child").text($(this).find("span").html());
        if (c && $(this).attr("id") == "memberCoupon") {
            $(".mCenter .mCenterTitleList").hide()
        } else {
            $(".mCenter .mCenterTitleList").show()
        }
        if ($(this).attr("id") == "memberOrder") {
            var g = $(".memberOrderNewPanel .mallOrderNewList");
            $(".J_orderEmpty").hide();
            if ($(".itemList .itemLine").length == 0) {
                $(".pagenation").hide()
            }
            if ($(".memberOrderOldPanel .line.itemLine").length == 0) {
                $(".memberOrderOldPanel .pagenation").hide()
            }
            $(".mCenterTitle").removeClass("mCenterTitleSelected");
            $(".memberOrderPanel").find(".itemList .itemLine").show();
            if (c && e) {
                $(".mCenter .mCenterTitleList .mCenterTitle:first-child").addClass("mCenterTitleSelected" + a)
            }
            $(".mCenter .mCenterTitleList .mCenterTitle:first-child").addClass("mCenterTitleSelected");
            $(".mCenter .mCenterTitleList .mCenterTitleOrder").show();
            $(".mCenterTitle").on("click.mCenterTitle", function () {
                $(".mCenter .mCenterTitleList .mCenterTitle:first-child").css("cursor", "pointer");
                if (c && e) {
                    $(".mCenterTitle").removeClass("mCenterTitleSelected" + a);
                    $(this).addClass("mCenterTitleSelected" + a)
                }
                $(".mCenterTitle").removeClass("mCenterTitleSelected");
                $(this).addClass("mCenterTitleSelected");
                if (c) {
                    $(this).css("display", "table-cell")
                } else {
                    $(this).css("display", "inline-block")
                }
                if (g.attr("_managemode")) {
                    if ($(this).hasClass("J_refundStatus")) {
                        $(".memberOrderPanel").find(".itemList .itemLine").each(function (l, m) {
                            var k = false;
                            $(m).find(".J_refundTD").each(function (o, q) {
                                var p = parseInt($(q).attr("_rs")) || 0;
                                if (p > 0 && p < 35) {
                                    k = true;
                                    return false
                                }
                            });
                            if (k) {
                                $(this).show()
                            } else {
                                $(this).hide()
                            }
                        })
                    } else {
                        if ($(this).hasClass("mCenterTitleOrder")) {
                            var j = $(this).text();
                            $(".memberOrderPanel").find(".itemList .itemLine .J-status").each(function (k, l) {
                                if ($(this).text() == j) {
                                    $(this).parents(".itemLine").show()
                                } else {
                                    $(this).parents(".itemLine").hide()
                                }
                            })
                        } else {
                            $(".memberOrderPanel").find(".itemList .itemLine").show()
                        }
                    }
                }
                if ($(".itemList .itemLine").length == 0) {
                    $(".pagenation").hide();
                    $(".J_orderEmpty").show()
                } else {
                    $(".J_orderEmpty").hide();
                    $(".pagenation").show()
                }
                if (g.attr("_managemode")) {
                    if ($(".itemList .itemLine:visible").length == 0) {
                        $(".pagenation").hide();
                        $(".line.g_title").hide();
                        $(".orderEmpty").show();
                        $(".J_orderEmpty").show()
                    } else {
                        $(".pagenation").show();
                        $(".line.g_title").show();
                        $(".J_orderEmpty").hide();
                        $(".orderEmpty").hide()
                    }
                }
                if (!g.attr("_managemode")) {
                    g.children().hide();
                    if ($(this).hasClass("J_allOrder")) {
                        $(".mallOrderAll").show()
                    } else {
                        if ($(this).hasClass("J_waitSettle")) {
                            $(".mallOrderWaitSettle").show()
                        } else {
                            if ($(this).hasClass("J_finSettle")) {
                                $(".mallOrderFinSettle").show()
                            } else {
                                if ($(this).hasClass("J_FinPay")) {
                                    $(".mallOrderFinPay").show()
                                } else {
                                    if ($(this).hasClass("J_FinShip")) {
                                        $(".mallOrderFinShip").show()
                                    } else {
                                        if ($(this).hasClass("J_finProcess")) {
                                            $(".mallOrderFinProcess").show()
                                        } else {
                                            if ($(this).hasClass("J_refundStatus")) {
                                                $(".mallOrderRefund").show()
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            });
            if (g.length > 0 && !g.attr("_managemode")) {
                $(".mCenterTitleSelected").click()
            }
        } else {
            $(".mCenterTitle").off("click.mCenterTitle");
            $(".mCenter .mCenterTitleList .mCenterTitle:first-child").removeClass("mCenterTitleSelected");
            $(".mCenter .mCenterTitleList .mCenterTitleOrder").hide()
        }
        var i = $(this).attr("id");
        var h = $(".mCenter .mCenterRight ." + i + "Panel");
        h.show();
        h.siblings().hide();
        if (c && e) {
            $(this).addClass("selected");
            $(this).find("span").addClass("g_selected" + a);
            $(this).siblings().removeClass("selected");
            $(this).siblings().find("span").removeClass("g_selected" + a)
        } else {
            $(this).addClass("selected");
            $(this).find("span").addClass("g_selected");
            $(this).siblings().removeClass("selected");
            $(this).siblings().find("span").removeClass("g_selected")
        }
    });
    switch (b) {
        case"memberOrder":
            $("#memberOrder")[0].click();
            break;
        case"memberIntegral":
            if ($("#memberIntegral").length > 0) {
                $("#memberIntegral")[0].click();
                break
            }
        case"memberInfo":
            $("#addrMsg").click();
            break;
        case"memberCoupon":
            $("#memberCoupon").click();
            break;
        case"memberCollection":
            $("#memberCollection").click();
            break;
        default:
            $("#memberProfile")[0].click();
            break
    }
    Run.initContentSplitLine(d, f)
};
Run.memberCenterNewStyleSmallWidth = function (d, b) {
    var a = $("#module" + d);
    var e = a.width();
    var c = true;
    if (a.find(".memberOrderNewPanel .J-mallOrder .itemList").hasClass("newRefundStyle")) {
        c = false
    }
    if (b && e < 1200 && c) {
        a.find(".J-mCenterR").css("padding-left", "15px");
        a.find(".memberOrderNewPanel .J-mallOrder .itemList .g_title .itemOpt").css("padding-left", "60px")
    }
};
Run.memberCenterCompatibility = function (b) {
    var c = !("placeholder" in document.createElement("input"));
    if (c) {
        var a = $("#module" + b).find(".itemCtrl");
        $.each(a, function (j, l) {
            var m = $(l).find("span");
            m.css({"white-space": "nowrap"});
            var g = $(m).width();
            var k = $(m).height();
            var f = $(l).position().top + (Helper.isIE6() ? 2 : 0);
            var d = $(l).position().left;
            $(m).css({
                top: f + "px",
                left: d + "px",
                "line-height": k + "px",
                padding: "0px 0px 0px 4px",
                width: g + "px"
            });
            var h = $(l).find("input").val();
            if (h && h.length > 0) {
                $(m).hide()
            }
        })
    }
};
Run.memberHeadPicInit = function (b) {
    if (typeof(headPic) != "undefined") {
        headPic = $.parseJSON(headPic);
        var a = headPic.width / 100;
        $("#memberHeadPic").css({
            width: headPic.imgW / a + "px",
            height: headPic.imgH / a + "px",
            top: -(headPic.top / a) + "px",
            left: -headPic.left / a + "px"
        })
    }
    $(".memberHeadPic").on({
        hover: function () {
            $(".hoverTip").toggle()
        }, click: function () {
            var c = "memberHeadPicEdit.php?id=" + b + "&headPic=" + Helper.encodeUrl($.toJSON(headPic)) + "&mCenter=1";
            Helper.popupWindow({
                title: "自定义头像",
                bannerDisplay: false,
                frameSrcUrl: c,
                width: 650,
                height: 650,
                closeFunc: function (d) {
                    if (d) {
                        newImg = d.newImg;
                        if (d.headPic.thumbId || newImg) {
                            headPic = d.headPic;
                            Run.showMemberHeadPic($("#memberHeadPic"), headPic, 100);
                            Run.showMemberHeadPic($("#topBarMemberPic"), headPic, 30);
                            $(".memberProfileBtn").click()
                        }
                    }
                }
            });
            $(".formDialog .formX_old").removeClass("formX_old").removeClass("formX").addClass("formXRun").css("margin-top", "10px");
            $(".formDialog").addClass("formBox")
        }
    })
};
Run.img_sf = function (d) {
    var A = document.body, B = document.getElementById("img_1"), z = document.getElementById("img_2"),
        x = document.getElementById("img_3"), m = document.getElementById("imgShadow3"),
        g = document.getElementById("imgShadow1"), b = document.getElementById("imgShadow4"),
        c = document.getElementById("imgShadow5"), i = document.getElementById("imgShadow2"), p = {};
    if (d.width > 350) {
        d.style.width = 350;
        $(".imgArea").css("width", "350px")
    } else {
        if (d.height > 350) {
            d.style.height = 350;
            $(".imgArea").css("height", "350px")
        }
    }
    var e = d.height, s = d.width, j = Math.min(e, s), C = document.getElementById("img_dsf"),
        r = coverImgHeight = m.style.width == "" ? j : $(m).width(), a, f = $(".editPicArea");
    $(".imgArea").css("height", e + "px");
    coverImgLeft = m.style.width == "" ? (s - r) / 2 : m.offsetLeft, coverImgTop = m.style.width == "" ? (e - coverImgHeight) / 2 : m.offsetTop;
    t();
    $(".imgArea").css({top: (f.height() - e) / 2 + "px", left: (f.width() - s) / 2 - 10 + "px"});
    var l, w, o, u, k, n, y, v;
    var q = false;
    $("body").on("mouseup", function () {
        q = false
    });
    $(".imgArea .coverBox,#layerImg").on({
        mousedown: function (E) {
            E = E ? E : window.event;
            l = m.offsetTop;
            w = m.offsetLeft;
            o = $(m).width();
            k = {x: E.clientX, y: E.clientY};
            q = true;
            Run.enablePopupBtn("save", true);
            var D = E.target.id;
            if (D == "dragBotCenter" || D == "dragRightCenter" || D == "dragRightBot") {
                h(1)
            } else {
                if (D == "dragLeftCenter" || D == "dragLeftBot") {
                    h(2)
                } else {
                    if (D == "dragTopCenter" || D == "dragRightTop") {
                        h(3)
                    } else {
                        if (D == "dragLeftTop") {
                            h(4)
                        } else {
                            h(0)
                        }
                    }
                }
            }
        }, mouseup: function () {
            q = false
        }
    });
    function h(D) {
        document.onmousemove = function (E) {
            if (!q) {
                return
            }
            E = E ? E : window.event;
            n = {x: E.clientX, y: E.clientY};
            y = n.x - k.x;
            v = n.y - k.y;
            switch (D) {
                case 0:
                    r = o;
                    coverImgTop = l + v;
                    coverImgLeft = w + y;
                    break;
                case 1:
                    r = o + y;
                    coverImgTop = l;
                    coverImgLeft = w;
                    break;
                case 2:
                    r = o - y;
                    coverImgTop = l;
                    coverImgLeft = w + y;
                    break;
                case 3:
                    r = o + y;
                    coverImgTop = l - y;
                    coverImgLeft = w;
                    break;
                case 4:
                    r = o - y;
                    coverImgTop = l + y;
                    coverImgLeft = w + y;
                    break
            }
            t()
        }
    }

    function t() {
        if (r < 100) {
            r = 100;
            coverImgHeight = 100
        } else {
            if (r > Math.min(s, e)) {
                r = Math.min(s, e);
                coverImgHeight = Math.min(s, e)
            }
        }
        if (coverImgTop < 0) {
            coverImgTop = 0
        } else {
            if (coverImgTop > e - r) {
                coverImgTop = e - r
            }
        }
        if (coverImgLeft < 0) {
            coverImgLeft = 0
        } else {
            if (coverImgLeft > s - r) {
                coverImgLeft = s - r
            }
        }
        if (coverImgTop >= 0 && coverImgTop <= e - r && coverImgLeft >= 0 && coverImgLeft <= s - r) {
            $(m).css({width: r, height: r, top: coverImgTop, left: coverImgLeft});
            $("#coverBox").css({width: r - 2, height: r - 2, top: coverImgTop, left: coverImgLeft});
            $(g).css({width: s, height: coverImgTop, top: 0, left: 0});
            $(i).css({width: coverImgLeft, height: r, top: coverImgTop, left: 0});
            $(b).css({width: s - r - coverImgLeft, height: r, top: coverImgTop, left: r + coverImgLeft});
            $(c).css({width: s, height: e - r - coverImgTop, top: r + coverImgTop, left: 0});
            a = [r / 100, r / 50, r / 30];
            $("#img_1").css({width: s / a[0], height: e / a[0], top: -coverImgTop / a[0], left: -coverImgLeft / a[0]});
            $("#img_2").css({width: s / a[1], height: e / a[1], top: -coverImgTop / a[1], left: -coverImgLeft / a[1]});
            $("#img_3").css({width: s / a[2], height: e / a[2], top: -coverImgTop / a[2], left: -coverImgLeft / a[2]})
        }
    }
};
Run.showMemberHeadPic = function (d, a, b) {
    d.attr("src", a.path);
    var c = a.width / b;
    d.css({width: a.imgW / c, height: a.imgH / c, top: -a.top / c, left: -a.left / c})
};
Run.memberImgFileUpload = function (a, c, e) {
    var d = e.split(",");
    var b = {
        file_post_name: "Filedata",
        upload_url: "/ajax/memberHeadImgUp_h.php",
        button_placeholder_id: c,
        file_size_limit: a + "MB",
        file_queue_limit: 1,
        button_cursor: SWFUpload.CURSOR.HAND,
        button_width: "80",
        button_height: "30",
        requeue_on_error: false,
        post_params: {ctrl: "Filedata", app: 21},
        file_types: d.join(";"),
        file_dialog_complete_handler: function (f) {
            this._allSuccess = false;
            this.startUpload()
        },
        file_queue_error_handler: function (g, f, h) {
            switch (f) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Run.initPopupBox(LS.mobiFormSubmitFileUploadNotAllow, "alert", "");
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Run.initPopupBox(jm.format(LS.mobiFormSubmitFileUploadOneTimeNum, "1"), "alert", "");
                    break;
                default:
                    Run.initPopupBox(LS.mobiFormSubmitFileUploadReSelect, "alert", "");
                    break
            }
        },
        upload_success_handler: function (g, f) {
            var h = jQuery.parseJSON(f);
            this._allSuccess = h.success;
            this._sysResult = h.msg;
            if (h.success) {
                onFileUploadEvent("upload", h)
            } else {
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                Helper.ing("文件" + g.name + "，" + h.msg)
            }
        },
        upload_error_handler: function (g, f, h) {
            if (f == -280) {
                Helper.ing("文件取消成功", false)
            } else {
                if (f == -270) {
                    Helper.ing("已经存在名称为" + g.name + "的文件。", true)
                } else {
                    Helper.ing("服务繁忙，文件" + g.name + "上传失败，请稍候重试。")
                }
            }
            $("#imgShadow3").removeClass("loading");
            $("#imgShadow3").children().show()
        },
        upload_complete_handler: function (f) {
            if (f.filestatus == SWFUpload.FILE_STATUS.COMPLETE && this._allSuccess) {
                swfObj.startUpload()
            } else {
                if (f.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Helper.ing("服务繁忙，文件" + f.name + "上传失败，请稍候重试。");
                    $("#imgShadow3").removeClass("loading");
                    $("#imgShadow3").children().show()
                }
            }
        },
        upload_start_handler: function (f) {
            Helper.enablePopupWindowBtn(0, "save", false);
            Helper.ing("读取文件准备上传", false)
        },
        view_progress: function (f, i, h, g) {
            Helper.ing("正在上传" + g + "%", false);
            $("#imgShadow3").addClass("loading");
            $("#imgShadow3").children().hide()
        }
    };
    swfObj = SWFUploadCreator.create(b);
    onFileUploadEvent = function (n, j) {
        if (n == "upload") {
            var k = j.name, i = j.size, h = j.path, m = j.id, f = j.width, l = j.height;
            smallPath = j.smallPath;
            newImg = j;
            var g = new Image();
            g.src = smallPath;
            g.onload = function () {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(k)), true);
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                $(".formBodyContent").find(".editPicArea #memberHeadPic").attr("src", smallPath);
                $(".formBodyContent").find(".viewPicArea img").attr("src", smallPath);
                $("#imgShadow3").css("width", "")
            };
            Run.enablePopupBtn("save", true)
        }
    }
};
Run.memberImgFileUploadH5 = function (d, e, c, g, j, i, h) {
    var b = c.split(",");
    var f = {
        siteFree: i,
        updateUrlViewRes: j,
        auto: true,
        fileTypeExts: b.join(";"),
        multi: false,
        fileSizeLimit: d * 1024 * 1024,
        breakPoints: true,
        saveInfoLocal: false,
        showUploadedPercent: false,
        showUploadedSize: false,
        removeTimeout: 9999999,
        post_params: {app: 21, type: 0, fileUploadLimit: d, isRunForm: true},
        isBurst: false,
        isDefinedButton: true,
        buttonText: h,
        uploader: "/ajax/memberHeadImgUp_h.php?cmd=mobiUpload&_TOKEN=" + $("#_TOKEN").attr("value"),
        onUploadSuccess: function (k, m) {
            var l = jQuery.parseJSON(m);
            if (l.success) {
                onFileUploadEvent("upload", l);
                setTimeout(function () {
                    Helper.ing("文件上传成功", true)
                }, 2000)
            } else {
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                Helper.ing("文件:" + k.name + "，" + l.msg)
            }
        },
        onUploadError: function (k, l) {
            $("#progressBody_ " + k.id).remove();
            $("#progressWrap_" + k.id).remove();
            $("#imgShadow3").removeClass("loading");
            $("#imgShadow3").children().show();
            Helper.ing("网络繁忙，文件:" + k.name + "上传失败，请稍后重试")
        },
        onSelect: function () {
            if (g) {
                Helper.ing("已超过资源库容量限制，请升级网站版本。");
                return false
            } else {
                return true
            }
        },
        onUploadStart: function (k) {
            $("#imgShadow3").addClass("loading");
            $("#imgShadow3").children().hide();
            $("#progressBody_ " + k.id).remove();
            $("#progressWrap_" + k.id).remove()
        }
    };
    var a = $("#" + e).uploadify(f);
    onFileUploadEvent = function (s, o) {
        if (s == "upload") {
            var p = o.name, n = o.size, m = o.path, r = o.id, k = o.width, q = o.height;
            smallPath = o.smallPath;
            newImg = o;
            var l = new Image();
            l.src = smallPath;
            l.onload = function () {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(p)), true);
                $("#imgShadow3").removeClass("loading");
                $("#imgShadow3").children().show();
                $(".formBodyContent").find(".editPicArea #memberHeadPic").attr("src", smallPath);
                $(".formBodyContent").find(".viewPicArea img").attr("src", smallPath);
                $("#imgShadow3").css("width", "")
            };
            Run.enablePopupBtn("save", true)
        }
    }
};
Run.initPopupBox = function (f, d, e) {
    var b = ["<div style='text-align:center;width: 100%;font-size: 12px; color:#636363;position:absolute;top:20px;'>", f, "</div>"];
    b.push("<div class='memberHeadEdit'>");
    if (d == "confirm") {
        b.push("<div style='display: inline-block;width: 100%; text-align:center;position:absolute;top:50px;'>");
        b.push("		<div class='confirmBtn' style='display: inline-block;zoom: 1;*display: inline;    padding: 0 10px !important;height: 25px; text-align: center;margin: 10px 10px 10px auto;line-height:25px; border: 1px solid #0064B5;background:#49A3FF;color: #FFFFFF;font-size: 12px; border-radius: 2px;'>确 定</div>");
        b.push("		<div class='cancelBtn' style='display: inline-block;zoom: 1;*display: inline;height: 25px;padding: 0 10px !important;text-align: center;margin: 10px auto 10px 10px;height: 25px;line-height: 25px;     border: 1px solid #8F8F8F;background: #F5F5F5;color: #666666;font-size: 12px; border-radius: 2px;' >取 消</div>");
        b.push("</div>")
    } else {
        b.push("		<div class='confirmBtn' style='position:absolute;top:60px;zoom: 1;height: 25px; text-align: center;line-height:25px; border: 1px solid #0064B5;background:#49A3FF;color: #FFFFFF;font-size: 12px;left:100px;padding: 0 10px !important;border-radius: 2px;'>确 定</div>")
    }
    b.push("</div>");
    var a = {};
    a.htmlContent = b.join("");
    a.width = 255;
    a.height = 122;
    var c = Run.popupBox(a);
    c.find(".popupBClose").css("margin", "10px 0px auto auto");
    c.on("click", ".confirmBtn", function () {
        c.find(".popupBClose").click();
        e()
    });
    c.on("click", ".cancelBtn", function () {
        c.find(".popupBClose").click()
    })
};
Run.enablePopupBtn = function (c, a) {
    var b = $("#" + c);
    if (a) {
        b.removeAttr("disabled");
        b.removeClass("saveButton-disabled");
        b.faiButton("enable")
    } else {
        b.attr("disabled", true);
        b.faiButton("disable")
    }
};
Run.memberAddrMsgOpera = function (b, a, c, m, q, f, h, y, r, l, z, x) {
    var p = "-----------", v = [], j, A, n, t, C, k, u;
    var e = -1;
    var B = {};
    $.each(l, function (D, E) {
        if (E.parentId == null || E.parentId == "" || E.parentId === 0) {
            B[E.id] = E
        }
    });
    if (Run.addrInfoListGlobal != null && Run.addrInfoListGlobal != []) {
        c = Run.addrInfoListGlobal
    }
    var w = {};
    w.addrInfoList = c;
    $(".addAddrMsgPanel, .edit").click(function () {
        var X = "", ab = 0, H = {}, ac = "", ad = "";
        e = $(this).parents(".addrMsg_default").length == 0 ? $(this).parents(".addrMsg").attr("_item") : $(this).parents(".addrMsg_default").attr("_item");
        if ($(this).hasClass("edit")) {
            ad = $(this).parent().parent().attr("_item");
            X = "ajax/memberAdm_h.php?cmd=set&opera=editAddr&editItem=" + ad + "&id=" + b;
            H = c[ad];
            ab = H.isDefault;
            ac = "edit"
        } else {
            X = "ajax/memberAdm_h.php?cmd=set&opera=addAddr&id=" + b;
            if (c.length == 0) {
                ab = 1
            } else {
                ab = 0
            }
            ac = "add"
        }
        if (h) {
            var T = "<div style='width:942px; height:1px; font-size:0; background-color:#eeeeee; margin-top:15px;' />";
            T += "<div class='editAddrInfo editAddrNewInfo'>";
            for (var aa = 0; aa < a.length; aa++) {
                var F = a[aa].fieldKey;
                var ai = a[aa].name;
                var S = a[aa].required;
                if (F == "zip") {
                    continue
                }
                T += "<div class='addrInfoItem'>";
                if (F != "addr") {
                    T += "<div class='propItemName'>" + ai + "</div>";
                    if (S) {
                        T += "<div class='g_stress'>*</div>"
                    } else {
                        T += "<div class='g_stress' style='visibility: hidden;'>*</div>"
                    }
                }
                if (F == "addr") {
                    var E = (q == 2052 || q == 1028) ? "中国" : "China";
                    var W = (q == 2052 || q == 1028) ? "海外" : "Oversea";
                    T += "<div class='propItemName'>" + LS.Region + "</div>";
                    if (S) {
                        T += "<div class='g_stress'>*</div>"
                    } else {
                        T += "<div class='g_stress' style='visibility: hidden;'>*</div>"
                    }
                    T += "<div class='propItemValue'><select id='allArea' class='allArea'>";
                    T += "<option value=''>------</option>";
                    if (!z) {
                        T += "<option value='cn'>" + E + "</option>"
                    }
                    if (!x) {
                        T += "<option value='os'>" + W + "</option>"
                    }
                    $.each(B, function (aj, ak) {
                        T += "<option value='" + B[aj].id + "'>" + Helper.encodeHtml(B[aj].name) + "</option>"
                    });
                    T += "</select></div>";
                    T += "<div class='propItemValue' style='display:none;'>";
                    T += "<input type='text' id='areaBoxInput' class='areaBoxInput' style='width: 295px;' placeholder='------' readOnly='true' isCn isOs isCus area1 area2 area3/>";
                    T += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
                    T += "<div id='province_box' class='province_box'>";
                    T += "<div class='pv_head J_areaHead'>";
                    T += "<div class='pv_pv pv'>" + LS.province + "</div>";
                    T += "<div class='pv_city city'>" + LS.city + "</div>";
                    T += "<div class='pv_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "<div class='pv_content'>";
                    T += "<div class='spaceLine'></div>";
                    $.each(site_cityUtil.getAreaGroupsPinYin(), function (aj, ak) {
                        T += "<div class='pv_group' style='" + (ak[0] == "OS" ? "display:none;" : "") + "'>";
                        T += "<div class='group_head'>" + ak[0] + "</div>";
                        T += "<div class='group_content'>";
                        $.each(ak[1], function (am, al) {
                            if (q == 2052 || q == 1028) {
                                T += "<div class='group_item' pid='" + al + "' pname='" + site_cityUtil.getInfo(al).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(al).name) + "</div>"
                            } else {
                                T += "<div class='group_item' pid='" + al + "' pname='" + site_cityUtil.getInfoEn(al).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(al).name) + "</div>"
                            }
                        });
                        T += "</div>";
                        T += "</div>";
                        T += "<div class='spaceLine'></div>"
                    });
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='city_box' class='city_box' style='display:none;'>";
                    T += "<div class='city_head J_areaHead'>";
                    T += "<div class='city_pv pv'>" + LS.province + "</div>";
                    T += "<div class='city_city city'>" + LS.city + "</div>";
                    T += "<div class='city_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='county_box' class='county_box' style='display:none;'>";
                    T += "<div class='county_head J_areaHead'>";
                    T += "<div class='county_pv pv'>" + LS.province + "</div>";
                    T += "<div class='county_city city'>" + LS.city + "</div>";
                    T += "<div class='county_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
                    T += "<div id='sec_box' class='sec_box'>";
                    T += "<div class='sec_head J_areaHead2'>";
                    T += "<div class='sec_sec sec'>" + LS.firstRegion + "</div>";
                    T += "<div class='sec_thd thd'>" + LS.secRegion + "</div>";
                    T += "</div>";
                    T += "<div class='sec_content'></div>";
                    T += "</div>";
                    T += "<div id='thd_box' class='thd_box' style='display:none;'>";
                    T += "<div class='thd_head J_areaHead2'>";
                    T += "<div class='thd_sec sec'>" + LS.firstRegion + "</div>";
                    T += "<div class='thd_thd thd'>" + LS.secRegion + "</div>";
                    T += "</div>";
                    T += "<div class='thd_content'></div>";
                    T += "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "<div class='addrInfoItem'>";
                    T += "<div id='addrInfoStreet'>";
                    T += "<div class='propItemName'>" + LS.addrDetail + "</div><div class='g_stress' " + (!S ? "style='visibility: hidden;'" : "") + " >*</div>";
                    T += "<div class='propItemValue'><input class='addrInfo_street' placeholder='" + LS.streetAddress + "' id='addrInfo_street' ></input></div>";
                    T += "</div>"
                } else {
                    var ae = "";
                    var L = "";
                    if (F == "mobile") {
                        var V = [];
                        V.push("<select id='mobileCt' name='mobileCt' style='width:120px;'>");
                        if (f != null && f.length > 0) {
                            for (var Y = 0; Y < f.length; Y++) {
                                var ah = f[Y]["ctCode"];
                                V.push("<option value='" + f[Y]["ctName"] + "'>" + f[Y]["ctShowName"] + ah + "</option>")
                            }
                        }
                        V.push("</select>");
                        ae = V.join("");
                        L = "width:232px; margin-left:8px;"
                    }
                    T += "<div class='propItemValue'>" + ae + "<input id='" + F + "' class='propItemEdit' style='border:1px solid #e7e7e7; text-indent:6px; " + L + "' maxlength=50></input></div>"
                }
                T += "</div>"
            }
            T += "</div>";
            T += "<div class='saveOrCancel saveOrCancelNew'>";
            T += "<div class='save save" + (h && (y > 0) ? r : "") + "' style='width:108px; height:35px;'>" + LS.confirm + "</div>";
            T += "<div class='cancel popupBClose' style='width:108px; height:33px;'>" + LS.cancel + "</div>";
            T += "</div>";
            var G = parseInt(Math.random() * 10000);
            var I = {boxId: G, title: LS.shippingAddress, htmlContent: T, width: 942, boxName: "addrInfo"}
        } else {
            var T = "<div style='width:130px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; float:left;' />";
            T += "<div style='width:234px; height:1px; font-size:0; background-color:#dadada; margin-left:146px;' />";
            T += "<div class='editAddrInfo'>";
            for (var aa = 0; aa < a.length; aa++) {
                var F = a[aa].fieldKey;
                var ai = a[aa].name;
                var S = a[aa].required;
                T += "<div class='addrInfoItem'>";
                if (F != "addr") {
                    T += "<div class='propItemName'>" + ai + " :</div>"
                }
                if (F == "addr") {
                    var E = (q == 2052 || q == 1028) ? "中国" : "China";
                    var W = (q == 2052 || q == 1028) ? "海外" : "Oversea";
                    T += "<div class='propItemName'>" + LS.Region + " :</div>";
                    T += "<div class='propItemValue'><select id='allArea' class='allArea' style='width: 170px;'>";
                    T += "<option value=''>------</option>";
                    if (!z) {
                        T += "<option value='cn'>" + E + "</option>"
                    }
                    if (!x) {
                        T += "<option value='os'>" + W + "</option>"
                    }
                    $.each(B, function (aj, ak) {
                        T += "<option value='" + B[aj].id + "'>" + Helper.encodeHtml(B[aj].name) + "</option>"
                    });
                    T += "</select></div>";
                    if (S) {
                        T += "<div class='g_stress'>*</div>"
                    }
                    T += "<div class='propItemName J-ssq'><span id='ssq'>" + LS.ssq + " :</span><span id='administrativeRegion'>" + LS.administrativeRegion + " :</span></div>";
                    T += "<div class='propItemValue J-ssq'><input type='text' id='areaBoxInput' class='propItemEdit' style='border: 1px solid #e7e7e7;text-indent: 6px;-webkit-border-radius: 0;' placeholder='------' readOnly='true' isCn isOs isCus area1 area2 area3/></div>";
                    T += "<div id='areaBox1' class='areaBox1' style='display:none;'>";
                    T += "<div id='province_box' class='province_box'>";
                    T += "<div class='pv_head J_areaHead'>";
                    T += "<div class='pv_pv pv'>" + LS.province + "</div>";
                    T += "<div class='pv_city city'>" + LS.city + "</div>";
                    T += "<div class='pv_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "<div class='pv_content'>";
                    T += "<div class='spaceLine'></div>";
                    $.each(site_cityUtil.getAreaGroupsPinYin(), function (aj, ak) {
                        T += "<div class='pv_group' style='" + (ak[0] == "OS" ? "display:none;" : "") + "'>";
                        T += "<div class='group_head'>" + ak[0] + "</div>";
                        T += "<div class='group_content'>";
                        $.each(ak[1], function (am, al) {
                            if (q == 2052 || q == 1028) {
                                T += "<div class='group_item' pid='" + al + "' pname='" + site_cityUtil.getInfo(al).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(al).name) + "</div>"
                            } else {
                                T += "<div class='group_item' pid='" + al + "' pname='" + site_cityUtil.getInfoEn(al).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(al).name) + "</div>"
                            }
                        });
                        T += "</div>";
                        T += "</div>";
                        T += "<div class='spaceLine'></div>"
                    });
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='city_box' class='city_box' style='display:none;'>";
                    T += "<div class='city_head J_areaHead'>";
                    T += "<div class='city_pv pv'>" + LS.province + "</div>";
                    T += "<div class='city_city city'>" + LS.city + "</div>";
                    T += "<div class='city_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='county_box' class='county_box' style='display:none;'>";
                    T += "<div class='county_head J_areaHead'>";
                    T += "<div class='county_pv pv'>" + LS.province + "</div>";
                    T += "<div class='county_city city'>" + LS.city + "</div>";
                    T += "<div class='county_county county'>" + LS.county + "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "</div>";
                    T += "<div id='areaBox2' class='areaBox2' style='display:none;'>";
                    T += "<div id='sec_box' class='sec_box'>";
                    T += "<div class='sec_head J_areaHead2'>";
                    T += "<div class='sec_sec sec'>" + LS.firstRegion + "</div>";
                    T += "<div class='sec_thd thd'>" + LS.secRegion + "</div>";
                    T += "</div>";
                    T += "<div class='sec_content'></div>";
                    T += "</div>";
                    T += "<div id='thd_box' class='thd_box' style='display:none;'>";
                    T += "<div class='thd_head J_areaHead2'>";
                    T += "<div class='thd_sec sec'>" + LS.firstRegion + "</div>";
                    T += "<div class='thd_thd thd'>" + LS.secRegion + "</div>";
                    T += "</div>";
                    T += "<div class='thd_content'></div>";
                    T += "</div>";
                    T += "</div>";
                    if (S) {
                        T += "<div class='g_stress J-ssq'>*</div>"
                    }
                    T += "<div id='addrInfoStreet'>";
                    T += "<div class='propItemName'>" + LS.streetAddress + " :</div>";
                    T += "<div class='propItemValue'><textarea id='addrInfo_street' style='height:80px;'></textarea></div>";
                    if (S) {
                        T += "<div class='g_stress'>*</div>"
                    }
                    T += "</div>"
                } else {
                    var ae = "";
                    var L = "";
                    if (F == "mobile") {
                        var V = [];
                        V.push("<select id='mobileCt' name='mobileCt' style='width:53px;'>");
                        if (f != null && f.length > 0) {
                            for (var Y = 0; Y < f.length; Y++) {
                                var ah = f[Y]["ctCode"];
                                V.push("<option value='" + f[Y]["ctName"] + "'>" + f[Y]["ctShowName"] + ah + "</option>")
                            }
                        }
                        V.push("</select>");
                        ae = V.join("");
                        L = "width:107px; margin-left:8px;"
                    }
                    T += "<div class='propItemValue'>" + ae + "<input id='" + F + "' class='propItemEdit' style='-webkit-border-radius:0;-moz-border-radius:0;  border:1px solid #e7e7e7; text-indent:6px; " + L + "' maxlength=50></input></div>";
                    if (S) {
                        T += "<div class='g_stress'>*</div>"
                    }
                }
                T += "</div>"
            }
            T += "</div>";
            T += "<div class='saveOrCancel'>";
            T += "<div class='cancel popupBClose' style='width:76px; height:35px;'>" + LS.cancel + "</div>";
            T += "<div class='save' style='width:86px; height:35px;'>" + LS.confirm + "</div>";
            T += "</div>";
            var G = parseInt(Math.random() * 10000);
            var I = {boxId: G, title: LS.editAddrMsg, htmlContent: T, width: 410, boxName: "addrInfo"}
        }
        var R = Run.popupBox(I);
        if (Helper.isIE6() || Helper.isIE7()) {
            $(".editAddrInfo").find(".addrInfoItem").attr("style", "width:100%;");
            $(".editAddrInfo").find(".addrInfoItem").find("#addrInfoStreet").attr("style", "width:100%;")
        }
        var D = ($(".J-ssq").length > 0);
        if (D) {
            if ($("#areaBoxInput").length > 0) {
                $("#areaBox1,#areaBox2").css("left", $("#areaBoxInput").position().left);
                $("#areaBox1,#areaBox2").css("top", $("#areaBoxInput").position().top + $("#areaBoxInput").height())
            }
            $(".J-ssq").hide()
        }
        $(document).unbind("click.forAreaBox").bind("click.forAreaBox", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (aj) {
            Q(aj)
        });
        function Q(aj) {
            if (aj.stopPropagation) {
                aj.stopPropagation()
            } else {
                aj.cancelBubble = true
            }
        }

        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                if (D) {
                    $(".J-ssq").hide()
                } else {
                    $("#areaBoxInput").parent(".propItemValue").hide()
                }
            } else {
                if (D) {
                    $(".J-ssq").show()
                } else {
                    $("#areaBoxInput").parent(".propItemValue").show()
                }
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show()
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100)
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show()
                }
            }
            $("#areaBoxInput").val("");
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                $("#areaBoxInput").show();
                $("#ssq").show();
                $("#administrativeRegion").hide()
            } else {
                var aj = d($("#allArea").val());
                $("#sec_box .sec_content").append(aj);
                $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text());
                $("#ssq").hide();
                $("#administrativeRegion").show();
                if (aj === null || aj === undefined || aj === "") {
                    $("#areaBox2").hide();
                    $(".J-ssq").hide();
                    if (!D) {
                        $("#areaBoxInput").hide()
                    }
                }
            }
        });
        $("#areaBoxInput").unbind("click").bind("click", function (aj) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {
                } else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            Q(aj)
        });
        $(".J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $(".J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $(".J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $(".J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $(".J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var aj = $(this).attr("pname");
            var ak = $(this).attr("pid");
            $(".J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + aj);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", ak);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            var am = o(site_cityUtil.getCities(ak));
            var al = $(am).html();
            if (al === null || al === undefined || al === "") {
                $("#areaBox1").hide()
            }
            $("#city_box").append(am)
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var aj = $(this).attr("cname");
            var al = $(this).attr("cid");
            $(".J_areaHead .county").click();
            var ao = $("#areaBoxInput").attr("lastArea");
            var ak = $("#areaBoxInput").attr("lastAreaType");
            if (ak != null && ak != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + aj);
            $("#areaBoxInput").attr("lastArea", "-" + aj);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", al);
            $("#areaBoxInput").attr("area3", "");
            var an = i(site_cityUtil.getCounty(al));
            var am = $(an).html();
            if (am === null || am === undefined || am === "") {
                $("#areaBox1").hide()
            }
            $("#county_box").append(an)
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var aj = $(this).attr("cname");
            var al = $(this).attr("cid");
            var am = $("#areaBoxInput").attr("lastArea");
            var ak = $("#areaBoxInput").attr("lastAreaType");
            if (ak != null && ak == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(am, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + aj);
            $("#areaBoxInput").attr("lastArea", "-" + aj);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", al);
            $("#areaBox1").hide()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var aj = $(this).attr("cname");
            var al = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var an = $("#areaBoxInput").attr("lastArea");
            var ak = $("#areaBoxInput").attr("lastAreaType");
            if (ak != null && ak != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + aj);
            $("#areaBoxInput").attr("lastArea", "-" + aj);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", al);
            $("#areaBoxInput").attr("area3", "");
            var am = d(al);
            if (am === null || am === undefined || am === "") {
                $("#areaBox2").hide()
            }
            $("#thd_box .thd_content").append(am)
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var aj = $(this).attr("cname");
            var al = $(this).attr("cid");
            var am = $("#areaBoxInput").attr("lastArea");
            var ak = $("#areaBoxInput").attr("lastAreaType");
            if (ak != null && ak == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(am, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + aj);
            $("#areaBoxInput").attr("lastArea", "-" + aj);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", al);
            $("#areaBox2").hide()
        });
        if ($(this).hasClass("edit")) {
            for (var aa = 0; aa < a.length; aa++) {
                var F = a[aa].fieldKey;
                var ag = H[F];
                if (F == "addr") {
                    var U = H.addr_info;
                    if (U != null) {
                        var O = U.isCus;
                        if (!O) {
                            var N = "";
                            var K = "";
                            var J = "";
                            if (q == 2052 || q == 1028) {
                                N = site_cityUtil.getInfo(U.countyCode).name;
                                K = site_cityUtil.getInfo(U.cityCode).name;
                                J = site_cityUtil.getInfo(U.provinceCode).name
                            } else {
                                N = site_cityUtil.getInfoEn(U.countyCode).name;
                                K = site_cityUtil.getInfoEn(U.cityCode).name;
                                J = site_cityUtil.getInfoEn(U.provinceCode).name
                            }
                            if (U.provinceCode == 990000) {
                                $("#areaBoxInput").attr("isOs", 1);
                                $("#allArea").val("os");
                                $("#allArea").change()
                            } else {
                                $("#areaBoxInput").attr("isCn", 1);
                                $("#allArea").val("cn");
                                $("#allArea").change()
                            }
                            $("#areaBoxInput").attr("area1", U.provinceCode);
                            $("#areaBoxInput").attr("area2", U.cityCode);
                            $("#areaBoxInput").attr("area3", U.countyCode);
                            $("#addrInfo_street").val(U.streetAddr);
                            $("#areaBoxInput").attr("lastArea", "-" + N);
                            $("#areaBoxInput").attr("lastAreaType", "county");
                            setTimeout(function () {
                                $("#areaBox1 .group_item[pid='" + U.provinceCode + "']").click();
                                setTimeout(function () {
                                    $("#areaBox1 .group_item[cid='" + U.cityCode + "']").click();
                                    setTimeout(function () {
                                        $("#areaBox1 .group_item[cid='" + U.countyCode + "']").click()
                                    }, 0)
                                }, 0)
                            }, 0)
                        } else {
                            var af = g(U.countyCode);
                            var Z = g(U.cityCode);
                            var M = g(U.provinceCode);
                            $("#allArea").val(U.provinceCode);
                            $("#allArea").change();
                            $("#areaBoxInput").attr("lastArea", "-" + af);
                            $("#areaBoxInput").attr("lastAreaType", "thd");
                            $("#areaBoxInput").val(M + "-" + Z + "-" + af);
                            $("#areaBoxInput").attr("isCus", 1);
                            $("#areaBoxInput").attr("area1", U.provinceCode);
                            $("#areaBoxInput").attr("area2", U.cityCode);
                            $("#areaBoxInput").attr("area3", U.countyCode);
                            $("#addrInfo_street").val(U.streetAddr)
                        }
                    } else {
                        $("#addrInfo_street").val(H.addr)
                    }
                } else {
                    if (F == "mobile") {
                        $("#mobileCt").val(H.mobileCt)
                    }
                }
                if (ag == null) {
                    ag = ""
                }
                $(".propItemValue").find("#" + F).val(ag)
            }
        }
        var P = {};
        R.find(".saveOrCancel .save").on("click", function () {
            for (var ao = 0; ao < a.length; ao++) {
                var at = a[ao].fieldKey;
                var aj = a[ao].name;
                var aq = a[ao].required;
                if (at == "addr") {
                    var ar = $("#allArea").val();
                    if (ar == null || ar == "") {
                        Helper.ing(LS.selectArea);
                        return
                    } else {
                        if (ar == "os") {
                            P.provinceCode = 990000;
                            P.cityCode = 990100;
                            P.streetAddr = $("#addrInfo_street").val();
                            P.isCus = false;
                            H.addr_info = P;
                            H.addr = "海外" + P.streetAddr;
                            continue
                        } else {
                            if (ar != "cn") {
                                P.isCus = true
                            } else {
                                P.isCus = false
                            }
                        }
                    }
                    var am = $("#areaBoxInput").attr("area3");
                    var ap = $("#areaBoxInput").attr("area2");
                    var an = $("#areaBoxInput").attr("area1");
                    var au = $("#addrInfo_street");
                    if (aq && (an == null || an == "")) {
                        Helper.ing(LS.mallStlSubmitAddrErr, 1);
                        return
                    }
                    if (aq && (ap == null || ap == "") && !P.isCus) {
                        Helper.ing(LS.mallStlSubmitAddrErr, 1);
                        return
                    }
                    if (aq && au.val() == "") {
                        Helper.ing(LS.editStreetAddr, 1);
                        return
                    }
                    P.provinceCode = an;
                    P.cityCode = ap;
                    P.countyCode = am;
                    P.streetAddr = au.val();
                    H.addr_info = P;
                    H.addr = $("#areaBoxInput").val().replace(/-/g, "") + au.val()
                } else {
                    var ak = $(".editAddrInfo").find("#" + at);
                    if (ak.length == 0) {
                        continue
                    }
                    var al = ak.val();
                    if (aq && al.length == 0) {
                        Helper.ing(LS.addrInfoInputError + aj, 1);
                        return
                    }
                    if ((at == "email" && !Helper.isEmail(al) && aq) || (at == "phone" && !Helper.isPhone(al) && aq)) {
                        Helper.ing(LS.addrInfoInputError + aj, 1);
                        return
                    }
                    if (at == "mobile") {
                        al = $.trim(al);
                        if (al.length > 0) {
                            if (!Helper.isNationMobile(al)) {
                                Helper.ing(LS.mobileNumRegular, 1);
                                return
                            }
                            H.mobileCt = $(".editAddrInfo").find("#mobileCt").val()
                        } else {
                            H.mobileCt = ""
                        }
                    }
                    H[at] = al
                }
            }
            H.isDefault = ab;
            if (ac == "add") {
                c.push(H)
            }
            $.ajax({
                type: "post", url: X, data: "info=" + Helper.encodeUrl($.toJSON(w)), success: function (av) {
                    if (m == 1) {
                        var ay = document.location.search.search(/imme/) > -1 ? "?imme&" : "?";
                        if (ac == "add") {
                            document.location.href = "mstl.php" + ay + "opera=add"
                        } else {
                            if (ac == "edit") {
                                var ax = w.addrInfoList[e];
                                var aw = $(".addrMsg_default[_item='" + e + "']").add(".addrMsg[_item='" + e + "']");
                                aw.find(".name").text(ax.name);
                                aw.find(".phone").text(ax.phone);
                                aw.find(".zip").text(ax.zip);
                                aw.find(".address").text(ax.addr);
                                if (ax.phone == null || ax.phone == "") {
                                    aw.find(".phone").text(ax.mobile)
                                }
                                if (ax.addr_info != null || ax.addr_info != "") {
                                    if (!ax.addr_info.isCus) {
                                        if (ax.addr_info.provinceCode == 990000) {
                                            $("#mallShipTemplate_allArea").val("os")
                                        } else {
                                            $("#mallShipTemplate_allArea").val("cn")
                                        }
                                        $("#mallShipTemplate_allArea").change();
                                        $("#mallShipTemplate_areaBox1 .group_item[pid='" + ax.addr_info.provinceCode + "']").click();
                                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + ax.addr_info.cityCode + "']").click();
                                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + ax.addr_info.countyCode + "']").click()
                                    } else {
                                        $("#mallShipTemplate_allArea").val(ax.addr_info.provinceCode);
                                        $("#mallShipTemplate_allArea").change();
                                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + ap + "']").click();
                                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + am + "']").click()
                                    }
                                    $("#streetAddress").val(ax.addr_info.streetAddr)
                                }
                                $(".propList .propItemValue").each(function (az, aB) {
                                    var aA = $(this).attr("_field");
                                    $(this).find("input").val(ax[aA])
                                });
                                $(".saveOrCancel .popupBClose").click()
                            } else {
                                document.location.href = "mstl.php" + ay
                            }
                        }
                    } else {
                        document.location.href = "mCenter.php?item=memberInfo"
                    }
                }, error: function () {
                    Helper.ing(LS.systemError)
                }
            })
        })
    });
    $(".delete").click(function () {
        var D = $(this).parent().parent().attr("_item");
        var F = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.conCancelAddrInfo, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
        var I = parseInt(Math.random() * 10000);
        var E = {boxId: I, title: "", htmlContent: F.join(""), width: 300};
        var G = Run.popupBox(E);
        var H = "ajax/memberAdm_h.php?cmd=set&id=" + b;
        G.find(".J-rpt-save").on("click", function () {
            c.splice(D, 1);
            $.ajax({
                type: "post", url: H, data: "info=" + Helper.encodeUrl($.toJSON(w)), error: function () {
                    Helper.ing(LS.systemError, false)
                }, success: function (J) {
                    var K = $.parseJSON(J);
                    if (K.success) {
                        if (m == 1) {
                            var L = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                            document.location.href = "mstl.php" + L
                        } else {
                            document.location.href = "mCenter.php?item=memberInfo"
                        }
                    } else {
                        Helper.ing(K.msg, true)
                    }
                }
            })
        })
    });
    $(".makeDefault").click(function () {
        var E = $(this).parent().parent().attr("_item");
        var D = "ajax/memberAdm_h.php?cmd=set&id=" + b;
        for (e in c) {
            c[e].isDefault = 0
        }
        c[E].isDefault = 1;
        $.ajax({
            type: "post", url: D, data: "info=" + Helper.encodeUrl($.toJSON(w)), error: function () {
                Helper.ing(LS.systemError, false)
            }, success: function (F) {
                var G = $.parseJSON(F);
                if (G.success) {
                    if (m == 1) {
                        var H = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                        document.location.href = "mstl.php" + H
                    } else {
                        document.location.href = "mCenter.php?item=memberInfo"
                    }
                } else {
                    Helper.ing(G.msg, true)
                }
            }
        })
    });
    if (Helper.isIE6()) {
        $(".addrMsg , .addrMsg_default").hover(function () {
            if ($(this).hasClass("isDefault")) {
                $(this).find(".edit").attr("style", "margin-left:85px;")
            } else {
                $(this).find(".edit").attr("style", "margin-left:70px;")
            }
            if (h) {
                $(this).find(".other").attr("style", "top:20px;")
            } else {
                $(this).find(".other").attr("style", "top:90px;")
            }
        }, function () {
            if (h) {
                $(this).find(".other").attr("style", "top:-65px;")
            } else {
                $(this).find(".other").attr("style", "top:150px;")
            }
        })
    }
    function o(E) {
        var D = "";
        D += "<div class='city_content'>";
        $.each(E, function (F, G) {
            if (q == 2052 || q == 1028) {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfo(G.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(G.id).name) + "</div>"
            } else {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfoEn(G.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(G.id).name) + "</div>"
            }
        });
        D += "</div>";
        return D
    }

    function i(E) {
        var D = "";
        D += "<div class='county_content'>";
        $.each(E, function (F, G) {
            if (q == 2052 || q == 1028) {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfo(G.id).name + "'>" + site_cityUtil.getInfo(G.id).name + "</div>"
            } else {
                D += "<div class='group_item' cid='" + G.id + "' cname='" + site_cityUtil.getInfoEn(G.id).name + "'>" + site_cityUtil.getInfoEn(G.id).name + "</div>"
            }
        });
        D += "</div>";
        return D
    }

    function g(E) {
        var D = "";
        var F = false;
        $.each(l, function (G, H) {
            if (F) {
                return
            }
            if (H.id == E) {
                D = H.name;
                F = true
            }
        });
        return D
    }

    function s(E) {
        var D = [];
        $.each(l, function (F, G) {
            if (G.parentId == E) {
                D.push(G)
            }
        });
        return D
    }

    function d(D) {
        if (isNaN(D)) {
            return ""
        }
        var F = parseInt(D);
        var E = "";
        $.each(s(F), function (G, H) {
            E += "<div class='group_item' cid='" + H.id + "' cname='" + H.name + "'>" + H.name + "</div>"
        });
        return E
    }
};
Run.memberIntegralInit = function (g, d, f, a) {
    var e = false;
    if (d) {
        e = true
    }
    $("#integralTabLine").find(".integralTab").click(function () {
        if (e) {
            $("#integralTabLine").find(".g_title").removeClass("g_title" + a);
            $(this).addClass("g_title" + (f ? a : ""));
            b($(this).attr("id"))
        }
        $("#integralTabLine").find(".g_title").removeClass("g_title");
        $(this).addClass("g_title");
        if ($(this).attr("id") === "incomeTab") {
            if (e) {
                $("#expenseTab").css({
                    "border-top": "1px solid #eeeeee",
                    "border-right": "1px solid #eeeeee",
                    "border-left": "none"
                });
                $("#totalTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"})
            }
        } else {
            if ($(this).attr("id") === "expenseTab") {
                if (e) {
                    $("#incomeTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"});
                    $("#totalTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"})
                }
            } else {
                if (e) {
                    $("#incomeTab").css({"border-top": "1px solid #eeeeee", "border-right": "1px solid #eeeeee"});
                    $("#expenseTab").css({"border-top": "1px solid #eeeeee", "border-right": "1px solid #eeeeee"})
                }
            }
        }
    });
    c();
    function c() {
        if (g === "income") {
            if (e) {
                $("#expenseTab").css({"border-top": "1px solid #eeeeee", "border-right": "1px solid #eeeeee"});
                $("#totalTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"});
                $("#incomeTab").addClass("g_title" + (f ? a : ""))
            }
            $("#incomeTab").addClass("g_title")
        } else {
            if (g === "expense") {
                if (e) {
                    $("#incomeTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"});
                    $("#totalTab").css({"border-top": "1px solid #eeeeee", "border-left": "1px solid #eeeeee"});
                    $("#expenseTab").addClass("g_title" + (f ? a : ""))
                }
                $("#expenseTab").addClass("g_title")
            } else {
                if (e) {
                    $("#incomeTab").css({"border-top": "1px solid #eeeeee", "border-right": "1px solid #eeeeee"});
                    $("#expenseTab").css({"border-top": "1px solid #eeeeee", "border-right": "1px solid #eeeeee"});
                    $("#totalTab").addClass("g_title" + (f ? a : ""))
                }
                $("#totalTab").addClass("g_title")
            }
        }
    }

    function b(i) {
        var h = i || "totalTab";
        $(".memberIntegralNewPanel .itemList").find(".itemLine").each(function (j, k) {
            if (h == "incomeTab") {
                if ($(this).find(".itemDate").text().charAt(1) == "+") {
                    $(this).show()
                } else {
                    $(this).hide()
                }
            } else {
                if (h == "expenseTab") {
                    if ($(this).find(".itemDate").text().charAt(1) == "-") {
                        $(this).show()
                    } else {
                        $(this).hide()
                    }
                } else {
                    $(this).show()
                }
            }
        })
    }
};
Run.FitMemberProfilePanelImgSize = function () {
    if ($(".memberProfilePanel").length <= 0) {
        return
    }
    var g = $(".memberProfilePanel .mBulletin_content").find("img"), f = $(".mBulletin_Area"), c = f.width(),
        e = f.height(), b, a, d;
    g.each(function (j, h) {
        b = $(h).attr("width");
        a = $(h).attr("height");
        if (b > c) {
            d = Helper.Img.calcSize(b, a, c, e, Helper.Img.MODE_SCALE_FILL);
            $(h).css({width: d.width, height: d.height});
            if (Helper.isIE()) {
                $(".formStyle55 .formMiddleContent").css("overflow", "hidden")
            }
        }
    })
};
Run.loadPdCollectionList = function (c, b, d, e, a) {
    this.pIdList = b;
    this.mid = c;
    this.isNewUser = d;
    this.colorStyleType = e;
    this.colorStyle = a;
    this.panel = $(".memberCollectionPanel")
};
(function (d, n, e) {
    var j = n.prototype, t, g, h, s, q, k, m = [], u = 12, b, c = [];
    j.init = function () {
        g = this.pIdList, k = this.panel;
        t = this.mid;
        h = this.isNewUser;
        s = this.colorStyleType;
        q = this.colorStyle;
        r();
        a();
        var x = g.slice(0, u);
        b = x.length;
        p(x);
        i()
    };
    function r() {
        d.post("ajax/product_h.php", {mid: t, cmd: "updateCollections", ids: d.toJSON(g)}, function (x) {
            if (x.success) {
                g = x.list
            }
        }, "json")
    }

    function p(x) {
        d.ajax({
            url: "ajax/product_h.php",
            data: {cmd: "batchGetPd", ids: d.toJSON(x)},
            async: false,
            type: "POST",
            dataType: "json",
            success: function (y) {
                if (y.success) {
                    d(function () {
                        o(x, y.list)
                    })
                }
            }
        })
    }

    function v(y) {
        var x = false, z;
        d.each(c, function (A, B) {
            if (y == B.lid) {
                x = true;
                z = B
            }
        });
        if (!x) {
            z = l(y)
        }
        return z
    }

    function l(x) {
        var y = {lid: x};
        d.ajax({
            url: "ajax/productProp_h.php?cmd=list&lid=" + x,
            async: false,
            type: "POST",
            dataType: "json",
            success: function (z) {
                if (z.success) {
                    var A = false, B = false;
                    d.each(z.list, function (C, D) {
                        if (D.fieldKey == "mallMarketPrice") {
                            B = true
                        }
                        if (D.fieldKey == "mallPrice") {
                            A = true
                        }
                    });
                    y.showMarketPrice = B;
                    y.showPrice = A;
                    c.push(y)
                }
            }
        });
        return y
    }

    function w() {
        var y = {}, x = false;
        y.productCollections = g.reverse() + "";
        d.ajax({
            url: "ajax/member_h.php",
            data: {cmd: "set", id: t, info: d.toJSON(y)},
            async: false,
            type: "POST",
            dataType: "json",
            success: function (z) {
                if (z.success) {
                    x = true
                } else {
                    x = false
                }
            }
        });
        return x
    }

    function a() {
        var x = Math.ceil(g.length / u);
        if (k.find(".pagination").length == 0) {
            k.append('<div class="pagination"><a id="upPage">' + LS.prevPager + '</a> <span id="currentPage">1</span>/<span id="totalPage">' + x + '</span>页 <a id="downPage">' + LS.nextPager + "</a></div>")
        } else {
            d("#totalPage").text(x)
        }
        if (x > Number(d("#currentPage").text())) {
            d("#downPage").addClass("g_border")
        } else {
            d("#downPage").removeClass("g_border")
        }
        if (d("#currentPage").text() != "1") {
            d("#upPage").addClass("g_border")
        } else {
            d("#upPage").removeClass("g_border")
        }
    }

    function o(x, y) {
        var z = [];
        d.each(y, function (B, A) {
            var C = v(A.lid);
            z.push("<li>");
            z.push('	<div class="pdImg">');
            z.push('		<a href="pd.php?id=' + A.id + '">');
            z.push('			<div class="delColl" data-id="' + A.id + '">');
            z.push('				<div class="delCollBg"></div>');
            z.push('				<div class="delCollIcon"></div>');
            z.push("			</div>  ");
            z.push('			<img src="' + A.picPath + '" />');
            z.push("		</a>");
            z.push("	</div>  ");
            z.push('	<div class="pdName">' + A.name + "</div>");
            z.push('	<div class="pdPrice">');
            if (A.mallPrice != -1 && C.showPrice) {
                z.push('		<div class="mallPrice mallPrice' + (h && (s > 0) ? q : "") + '">' + Helper.top.choiceCurrencyVal + " " + A.mallPrice + "</div>")
            }
            if (A.mallMarketPrice != -1 && C.showMarketPrice) {
                z.push('		<div class="mallMarketPrice">' + Helper.top.choiceCurrencyVal + " " + A.mallMarketPrice + "</div>")
            }
            z.push("	</div>");
            z.push("</li>")
        });
        k.find(".collectionList").append(z.join(""))
    }

    function i() {
        k.on({
            hover: function () {
                d(this).find(".delColl").show()
            }, mouseleave: function () {
                if (d(this).parents(".memberCollectionNewPanel").length == 0) {
                    d(this).find(".delColl").hide()
                }
            }
        }, ".pdImg");
        k.on("click", ".delColl", function () {
            var y = d(this);
            y.parents("a").attr("href", "javascript:;");
            var x = y.attr("data-id");
            var A = g.indexOf(Number(x));
            if (A > -1) {
                g.splice(A, 1)
            }
            var B = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.sureDelCollection, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var D = parseInt(Math.random() * 10000);
            var z = {boxId: D, title: "", htmlContent: B.join(""), width: 300};
            var C = Run.popupBox(z);
            C.find(".J-rpt-save").on("click", function () {
                if (w()) {
                    y.parents("li").remove()
                } else {
                    Helper.ing(LS.systemError);
                    return
                }
                a();
                if (g.length > b) {
                    var G = g[b];
                    b = b + 1;
                    var F = [];
                    F.push(G);
                    p(F)
                }
                f();
                if (g.length == 0) {
                    k.find(".collectionList").html("<div class='noCollIcon'></div><div class='noCollTip'>" + LS.notCollection + "</div>");
                    k.find(".pagination").remove()
                }
                var E = true;
                d(".collectionList li").each(function () {
                    if (!d(this).is(":hidden")) {
                        E = false;
                        return true
                    }
                });
                if (E) {
                    d("#upPage").click()
                }
                C.find(".popupBClose").click()
            })
        });
        k.on("click", "#downPage", function () {
            if (d(this).hasClass("g_border")) {
                d("#currentPage").text(Number(d("#currentPage").text()) + 1);
                a();
                if (g.length > b) {
                    var x = g.slice(b, b + u);
                    b = b + x.length;
                    if (x.length > 0) {
                        p(x)
                    }
                }
                f()
            }
        });
        k.on("click", "#upPage", function () {
            if (d(this).hasClass("g_border")) {
                d("#currentPage").text(Number(d("#currentPage").text()) - 1);
                a();
                f()
            }
        })
    }

    function f() {
        var x = Number(d("#currentPage").text()) - 1;
        k.find(".collectionList").children().hide();
        var z = x * u;
        for (var y = z; y < z + 12; y++) {
            k.find(".collectionList li:eq(" + y + ")").show()
        }
    }
})(jQuery, Run.loadPdCollectionList);
Run.memberProfileResetPwd = function (c) {
    var a = Helper.top.$("#module" + c);
    var b = a.find(".itemPwd");
    if (b.is(":visible")) {
        b.hide();
        a.find(".resetPwd").html(LS.memberProfileResetPwd)
    } else {
        b.show();
        a.find(".resetPwd").html(LS.memberProfileCanelPwd)
    }
};
Run.memberProfileSubmit = function (l, s, e) {
    var b = $("#module" + l);
    b.find(".memberProfileMsg").show();
    var d = b.find(".memberProfileMsg .msgText");
    var r = {};
    var k = false;
    var q = true;
    $(".userEditItem").each(function () {
        userEditItemName = $(this).attr("id");
        j = $(this).val();
        r[userEditItemName] = j;
        if ("mobile" == userEditItemName && j.length > 0) {
            if ($(this).attr("disabled") != "disabled") {
                if (!Helper.isNationMobile(j)) {
                    d.html(LS.mobileNumRegular);
                    $(this).focus();
                    q = false;
                    return false
                } else {
                    r.mobileCt = $(this).parent().find("#mobileCt").val();
                    k = true
                }
            } else {
                r[userEditItemName] = ""
            }
        }
    });
    if (!q) {
        return
    }
    var c = b.find(".itemPwd");
    if (c.is(":visible")) {
        if (e) {
            var p = $("#memberProfileOldPwd").val();
            if (p == null || p == "") {
                d.html(LS.memberProfileOldPwdEmpty);
                $("#memberProfileOldPwd").focus();
                return
            }
        }
        var f = $("#memberProfilePwd").val();
        if (f == null || f == "") {
            d.html(LS.memberProfilePwdEmpty);
            $("#memberProfilePwd").focus();
            return
        }
        if (f.length < 4) {
            d.html(LS.memberProfilePwdMinLength);
            $("#memberProfilePwd").focus();
            return
        }
        var m = $("#memberProfileRepwd").val();
        if (f != m) {
            d.html(LS.memberProfilePwdNotMatch);
            $("#memberProfileRepwd").focus();
            return
        }
        r.oldPwd = $.md5(p);
        r.pwd = $.md5(f)
    }
    var o = "";
    var j = "";
    var t = 0;
    $(".userEditItem").each(function () {
        userEditItemID = $(this).attr("id");
        j = $(this).val();
        userEditItemName = $(this).attr("name");
        userEditItemMaxLength = $(this).attr("maxlength");
        if (userEditItemID == "email" && j.length > 0) {
            if (!Helper.isEmail(j)) {
                d.html(Helper.format(LS.memberProfileItemCorrect, userEditItemName));
                $(this).focus();
                t = 1;
                return false
            }
        }
        if (j.length > userEditItemMaxLength) {
            d.html(Helper.format(LS.memberProfileUserEditItemMaxLength, userEditItemName, userEditItemMaxLength));
            $(this).focus();
            t = 1;
            return false
        }
    });
    var i = b.find("#acct");
    if (i.attr("disabled") != "") {
        if (i.val() == "") {
            h = 1
        } else {
            r.acct = i.val()
        }
    }
    if (t == 1) {
        return
    }
    var h = 0;
    var n = 0;
    var a = "";
    $(".isCheckUAI").each(function () {
        userEditItemID = $(this).attr("id");
        j = $(this).val();
        userEditItemName = $(this).attr("name");
        if (j == null || j == "") {
            if ($(this).is("input")) {
                d.html(Helper.format(LS.memberSignupUserAddItemIsEmpty, userEditItemName))
            } else {
                d.html(Helper.format(LS.memberSignupUserAddItemIsEmpty2, userEditItemName))
            }
            $(this).focus();
            h = 1;
            return false
        }
        if (userEditItemID == "email" && j.length > 0) {
            if (!Helper.isEmail(j)) {
                d.html(Helper.format(LS.memberProfileItemCorrect, userEditItemName));
                $(this).focus();
                n = 1;
                return false
            }
        }
    });
    if (h == 1) {
        return
    }
    if (n == 1) {
        return
    }
    var g = b.find(".memberProfileBtn");
    g.attr("disabled", true);
    d.html(LS.memberProfileSubmitting);
    if (newImg && "id" in newImg && oldImgId != newImg.id) {
        $.ajax({
            type: "post",
            url: "../ajax/member_h.php?cmd=cimg",
            data: "oldImgId=" + oldImgId + "&mid=" + s + "&newImg=" + Helper.encodeUrl($.toJSON(newImg)),
            async: false,
            error: function () {
                Helper.ing(LS.systemError)
            },
            success: function (u) {
                u = jQuery.parseJSON(u);
                if (u.success) {
                    headPic.thumbId = u.fileId
                }
            }
        })
    }
    r.headPic = headPic;
    $.ajax({
        type: "post",
        async: false,
        url: "ajax/member_h.php?cmd=set",
        data: "id=" + s + "&info=" + Helper.encodeUrl($.toJSON(r)),
        error: function () {
            g.removeAttr("disabled");
            d.html(LS.memberProfileError)
        },
        success: function (u) {
            g.removeAttr("disabled");
            var v = jQuery.parseJSON(u);
            if (v.success) {
                d.html(LS.memberProfileOK);
                setTimeout(function () {
                    d.html("");
                    d.parent().hide()
                }, 3000);
                if (v.changeAcct) {
                    b.find(".acctOnlyOnceTip").hide();
                    b.find(".canReset").removeClass("canReset");
                    b.find("#acct").attr("disabled", "disabled")
                }
                b.find(".itemPwd").hide();
                b.find(".itemPwd input").val("");
                b.find(".resetPwd").html(LS.memberProfileResetPwd);
                if (k == true) {
                    b.find("#mobile").attr("disabled", "disabled");
                    b.find("#mobile").removeAttr("style");
                    var w = b.find("#mobileCt").find("option:selected").text();
                    if (w != null && w.indexOf("+") >= 0) {
                        w = w.substring(w.indexOf("+"));
                        b.find("#mobile").val(w + " " + b.find("#mobile").val())
                    }
                    b.find("#mobileCt").remove()
                }
                Run.checkMemberDataIntegrity(l)
            } else {
                if (v.rt == -3) {
                    d.html(LS.memberProfileOldPwdIncorrectError)
                } else {
                    if (v.rt == -6) {
                        d.html(LS.memberSignupRegisterExisted)
                    } else {
                        if (v.mobileErr == true) {
                            d.html(LS.mobileNumRegular);
                            $("#mobile").focus()
                        } else {
                            d.html(LS.memberProfileError)
                        }
                    }
                }
            }
        }
    })
};
Run.checkMemberDataIntegrity = function (c) {
    var d = Helper.top.$("#module" + c);
    var f = 0;
    var e = 0;
    var a = d.find(".allTooltip").width();
    var b = 0;
    d.find(".memberProNewfile .J_memberProfileItem").not(".itemPwd").each(function (g, h) {
        e++;
        if (typeof $(this).find("input").val() != "undefined" && $(this).find("input").val().length > 0) {
            f++;
            return true
        }
    });
    b = f / e;
    d.find(".dataIntegrity").text(Math.floor(b * 100));
    d.find(".realTooltip").css("width", b * a)
};
Run.loadCouponList = (function (e) {
    function f(m) {
        this.mid = m
    }

    var g = f.prototype, k, b = 0;
    pageno = [1, 1, 1], pageSize = 9;
    var j = [];
    j[0] = new Array(), j[1] = new Array(), j[2] = new Array(), couponColorList = ["red", "orange", "yellow", "green", "blue", "pink", "purple", "gray"];
    g.init = function (n, m) {
        k = this;
        if (_manageMode) {
            var o = {
                id: 0,
                couponName: "示例优惠券",
                savePrice: 10,
                orderMinPrice: 10,
                couponLeaveAmount: 999,
                flag: 0,
                receiveCount: 1,
                state: true,
                validity: "无时间限制",
                cdId: 73,
                bg: 0,
                status: 0,
                redeemCode: "1111111"
            };
            j[0] = [o, o, o];
            e(".couponList").append(i(n, m));
            return
        }
        c(n, m);
        l(n, m)
    };
    function c(n, m) {
        var o = k;
        e.ajax({
            url: "ajax/mallCoupon_h.php?cmd=getCouponByMid",
            data: "mid=" + o.mid,
            dataType: "json",
            success: function (p) {
                if (p.success) {
                    if (p.receiveList) {
                        j[0] = p.receiveList
                    }
                    if (p.usedList) {
                        j[1] = p.usedList
                    }
                    if (p.expireList) {
                        j[2] = p.expireList
                    }
                    a(n, m)
                }
            },
            error: function () {
            }
        })
    }

    function a(o, n) {
        var s = k;
        var r = e(".couponList");
        var q = [];
        q.push('<div class="tabList">');
        q.push('<div class="coupon-tab"><span class="">' + (o ? LS.myCoupon : LS.notUse) + '(<span class="couponAmount">' + j[0].length + "</span>)</span><em></em></div>");
        q.push('<div class="coupon-tab"><span>' + (o ? LS.usedCoupon : LS.used) + '(<span class="couponAmount">' + j[1].length + "</span>)</span><em></em></div>");
        q.push('<div class="coupon-tab"><span>' + (o ? LS.expiredCoupon : LS.expired) + '(<span class="couponAmount">' + j[2].length + "</span>)</span><em></em></div>");
        q.push("</div>");
        r.append(q.join(""));
        var p = e(".coupon-tab").eq(b), m = e(".g_selected").css("background-color");
        h(p, o, n);
        p.addClass("g_selected");
        p.find("em").css({"border-top-color": m})
    }

    function l(n, m) {
        var o = k;
        e("body").on("click", ".coupon-tab", function () {
            if (b == Number(e(this).index())) {
                return
            }
            h(e(this), n, m)
        });
        e("body").on("click", ".coupon-delete", function () {
            var p = e(this).parents(".coupon").attr("data_id"), w = e(this).parents(".coupon-warp");
            var q = LS.delCouponWillUnavail;
            if (b != 0) {
                q = LS.confirmDelCoupon
            }
            var u;
            var r = j[b];
            var v = r.length;
            var t = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", q, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var x = parseInt(Math.random() * 10000);
            var y = {boxId: x, title: "", htmlContent: t.join(""), width: 300};
            var s = Run.popupBox(y);
            s.find(".J-rpt-save").on("click", function () {
                for (var z = 0; z < v; z++) {
                    if (parseInt(p) == r[z].cdId) {
                        u = z;
                        break
                    }
                }
                j[b].splice(z, 1);
                e.ajax({
                    url: "ajax/member_h.php?cmd=delCoupon",
                    data: "mid=" + o.mid + "&cdid=" + p,
                    dataType: "json",
                    success: function (A) {
                        if (A.success) {
                            w.remove();
                            d(b, pageno[b], n, m);
                            e(".coupon-tab").eq(b).find(".couponAmount").text(j[b].length)
                        }
                    },
                    error: function () {
                    }
                });
                s.find(".popupBClose").click()
            })
        })
    }

    function h(p, o, n) {
        var m = e(".g_selected").css("background-color");
        e(".coupon-tab").removeClass("g_selected");
        e(".coupon-tab").find("em").css({"border-top-color": ""});
        p.addClass("g_selected");
        p.find("em").css({"border-top-color": m});
        b = p.index();
        e(".show-coupon-list").remove();
        e(".couponList").append(i(o, n));
        if (j[b].length > pageSize) {
            e(".couponList").append("<div class='pagenation' id='pagenation" + b + "'></div>");
            new Run.Pagenation(b, {pageNo: 1, pageSize: pageSize, totalSize: j[b].length}, d)
        } else {
            e(".memberCouponPanel .pagenation").remove()
        }
    }

    function i(p, o) {
        var r = k, n = [], m = pageno[b];
        n = j[b].slice((m - 1) * pageSize, m * pageSize);
        var q = [];
        q.push("<div class='show-coupon-list'>");
        e.each(n, function (t, s) {
            if (b != 0) {
                s.bg = 7
            }
            if (p == "new") {
                q.push("<div class='coupon-warp'>");
                q.push("<div class='coupon-code-new'>" + LS.couponNumber + "：" + s.redeemCode + "</div>");
                q.push("<div class='coupon coupon-new' data_id='" + s.cdId + "'>");
                q.push("<div class='coupon-content-new " + ((b == 1 || b == 2) ? "coupon-background" : "") + " coupon-color-" + couponColorList[s.bg] + "'>");
                q.push("<div class='couponSavePrice'><span class='priceSign'>" + Helper.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + s.savePrice + "</span><span class='couponActivity'>" + LS.Event + LS.name + "：" + Helper.encodeHtml(s.couponName) + "</span></div>");
                q.push("<div class='couponCondition'>" + LS.useCondition + "：" + LS.full + s.orderMinPrice + "</div>");
                q.push("<div class='couponTime'>" + LS.valiteTime + "：" + s.validity + "</div>");
                q.push("</div>");
                if (b == 1) {
                    if (o == 2052 || o == 1028) {
                        q.push('<div class="fk-coupon-used"></div>')
                    } else {
                        q.push('<div class="fk-coupon-used-en"></div>')
                    }
                }
                q.push("</div>");
                q.push("</div>")
            } else {
                q.push("<div class='coupon-warp'>");
                q.push("<div class='coupon-code'>" + LS.couponNumber + "：" + s.redeemCode + "</div>");
                q.push("<div class='coupon' data_id='" + s.cdId + "'>");
                q.push("<div class='coupon-left coupon-" + couponColorList[s.bg] + "-left'></div>");
                q.push("<div class='coupon-content coupon-color-" + couponColorList[s.bg] + "'>");
                q.push("<div class='couponSavePrice'><span class='priceSign'>" + Helper.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + s.savePrice + "</span></div>");
                q.push("<div>" + LS.Event + LS.name + "：" + Helper.encodeHtml(s.couponName) + "</div>");
                q.push("<div>" + LS.useCondition + "：" + LS.full + s.orderMinPrice + "</div>");
                q.push("<div>" + LS.valiteTime + "：" + s.validity + "</div>");
                q.push("</div>");
                q.push("<div class='coupon-right coupon-" + couponColorList[s.bg] + "-right'></div>");
                q.push("<div class='coupon-watermark'>券</div>");
                if (b == 2) {
                    q.push('<div class="fk-coupon-expired"></div>')
                }
                q.push("</div>");
                q.push("</div>")
            }
        });
        q.push("</div>");
        return q.join("")
    }

    function d(p, m, o, n) {
        pageno[p] = m;
        e(".tabList").next().remove();
        e(".tabList").after(i(o, n))
    }

    return f
})(jQuery);
Run.onlyShowPhoneCode = function (a) {
    var b = $("#" + a);
    if (typeof b == "undefined" || b == null) {
        return
    }
    var c = b.val();
    c = c.substring(0, c.length - 5);
    b.val(c)
};
Run.newOrderList = function (moduleId) {
    var $module = $("#module" + moduleId);
    $module.on("click", ".pageNo, .pagePrev, .pageNext", function () {
        var pageSize = $(this).attr("_pageSize");
        var pageno = $.trim($(this).text());
        var status = $(this).attr("_status");
        var colorStyleType = $(this).attr("_colorStyleType");
        var colorStyle = $(this).attr("_colorStyle");
        if ($(this).hasClass("pagePrev")) {
            pageno = $(this).attr("_prepage")
        } else {
            if ($(this).hasClass("pageNext")) {
                pageno = $(this).attr("_nextpage")
            }
        }
        if (!$(this).hasClass("J_pageSelect") && pageno) {
            var mallOrderStatusId = $module.find(".memberOrderNewPanel .mallOrderNewList > div:visible").attr("id");
            mallOrderStatusId = $.trim(mallOrderStatusId);
            Run.showLoading(mallOrderStatusId);
            $.ajax({
                url: "ajax/member_h.php?cmd=getNewOrderListHtml",
                data: "moduleId=" + moduleId + "&status=" + status + "&pageno=" + pageno + "&pageSize=" + pageSize + "&colorStyleType=" + colorStyleType + "&colorStyle=" + colorStyle,
                dataType: "json",
                success: function (result) {
                    if (result.success) {
                        var newOrderListHtml = result.msg;
                        if (status == 2) {
                            $(".mallOrderWaitSettle").empty();
                            $(".mallOrderWaitSettle").append(newOrderListHtml)
                        } else {
                            if (status == 5) {
                                $(".mallOrderFinSettle").empty();
                                $(".mallOrderFinSettle").append(newOrderListHtml)
                            } else {
                                if (status == 10) {
                                    $(".mallOrderFinPay").empty();
                                    $(".mallOrderFinPay").append(newOrderListHtml)
                                } else {
                                    if (status == 15) {
                                        $(".mallOrderFinShip").empty();
                                        $(".mallOrderFinShip").append(newOrderListHtml)
                                    } else {
                                        if (status == 20) {
                                            $(".mallOrderFinProcess").empty();
                                            $(".mallOrderFinProcess").append(newOrderListHtml)
                                        } else {
                                            if (status == 25) {
                                                $(".mallOrderAll").empty();
                                                $(".mallOrderAll").append(newOrderListHtml)
                                            } else {
                                                if (status == -2) {
                                                    $(".mallOrderRefund").empty();
                                                    $(".mallOrderRefund").append(newOrderListHtml)
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        var newOrderListScript = result.scripts;
                        eval(newOrderListScript)
                    } else {
                        Helper.ing(result.msg, true)
                    }
                    Run.closeLoading(mallOrderStatusId)
                },
                error: function () {
                    Run.showLoadingAgain(mallOrderStatusId, pageno)
                }
            })
        }
    })
};
Run.showLoading = function (b) {
    var a = ['<div class="orderLoading" style="margin-top:50px;margin-bottom:50px;">', '<table style="width:100%;height:100%;"><tr><td align="center" valign="middle">', '<div class="ajaxLoading2"></div>', "</td></tr></table>", "</div>"];
    $("#" + b).find(".itemList").empty().append(a.join(""))
};
Run.showLoadingAgain = function (b, c) {
    Run.closeLoading(b);
    var a = ['<div class="orderLoadingAgain orderLoading" style="margin-top:50px;margin-bottom:50px;text-align:center;">', '<div style="color: #1b7ad1; text-decoration: none; text-align:center; width:100%;cursor:pointer;" onclick="Run.reloadingClick(\'' + b + "'," + c + ');">加载失败，请点击重新加载</div>', "</div>"];
    $("#" + b).find(".itemList").empty().append(a.join(""))
};
Run.closeLoading = function (a) {
    $("#" + a).find(".orderLoading").remove()
};
Run.reloadingClick = function (a, b) {
    Run.showLoading(a);
    $("#" + a).find(".pageNo").each(function () {
        if ($.trim($(this).text()) == b) {
            $(this).click()
        }
    })
};
Run.initModuleMemberSignup = function (b, e, d, a) {
    $("#memberSignupAcct").focus();
    if (e == 2) {
        $("#module" + b).find(".formMiddle").addClass("memberSignupMiddle");
        var c = $("#module" + b).find("#memberSignupButton");
        $(c).unbind("click").bind("click", function () {
            if (d) {
                Helper.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再注册会员。")
            } else {
                Run.memberSignupSubmit(b, a, e)
            }
        });
        Run.memberSignupCompatibility(b)
    }
};
Run.memberSignupCompatibility = function (b) {
    if (Helper.isIE6()) {
        var e = $("#module" + b).find(".J_memberSignupPanel");
        $(e).removeAttr("style");
        var d = $(e).width();
        if (d > 313 || d < 200) {
            d = (d > 313) ? "313px" : (d < 200) ? "200px" : "auto";
            $(e).css("width", d)
        }
    }
    var c = !("placeholder" in document.createElement("input"));
    if (c) {
        var a = $("#module" + b).find(".itemMiddle");
        $.each(a, function (k, m) {
            var n = $(m).find("span");
            n.css({"white-space": "nowrap"});
            var h = n.width();
            var l = n.height();
            var g = $(m).position().top + (Helper.isIE6() ? 2 : 0);
            var f = $(m).position().left;
            $(n).css({
                top: g + "px",
                left: f + "px",
                "line-height": l + "px",
                padding: "0px 0px 0px 4px",
                width: h + "px"
            });
            var j = $(m).find("input").val();
            if (j && j.length > 0) {
                $(n).hide()
            }
        })
    }
};
Run.getSignMobileCode = function (d, b) {
    var c = Run.checkGetMobileCodeParam(d, b);
    var a = $("#module" + d);
    if (d == "J_memberRegisterDialogPanel") {
        a = $("#J_memberRegisterDialogPanel")
    }
    if (c.checkResult == true) {
        $.ajax({
            type: "post",
            url: "ajax/member_h.php?cmd=getMobileCode",
            data: "mobile=" + c.info.mobile + "&mobileCt=" + c.info.mobileCt + "&validateCode=" + c.info.captcha,
            error: function () {
                Run.showSignupMsg(b, d, "", LS.getMobileCodeErrAf, true)
            },
            success: function (e) {
                var f = jQuery.parseJSON(e);
                if (f.success) {
                    Run.showSignupMsg(b, d, "", LS.sendMobileCodeSuc, true);
                    Run.getSignMobileCodeCountDown(d)
                } else {
                    Run.changeCaptchaImg(a.find("#memberSignupCaptchaImg")[0]);
                    $("#memberSignupCaptcha").val("");
                    if (f.rt == -401) {
                        Run.showSignupMsg(b, d, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch)
                    } else {
                        if (f.rt == -2) {
                            Run.showSignupMsg(b, d, "", LS.argsError)
                        } else {
                            if (f.rt == 2) {
                                Run.showSignupMsg(b, d, "mobile", LS.memberDialogSendMobileCodeErr)
                            } else {
                                if (f.rt == -4 || f.rt == 8) {
                                    Run.showSignupMsg(b, d, "", LS.getMobileOneMin, true)
                                } else {
                                    if (f.rt == -8) {
                                        Run.showSignupMsg(b, d, "", LS.getMobileHalfHour, true)
                                    } else {
                                        if (f.rt == 3) {
                                            Run.showSignupMsg(b, d, "", LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (f.rt == 9) {
                                                Run.showSignupMsg(b, d, "", LS.memberDialogSendMobileCodeLimit, true)
                                            } else {
                                                if (f.rt == 101) {
                                                    Run.showSignupMsg(b, d, "", LS.mobileSetErr, true)
                                                } else {
                                                    if (f.rt == -6) {
                                                        Run.showSignupMsg(b, d, "mobile", LS.mobileHasSigned, true)
                                                    } else {
                                                        if (f.rt == 23) {
                                                            Run.showSignupMsg(b, d, "", LS.mobileNationTplErr, true)
                                                        } else {
                                                            Run.showSignupMsg(b, d, "", LS.getMobileRefresh, true)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        })
    }
};
Run.getSignMobileCodeCountDown = function (d) {
    var b = $("#module" + d);
    if (d == "J_memberRegisterDialogPanel") {
        b = $("#J_memberRegisterDialogPanel")
    }
    var e = b.find(".getMobileCdBtn");
    var c = e.attr("cTime");
    var f = 60;
    if (!c || c == null) {
        c = 0
    } else {
        c = parseInt(c);
        f = 1800
    }
    c++;
    e.attr("cTime", c);
    e.attr("s_onclick", e.attr("onclick"));
    e.removeAttr("onclick");
    var a = setInterval(function () {
        f--;
        e.html(LS.reGetMsg + "(" + f + ")");
        if (f <= 0) {
            e.html(e.attr("title"));
            e.attr("onclick", e.attr("s_onclick"));
            clearInterval(a)
        }
    }, 1000)
};
Run.checkGetMobileCodeParam = function (f, c) {
    var e = {checkResult: false, info: {}};
    var b = $("#module" + f);
    if (f == "J_memberRegisterDialogPanel") {
        b = $("#J_memberRegisterDialogPanel")
    }
    var a = b.find("#mobile").val();
    var d = b.find("#memberSignupCaptcha").val();
    if (!Helper.isNationMobile(a)) {
        Run.showSignupMsg(c, f, "mobile", LS.mobileNumRegular);
        return e
    }
    if (d == null || d == "") {
        Run.showSignupMsg(c, f, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaEmpty);
        return e
    }
    e.checkResult = true;
    e.info.mobile = a;
    if (a && a != null && $.trim(a) != "") {
        e.info.mobileCt = b.find("#mobileCt").val()
    } else {
        e.info.mobileCt = ""
    }
    e.info.captcha = d;
    return e
};
Run.memberSignupSubmit = function (b, a, i) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行注册。");
        return
    }
    var c = $("#module" + b);
    var h = c.find("#memberSignupAcct").val();
    var f = c.find("#memberSignupPwd").val();
    var g = Run.checkSignupValid(b, i);
    if (!g.checkResult) {
        return
    }
    var d = c.find(".memberSignupBtn");
    var e = c.find(".memberSignupMsg .msgText");
    d.attr("disabled", true);
    e.html(LS.memberSignupRegisterIng);
    $.ajax({
        type: "post",
        url: "ajax/member_h.php?cmd=add",
        data: "info=" + Helper.encodeUrl($.toJSON(g.info)) + "&validateCode=" + g.captcha,
        error: function () {
            d.removeAttr("disabled");
            Run.showSignupMsg(i, b, "", LS.memberSignupRegisterError, true)
        },
        success: function (j) {
            var k = jQuery.parseJSON(j);
            if (k.success) {
                if (k.active) {
                    Run.memberActiveDialog(g.info.email, Helper.encodeUrl(g.info.acct), function () {
                        if (a) {
                            Helper.top.location.href = "login.php?errno=12&url=" + Helper.encodeUrl(a)
                        } else {
                            Helper.top.location.href = "login.php?errno=12"
                        }
                        Helper.top.event.returnValue = false
                    })
                } else {
                    if (a) {
                        Run.autoLogin(h, f, a)
                    } else {
                        Helper.top.location.href = "login.php?errno=12"
                    }
                }
            } else {
                d.removeAttr("disabled");
                Run.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                $("#memberSignupCaptcha").val("");
                if (k.rt == -601) {
                    Run.showSignupMsg(i, b, "messageAuthCode", LS.reGetMobileCode)
                } else {
                    if (k.rt == -401) {
                        Run.showSignupMsg(i, b, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch);
                        if (k.needCode) {
                            $(".J_memberSignupCaptcha").removeClass("memberSignupCaptchaHide")
                        }
                    } else {
                        if (k.rt == -8) {
                            Run.showSignupMsg(i, b, "mobile", LS.mobileHasSigned)
                        } else {
                            if (k.rt == -6) {
                                Run.showSignupMsg(i, b, "memberSignupAcct", LS.memberSignupRegisterExisted)
                            } else {
                                if (k.rt == -4) {
                                    Run.showSignupMsg(i, b, "", LS.memberSignupRegisterLimit, true)
                                } else {
                                    if (k.rt == -28) {
                                        Run.showSignupMsg(i, b, "", LS.memberRegisterLimit, true)
                                    } else {
                                        if (k.rt == -20) {
                                            Run.showSignupMsg(i, b, "", k.msg, true)
                                        } else {
                                            Run.showSignupMsg(i, b, "", LS.memberSignupRegisterError, true)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Run.memberSignupDialogSubmit = function (b, a, n, g, l, o, k, c, h) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行注册。");
        return
    }
    var e = $("#" + b);
    var m = e.find("#memberSignupAcct").val();
    var j = e.find("#memberSignupPwd").val();
    var i = Run.checkSignupValid(b, n);
    if (!i.checkResult) {
        return
    }
    var d = e.find(".memberSignupBtn");
    var f = e.find(".memberSignupMsg .msgText");
    d.attr("disabled", true);
    f.html(LS.memberSignupRegisterIng);
    $.ajax({
        type: "post",
        url: "ajax/member_h.php?cmd=add",
        data: "info=" + Helper.encodeUrl($.toJSON(i.info)) + "&validateCode=" + i.captcha,
        error: function () {
            d.removeAttr("disabled");
            Run.showSignupMsg(n, b, "", LS.memberSignupRegisterError, true)
        },
        success: function (p) {
            var q = jQuery.parseJSON(p);
            if (q.success) {
                if (q.active) {
                    Run.memberActiveDialog(i.info.email, Helper.encodeUrl(i.info.acct), function () {
                        if (a) {
                            Helper.top.location.href = "login.php?errno=12&url=" + Helper.encodeUrl(a)
                        } else {
                            Helper.top.location.href = "login.php?errno=12"
                        }
                        Helper.top.event.returnValue = false
                    })
                } else {
                    if (a) {
                        Run.autoLoginForDialog(m, j, a, g, b, l, o, k, c, h)
                    } else {
                        Helper.top.location.href = "login.php?errno=12"
                    }
                }
            } else {
                d.removeAttr("disabled");
                Run.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                $("#memberSignupCaptcha").val("");
                if (q.rt == -601) {
                    Run.showSignupMsg(n, b, "messageAuthCode", LS.reGetMobileCode)
                } else {
                    if (q.rt == -401) {
                        Run.showSignupMsg(n, b, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaNotMatch)
                    } else {
                        if (q.rt == -8) {
                            Run.showSignupMsg(n, b, "mobile", LS.mobileHasSigned)
                        } else {
                            if (q.rt == -6) {
                                Run.showSignupMsg(n, b, "memberSignupAcct", LS.memberSignupRegisterExisted)
                            } else {
                                if (q.rt == -4) {
                                    Run.showSignupMsg(n, b, "", LS.memberSignupRegisterLimit, true)
                                } else {
                                    if (q.rt == -28) {
                                        Run.showSignupMsg(n, b, "", LS.memberRegisterLimit, true)
                                    } else {
                                        Run.showSignupMsg(n, b, "", LS.memberSignupRegisterError, true)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Run.autoLogin = function (c, b, a) {
    b = $.md5(b);
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(c) + "&pwd=" + Helper.encodeUrl(b),
        error: function () {
            Helper.top.location.href = "login.php?errno=-1&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(c)
        },
        success: function (d) {
            var d = jQuery.parseJSON(d);
            if (d.success) {
                Helper.top.location.href = a;
                return
            } else {
                Helper.top.location.href = "login.php?returnUrl=" + Helper.encodeUrl(a)
            }
        }
    })
};
Run.autoLoginForDialog = function (i, f, a, d, c, h, j, g, b, e) {
    f = $.md5(f);
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(i) + "&pwd=" + Helper.encodeUrl(f),
        error: function () {
            Helper.top.location.href = "login.php?errno=-1&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(i)
        },
        success: function (k) {
            var k = jQuery.parseJSON(k);
            if (k.success) {
                $("#_TOKEN").attr("value") || $("title").after(k._TOKEN);
                if (g == "addCartItem") {
                    var l = {};
                    l.pid = d;
                    l.mid = h;
                    l.url = j;
                    l.opList = b;
                    l.count = e;
                    l.doWhat = "add";
                    $.cookie("isNeedAddCartItem", $.toJSON(l));
                    Helper.top.location.reload()
                } else {
                    if (g == "immeBuy") {
                        var l = {};
                        l.pid = d;
                        l.mid = h;
                        l.url = j;
                        l.opList = b;
                        l.count = e;
                        l.doWhat = "buy";
                        $.cookie("isNeedAddCartItem", $.toJSON(l));
                        Helper.top.location.reload()
                    }
                }
                return
            } else {
                Helper.top.location.href = "login.php?returnUrl=" + Helper.encodeUrl(a)
            }
        }
    })
};
Run.memberSignup = function (a) {
    if (a) {
        Helper.top.location.href = "signup.php?url=" + Helper.encodeUrl(a)
    } else {
        Helper.top.location.href = "signup.php"
    }
};
Run.checkSignupValid = function (s, e) {
    var b = {checkResult: true, captcha: "", info: {}};
    if (s == "J_memberRegisterDialogPanel") {
        var a = $("#" + s)
    } else {
        var a = $("#module" + s)
    }
    a.find(".memberSignupMsg").show();
    var d = a.find(".memberSignupMsg .msgText");
    var k = $.trim($("#memberSignupAcct").val());
    if (k == null || k == "") {
        Run.showSignupMsg(e, s, "memberSignupAcct", LS.memberSignupRegisterAcctEmpty);
        b.checkResult = false;
        return b
    }
    var g = $("#memberSignupPwd").val();
    if (g == null || g == "") {
        Run.showSignupMsg(e, s, "memberSignupPwd", LS.memberSignupRegisterPwdEmpty);
        b.checkResult = false;
        return b
    }
    if (g.length < 4) {
        Run.showSignupMsg(e, s, "memberSignupPwd", LS.memberSignupRegisterPwdMinLength);
        b.checkResult = false;
        return b
    }
    var n = $("#memberSignupRepwd").val();
    if (g != n) {
        Run.showSignupMsg(e, s, "memberSignupRepwd", LS.memberSignupRegisterPwdNotMatch);
        b.checkResult = false;
        return b
    }
    var o = "";
    if ($("#memberSignupRemark").length > 0) {
        o = $("#memberSignupRemark").val();
        var t = $("#memberSignupRemark").attr("maxlength");
        if (o.length > t) {
            Run.showSignupMsg(e, s, "memberSignupRemark", Helper.format(LS.memberSignupRegisterRemarkMaxLength, t));
            b.checkResult = false;
            return b
        }
    }
    if (typeof(a.find("#messageAuthCode").attr("maxlength")) != "undefined" && a.find("#messageAuthCode").attr("maxlength") != null) {
        var m = a.find("#messageAuthCode").val();
        if (typeof(m) == "undefined" || m == null || m == "") {
            Run.showSignupMsg(e, s, "messageAuthCode", LS.inputMobileCode);
            b.checkResult = false;
            return b
        }
        b.info.messageAuthCode = m
    }
    b.info.acct = k;
    b.info.pwd = $.md5(g);
    b.info.remark = o;
    var c = "";
    var p = "";
    var h = "";
    var r = 0;
    var l = "";
    var f = 0;
    var j = "";
    $(".userAddItem").each(function () {
        userAddItemID = $(this).attr("id");
        h = $(this).val();
        c = $(this).attr("name");
        l = $(this).attr("maxlength");
        b.info[userAddItemID] = h;
        if (h.length > l) {
            Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemMaxLength, c, l));
            r = 1;
            b.checkResult = false;
            return b
        }
        if (userAddItemID == "phone" && h.length > 0) {
            if (!Helper.isPhone(h)) {
                Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemCorrect, c));
                f = 1;
                b.checkResult = false;
                return b
            }
        }
        if (userAddItemID == "email" && h.length > 0) {
            if (!Helper.isEmail(h)) {
                Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemCorrect, c));
                f = 1;
                b.checkResult = false;
                return b
            }
        }
        if (userAddItemID == "mobile" && h.length > 0) {
            if (!Helper.isNationMobile(h)) {
                Run.showSignupMsg(e, s, userAddItemID, LS.mobileNumRegular);
                f = 1;
                b.checkResult = false;
                return b
            } else {
                b.info.mobileCt = $("#mobileCt").val()
            }
        }
    });
    if (f == 1) {
        b.checkResult = false;
        return b
    }
    if (r == 1) {
        b.checkResult = false;
        return b
    }
    var i = 0;
    $(".isCheckUAI").each(function () {
        userAddItemID = $(this).attr("id");
        h = $(this).val();
        c = $(this).attr("name");
        if (h == null || h == "") {
            if ($(this).is("input")) {
                Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemIsEmpty, c))
            } else {
                Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemIsEmpty2, c))
            }
            i = 1;
            return false
        }
        if (userAddItemID == "email" && h.length > 0) {
            if (!Helper.isEmail(h)) {
                Run.showSignupMsg(e, s, userAddItemID, Helper.format(LS.memberSignupUserAddItemCorrect, c));
                i = 1;
                return false
            }
        }
    });
    if (i == 1) {
        b.checkResult = false;
        return b
    }
    if ($(".J_memberSignupCaptcha").css("display") != "none") {
        b.captcha = $("#memberSignupCaptcha").val();
        if (b.captcha == null || b.captcha == "") {
            Run.showSignupMsg(e, s, "memberSignupCaptcha", LS.memberSignupRegisterCaptchaEmpty);
            b.checkResult = false;
            return b
        }
    }
    var q = $("#memberAgreePro");
    if (q.length > 0) {
        if (!q.prop("checked")) {
            Run.showSignupMsg(e, s, "memberAgreePro", LS.memberProtocolNotAgree, true);
            b.checkResult = false;
            return b
        }
    }
    b.checkResult = true;
    return b
};
Run.showSignupMsg = function (g, a, h, f, i) {
    if (a == "J_memberRegisterDialogPanel") {
        Helper.ing(f);
        return
    }
    var b = $("#module" + a);
    var e = new Object();
    var d = "";
    if (h.length > 0) {
        e = $(b).find("#" + h);
        d = $(e).prop("tagName").toLocaleLowerCase()
    }
    if (g == 1) {
        b.find(".memberSignupMsg").show();
        var c = b.find(".memberSignupMsg .msgText");
        if (d.length > 0 && d == "input") {
            $(e).focus();
            c.html(f)
        } else {
            c.html(f)
        }
        return
    }
    if (i) {
        Helper.ing(f, false);
        return
    }
    if (g == 2) {
        var j = {moduleId: "module" + a, targetId: h, tipText: f};
        Run.floatTip(j);
        $(e).addClass("focusBg");
        return
    }
};
Run.initModuleMemberLogin = function (b, d, e, c, a) {
    if (typeof a != "object") {
        a = new Object()
    }
    if (d == 2) {
        $("#module" + b).find(".J_loginButton").bind("click", function () {
            if (c) {
                Helper.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再登录会员。")
            } else {
                if (e) {
                    Run.memberLogin1(b, a)
                } else {
                    Run.memberLogin2(b, d, a)
                }
            }
        })
    }
    Run.memberLoginCompatibility(b)
};
Run.memberLoginCompatibility = function (c) {
    var b = $("#module" + c);
    if (c == "loginDialog") {
        b = $("#J_memberLoginDialogPanel")
    }
    if (Helper.isIE6()) {
        var f = b.find(".J_memberLoginPanel");
        $(f).removeAttr("style");
        var e = $(f).width();
        if (e > 260 || e < 180) {
            e = (e > 260) ? "260px" : (e < 180) ? "180px" : "auto";
            $(f).css("width", e)
        }
    }
    var d = !("placeholder" in document.createElement("input"));
    if (d) {
        var a = b.find(".J_memberLoginItem");
        $.each(a, function (l, n) {
            var o = $(n).find("span");
            var j = $(o).width();
            var m = $(o).height();
            var h = $(n).position().top + (Helper.isIE6() ? 2 : 0);
            var g = $(n).position().left;
            if ($(n).hasClass("memberCaptcha")) {
                g += 10
            } else {
                g += 25
            }
            $(o).css({
                top: h + "px",
                left: g + "px",
                "line-height": m + "px",
                padding: "0px 0px 0px 4px",
                width: j + "px"
            });
            var k = $(n).find("input").val();
            if (k.length > 0) {
                $(o).hide()
            }
        })
    }
};
Run.memberLogin = function (b) {
    var a = Helper.top.location.href;
    if (a.indexOf("errno=") > -1) {
        return
    }
    if (a.indexOf("url=") > -1 && a.indexOf("login.php") > -1) {
        return
    }
    var c = "login.php?url=" + Helper.encodeUrl(Helper.getUrlRoot(a));
    if (b !== undefined) {
        c += "&errno=" + b
    }
    Helper.top.location.href = c
};
Run.memberLogin1 = function (b, i) {
    Run.logDog(200061, 2);
    if (typeof i != "object") {
        i = new Object()
    }
    var a = Helper.getUrlParam(Helper.top.location.href, "url");
    if (!a) {
        a = "./index.php"
    }
    var c = $("#module" + b);
    var h = c.find(".memberAcctInput").val();
    var g = c.find(".memberPwdInput").val();
    if (h == null || h == "") {
        Helper.top.location.href = "login.php?errno=1&url=" + Helper.encodeUrl(a);
        return
    }
    if (g == null || g == "") {
        Helper.top.location.href = "login.php?errno=2&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(h);
        return
    }
    g = $.md5(g);
    var f = c.find(".member");
    f.hide();
    var j = c.find(".memberMsg");
    j.html(LS.memberLogining);
    j.show();
    var e = false;
    var d = c.find("#autoLogin" + b);
    if (d && d.attr("checked")) {
        e = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(h) + "&pwd=" + Helper.encodeUrl(g) + "&autoLogin=" + Helper.encodeUrl(e),
        error: function () {
            Helper.top.location.href = "login.php?errno=-1&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(h)
        },
        success: function (u) {
            var u = jQuery.parseJSON(u);
            if (u.success) {
                $("#_TOKEN").attr("value") || $("title").after(u._TOKEN);
                if (!!i.skipUrl) {
                    a = i.skipUrl
                }
                if (i.isPhotoSlide) {
                    var l = a.split(";");
                    for (var o = 0; o < l.length - 1; o++) {
                        var q = new RegExp("[^script:]");
                        if (q.test(a)) {
                            var t = l[o].split(":"), k = t[1].indexOf("(") + 1, n = t[1].lastIndexOf(")"),
                                r = Array.prototype.slice.call(t[1].substring(k, n).split(",")),
                                m = t[1].substring(0, k - 1), s = [];
                            Run.photoSlide.returnIndex = function () {
                                delete Run.photoSlide.returnIndex;
                                Helper.top.location.href = "/index.php"
                            };
                            var p = [{name: m, base: window}];
                            s = p.concat(r);
                            jzUtils.run.apply(window, s)
                        }
                    }
                } else {
                    Helper.top.location.href = a;
                    return
                }
            } else {
                if (u.active) {
                    Run.memberInactiveDialog(u.mail, u.memName);
                    f.show();
                    j.hide()
                } else {
                    Helper.top.location.href = "login.php?errno=" + u.rt + "&captcha=" + u.captcha + "&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(h)
                }
            }
        }
    })
};
Run.mbLogining = false;
Run.memberLogin2 = function (b, l, n) {
    Run.logDog(200061, 2);
    if (typeof n != "object") {
        n = new Object()
    }
    if (Run.mbLogining) {
        return
    }
    Run.mbLogining = true;
    var a = Helper.getUrlParam(Helper.top.location.href, "url");
    if (!a) {
        a = "./index.php"
    }
    var o = Helper.getUrlParam(Helper.top.location.href, "mid");
    var d = Helper.getUrlParam(Helper.top.location.href, "fid");
    var c = $("#module" + b);
    var k = $.trim(c.find(".memberAcctInput").val());
    var h = c.find(".memberPwdInput").val();
    var g = (c.find(".memberCaptcha").css("display") != "none");
    var i = c.find(".memberCaptchaInput").val();
    if (k == null || k == "") {
        Run.showMemberLoginMsg(b, 1, false, l);
        return
    }
    if (h == null || h == "") {
        Run.showMemberLoginMsg(b, 2, false, l);
        return
    }
    if (g && (i == null || i == "")) {
        Run.showMemberLoginMsg(b, 3, false, l);
        return
    }
    h = $.md5(h);
    var m = c.find(".memberLoginMsg");
    m.show();
    m.find(".msgText").html(LS.memberLogining);
    var j = c.find(".memberLoginBtn");
    j.attr("disabled", true);
    var f = false;
    var e = c.find("#autoLogin" + b);
    if (e && e.attr("checked")) {
        f = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(k) + "&pwd=" + Helper.encodeUrl(h) + "&captcha=" + Helper.encodeUrl(i) + "&autoLogin=" + Helper.encodeUrl(f),
        error: function () {
            Run.mbLogining = false;
            j.removeAttr("disabled");
            Run.showMemberLoginMsg(b, -1, l)
        },
        success: function (z) {
            Run.mbLogining = false;
            j.removeAttr("disabled");
            var z = jQuery.parseJSON(z);
            if (z.success) {
                $("#_TOKEN").attr("value") || $("title").after(z._TOKEN);
                if (o != null && d != null) {
                    $.cookie("_moduleid", o, {expires: 1});
                    $.cookie("_fileid", d, {expires: 1})
                }
                if (!!n.skipUrl) {
                    a = n.skipUrl
                }
                if (n.isPhotoSlide) {
                    var q = a.split(";");
                    for (var t = 0; t < q.length - 1; t++) {
                        var v = new RegExp("[^script:]");
                        if (v.test(a)) {
                            var y = q[t].split(":"), p = y[1].indexOf("(") + 1, s = y[1].lastIndexOf(")"),
                                w = Array.prototype.slice.call(y[1].substring(p, s).split(",")), x = [],
                                r = y[1].substring(0, p - 1);
                            Run.photoSlide.returnIndex = function () {
                                delete Run.photoSlide.returnIndex;
                                Helper.top.location.href = "/index.php"
                            };
                            var u = [{name: r, base: window}];
                            x = u.concat(w);
                            jzUtils.run.apply(window, x)
                        }
                    }
                } else {
                    Helper.top.location.href = a;
                    return
                }
            } else {
                if (z.active) {
                    Run.memberInactiveDialog(z.mail, z.memName)
                } else {
                    Run.showMemberLoginMsg(b, z.rt, z.captcha, l)
                }
            }
        }
    })
};
Run.memberLogin3 = function (j) {
    if (typeof j != "object") {
        j = new Object()
    }
    var a = Helper.getUrlParam(Helper.top.location.href, "url");
    if (!a) {
        a = "./index.php"
    }
    var b = $("#J_WebRightBar");
    var i = $.trim(b.find("#memberAcct").val());
    var f = b.find("#memberPwd").val();
    var e = (b.find(".rbar-captcha").css("display") != "none");
    var g = b.find(".memberLoginCaptcha").val();
    if (i == null || i == "") {
        Helper.top.location.href = "login.php?errno=1&url=" + Helper.encodeUrl(a);
        return
    }
    if (f == null || f == "") {
        Helper.top.location.href = "login.php?errno=2&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(i);
        return
    }
    f = $.md5(f);
    var h = b.find(".memberLoginBtn");
    h.attr("disabled", true);
    var d = false;
    var c = b.find("#autoLoginRightBar");
    if (c && c.attr("checked")) {
        d = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(i) + "&pwd=" + Helper.encodeUrl(f) + "&captcha=" + Helper.encodeUrl(g) + "&autoLogin=" + Helper.encodeUrl(d),
        error: function () {
            Run.mbLogining = false;
            h.removeAttr("disabled");
            Helper.top.location.href = "login.php?errno=-1&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(i)
        },
        success: function (k) {
            Run.mbLogining = false;
            h.removeAttr("disabled");
            var k = jQuery.parseJSON(k);
            if (k.success) {
                $("#_TOKEN").attr("value") || $("title").after(k._TOKEN);
                if (!!j.skipUrl) {
                    a = j.skipUrl
                }
                Helper.top.location.href = a;
                return
            } else {
                if (k.active) {
                    Run.memberInactiveDialog(k.mail, k.memName);
                    return
                }
                if (k.captcha) {
                    Helper.top.location.href = "login.php?errno=" + k.rt + "&captcha=" + k.captcha + "&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(i);
                    return
                } else {
                    Run.showMemberLoginMsg("webRightBar", k.rt, k.captcha, 2)
                }
            }
        }
    })
};
Run.mbLogining = false;
Run.memberLogin4 = function (e, c, o, l, b, i) {
    var a = Helper.getUrlParam(Helper.top.location.href, "url");
    if (!a) {
        a = "./index.php"
    }
    if (Run.mbLogining) {
        return
    }
    Run.mbLogining = true;
    var d = $("#J_memberLoginDialogPanel");
    var n = $.trim(d.find("#memberAcct").val());
    var j = d.find("#memberPwd").val();
    var h = (d.find(".memberCaptcha").css("display") != "none");
    var k = d.find(".memberCaptchaInput").val();
    if (n == null || n == "") {
        Helper.ing("帐号不能为空！");
        return
    }
    if (j == null || j == "") {
        Helper.ing("密码不能为空！");
        return
    }
    if (h && (k == null || k == "")) {
        Helper.ing(LS.memberCaptchError);
        return
    }
    j = $.md5(j);
    var m = d.find(".memberLoginBtn");
    m.attr("disabled", true);
    var g = false;
    var f = d.find("#memberLoginDialogAutoLogin");
    if (f && f.attr("checked")) {
        g = true
    }
    $.ajax({
        type: "post",
        url: "ajax/login_h.php",
        data: "cmd=loginMember&acct=" + Helper.encodeUrl(n) + "&pwd=" + Helper.encodeUrl(j) + "&captcha=" + Helper.encodeUrl(k) + "&autoLogin=" + Helper.encodeUrl(g),
        error: function () {
            Run.mbLogining = false;
            m.removeAttr("disabled");
            Helper.top.location.href = "login.php?errno=-1&url=" + Helper.encodeUrl(a) + "&acct=" + Helper.encodeUrl(n)
        },
        success: function (p) {
            Run.mbLogining = false;
            m.removeAttr("disabled");
            var p = jQuery.parseJSON(p);
            if (p.success) {
                $("#_TOKEN").attr("value") || $("title").after(p._TOKEN);
                if (l == "addCartItem") {
                    var q = {};
                    q.pid = e;
                    q.mid = c;
                    q.url = o;
                    q.opList = b;
                    q.count = i;
                    q.doWhat = "add";
                    $.cookie("isNeedAddCartItem", $.toJSON(q));
                    Helper.top.location.reload()
                } else {
                    if (l == "immeBuy") {
                        var q = {};
                        q.pid = e;
                        q.mid = c;
                        q.url = o;
                        q.opList = b;
                        q.count = i;
                        q.doWhat = "buy";
                        $.cookie("isNeedAddCartItem", $.toJSON(q));
                        Helper.top.location.reload()
                    }
                }
                return
            } else {
                if (p.active) {
                    Run.memberInactiveDialog(p.mail, p.memName);
                    return
                } else {
                    Run.showMemberLoginMsg("loginDialog", p.rt, p.captcha, 2)
                }
            }
        }
    })
};
Run.showMemberLoginMsg = function (a, b, e, f) {
    var c, d = "", h = "", i = false;
    if (a == "webRightBar") {
        c = $("#J_WebRightBar")
    } else {
        if (a == "loginDialog") {
            c = $("#J_memberLoginDialogPanel")
        } else {
            c = $("#module" + a)
        }
    }
    if (b == 1) {
        d = LS.memberInputAcct;
        c.find(".memberAcctInput").focus();
        h = "memberLoginAcct"
    } else {
        if (b == 2) {
            d = LS.memberInputPwd;
            c.find(".memberPwdInput").focus();
            h = "memberLoginPwd"
        } else {
            if (b == 3) {
                d = LS.memberInputCaptcha;
                h = "memberLoginCaptcha"
            } else {
                if (b == 11) {
                    d = LS.memberLoginFirst;
                    i = true
                } else {
                    if (b == 12) {
                        d = LS.memberLoginSignup;
                        i = true
                    } else {
                        if (b == 13) {
                            d = LS.memberLoginToView;
                            i = true
                        } else {
                            if (b == 14) {
                                d = LS.memberLoginNoPermission;
                                i = true
                            } else {
                                if (b == -3) {
                                    d = LS.memberPwdError;
                                    h = "memberLoginPwd"
                                } else {
                                    if (b == -301) {
                                        d = LS.memberCaptchError;
                                        h = "memberLoginCaptcha"
                                    } else {
                                        if (b == -302) {
                                            d = LS.memberAcctError;
                                            h = "memberLoginAcct"
                                        } else {
                                            if (b == -303) {
                                                d = LS.memberNoAuth;
                                                h = "memberLoginAcct"
                                            } else {
                                                if (b == -305) {
                                                    d = LS.memberPwdError;
                                                    h = "memberLoginPwd"
                                                } else {
                                                    d = LS.memberLoginError;
                                                    i = true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    if (e && a != "webRightBar") {
        c.find(".memberCaptcha").show();
        c.find(".memberCaptchaImg").attr("src", "validateCode.php?" + Math.random() * 1000);
        Run.memberLoginCompatibility(a)
    }
    if (i) {
        Helper.ing(d, false);
        return
    }
    if (f == 1) {
        var g = c.find(".memberLoginMsg");
        g.show();
        g.find(".msgText").html(d)
    }
    if (f == 2) {
        var j = {moduleId: "module" + a, targetId: h, tipText: d};
        if (a != "loginDialog") {
            if (a == "webRightBar") {
                j.moduleId = "J_WebRightBar"
            } else {
                j.moduleId = "module" + a
            }
            setTimeout(function () {
                Run.floatTip(j)
            }, 50)
        } else {
            Helper.ing(d)
        }
    }
};
Run.changeCaptchaImg = function (a, b) {
    $(a).attr("src", "validateCode.php?" + Math.random() * 1000 + "&validateCodeRegType=" + b)
};
Run.wxListener = {timer: "", winOpen: "", w_uid: "", c: 0, wx_name: "", wx_avator: ""};
Run.initWXLogin = function (d, a, e, c, f, h, b) {
    a += "/wxLogin.php";
    $("#" + h).click(function () {
        if (Run.wxListener.c == 0) {
            Run.wxListener.winOpen = window.open("https://open.weixin.qq.com/connect/qrconnect?appid=" + d + "&redirect_uri=" + Helper.encodeUrl(a) + "&response_type=code&scope=snsapi_login#wechat_redirect", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Run.wxListener.timer = window.setInterval("Run.wxWinListener('" + e + "', " + c + ", " + f + ", " + b + ")", 500);
            window.addEventListener("message", g, false);
            ++Run.wxListener.c
        }
    });
    function g(i) {
        var j = $.parseJSON(i.data);
        Run.wxListener.w_uid = j.uid;
        Run.wxListener.wx_name = j.wx_name;
        Run.wxListener.wx_avator = j.wx_avator;
        Run.wxListener.winOpen.close()
    }
};
Run.wxWinListener = function (g, c, d, j) {
    if (Run.wxListener.winOpen.closed == true) {
        window.clearInterval(Run.wxListener.timer);
        Run.wxListener.c = 0;
        if (Run.wxListener.w_uid != null && Run.wxListener.w_uid != "") {
            var a = Helper.getUrlParam(Helper.top.location.href, "url");
            if (!a) {
                a = "./index.php"
            }
            var b = Run.checkHasMobileOption(g);
            g = jQuery.parseJSON(g);
            var h = false;
            if (g) {
                for (var f = 0; f < g.length; f++) {
                    if (g[f]["otherLoginMust"]) {
                        h = true;
                        break
                    }
                }
            }
            var e = "loginType=3&hasMobile=" + b + "&otherLoginMust=" + h + "&openId=" + encodeURIComponent(Run.wxListener.w_uid);
            if (!h) {
                e += "&avator=" + encodeURIComponent(Run.wxListener.wx_avator) + "&name=" + Run.wxListener.wx_name
            }
            $.ajax({
                type: "post", url: "ajax/login_h.php?cmd=otherLoginMember", data: e, error: function () {
                    Helper.ing(LS.memberLoginError, true)
                }, success: function (x) {
                    var x = jQuery.parseJSON(x);
                    if (x.success) {
                        $("#_TOKEN").attr("value") || $("title").after(x._TOKEN);
                        var l = $.cookie("forThirtLoginBuy");
                        if (typeof l != "undefined" && l != null && l != "") {
                            var v = $.parseJSON(l);
                            if (typeof v != "undefined" && v != null) {
                                if (v.where == "addCartItem") {
                                    var r = {};
                                    r.pid = v.pid;
                                    r.mid = v.mid;
                                    r.url = v.url;
                                    r.opList = v.opList;
                                    r.count = v.count;
                                    r.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(r));
                                    Helper.top.location.reload()
                                } else {
                                    if (v.where == "immeBuy") {
                                        var r = {};
                                        r.pid = v.pid;
                                        r.mid = v.mid;
                                        r.url = v.url;
                                        r.opList = v.opList;
                                        r.count = v.count;
                                        r.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(r));
                                        Helper.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!j.skipUrl) {
                            a = j.skipUrl
                        }
                        if (j.isPhotoSlide) {
                            var m = a.split(";");
                            for (var p = 0; p < m.length - 1; p++) {
                                var s = new RegExp("[^script:]");
                                if (s.test(a)) {
                                    var w = m[p].split(":"), k = w[1].indexOf("(") + 1, o = w[1].lastIndexOf(")"),
                                        t = Array.prototype.slice.call(w[1].substring(k, o).split(",")),
                                        n = w[1].substring(0, k - 1), u = [];
                                    Run.photoSlide.returnIndex = function () {
                                        delete Run.photoSlide.returnIndex;
                                        Helper.top.location.href = "/index.php"
                                    };
                                    var q = [{name: n, base: window}];
                                    u = q.concat(t);
                                    jzUtils.run.apply(window, u)
                                }
                            }
                        } else {
                            Helper.top.location.href = a;
                            return
                        }
                    } else {
                        if (x.active) {
                            Run.memberInactiveDialog(x.mail, x.memName)
                        } else {
                            if (x.rt == -3) {
                                Run.memberOtherLoginFill(g, Run.wxListener.w_uid, 3, x.mobileCtNameList, x.signNeenMobile, j)
                            } else {
                                if (x.rt == -303) {
                                    Helper.ing(LS.memberNoAuth, true)
                                } else {
                                    Helper.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Run.wbListener = {timer: "", winOpen: "", w_uid: "", c: 0, wb_name: "", wb_avator: ""};
Run.initWBLogin = function (h, a, d, c, e, g, b) {
    $("#" + g).click(function () {
        if (Run.wbListener.c == 0) {
            Run.wbListener.winOpen = window.open("https://api.weibo.com/oauth2/authorize?client_id=" + h + "&redirect_uri=" + a + "/wbLogin.php&response_type=code", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Run.wbListener.timer = window.setInterval("Run.wbWinListener('" + d + "', " + c + ", " + e + ", " + b + ")", 500);
            window.addEventListener("message", f, false);
            ++Run.wbListener.c
        }
    });
    function f(i) {
        var j = $.parseJSON(i.data);
        Run.wbListener.w_uid = j.uid;
        Run.wbListener.wb_name = j.name;
        Run.wbListener.wb_avator = j.w_avator;
        Run.wbListener.winOpen.close()
    }
};
Run.wbWinListener = function (g, c, d, j) {
    if (Run.wbListener.winOpen.closed == true) {
        window.clearInterval(Run.wbListener.timer);
        Run.wbListener.c = 0;
        if (Run.wbListener.w_uid != null && Run.wbListener.w_uid != "") {
            var a = Helper.getUrlParam(Helper.top.location.href, "url");
            if (!a) {
                a = "./index.php"
            }
            var b = Run.checkHasMobileOption(g);
            g = jQuery.parseJSON(g);
            var h = false;
            if (g) {
                for (var f = 0; f < g.length; f++) {
                    if (g[f]["otherLoginMust"]) {
                        h = true;
                        break
                    }
                }
            }
            var e = "loginType=2&hasMobile=" + b + "&otherLoginMust=" + h + "&openId=" + encodeURIComponent(Run.wbListener.w_uid);
            if (!h) {
                e += "&avator=" + encodeURIComponent(Run.wbListener.wb_avator) + "&name=" + Run.wbListener.wb_name
            }
            $.ajax({
                type: "post", url: "ajax/login_h.php?cmd=otherLoginMember", data: e, error: function () {
                    Helper.ing(LS.memberLoginError, true)
                }, success: function (x) {
                    var x = jQuery.parseJSON(x);
                    if (x.success) {
                        $("#_TOKEN").attr("value") || $("title").after(x._TOKEN);
                        var l = $.cookie("forThirtLoginBuy");
                        if (typeof l != "undefined" && l != null && l != "") {
                            var v = $.parseJSON(l);
                            if (typeof v != "undefined" && v != null) {
                                if (v.where == "addCartItem") {
                                    var r = {};
                                    r.pid = v.pid;
                                    r.mid = v.mid;
                                    r.url = v.url;
                                    r.opList = v.opList;
                                    r.count = v.count;
                                    r.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(r));
                                    Helper.top.location.reload()
                                } else {
                                    if (v.where == "immeBuy") {
                                        var r = {};
                                        r.pid = v.pid;
                                        r.mid = v.mid;
                                        r.url = v.url;
                                        r.opList = v.opList;
                                        r.count = v.count;
                                        r.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(r));
                                        Helper.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!j.skipUrl) {
                            a = j.skipUrl
                        }
                        if (j.isPhotoSlide) {
                            var m = a.split(";");
                            for (var p = 0; p < m.length - 1; p++) {
                                var s = new RegExp("[^script:]");
                                if (s.test(a)) {
                                    var w = m[p].split(":"), k = w[1].indexOf("(") + 1, o = w[1].lastIndexOf(")"),
                                        t = Array.prototype.slice.call(w[1].substring(k, o).split(",")),
                                        n = w[1].substring(0, k - 1), u = [];
                                    Run.photoSlide.returnIndex = function () {
                                        delete Run.photoSlide.returnIndex;
                                        Helper.top.location.href = "/index.php"
                                    };
                                    var q = [{name: n, base: window}];
                                    u = q.concat(t);
                                    jzUtils.run.apply(window, u)
                                }
                            }
                        } else {
                            Helper.top.location.href = a;
                            return
                        }
                    } else {
                        if (x.active) {
                            Run.memberInactiveDialog(x.mail, x.memName)
                        } else {
                            if (x.rt == -3) {
                                Run.memberOtherLoginFill(g, Run.wbListener.w_uid, 2, x.mobileCtNameList, x.signNeenMobile, j)
                            } else {
                                if (x.rt == -303) {
                                    Helper.ing(LS.memberNoAuth, true)
                                } else {
                                    Helper.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Run.qqPopupID = "";
Run.initQQLogin = function (g, a, d, c, e, f, b) {
    Run.qqLoginPC(g, a, d, c, e, f, b)
};
Run.qqListener = {timer: "", winOpen: "", q_uid: "", c: 0, q_name: "", q_avator: ""};
Run.qqLoginPC = function (h, a, d, c, e, g, b) {
    $("#" + g).click(function () {
        if (Run.qqListener.c == 0) {
            Run.qqListener.winOpen = window.open("https://graph.qq.com/oauth2.0/authorize?client_id=" + h + "&redirect_uri=" + a + "/qqLoginPC.php&response_type=token&scope=all", "", "height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes");
            Run.qqListener.timer = window.setInterval("Run.qqWinListenerPC('" + d + "', " + c + ", " + e + ", " + b + ")", 500);
            window.addEventListener("message", f, false);
            ++Run.qqListener.c
        }
    });
    function f(i) {
        var j = $.parseJSON(i.data);
        Run.qqListener.q_uid = j.uid;
        Run.qqListener.q_name = j.q_name;
        Run.qqListener.q_avator = j.q_avator;
        Run.qqListener.winOpen.close()
    }
};
Run.qqWinListenerPC = function (g, c, d, j) {
    if (Run.qqListener.winOpen.closed == true) {
        window.clearInterval(Run.qqListener.timer);
        Run.qqListener.c = 0;
        if (Run.qqListener.q_uid != null && Run.qqListener.q_uid != "") {
            var a = Helper.getUrlParam(Helper.top.location.href, "url");
            if (!a) {
                a = "./index.php"
            }
            var b = Run.checkHasMobileOption(g);
            g = jQuery.parseJSON(g);
            var h = false;
            if (g) {
                for (var f = 0; f < g.length; f++) {
                    if (g[f]["otherLoginMust"]) {
                        h = true;
                        break
                    }
                }
            }
            var e = "loginType=1&hasMobile=" + b + "&otherLoginMust=" + h + "&openId=" + encodeURIComponent(Run.qqListener.q_uid);
            if (!h) {
                e += "&avator=" + encodeURIComponent(Run.qqListener.q_avator) + "&name=" + Run.qqListener.q_name
            }
            $.ajax({
                type: "post", url: "ajax/login_h.php?cmd=otherLoginMember", data: e, error: function () {
                    Helper.ing(LS.memberLoginError, true)
                }, success: function (x) {
                    var x = jQuery.parseJSON(x);
                    if (x.success) {
                        $("#_TOKEN").attr("value") || $("title").after(x._TOKEN);
                        var l = $.cookie("forThirtLoginBuy");
                        if (typeof l != "undefined" && l != null && l != "") {
                            var v = $.parseJSON(l);
                            if (typeof v != "undefined" && v != null) {
                                if (v.where == "addCartItem") {
                                    var r = {};
                                    r.pid = v.pid;
                                    r.mid = v.mid;
                                    r.url = v.url;
                                    r.opList = v.opList;
                                    r.count = v.count;
                                    r.doWhat = "add";
                                    $.cookie("isNeedAddCartItem", $.toJSON(r));
                                    Helper.top.location.reload()
                                } else {
                                    if (v.where == "immeBuy") {
                                        var r = {};
                                        r.pid = v.pid;
                                        r.mid = v.mid;
                                        r.url = v.url;
                                        r.opList = v.opList;
                                        r.count = v.count;
                                        r.doWhat = "buy";
                                        $.cookie("isNeedAddCartItem", $.toJSON(r));
                                        Helper.top.location.reload()
                                    }
                                }
                            }
                            $.cookie("forThirtLoginBuy", null);
                            return
                        }
                        if (!!j.skipUrl) {
                            a = j.skipUrl
                        }
                        if (j.isPhotoSlide) {
                            var m = a.split(";");
                            for (var p = 0; p < m.length - 1; p++) {
                                var s = new RegExp("[^script:]");
                                if (s.test(a)) {
                                    var w = m[p].split(":"), k = w[1].indexOf("(") + 1, o = w[1].lastIndexOf(")"),
                                        t = Array.prototype.slice.call(w[1].substring(k, o).split(",")),
                                        n = w[1].substring(0, k - 1), u = [];
                                    Run.photoSlide.returnIndex = function () {
                                        delete Run.photoSlide.returnIndex;
                                        Helper.top.location.href = "/index.php"
                                    };
                                    var q = [{name: n, base: window}];
                                    u = q.concat(t);
                                    jzUtils.run.apply(window, u)
                                }
                            }
                        } else {
                            Helper.top.location.href = a;
                            return
                        }
                    } else {
                        if (x.active) {
                            Run.memberInactiveDialog(x.mail, x.memName)
                        } else {
                            if (x.rt == -3) {
                                Run.memberOtherLoginFill(g, Run.qqListener.q_uid, 1, x.mobileCtNameList, x.signNeenMobile, j)
                            } else {
                                if (x.rt == -303) {
                                    Helper.ing(LS.memberNoAuth, true)
                                } else {
                                    Helper.ing(LS.argsError, true)
                                }
                            }
                        }
                    }
                }
            })
        }
    }
};
Run.checkHasMobileOption = function (b) {
    b = jQuery.parseJSON(b);
    var c = false;
    if (b) {
        for (var a = 0; a < b.length; a++) {
            if (b[a]["fieldKey"] == "mobile" && b[a]["otherLoginMust"]) {
                c = true;
                break
            }
        }
    }
    return c
};
Run.memberOtherLoginFill = function (f, a, d, c, e, k) {
    var l = parseInt(Math.random() * 10000);
    var g = "", j = "", b = 170, i = 40;
    if (d == 1) {
        g = Run.qqListener.q_avator;
        j = Run.qqListener.q_name
    } else {
        if (d == 2) {
            g = Run.wbListener.wb_avator;
            i = 50;
            b = 165;
            j = Run.wbListener.wb_name
        } else {
            if (d == 3) {
                g = Run.wxListener.wx_avator;
                b = 158;
                i = 64;
                j = Run.wxListener.wx_name
            }
        }
    }
    var m = ['<div style="width:100%; height:1px; font-size:0; background-color:#e3e2e8; margin-top:14px;"/>', '<div style="width:100px; height:100px; margin-top:38px; margin-left:153px; background-image:url(', g, '); background-size:contain;"/>', '<div style="padding:6px 2px;">', '<div style="padding:5px 0; text-align:center;">', '<div style="vertical-align:middle;font-size:14px;">', j, "</div>", "</div>", '<table cellpadding="0" cellspacing="0" style="_margin:0 auto; margin-top:25px;">', '<tr><td><input id="openId" type="password" disabled style="display:none;"/></td></tr>'];
    $.each(f, function (p, t) {
        if (t.otherLoginMust) {
            var s, r = "width:200px;";
            if (t.fieldKey == "mobile") {
                r = "width:103px;";
                s = [];
                s.push("<select id='mobileCt' name='mobileCt' style='width:60px;margin-left:5px;height:28px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent: 6px;' >");
                if (c) {
                    for (var o = 0; o < c.length; o++) {
                        s.push("<option value='" + c[o]["ctName"] + "'>" + c[o]["ctShowName"] + c[o]["ctCode"] + "</option>")
                    }
                }
                s.push("</select>");
                s.join("")
            }
            var q = ['<tr class="bindAcctHidn" style="display:block; margin-top:20px; width:400px;">', '<td style="width:110px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', t.name, "：</td><td>", s, '<input id="', t.fieldKey, '" type="text" name="', t.name, '" maxlength="50" placeholder="', t.placeholder, '" class="userAddItem isCheckUAI" style="' + r + 'height:30px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0; border:1px solid #e3e2e8; text-indent:6px;"/>', '<span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>', "</tr>",];
            m.push(q.join(""))
        }
    });
    if (e) {
        m.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:400px;">');
        m.push('<td style="width:110px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.memberSignup_captcha + "</td>");
        m.push('<td><input id="memberSignupCaptcha" type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent: 6px;" maxlength="4"/><div style="width:81px;height:25px;line-height:25px;float:right;text-align:center;color:red;"><img style="width:100%;height:100%;cursor:pointer;margin-left:10px;margin-top:2px;" alt="" id="memberSignupCaptchaImg" onclick="Run.changeCaptchaImg(this)" title="' + LS.msgBoradChageValidateCode + '" src="validateCode.php?' + Math.random() * 1000 + '"/></div></td>');
        m.push("</tr>");
        m.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:400px;">');
        m.push('<td style="width:110px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.mobileMsmCode + "</td>");
        m.push('<td><input type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent:6px;" id="messageAuthCode" maxlength="6" /><div style="width:100px;height:25px;line-height:25px;float:right;text-align:center;margin-left:10px;margin-top:1px;" class="memberOtherSignup"><div title="' + LS.getMobileMsmCode + '" class="getMobileCdBtn" onclick="Run.getOtherSignMobileCode()">' + LS.getMobileMsmCode + "</div></div></td>");
        m.push("</tr>")
    }
    var h = "";
    if (d == 1) {
        h = LS.memberOtherLgnQQMsg
    } else {
        if (d == 2) {
            h = LS.memberOtherLgnSinaMsg
        } else {
            if (d == 3) {
                h = LS.memberOtherLgnWXMsg
            }
        }
    }
    m.push("</table>");
    m.push('<div id="oLoginTip" style="text-align:center;padding-top:6px;color:red;"></div>');
    m.push('<div style="text-align:center; margin-top:32px;">');
    m.push('<a hidefocus="true" class="formBtn" style="width:250px; height:40px; line-height:40px; background:#1779ff; font-size:14px; border-radius:30px;" href="javascript:;" onclick=\'Run.memberOtherLoginSubmit(' + l + ',"' + j + '",' + d + "," + $.toJSON(k) + ");return false;'>" + LS.confirm + "</a>");
    m.push("</div></div>");
    m = m.join("");
    var n = {boxId: l, boxName: "qqLogin", title: LS.memberOtherLgnAddTitle, htmlContent: m, width: 406};
    Run.popupBox(n);
    $("#openId").val(a)
};
Run.memberOtherLoginAdd = function (a, h, b, c, f, m, g, e) {
    var n = parseInt(Math.random() * 10000);
    var i = "", l = "", d = 170, k = 40;
    if (f == 1) {
        i = Run.qqListener.q_avator;
        l = Run.qqListener.q_name
    } else {
        if (f == 2) {
            i = Run.wbListener.wb_avator;
            k = 50;
            d = 165;
            l = Run.wbListener.wb_name
        } else {
            if (f == 3) {
                i = Run.wxListener.wx_avator;
                d = 158;
                k = 64;
                l = Run.wxListener.wx_name
            }
        }
    }
    var o = ['<div style="width:190px; height:1px; font-size:0; background-color:#44a5ff; margin-left:33px; float:left;"/>', '<div style="width:130px; height:1px; font-size:0; background-color:#dadada; margin-left:223px;"/>', '<div style="width:', k, "px; height:", k, "px; margin-top:10px; margin-left:", d, "px; background:url(", i, ');"/>', '<div style="padding:6px 2px;">', '<div style="padding:5px 0;">', '<div style="width:140px;float:left;">&nbsp;</div>', '<div id="bindAcct" class="checkBoxStyle_unCheck"/><div id="bindAcctLabel" style="vertical-align:middle;font-size:14px;cursor:pointer;">', LS.memberOtherLgnBindAcct, "</div>", "</div>", '<div style="width:280px; height:1px; font-size:0; background-color:#dadada; margin-left:45px; margin-top:10px; margin-bottom:10px;"/>', '<table cellpadding="0" cellspacing="0" style="_margin:0 auto">', '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnAcct, '</td><td><input id="acct" type="text" maxlength="50" value="', l, '" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e3e2e8; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span><input id="openId" type="password" disabled style="display:none;"/></td>', "</tr>", '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnPwd, '</td><td><input id="pwd" type="password" maxlength="20" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e3e2e8; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>', "</tr>", '<tr style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', LS.memberOtherLgnRePwd, '</td><td><input id="repwd" type="password" maxlength="20" style="width:168px; height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0;border:1px solid #e3e2e8; text-indent:6px;"/><span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>', "</tr>"];
    $.each(h, function (r, v) {
        var u, t = "width:168px;";
        if (v.fieldKey == "mobile") {
            t = "width:103px;";
            u = [];
            u.push("<select id='mobileCt' name='mobileCt' style='width:60px;margin-left:5px;height:28px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent: 6px;' >");
            if (e) {
                for (var q = 0; q < e.length; q++) {
                    u.push("<option value='" + e[q]["ctName"] + "'>" + e[q]["ctShowName"] + e[q]["ctCode"] + "</option>")
                }
            }
            u.push("</select>");
            u.join("")
        }
        var s = ['<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">', '<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">', v.name, "：</td><td>", u, '<input id="', v.fieldKey, '" type="text" name="', v.name, '" maxlength="50" placeholder="', v.placeholder, '" class="userAddItem', v.must ? " isCheckUAI" : "", '" style="' + t + 'height:25px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0; border:1px solid #e3e2e8; text-indent:6px;"/>', v.must ? '<span style="font-size:14px; color:rgb(255,36,46); margin-left:5px;">*</span></td>' : "</td>", "</tr>",];
        o.push(s.join(""))
    });
    if (b) {
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.memberOtherLgnRemark + "</td>");
        o.push('<td><textarea id="remark" maxlength="' + c + '" style="width:168px;height:50px; margin-left:5px;-webkit-border-radius:0;-moz-border-radius:0; border:1px solid #e3e2e8; text-indent:6px;"></textarea></td>');
        o.push("</tr>")
    }
    if (g) {
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.memberSignup_captcha + "</td>");
        o.push('<td><input id="memberSignupCaptcha" type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent: 6px;" maxlength="4"/><div style="width:81px;height:25px;line-height:25px;float:right;text-align:center;color:red;"><img style="width:100%;height:100%;cursor:pointer;margin-left:10px;margin-top:2px;" alt="" id="memberSignupCaptchaImg" onclick="Run.changeCaptchaImg(this)" title="' + LS.msgBoradChageValidateCode + '" src="validateCode.php?' + Math.random() * 1000 + '"/></div></td>');
        o.push("</tr>");
        o.push('<tr class="bindAcctHidn" style="display:block; margin-top:10px; width:320px;">');
        o.push('<td style="width:120px;_width:auto;text-align:right; color:rgb(99,99,99);font-size:12px;">' + LS.mobileMsmCode + "</td>");
        o.push('<td><input type="text" style="width:80px;margin-left:5px;height: 25px;font-size: 12px;color: rgb(99,99,99);border: 1px solid #e3e2e8;text-indent:6px;" id="messageAuthCode" maxlength="6" /><div style="width:100px;height:25px;line-height:25px;float:right;text-align:center;margin-left:10px;margin-top:1px;" class="memberOtherSignup"><div title="' + LS.getMobileMsmCode + '" class="getMobileCdBtn" onclick="Run.getOtherSignMobileCode()">' + LS.getMobileMsmCode + "</div></div></td>");
        o.push("</tr>")
    }
    var j = "";
    if (f == 1) {
        j = LS.memberOtherLgnQQMsg
    } else {
        if (f == 2) {
            j = LS.memberOtherLgnSinaMsg
        } else {
            if (f == 3) {
                j = LS.memberOtherLgnWXMsg
            }
        }
    }
    o.push("</table>");
    o.push('<div id="oLoginBindMsg" style="text-align:center;display:none;padding:10px 0;font-family:MicrosoftYaHei Regular;font-size:12px;color:rgb(157,157,157);">( ' + j + ")</div>");
    o.push('<div id="oLoginTip" style="text-align:center;padding-top:6px;color:red;"></div>');
    o.push('<div style="height:30px;line-height:30px;text-align:center;padding:5px 0;">');
    o.push('<a hidefocus="true" class="formBtn" style="width:142px; height:35px; background:#1779ff; font-size:14px; " href="javascript:;" onclick=\'Run.memberOtherLoginSubmit(' + n + "," + f + "," + $.toJSON(m) + ");return false;'>" + LS.confirm + "</a>");
    o.push("</div></div>");
    o = o.join("");
    var p = {boxId: n, boxName: "qqLogin", title: LS.memberOtherLgnAddTitle, htmlContent: o, width: 380};
    Run.popupBox(p);
    $("#openId").val(a);
    $("#bindAcct,#bindAcctLabel").click(function () {
        if ($("#bindAcct").attr("class") == "checkBoxStyle_unCheck") {
            $("#bindAcct").attr("class", "checkBoxStyle_check");
            $("#oLoginTip").text("");
            $(".bindAcctHidn").hide();
            $("#oLoginBindMsg").show()
        } else {
            $("#bindAcct").attr("class", "checkBoxStyle_unCheck");
            $("#oLoginTip").text("");
            $(".bindAcctHidn").show();
            $("#oLoginBindMsg").hide()
        }
    })
};
Run.getOtherSignMobileCode = function () {
    var a = Run.checkOtherGetMobileCodeParam();
    if (a.checkResult == true) {
        $.ajax({
            type: "post",
            url: "ajax/member_h.php?cmd=getMobileCode",
            data: "mobile=" + a.info.mobile + "&mobileCt=" + a.info.mobileCt + "&validateCode=" + a.info.captcha,
            error: function () {
                Helper.ing(LS.getMobileCodeErrAf, true)
            },
            success: function (b) {
                var c = jQuery.parseJSON(b);
                if (c.success) {
                    Helper.ing(LS.sendMobileCodeSuc, true);
                    Run.otherSignMobileCodeCountDown()
                } else {
                    Run.changeCaptchaImg($("#memberSignupCaptchaImg")[0]);
                    $("#memberSignupCaptcha").val("");
                    if (c.rt == -401) {
                        Helper.ing(LS.memberSignupRegisterCaptchaNotMatch, true)
                    } else {
                        if (c.rt == -2) {
                            Helper.ing(LS.argsError, true)
                        } else {
                            if (c.rt == 2) {
                                Helper.ing(LS.memberDialogSendMobileCodeErr, true)
                            } else {
                                if (c.rt == -4 || c.rt == 8) {
                                    Helper.ing(LS.getMobileOneMin, true)
                                } else {
                                    if (c.rt == -8) {
                                        Helper.ing(LS.getMobileHalfHour, true)
                                    } else {
                                        if (c.rt == 3) {
                                            Helper.ing(LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (c.rt == 9) {
                                                Helper.ing(LS.memberDialogSendMobileCodeLimit, true)
                                            } else {
                                                if (c.rt == 101) {
                                                    Helper.ing(LS.mobileSetErr, true)
                                                } else {
                                                    if (c.rt == -6) {
                                                        Helper.ing(LS.mobileHasSigned, true)
                                                    } else {
                                                        if (c.rt == 23) {
                                                            Helper.ing(LS.mobileNationTplErr, true)
                                                        } else {
                                                            Helper.ing(LS.getMobileRefresh, true)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        })
    }
};
Run.checkOtherGetMobileCodeParam = function () {
    var c = {checkResult: false, info: {}};
    var a = $("#mobile").val();
    var b = $("#memberSignupCaptcha").val();
    if (!Helper.isNationMobile(a)) {
        Helper.ing(LS.mobileNumRegular, true);
        return c
    }
    if (b == null || b == "") {
        Helper.ing(LS.memberSignupRegisterCaptchaEmpty, true);
        return c
    }
    c.checkResult = true;
    c.info.mobile = a;
    if (a && a != null && $.trim(a) != "") {
        c.info.mobileCt = $("#mobileCt").val()
    } else {
        c.info.mobileCt = ""
    }
    c.info.captcha = b;
    return c
};
Run.otherSignMobileCodeCountDown = function () {
    var c = $(".getMobileCdBtn");
    var b = c.attr("cTime");
    var d = 60;
    if (!b || b == null) {
        b = 0
    } else {
        b = parseInt(b);
        d = 1800
    }
    b++;
    c.attr("cTime", b);
    c.attr("s_onclick", c.attr("onclick"));
    c.removeAttr("onclick");
    var a = setInterval(function () {
        d--;
        c.html(LS.reGetMsg + "(" + d + ")");
        if (d <= 0) {
            c.html(c.attr("title"));
            c.attr("onclick", c.attr("s_onclick"));
            clearInterval(a)
        }
    }, 1000)
};
Run.memberOtherLoginSubmit = function (p, c, n, o) {
    var i = "cmd=otherAdd", e = $("#oLoginTip"), f = {};
    f.acct = c;
    if (n == 1) {
        f.qqOpenId = $("#openId").val();
        f.headImgUrl = Run.qqListener.q_avator
    } else {
        if (n == 2) {
            f.sinaOpenId = $("#openId").val();
            f.headImgUrl = Run.wbListener.wb_avator
        } else {
            if (n == 3) {
                f.wxOpenId = $("#openId").val();
                f.headImgUrl = Run.wxListener.wx_avator
            }
        }
    }
    var k = "", d = "", m = "", q = 0, h = "", l = 0;
    $(".userAddItem").each(function () {
        userAddItemID = $(this).attr("id");
        m = $(this).val();
        k = $(this).attr("name");
        h = $(this).attr("maxlength");
        f[userAddItemID] = m;
        if (m.length > h) {
            e.html(Helper.format(LS.memberSignupUserAddItemMaxLength, k, h));
            $(this).focus();
            q = 1;
            return false
        }
        if (userAddItemID == "phone" && m.length > 0) {
            if (!Helper.isPhone(m)) {
                e.html(Helper.format(LS.memberSignupUserAddItemCorrect, k));
                $(this).focus();
                l = 1;
                return false
            }
        }
        if (userAddItemID == "mobile" && m.length > 0) {
            if (!Helper.isNationMobile(m)) {
                e.html(LS.mobileNumRegular);
                l = 1;
                return false
            } else {
                f.mobileCt = $("#mobileCt").val()
            }
        }
    });
    if (l == 1) {
        return
    }
    if (q == 1) {
        return
    }
    if (typeof($("#messageAuthCode").attr("maxlength")) != "undefined" && $("#messageAuthCode").attr("maxlength") != null) {
        var j = $("#memberSignupCaptcha").val();
        if (typeof(j) == "undefined" || j == null || j == "") {
            e.html(LS.memberInputCaptcha);
            return false
        }
        var a = $("#messageAuthCode").val();
        if (typeof(a) == "undefined" || a == null || a == "") {
            e.html(LS.inputMobileCode);
            return false
        }
        f.messageAuthCode = a
    }
    var g = 0;
    $("#popupBoxContent" + p + " .isCheckUAI").each(function () {
        userAddItemID = $(this).attr("id");
        m = $(this).val();
        k = $(this).attr("name");
        if (m == null || m == "") {
            e.html(Helper.format(LS.memberSignupUserAddItemIsEmpty, k));
            $(this).focus();
            g = 1;
            return false
        }
        if (userAddItemID == "email" && m.length > 0) {
            if (!Helper.isEmail(m)) {
                e.html(Helper.format(LS.memberSignupUserAddItemCorrect, k));
                $(this).focus();
                g = 1;
                return false
            }
        }
    });
    if (g == 1) {
        return
    }
    e.html(LS.memberSignupRegisterIng);
    var b = Helper.getUrlParam(Helper.top.location.href, "url");
    if (!b) {
        b = "./index.php"
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.php?" + i,
        data: "info=" + Helper.encodeUrl($.toJSON(f)) + "&loginType=" + n,
        error: function () {
            e.html(LS.memberSignupRegisterError)
        },
        success: function (F) {
            var w = jQuery.parseJSON(F);
            if (w.success) {
                $("#_TOKEN").attr("value") || $("title").after(F._TOKEN);
                var s = $.cookie("forThirtLoginBuy");
                if (typeof s != "undefined" && s != null && s != "") {
                    var E = $.parseJSON(s);
                    if (typeof E != "undefined" && E != null) {
                        if (E.where == "addCartItem") {
                            var z = {};
                            z.pid = E.pid;
                            z.mid = E.mid;
                            z.url = E.url;
                            z.opList = E.opList;
                            z.count = E.count;
                            z.doWhat = "add";
                            $.cookie("isNeedAddCartItem", $.toJSON(z));
                            Helper.top.location.reload()
                        } else {
                            if (E.where == "immeBuy") {
                                var z = {};
                                z.pid = E.pid;
                                z.mid = E.mid;
                                z.url = E.url;
                                z.opList = E.opList;
                                z.count = E.count;
                                z.doWhat = "buy";
                                $.cookie("isNeedAddCartItem", $.toJSON(z));
                                Helper.top.location.reload()
                            }
                        }
                    }
                    $.cookie("forThirtLoginBuy", null);
                    return
                }
                if (w.fromBind) {
                    Helper.top.$("#popupBg" + p).remove();
                    Helper.top.$("#popupBox" + p).remove();
                    Run.memberInactiveDialog(w.mail, w.memName)
                } else {
                    if (w.active) {
                        Helper.top.$("#popupBg" + p).remove();
                        Helper.top.$("#popupBox" + p).remove();
                        Run.memberActiveDialog(f.email, Helper.encodeUrl(f.acct), function () {
                            Helper.top.location.href = b;
                            Helper.top.event.returnValue = false
                        })
                    } else {
                        if (!!o.skipUrl) {
                            b = o.skipUrl
                        }
                        if (o.isPhotoSlide) {
                            var t = b.split(";");
                            for (var x = 0; x < t.length - 1; x++) {
                                var A = new RegExp("[^script:]");
                                if (A.test(b)) {
                                    var D = t[x].split(":"), r = D[1].indexOf("(") + 1, v = D[1].lastIndexOf(")"),
                                        B = Array.prototype.slice.call(D[1].substring(r, v).split(",")),
                                        u = D[1].substring(0, r - 1), C = [];
                                    Run.photoSlide.returnIndex = function () {
                                        delete Run.photoSlide.returnIndex;
                                        Helper.top.location.href = "/index.php"
                                    };
                                    var y = [{name: u, base: window}];
                                    C = y.concat(B);
                                    jzUtils.run.apply(window, C)
                                }
                            }
                        } else {
                            Helper.top.location.href = b
                        }
                    }
                }
            } else {
                if (w.rt == -601) {
                    e.html(LS.reGetMobileCode)
                } else {
                    if (w.rt == -8) {
                        e.html(LS.mobileHasSigned)
                    } else {
                        if (w.rt == -6) {
                            e.html(LS.memberSignupRegisterExisted)
                        } else {
                            if (w.rt == -4) {
                                e.html(LS.memberSignupRegisterLimit)
                            } else {
                                if (w.rt == -3) {
                                    e.html(LS.memberDialogNotFound)
                                } else {
                                    if (w.rt == Run.otherLoginErrno.acctAlreadyBind) {
                                        e.html(LS.memberOtherLgnAcctAlreadyBind)
                                    } else {
                                        e.html(LS.memberSignupRegisterError)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    })
};
Run.otherLoginErrno = {acctAlreadyBind: 1};
Run.memberFdPwdStepOne = function (c) {
    var d = parseInt(Math.random() * 10000);
    var a = $.trim($("#module" + c + " .memberAcct").val());
    var e = ["<div class='memberFdPwdStepOne' style='height:100%;'>", "<div style='width:80px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; float:left;' class='J_titleBlueLine'></div>", "<div style='width:250px; height:1px; font-size:0; background-color:#dadada; margin-left:96px;'></div>", "<div class='itemLine' style='margin-top:8px;'>", "<div class='itemTitle' style='font-family:微软雅黑; font-size:14px; color:rgb(99,99,99); width:110px;'>", LS.memberDialogFwdAcct, "</div>", "<div class='itemCtrl'><input type='text' id='macct' name='macct' style='-webkit-border-radius: 0; -moz-border-radius: 0; border:1px solid #e7e7e7; width:168px;height:30px;' class='acctInput' value='", Helper.encodeHtml(a), "'/></div>", "</div>", "<div class='itemLine'>", "<div class='itemTitle'></div>", "<div class='itemCtrl'><a hidefocus='true' class='formBtn' style='background:#1779ff; margin-left:50px;' href='javascript:;' onclick='Run.memberFdPwdStepTwo(", d, ");return false;'>", LS.memberDialogNextStep, "</a></div>", "</div>", "</div>"];
    e = e.join("");
    var b = {
        boxId: d,
        title: "<span class='J_fidnPwFirstTitle'>" + LS.memberDialogFwdStepOneTitle + "</span>",
        htmlContent: e,
        width: 372,
        height: 176,
        boxName: "memberFdPwd"
    };
    Run.popupBox(b);
    setTimeout(function () {
        var g = Helper.top.$("#popupBox" + d);
        var f = g.find(".J_fidnPwFirstTitle").width();
        g.find(".J_titleBlueLine").css("width", (f + 10) + "px")
    }, 200)
};
Run.memberFdPwdStepTwo = function (b) {
    var a = $.trim($("#macct").val());
    if (a == "") {
        Helper.ing(LS.memberDialogPleaseEnterAcct, true);
        $("#macct").focus();
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.php?cmd=getMAcctMail",
        data: "mAcct=" + Helper.encodeUrl(a),
        error: function () {
            Helper.ing(LS.systemError, false)
        },
        success: function (q) {
            var q = jQuery.parseJSON(q);
            if (q.success) {
                if (!q.findPwByMobileOpen) {
                    if (q.noMail) {
                        var e = LS.memberDialogNoEmailMsg;
                        Run.showModifyPwContMsg(e, b);
                        return
                    }
                }
                if (!q.findPwByMailOpen) {
                    if (q.mobile == null || q.mobile == "null" || "" == q.mobile) {
                        var e = LS.memberDialogNoMobile;
                        Run.showModifyPwContMsg(e, b);
                        return
                    }
                }
                if (q.noMail && (q.mobile == "null" || "" == q.mobile)) {
                    var e = LS.memberDialogNoMailMobile;
                    Run.showModifyPwContMsg(e, b);
                    return
                }
                if (q.noMail) {
                    q.findPwByMailOpen = false
                }
                if (q.mobile == "null" || "" == q.mobile) {
                    q.findPwByMobileOpen = false
                }
                Helper.top.$("#popupBg" + b).remove();
                Helper.top.$("#popupBox" + b).remove();
                var k = parseInt(Math.random() * 10000);
                var p = "", g = "", f = "";
                var c = "";
                if (Helper.isIE6()) {
                    g = "position:relative;";
                    f = "top:5px;";
                    c = "height:355px"
                } else {
                    g = "position:absolute; top:30px;";
                    f = "top:-20px;";
                    p = "position:relative;margin-top:-20px;"
                }
                var m = ["<div class='memberFdPwdStepTwo' style='height:90%;", g, "'>", "<div class='J_btBlueLine' style='width:110px; height:1px; font-size:0; background-color:#44a5ff; margin-left:26px; position:absolute; z-index:1;", f, "'></div>", "<div style='width:460px; height:1px; font-size:0; background-color:#dadada; margin-left:26px; position:absolute; ", f, "'></div>"];
                var h = [];
                if (q.findPwByMailOpen) {
                    if (q.noMail) {
                        h = ["<div class='J_fdFwdByMailContent' style='" + c + "'>", "<div class='memberFdPwdTwoMsg' style='color:#636363;font-family:微软雅黑;font-size:14px;font-weight:bold;position:relative;top:90px;left:70px;width:360px;'>", LS.memberShowNoMail + "<br>" + LS.memberDialogConMg, "</div>", "<div class='memberDialogNoNumberTip'></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;position:relative;top:170px;' class='formBtn' href='javascript:;' onclick='Run.closeFdPwdBoxById(", k, ");return false;'>", LS.confirm, " </a></div>", "</div>"]
                    } else {
                        h = ["<div class='J_fdFwdByMailContent' style='", p, "'>", "<div class='memberFdPwdTwoMsg'>", "<div class='itemStepLine'>", LS.memberDialogFwdOneStep, "<a href='javascript:;' hidefocus='true' style='color:#ff6d00' id='memSendPwdCode' onclick='Run.sendMemberEmailPwdCode();return false;'>", LS.memberDialogClickHere, "</a><span id='menWaitMsg'></span>", Helper.format(LS.memberDialogFwdOneStepThirdMsg, q.mail), "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdTwoStep, "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdThreeStep, "</div>", "</div>", "<div style='height:26px; margin-top:30px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdMailCode, "</div><input type='text' id='memEmailCode' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='memMailCodeSign' disabled/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='macct2' value='", Helper.encodeHtml(a), "' disabled/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd, "</div><input type='password' id='memPwd' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd2, "</div><input type='password' id='memPwd2' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div id='memPwdItemErrorWrap' style='display:none;padding:0 10px; margin-top:10px;text-align:center;'><span style='color:red;height:24px;line-height:24px;font-family:微软雅黑;font-size:14px;' id='memPwdItemError'></span></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;' class='formBtn' href='javascript:;' onclick='Run.memberFdPwdStepLast(", k, ",", 1, ");return false;'>", LS.memberDialogNextStep, " </a></div>", "</div>"]
                    }
                }
                var j = [];
                if (q.findPwByMobileOpen) {
                    var o = "display:block;" + c;
                    if (q.findPwByMailOpen) {
                        o = "display:none;" + c
                    }
                    if (q.mobile == "null" || "" == q.mobile) {
                        j = ["<div class='J_fdFwdByMobileContent' style='" + o + "'>", "<div class='memberFdPwdTwoMsg' style ='color:#636363;font-family:微软雅黑;font-size:14px;font-weight:bold;position:relative;top:90px;left:70px;width:360px;'>", LS.memberShowNoMobile + "<br>" + LS.memberDialogConMg, "</div>", "<div class='memberDialogNoNumberTip'></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;position:relative;top:170px;' class='formBtn' href='javascript:;' onclick='Run.closeFdPwdBoxById(", k, ");return false;'>", LS.confirm, " </a></div>", "</div>"]
                    } else {
                        var d = "";
                        if (!q.findPwByMailOpen || q.noMail) {
                            d = "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='macct2' value='" + Helper.encodeHtml(a) + "' disabled/></div>"
                        }
                        j = ["<div class='J_fdFwdByMobileContent' style='", o, p, "'>", "<div class='memberFdPwdTwoMsg'>", "<div class='itemStepLine'>", LS.memberDialogFwdOneStep, "<a href='javascript:;' hidefocus='true' style='color:#ff6d00' id='memSendMobilePwdCode' onclick='Run.sendMemberMobileCode();return false;'>", LS.memberDialogClickHere, "</a><span id='menMbWaitMsg'></span>", Helper.format(LS.memberDialogFwdByMobileOneStep, q.mobile), "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdByMobileSendStep, "</div>", "<div class='itemStepLine'>", LS.memberDialogFwdThreeStep, "</div>", "</div>", "<div style='height:26px; margin-top:30px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.mobileCodeTip + " : &nbsp;", "</div><input type='text' id='memMobileCode' maxlength='6' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='display:none;'><div class='itemTitle2'></div><input type='text' id='memMobileCodeSign' disabled/></div>", d, "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd, "</div><input type='password' id='memPwdMb' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div style='height:26px; margin-top:20px;'><div class='itemTitle2' style='padding-top:3px; width:124px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwd2, "</div><input type='password' id='memPwdMb2' style='width:284px; height:26px; border: 1px solid #e7e7e7;-webkit-border-radius: 0; -moz-border-radius: 0px;'/></div>", "<div id='memPwdMbItemErrorWrap' style='display:none;padding:0 10px; margin-top:10px;text-align:center;'><span style='color:red;height:24px;line-height:24px;font-family:微软雅黑;font-size:14px;' id='memPwdMbItemError'></span></div>", "<div style='margin-top:35px;'><div class='itemTitle2' style='height:34px; width:173px;'></div><a hidefocus='true' style='background: #1779ff; width:166px; height:35px;' class='formBtn' href='javascript:;' onclick='Run.memberFdPwdStepLast(", k, ",", 2, ");return false;'>", LS.memberDialogNextStep, " </a></div>", "</div>"]
                    }
                }
                Array.prototype.push.apply(m, h);
                Array.prototype.push.apply(m, j);
                m.push("</div>");
                m = m.join("");
                var i = "";
                if (q.findPwByMailOpen) {
                    i = "<span  class='f-findPwSetHoverBox J_findPwByMailBox' onclick='Run.changeFdPwdShowTab(1, " + k + "," + q.findPwByMailOpen + ")'>" + LS.memberDialogMailTitle + "</span>"
                }
                if (q.findPwByMobileOpen) {
                    var l = "";
                    if (q.findPwByMailOpen) {
                        l = "style='margin-left:30px;'"
                    }
                    i = i + "<span " + l + "  class='f-findPwSetHoverBox J_findPwByMobileBox' onclick='Run.changeFdPwdShowTab(2, " + k + "," + q.findPwByMailOpen + ")'>" + LS.memberDialogMobileTitle + "</span>"
                }
                var n = {boxId: k, title: i, htmlContent: m, width: 510, height: 437, boxName: "memberFdPwd"};
                Run.popupBox(n);
                setTimeout(function () {
                    Run.changeFdPwdShowTab(1, k, q.findPwByMailOpen)
                }, 200)
            } else {
                if (q.notFound) {
                    Helper.ing(LS.memberDialogNotFound, true)
                } else {
                    Helper.ing(LS.argsError, true)
                }
            }
        }
    })
};
Run.memberFdPwdStepLast = function (b, a) {
    if (typeof(a) != "undefined" && a == 2) {
        Run.memberFdPwdByMobileStepLast(b)
    } else {
        Run.memberFdPwdByMailStepLast(b)
    }
};
Run.sendMemberMobileCode = function () {
    if ($("#memSendMobilePwdCode").data("_disable")) {
        return
    }
    var a = $("#macct2").val();
    if (a == "") {
        Helper.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/member_h.php?cmd=sendMemberPwdMobileCode",
        data: "memName=" + Helper.encodeUrl(a),
        error: function () {
            $("#memSendMobilePwdCode").data("_disable", false);
            Helper.ing(LS.systemError, false)
        },
        success: function (b) {
            $("#memSendMobilePwdCode").data("_disable", false);
            var b = jQuery.parseJSON(b);
            if (b.success) {
                $("#memMobileCodeSign").val(b.mobileCodeSign);
                $("#memPwdMbItemErrorWrap").show();
                $("#memPwdMbItemError").html(LS.memberDialogSendMobileCode);
                $("#memSendMobilePwdCode").hide();
                $("#menMbWaitMsg").show();
                $("#menMbWaitMsg").text(Helper.format(LS.memberDialogCountDown, 60));
                $("#menMbWaitMsg").data("_time", 60);
                Run.memberMbDisableTimeout("memSendMobilePwdCode")
            } else {
                if (b.argErr) {
                    $("#memPwdMbItemErrorWrap").show();
                    $("#memPwdMbItemError").html(LS.memberDialogSendMobileClose)
                } else {
                    if (b.apiKeyNotFound) {
                        $("#memPwdMbItemErrorWrap").show();
                        $("#memPwdMbItemError").html(LS.memberDialogYunPianErr)
                    } else {
                        if (b.tplNotFound) {
                            $("#memPwdMbItemErrorWrap").show();
                            $("#memPwdMbItemError").html(LS.memberDialogMobileTplErr)
                        } else {
                            if (b.notFound) {
                                Helper.ing(LS.memberDialogNotFound, true)
                            } else {
                                if (b.limitOne) {
                                    Helper.ing(LS.getMobileOneMin, true)
                                } else {
                                    if (b.limitTwo) {
                                        Helper.ing(LS.getMobileHalfHour, true)
                                    } else {
                                        if (b.noMoney) {
                                            Helper.ing(LS.memberDialogMobileMoneyErr, true)
                                        } else {
                                            if (b.mobileErr) {
                                                Helper.ing(LS.memberDialogSendMobileCodeErr, true)
                                            } else {
                                                if (b.sendLimit) {
                                                    Helper.ing(LS.memberDialogSendMobileCodeLimit, true)
                                                } else {
                                                    if (b.mobileSysErr) {
                                                        Helper.ing(LS.memberDialogSendMobileSysErr, true)
                                                    } else {
                                                        if (b.tplNationErr) {
                                                            Helper.ing(LS.mobileNationTplErr, true)
                                                        } else {
                                                            if (b.systemErr) {
                                                                Helper.ing(LS.systemError, true)
                                                            } else {
                                                                Helper.ing(LS.argsError, true)
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    });
    $("#memSendMobilePwdCode").data("_disable", true)
};
Run.memberFdPwdByMobileStepLast = function (f) {
    var b = $("#macct2").val();
    if (b == "") {
        Helper.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    var g;
    var d = $("#memMobileCode").val();
    var c = $("#memMobileCodeSign").val();
    var a = $("#memPwdMb").val();
    var h = $("#memPwdMb2").val();
    if (!c) {
        g = LS.memberDialogSendMobileFirst
    } else {
        if (!d) {
            g = LS.inputMobileCode
        } else {
            if (d.length != 6) {
                g = LS.mobileNumRegular
            } else {
                if (!a) {
                    g = LS.memberDialogPleaseEnterPwd
                } else {
                    if (!h) {
                        g = LS.memberDialogPleaseEnterPwd2
                    } else {
                        if (a != h) {
                            g = LS.memberDialogPwdDifToPwd2
                        } else {
                            if (a.length < 4 || a.length > 20) {
                                g = Helper.format(LS.memberDialogPwdLimit, 4, 20)
                            }
                        }
                    }
                }
            }
        }
    }
    if (g) {
        $("#memPwdMbItemErrorWrap").show();
        $("#memPwdMbItemError").html(g);
        return
    }
    $("#memPwdMbItemErrorWrap").show();
    $("#memPwdMbItemError").html(LS.memberDialogResetting);
    var e = "memMobileCode=" + Helper.encodeUrl(d) + "&memMobileCodeSign=" + Helper.encodeUrl(c) + "&memPwd=" + $.md5(a) + "&memName=" + Helper.encodeUrl(b);
    $.ajax({
        type: "post", url: "ajax/member_h.php?cmd=setMemberPwdByMobileCode", data: e, error: function () {
            Helper.ing(LS.systemError, false)
        }, success: function (i) {
            var i = jQuery.parseJSON(i);
            if (i.success) {
                Helper.top.$("#popupBg" + f).remove();
                Helper.top.$("#popupBox" + f).remove();
                var k = ["<div style='padding-left:60px;'>", "<div class='alertWarn memberFdPwdLastMsg' style='margin-top:17px;'>", LS.memberDialogReSetPwdSucess, "</div>", "<div style='padding:10px 0 10px 30px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdAcct, i.macct, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:45px; margin-top:16px; background:#1779ff; width:166px; height:35px;'>", LS.login, "</a>", "</div>"];
                k = k.join("");
                var j = {htmlContent: k, width: 372, height: 176};
                Run.popupBox(j)
            } else {
                if (i.rt == 1) {
                    $("#memMobileCodeSign").val("");
                    $("#memPwdMbItemErrorWrap").show();
                    $("#memPwdMbItemError").html(LS.reGetMobileCode)
                } else {
                    if (i.notFound) {
                        Helper.ing(LS.memberDialogNotFound, true)
                    } else {
                        Helper.ing(LS.argsError, true)
                    }
                }
            }
        }
    })
};
Run.sendMemberEmailPwdCode = function () {
    if ($("#memSendMobilePwdCode").data("_disable")) {
        return
    }
    var a = $("#macct2").val();
    if (a == "") {
        Helper.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/mail_h.php?cmd=sendMemberPwdEmail",
        data: "memName=" + Helper.encodeUrl(a),
        error: function () {
            $("#memSendPwdCode").data("_disable", false);
            Helper.ing(LS.systemError, false)
        },
        success: function (b) {
            $("#memSendPwdCode").data("_disable", false);
            var b = jQuery.parseJSON(b);
            if (b.success) {
                $("#memMailCodeSign").val(b.emailCodeSign);
                $("#memPwdItemErrorWrap").show();
                $("#memPwdItemError").html(LS.memberDialogSendMailSucess);
                $("#memSendPwdCode").hide();
                $("#menWaitMsg").show();
                $("#menWaitMsg").text(Helper.format(LS.memberDialogCountDown, 60));
                $("#menWaitMsg").data("_time", 60);
                Run.memberDisableTimeout("memSendPwdCode", 1)
            } else {
                if (b.aliasNotF) {
                    $("#memPwdItemErrorWrap").show();
                    $("#memPwdItemError").html(LS.memberDialogAliasNotFound)
                } else {
                    if (b.notFound) {
                        Helper.ing(LS.memberDialogNotFound, true)
                    } else {
                        Helper.ing(LS.argsError, true)
                    }
                }
            }
        }
    });
    $("#memSendPwdCode").data("_disable", true)
};
Run.memberFdPwdByMailStepLast = function (f) {
    var d = $("#macct2").val();
    if (d == "") {
        Helper.ing(LS.memberDialogPleaseEnterAcct, true);
        return
    }
    var g;
    var b = $("#memEmailCode").val();
    var c = $("#memMailCodeSign").val();
    var a = $("#memPwd").val();
    var h = $("#memPwd2").val();
    if (!c) {
        g = LS.memberDialogPleaseSendCode
    } else {
        if (!b) {
            g = LS.memberDialogPleaseEnterCode
        } else {
            if (!a) {
                g = LS.memberDialogPleaseEnterPwd
            } else {
                if (!h) {
                    g = LS.memberDialogPleaseEnterPwd2
                } else {
                    if (a != h) {
                        g = LS.memberDialogPwdDifToPwd2
                    } else {
                        if (a.length < 4 || a.length > 20) {
                            g = Helper.format(LS.memberDialogPwdLimit, 4, 20)
                        }
                    }
                }
            }
        }
    }
    if (g) {
        $("#memPwdItemErrorWrap").show();
        $("#memPwdItemError").html(g);
        return
    }
    $("#memPwdItemErrorWrap").show();
    $("#memPwdItemError").html(LS.memberDialogResetting);
    var e = "memEmailCode=" + Helper.encodeUrl(b) + "&memMailCodeSign=" + Helper.encodeUrl(c) + "&memPwd=" + $.md5(a) + "&memName=" + Helper.encodeUrl(d);
    $.ajax({
        type: "post", url: "ajax/member_h.php?cmd=setMemberPwdByCode", data: e, error: function () {
            Helper.ing(LS.systemError, false)
        }, success: function (i) {
            var i = jQuery.parseJSON(i);
            if (i.success) {
                Helper.top.$("#popupBg" + f).remove();
                Helper.top.$("#popupBox" + f).remove();
                var k = ["<div style='padding-left:60px;'>", "<div class='alertWarn memberFdPwdLastMsg' style='margin-top:17px;'>", LS.memberDialogReSetPwdSucess, "</div>", "<div style='padding:10px 0 10px 30px; font-family:微软雅黑; font-size:14px; color:rgb(99,99,99);'>", LS.memberDialogFwdAcct, i.macct, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:45px; margin-top:16px; background:#1779ff; width:166px; height:35px;'>", LS.login, "</a>", "</div>"];
                k = k.join("");
                var j = {htmlContent: k, width: 372, height: 176};
                Run.popupBox(j)
            } else {
                if (i.rt == 1) {
                    $("#memMailCodeSign").val("");
                    $("#memPwdItemErrorWrap").show();
                    $("#memPwdItemError").html(LS.memberDialogCodeMailHelperlure)
                } else {
                    if (i.notFound) {
                        Helper.ing(LS.memberDialogNotFound, true)
                    } else {
                        Helper.ing(LS.argsError, true)
                    }
                }
            }
        }
    })
};
Run.memberInactiveDialog = function (a, c) {
    var d = ["<div class='formPanel'>", "<div class='itemLine2 reActWarn'>", LS.memberDialogAcctInactive, "</div>", "<div class='itemLine2'>", Helper.format(LS.memberDialogShowLoginMail, a), "</div>", "<div class='itemLine2 reActWarn'>", LS.memberDialogNoRevSureEmail, "</div>", "<div class='itemLine2' style='padding-top:0;padding-bottom:0;'>", LS.memberDialogPleaseConfirmYourMail, "<input type='text' id='memEmail' class='memEmailAlterInput' value='", a, "'/><a id='memSendMail' hidefocus='true' onclick='Run.memberSendActiveMail(\"", Helper.encodeHtml(c), "\");' href='javascript:void(0);'>", LS.memberDialogClickReSendMsg, "</a><span id='menWaitMsg'></span></div>", "<div class='itemLine2' id='showOKorErrorMsg' style='color:red;'></div>", "</div>"];
    d = d.join("");
    var b = {title: LS.memberDialogTips, htmlContent: d, width: 465, height: 226};
    Run.popupBox(b)
};
Run.memberActiveDialog = function (a, c, e) {
    var d = ["<div class='formPanel'>", "<div class='itemLine2 reActWarn'>", LS.memberDialogRegSuccess, "</div>", "<div class='itemLine2'>", Helper.format(LS.memberDialogShowLoginMail, a), "</div>", "<div class='itemLine2 reActWarn'>", LS.memberDialogNoRevSureEmail, "</div>", "<div class='itemLine2' style='padding-top:0;padding-bottom:0;'>", LS.memberDialogPleaseConfirmYourMail, "<input type='text' id='memEmail' class='memEmailAlterInput' value='", a, "'/><a id='memSendMail' hidefocus='true' onclick='Run.memberSendActiveMail(\"", Helper.encodeHtml(c), "\");' href='javascript:void(0);'>", LS.memberDialogClickReSendMsg, "</a><span id='menWaitMsg'></span></div>", "<div class='itemLine2' id='showOKorErrorMsg' style='color:red;'></div>", "</div>"];
    d = d.join("");
    var b = {title: LS.memberDialogActiveAcctTitle, htmlContent: d, width: 465, height: 226, closeFunc: e};
    Run.popupBox(b);
    $.ajax({
        type: "post",
        url: "ajax/mail_h.php?cmd=sendMemberActiveMail",
        data: "memName=" + Helper.encodeUrl(c) + "&memEmail=" + a,
        error: function () {
            Helper.ing(LS.systemError, false)
        },
        success: function (f) {
        }
    })
};
Run.memberSendActiveMail = function (b) {
    if ($("#memSendMail").data("_disable")) {
        return
    }
    var a = $.trim($("#memEmail").val());
    if (!Helper.isEmail(a)) {
        Helper.ing(LS.memberDialogPleaseSureMail, true);
        return
    }
    $.ajax({
        type: "post",
        url: "ajax/mail_h.php?cmd=sendMemberActiveMail",
        data: "memName=" + Helper.encodeUrl(b) + "&memEmail=" + a,
        error: function () {
            $("#memSendMail").data("_disable", false);
            Helper.ing(LS.systemError, false)
        },
        success: function (c) {
            $("#memSendMail").data("_disable", false);
            var c = jQuery.parseJSON(c);
            if (c.success) {
                Helper.top.$("#showOKorErrorMsg").html(LS.memberDialogOKorErrorMsg);
                Helper.top.$("#memSendMail").hide();
                Helper.top.$("#menWaitMsg").show();
                Helper.top.$("#menWaitMsg").text(Helper.format(LS.memberDialogAfterTimeToResend, 60));
                Helper.top.$("#menWaitMsg").data("_time", 60);
                Run.memberDisableTimeout("memSendMail", 0)
            } else {
                if (c.AliaNotF) {
                    $("#showOKorErrorMsg").html(LS.memberDialogAliasNotFound);
                    $("#showOKorErrorMsg").show()
                }
            }
        }
    });
    $("#memSendMail").data("_disable", true)
};
Run.memberDisableTimeout = function (d, b) {
    var c = Helper.top.$("#menWaitMsg");
    var a = parseInt(c.data("_time"));
    if (a > 0) {
        a--;
        setTimeout(function () {
            var e = LS.memberDialogAfterTimeToResend;
            if (b == 1) {
                e = LS.memberDialogCountDown
            }
            c.text(Helper.format(e, a));
            Run.memberDisableTimeout(d, b)
        }, 1000);
        $("#menWaitMsg").data("_time", a)
    } else {
        Helper.top.$("#" + d).show();
        c.text("").hide()
    }
};
Run.memberMbDisableTimeout = function (c) {
    var b = Helper.top.$("#menMbWaitMsg");
    var a = parseInt(b.data("_time"));
    if (a > 0) {
        a--;
        setTimeout(function () {
            var d = LS.memberDialogCountDown;
            b.text(Helper.format(d, a));
            Run.memberMbDisableTimeout(c)
        }, 1000);
        $("#menMbWaitMsg").data("_time", a)
    } else {
        Helper.top.$("#" + c).show();
        b.text("").hide()
    }
};
Run.closeFdPwdBoxById = function (a) {
    Helper.top.$("#popupBg" + a).remove();
    Helper.top.$("#popupBox" + a).remove()
};
Run.showModifyPwContMsg = function (d, b) {
    var c = ["<div>", "<div style='padding:8px 26px;text-align:center;height:60px;'>", d, "</div>", "<a href='javascript:void(0);' class='formBtn popupBClose' style='margin-left:128px;'>", LS.confirm, "</a>", "</div>"];
    c = c.join("");
    var a = {htmlContent: c, width: 378, height: 120};
    Run.popupBox(a);
    Helper.top.$("#popupBg" + b).remove();
    Helper.top.$("#popupBox" + b).remove()
};
Run.changeFdPwdShowTab = function (b, c, e) {
    if (!e) {
        b = 2
    }
    if (b == 1) {
        var d = Helper.top.$("#popupBox" + c);
        var a = d.find(".J_findPwByMailBox").width();
        d.find(".J_findPwByMailBox").css("color", "#44A5FF");
        d.find(".J_findPwByMobileBox").css("color", "");
        if (typeof(a) != "undefined" && a > 0) {
            d.find(".J_btBlueLine").css({width: ((a + 10) + "px"), "margin-left": "26px"})
        }
        d.find(".J_fdFwdByMobileContent").css("display", "none");
        d.find(".J_fdFwdByMailContent").css({display: "block"})
    } else {
        if (b == 2) {
            var d = Helper.top.$("#popupBox" + c);
            d.find(".J_findPwByMobileBox").css("color", "#44A5FF");
            d.find(".J_findPwByMailBox").css("color", "");
            var a = d.find(".J_findPwByMobileBox").width();
            var f = d.find(".J_findPwByMailBox").width();
            if (typeof(a) != "undefined" && a > 0) {
                if (f <= 0) {
                    f = f + 26
                } else {
                    f = f + 56
                }
                d.find(".J_btBlueLine").css({width: ((a + 15) + "px"), "margin-left": (f + "px")})
            }
            d.find(".J_fdFwdByMailContent").css("display", "none");
            d.find(".J_fdFwdByMobileContent").css({display: "block"})
        }
    }
};
Run.initModuleBdMap = function (b, e, a, d) {
    var k = Helper.top.$("#mapframe" + e);
    var j = k.attr("width");
    var i = k.attr("height");
    var l = "<iframe id='mapframe" + e + "' class='J_mapframe' name='mapframe' frameborder='0' scrolling='no' height='" + i + "' width='" + j + "' src='about:blank'></iframe>";
    k.replaceWith(l);
    var c = Helper.top.$("#mapframe" + e).parent().width();
    var m = a + c + "&ran=" + Math.random();
    Run.initIframeLoading(b, e, m, d);
    $("#refreshChlid" + e).css("padding-top", "40%");
    var g = Helper.top.$("#module" + e);
    var h = g.width() / 2 - 30;
    var f = '<div class="coverDiv" style="position:absolute;width:66px;height:38px;left:' + h + 'px;top:0;z-index:9028;"></div>';
    g.append(f)
};
Run.initModuleRunSearch = function (f) {
    var g = $("#module" + f), c = $(g.find("input.g_itext")[0]), e = $(g.find(".g_btn")[0]);
    c.keypress(function (h) {
        if (h.keyCode == 13 && e.length > 0) {
            e[0].click()
        }
    });
    var d = $("#module" + f);
    var b = d.find(".searchBox").attr("class");
    var a = d.find(".recommandKeyBox");
    if (b == "searchBox") {
        a.css("vertical-align", "7px")
    } else {
        a.css("vertical-align", "11px")
    }
};
Run.searchInRun = function (d) {
    var e = $("#module" + d), c, b, a;
    if (e.find(".fk-newSearchBox").length) {
        c = e.find(".fk-newSearchInput")
    } else {
        c = e.find("input.g_itext")
    }
    b = c.val();
    a = c.attr("_nSL");
    if (c.attr("_searching")) {
        return
    }
    if (b.trim() == "") {
        Helper.ing("请输入搜索内容", true);
        return
    }
    c.attr("_searching", true);
    Helper.top.location.href = "sr.php?skeyword=" + Helper.encodeUrl($.trim(b)) + "&nSL=" + a
};
Run.searchInRunByKey = function (e, g, d) {
    var f = $("#module" + e), c, b, a;
    if (f.find(".fk-newSearchBox").length) {
        c = f.find(".fk-newSearchInput")
    } else {
        c = f.find("input.g_itext")
    }
    a = c.attr("_nSL");
    href = "sr.php?skeyword=" + Helper.encodeUrl($.trim(g)) + "&nSL=" + a;
    if (c.attr("_searching")) {
        return
    }
    c.attr("_searching", true);
    if (Helper.top._manageMode) {
        Run.redirectUrl(href, "_self", d, 1, 0)
    } else {
        Helper.top.location.href = href
    }
};
Run.searchMenu = {};
Run.initSearchDropMenu = function (h, g) {
    g = $.parseJSON(g);
    if (g.length >= 9) {
        return
    }
    var c = $("#module" + h), b = c.find(".fk-openSearchMenu"), a = [0, 1, 2, 3, 4, 5, 6, 7, 8], f = a,
        e = [{id: 4, name: "site", value: LS.searchMenuRun, enable: true, nSL: []}, {
            id: 1,
            name: "product",
            value: LS.searchMenuProduct,
            enable: false,
            nSL: [3, 4, 5, 6, 7, 8]
        }, {id: 2, name: "article", value: LS.searchMenuArticle, enable: false, nSL: [0, 1, 2, 5, 6, 7, 8]}, {
            id: 3,
            name: "gallery",
            value: LS.searchMenuPhoto,
            enable: false,
            nSL: [0, 1, 2, 3, 4, 8]
        }], d;
    if (g.length > 0) {
        $.each(g, function (j, k) {
            var l = $.inArray(k, f);
            if (l > -1) {
                f.splice(l, 1)
            }
        })
    }
    $.each(f, function (i, j) {
        if (j >= 0 && j <= 2) {
            e[1].enable = true
        } else {
            if (j >= 3 && j <= 4) {
                e[2].enable = true
            } else {
                if (j >= 5 && j <= 7) {
                    e[3].enable = true
                }
            }
        }
    });
    $.each(e, function (i, j) {
        if (j.enable) {
            d = uniqueNslArray(j.nSL.concat(g));
            b.find(".fk-newSearchInput").attr("_nsl", $.toJSON(d));
            b.find(".fk-searchMenuWord").text(j.value);
            b.find(".fk-newSearchSelectMenu").attr("_selectItem", j.id);
            return false
        }
    });
    Run.searchMenu["module" + h] = new NewSearchMenu(h, e, g);
    Run.searchMenu["module" + h].bindMenuDropEvent()
};
function uniqueNslArray(b) {
    var d = [], c = 0, a = b.length;
    for (c = 0; c < a; c++) {
        if (b.indexOf(b[c]) != -1) {
            d.push(b[c])
        }
    }
    return d
}
function NewSearchMenu(c, a, b) {
    this.id = c;
    this.openMenuList = a;
    this.noSearchList = b
}
NewSearchMenu.prototype.initSearchMenuDom = function (b) {
    var a = [];
    a.push("<div id='J_newSearchSelectMenu" + this.id + "' class='J_newSearchSelectMenu fk-newSearchSelectMenu" + this.id + "' style='display:none;'>");
    a.push("<div class='fk-newSearchSelectMenuShow fk-newSearchPanel" + b + "'>");
    $.each(this.openMenuList, function (c, d) {
        if (d.enable) {
            a.push("<span class='fk-searchMenuKeyWord J_searchMenuItem" + d.id + " fk-" + d.name + "SearchMenu' _nsl='[" + d.nSL + "]' _val='" + d.id + "'>" + d.value + "</span>\n")
        }
    });
    a.push("</div>\n");
    a.push("</div>\n");
    return a.join("")
};
NewSearchMenu.prototype.getMenuPanelPosition = function () {
    var g = $("#module" + this.id), h = g.find(".fk-openSearchMenu"), a = h.attr("_borderwidth"),
        b = h.attr("_bordertype"), e, i, d, f, c, j;
    if (b == 0) {
        c = 1
    } else {
        if (b == 1) {
            c = 0
        } else {
            c = a
        }
    }
    if (h.length > 0) {
        j = h.attr("_type")
    }
    if (j == 10) {
        h = h.find(".fk-newSearchSelectMenu")
    }
    e = h.offset().left;
    i = h.offset().top;
    d = h.outerHeight();
    if (j == 10) {
        f = h.width() - c
    } else {
        f = h.find(".fk-newSearchSelectMenu").width()
    }
    if (!Helper.top._manageMode) {
        i -= $(window).scrollTop();
        e -= $(window).scrollLeft()
    }
    return {left: e, top: i + d, width: (j == 1 || j == 8 || j == 3 || j == 5 || j == 2 || j == 9 || j == 7) ? ++f : f}
};
NewSearchMenu.prototype.setMenuPanelPosition = function (h) {
    var g = this.getMenuPanelPosition(), e = g.left, i = g.top, b = g.width, a = this.id, j = $("#module" + a),
        l = j.find(".fk-openSearchMenu"), k = j.find(".fk-newSearchSelectWrap"), m = j.find(".fk-newSearchSelectMenu"),
        d = h.find(".fk-newSearchSelectMenuShow"), c = k.css("border-bottom-width").replace("px", ""),
        f = m.css("border-bottom-width").replace("px", "");
    if (h.length) {
        if (j.find(".fk-dynamicSearch").length) {
            if (j.find(".fk-newSearchBox7").length) {
                i = i - 4;
                h.find(".fk-searchMenuKeyWord").css("padding-left", "18px")
            } else {
                b = b - 2;
                d.css({marginTop: "10px", padding: "10px 0"})
            }
        } else {
            if (j.find(".fk-newSearchBox2").length) {
                i -= parseInt(l.attr("_borderWidth") || 1)
            } else {
                if (j.find(".fk-newSearchBox9").length) {
                    i -= parseInt(l.attr("_borderWidth") || 3)
                } else {
                    if (j.find(".fk-newSearchBox8").length) {
                        i -= f
                    } else {
                        if (j.find(".fk-newSearchBox1").length) {
                            i -= c
                        }
                    }
                }
            }
        }
        if (j.parent().hasClass("leftForms") || j.parent().hasClass("rightForms") || j.parent().hasClass("middleLeftForms") || j.parent().hasClass("middleRightForms")) {
            h.find(".fk-searchMenuKeyWord").css("padding-left", "12px")
        }
        d.width(b + "px");
        h.css({position: "fixed", left: e, top: i, "z-index": 1001})
    }
};
NewSearchMenu.prototype.foldSelectMenuPanel = function () {
    var k = this.id, d = $("#module" + k), o = d.find(".fk-openSearchMenu"), b = o.find(".fk-newSearchSelectMenu"),
        n = o.find(".fk-newSearchBoxContainer"), c = n.find(".fk-searchMenuSplitLine"), e, r, l, f, q, m = this, h, j,
        g, a, i, p;
    r = $("#J_newSearchSelectMenu" + m.id);
    l = b.attr("_status");
    f = (l == "fold") ? true : false;
    h = o.attr("_type");
    j = o.attr("_styleColor");
    bgColor = o.attr("_bgColor");
    a = o.attr("_bordercolor");
    borderWidth = o.attr("_borderwidth");
    borderType = o.attr("_bordertype");
    borderStyle = o.attr("_borderstyle");
    g = b.attr("_selectItem");
    e = $(this.initSearchMenuDom(h));
    i = a ? a : j, styleName = changeSearchBorderStyle(borderStyle);
    if (borderWidth) {
        p = borderWidth
    } else {
        p = (h == 1) ? 2 : 1
    }
    if (f) {
        if (!r.length) {
            if (h == 2 || h == 7) {
                fixSelectMenuStyle(h, f, k)
            } else {
                if (h == 10) {
                    o.css("border-bottom-right-radius", "0")
                }
            }
            $("#g_main").append(e);
            r = $("#J_newSearchSelectMenu" + m.id);
            m.setMenuPanelPosition(r);
            o.addClass("fk-searchShowMenu");
            m.bindMenuPanelSpanEvent();
            r.slideDown("200");
            b.attr("_status", "unfold").data("inMenu", false).data("inPanel", false);
            b.find(".fk-searchMenuImgArrow").removeClass("fk-searchMenuFold").addClass("fk-searchMenuUnfold");
            c = d.find(".fk-searchShowMenu .fk-searchMenuSplitLine");
            if ((h == 3 || h == 8 || h == 2 || h == 5 || h == 9 || h == 10 || h == 7) && borderType == 2) {
                c.css("border-left-style", styleName);
                c.css("border-left-color", i);
                c.css("border-left-width", p + "px")
            }
            if ((h == 1 || h == 5) && borderType != 1) {
                c.css("border-left-style", styleName);
                c.css("border-left-color", i);
                c.css("border-left-width", p + "px");
                r.find(".fk-newSearchSelectMenuShow").css("border-color", i)
            }
            r.find(".J_searchMenuItem" + g).css("color", j).addClass("J_selectThisKeyWord");
            r.find(".fk-newSearchSelectMenuShow").css("background-color", bgColor)
        }
    }
};
function changeSearchBorderStyle(b) {
    var a = "solid";
    if (b == 2) {
        a = "dashed"
    } else {
        if (b == 1) {
            a = "dotted"
        }
    }
    return a
}
NewSearchMenu.prototype.unfoldSelectMenuPanel = function () {
    var b = this.id, i = $("#module" + b), k = i.find(".fk-openSearchMenu"), j = k.find(".fk-newSearchSelectWrap"),
        d = k.find(".fk-searchMenuSplitLine"), l = k.find(".fk-newSearchSelectMenu"), g = k.find(".fk-searchBoxBtn"), e,
        h, c, a, f = this, m;
    e = $("#J_newSearchSelectMenu" + f.id);
    h = l.attr("_status");
    c = (h == "fold") ? true : false;
    a = (l.data("inPanel") || l.data("inMenu")) ? true : false;
    m = k.attr("_type"), borderWidth = parseInt(k.attr("_borderWidth")), borderType = parseInt(k.attr("_borderType"));
    if (!c && !a) {
        l.attr("_status", "fold");
        l.find(".fk-searchMenuImgArrow").removeClass("fk-searchMenuUnfold").addClass("fk-searchMenuFold");
        e.slideUp("200", function () {
            e.remove();
            if (m == 2 || m == 7) {
                fixSelectMenuStyle(m, c, b)
            } else {
                if (m == 10) {
                    k.css("border-bottom-right-radius", "5px")
                }
            }
            if (m == 1 || m == 3 || m == 8 || m == 2 || m == 5 || m == 9 || m == 10 || m == 7) {
                d.css("border-left-color", "");
                d.css("border-left-width", "");
                d.css("border-left-style", "")
            }
            k.removeClass("fk-searchShowMenu")
        })
    }
};
function fixSelectMenuStyle(d, b, g) {
    var e = $("#module" + g), c = e.find(".fk-openSearchMenu"), a = c.find(".fk-newSearchSelect"), f = (d == 2) ? c : a;
    if (b) {
        f.css({borderTopLeftRadius: "5px", borderBottomLeftRadius: "5px"})
    } else {
        f.css({borderTopLeftRadius: "40px", borderBottomLeftRadius: "40px"})
    }
}
NewSearchMenu.prototype.bindMenuDropEvent = function () {
    var d = this.id, k = $("#module" + d), m = k.find(".fk-openSearchMenu"), l = m.find(".fk-newSearchSelectWrap"),
        n = m.find(".fk-newSearchSelectMenu"), h = m.find(".fk-searchBoxBtn"), f, j, e, c, g = this,
        i = m.attr("_type"), a = parseInt(m.attr("_borderWidth")), b = parseInt(m.attr("_borderType"));
    n.unbind("mouseenter.foldpMenu").bind("mouseenter.foldpMenu", function () {
        f = $("#J_newSearchSelectMenu" + g.id);
        j = n.attr("_status");
        e = (j == "fold") ? true : false;
        if (e) {
            g.foldSelectMenuPanel()
        }
        n.data("inMenu", true)
    });
    n.unbind("mouseleave.unfoldMenu").bind("mouseleave.unfoldMenu", function () {
        setTimeout(g.unfoldSelectMenuPanel.bind(g), 200);
        n.data("inMenu", false)
    });
    if (Helper.top._manageMode) {
        Helper.top.$("#g_main").unbind("scroll.srcollSc").bind("scroll.srcollSc", function (o) {
            $(".J_newSearchSelectMenu").hide()
        })
    } else {
        Helper.top.$(window).unbind("scroll.srcollSc").bind("scroll.srcollSc", function (o) {
            $(".J_newSearchSelectMenu").hide()
        })
    }
};
NewSearchMenu.prototype.bindMenuPanelSpanEvent = function () {
    var n = this, l = n.id, f = $("#module" + l), o = f.find(".fk-openSearchMenu"),
        b = o.find(".fk-newSearchSelectMenu"), m = $("#J_newSearchSelectMenu" + l), e = m.find(".fk-searchMenuKeyWord"),
        h = o.attr("_type"), j = o.attr("_styleColor"), c = (h == 4 || h == 6) ? true : false, r = this.openMenuList,
        k = this.noSearchList, a, i, g, q = n.unfoldSelectMenuPanel, p, d;
    e.hover(function () {
        if (c) {
            $(this).css("background-color", "#f5f5f5").siblings().css("background-color", "")
        }
        $(this).css("color", j)
    }, function () {
        if (c) {
            $(this).css("background-color", "#fff")
        }
        if (!$(this).hasClass("J_selectThisKeyWord")) {
            $(this).css("color", "")
        }
    }).click(function (s) {
        g = $(this);
        i = g.attr("_val");
        b.attr("_selectItem", i);
        e.removeClass("J_selectThisKeyWord").css("color", "#7f7f7f");
        g.addClass("J_selectThisKeyWord").css("color", j);
        b.find(".fk-searchMenuWord").text(g.text());
        p = $.parseJSON(g.attr("_nsl"));
        d = $.unique(p.concat(k));
        o.find(".fk-newSearchInput").attr("_nsl", $.toJSON(d));
        $(".J_newSearchSelectMenu").hide()
    });
    m.mouseenter(function (s) {
        b.data("inPanel", true);
        n.foldSelectMenuPanel()
    }).mouseleave(function (s) {
        b.data("inPanel", false);
        setTimeout(n.unfoldSelectMenuPanel.bind(n), 200)
    })
};
Run.dynamicSearchBox = {};
Run.initDynamicSearchBox = function (b, a) {
    Run.fixDynamicSearchMenu(b);
    Run.dynamicSearchBox["module" + b] = new NewDynamicSearchBox(b, a);
    Run.dynamicSearchBox["module" + b].bindSearchBoxEvent()
};
Run.fixDynamicSearchMenu = function (h) {
    var f = $("#module" + h), e = f.find(".fk-dynamicSearch"), a = e.find(".fk-newSearchSelect"),
        d = e.find(".fk-newSearchSelectMenu"), b = e.find(".fk-newSearchBoxContainer"), c, g;
    e.width(Run.fixCusWidthSearchBox(h, true));
    g = a.width();
    a.data("width", g).css({position: "relative", left: g + "px"})
};
function NewDynamicSearchBox(b, a) {
    this.id = b;
    this.color = a
}
NewDynamicSearchBox.prototype.bindSearchBoxEvent = function () {
    var m = this, l = m.id, n = m.color, e = $("#module" + l), i = e.find(".fk-newSearchBox"),
        q = i.find(".fk-newSearchSelect"), o = i.find(".fk-searchBoxBtn"), s = i.find(".fk-newSearchSelectMenu"),
        k = s.find(".fk-searchMenuWord"), h = i.find(".fk-newSearchBoxContainer"), j = h.find("input"),
        f = e.attr("_modulestyle"), g = i.attr("_type"), t, r, d, b, a, u;
    d = (g == 4);
    b = (g == 6);
    a = (g == 7);
    o.hover(function () {
        if (!o.data("unfold")) {
            $(this).find("span").css("color", n)
        }
    }, function () {
        if (!o.data("unfold")) {
            $(this).find("span").css("color", "#C2C2C2")
        }
    }).click(function (v) {
        t = o.data("unfold");
        u = q.data("width");
        if (!t) {
            p()
        } else {
            r = j.val().trim();
            if (r == "") {
                c()
            } else {
                f == 62 ? Run.searchInRun(l) : Run.searchProduct(l)
            }
        }
    });
    if (Helper.top != window) {
        return
    }
    $(Helper.top.document.body).bind("click.hideSearchBox", function (v) {
        if ($(v.target).parents("#module" + l).length || $(v.target).parents("#J_newSearchSelectMenu" + l).length) {
            return
        }
        t = o.data("unfold");
        if (t) {
            c()
        }
    });
    function p() {
        var v, w = RgbatoRgb(i.attr("_borderColor")) || "#ddd";
        if (a) {
            v = {left: 0, opacity: 1,};
            q.css("border-color", w);
            o.css("border-color", w)
        } else {
            v = {left: 0, opacity: 1}
        }
        if (d || b) {
            s.find(".fk-searchSelectMenuRightBorder").height(k.height());
            d && o.css("border-bottom-color", "");
            b && o.css("border-right-color", "") && q.css("border-left-color", "")
        }
        o.css("background-color", "");
        s.css("visibility", "visible");
        h.css("visibility", "visible");
        q.animate(v, 300, function () {
            $(this).css("left", "0");
            $(this).css("opacity", "1");
            j.focus()
        });
        if (a) {
            o.css("border-color", w);
            q.css("border-color", w)
        }
        j.css("background-color", "");
        s.css("background-color", "");
        o.data("unfold", true).find("span").css("color", n);
        e.find(".J_dynamicShowTip").css("visibility", "visible")
    }

    function c() {
        var v, w = RgbatoRgb(i.attr("_borderColor")) || "#ddd";
        u = q.width();
        j.focusout();
        q.animate({left: u + "px"}, 300, function () {
            $(this).css("left", u + "px");
            s.css("visibility", "hidden");
            h.css("visibility", "hidden");
            d && o.css("border-bottom-color", "#ddd");
            b && o.css("border-right-color", "#ddd") && q.css("border-left-color", "#ddd")
        });
        if (a) {
            q.css("border-color", "transparent");
            o.css("border-color", "transparent")
        }
        s.css("background-color", "transparent");
        j.css("background-color", "transparent");
        o.css("background-color", "transparent");
        o.data("unfold", false).find("span").css("color", "#C2C2C2");
        e.find(".J_dynamicShowTip").css("visibility", "hidden")
    }
};
Run.fixCusWidthSearchBox = function (b, k) {
    var l = $("#module" + b), c = l.find(".formMiddleContent"), m = l.find(".J_newSearchBox"),
        d = m.find(".fk-newSearchSelectWrap"), q = m.find(".fk-newSearchSelect"), n = m.find(".fk-newSearchSelectMenu"),
        a = m.find(".fk-newSearchBoxContainer"), g = m.find(".fk-searchBoxBtn"), f = m.attr("_type"),
        e = m.attr("_borderwidth"), j = c.innerWidth(), o = l.outerWidth() - j, i = d.outerWidth(true),
        p = g.outerWidth(true), h;
    if (n.length) {
        i = n.outerWidth(true) + a.outerWidth(true) + q.outerWidth(true) - q.width()
    }
    h = i + p;
    e = parseInt(e);
    if (f == 1 || f == 3 || f == 8) {
        e || (e = (f == 1) ? 2 : 1);
        h += e
    } else {
        if (f == 2 || f == 5 || f == 9 || f == 10) {
            e || (e = 1);
            h += e * 2
        } else {
            if (f == 4 || f == 7) {
                e || (e = (f == 7) ? 2 : 1)
            } else {
                if (f == 6) {
                    e || (e = 1)
                }
            }
        }
    }
    if (k) {
        return h
    }
    if (j < h) {
        l.width(h + o)
    }
};
Run.bindSearchBtnEvent = function (f) {
    var d = $("#module" + f), c = d.find(".fk-newSearchBox"), b = c.find(".fk-newSearchBoxContainer"),
        a = b.find("input"), e = d.attr("_modulestyle");
    a.unbind("keyup.searchip").bind("keyup.searchip", function (g) {
        if (g.keyCode === 13) {
            inputVal = a.val().trim();
            if (inputVal != "") {
                e == 62 ? Run.searchInRun(f) : Run.searchProduct(f)
            } else {
                Helper.ing("请输入搜索内容", true)
            }
        }
    })
};
function RgbatoRgb(d) {
    if (!d) {
        return ""
    }
    if (/#/g.test(d)) {
        return d
    }
    var c = d.split("(")[1].split(")")[0].split(",");
    var f = c[0], e = c[1], a = c[2];
    return "rgb(" + f + "," + e + "," + a + ")"
}
Run.fixWidthChangeBtn = function (c, e, b) {
    var g = $("#module" + c), a = g.find(".fk-newSearchBox"), i = g.find(".fk-newSearchSelectWrap"),
        h = a.find(".fk-searchBoxBtn"), f, d;
    if (e == 1) {
        f = i.height() + b * 2;
        h.height(f).find("span").css("line-height", f + "px");
        a.height(f)
    } else {
        if (e == 3 || e == 8) {
            f = i.height();
            h.height(f).find("span").css("line-height", f + "px");
            a.height(f)
        } else {
            if (e == 4) {
                f = i.outerHeight();
                a.height(f)
            } else {
                if (e == 6) {
                    d = Run.fixCusWidthSearchBox(c, true);
                    a.width(d)
                } else {
                    if (e == 7) {
                        f = i.outerHeight();
                        a.height(f);
                        d = Run.fixCusWidthSearchBox(c, true);
                        a.width(d)
                    }
                }
            }
        }
    }
};
Run.msgBoardShowMsg = function (a) {
    $("#msgAdd .msgTips").show();
    $("#msgAdd .msgTips").html(a)
};
Run.msgBoardAddMsg = function (n, b, l) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行留言。");
        return
    }
    $msgBoard = $("#msgBoard" + b);
    var a = $msgBoard.find("#reqName").val();
    var h = $msgBoard.find("#reqPhone").val();
    var i = $msgBoard.find("#reqEmail").val();
    var g = $msgBoard.find("#reqContent").val();
    var m = $msgBoard.find("#msgBoardCaptcha").val();
    var c = $msgBoard.find(".msgTips").show();
    var j = $msgBoard.find(".J_msgBoardCaptcha");
    var f = 0;
    $msgBoard.find("input.msg_isMust").each(function () {
        var p = $(this).attr("id");
        var q = $(this).attr("name");
        var o = $(this).val();
        if (o == "" || o == null) {
            c.html(Helper.format(LS.msgBoardInputIsEmpty, Helper.encodeHtml(q)));
            $msgBoard.find("#" + p).focus();
            f = 1;
            return false
        }
        if (p == "reqPhone" && !Helper.isPhone(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(q)));
            $msgBoard.find("#" + p).focus();
            f = 1;
            return false
        }
        if (p == "reqEmail" && !Helper.isEmail(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(q)));
            $msgBoard.find("#" + p).focus();
            f = 1;
            return false
        }
    });
    if (f == 1) {
        return false
    }
    var e = 0;
    $msgBoard.find("input.msg_ipt").each(function () {
        var p = $(this).attr("id");
        var r = $(this).attr("name");
        var o = $(this).val();
        var q = $(this).attr("maxlength");
        if (o.length > q) {
            c.html(Helper.format(LS.msgBoardInputMaxLength, Helper.encodeHtml(r), q));
            $msgBoard.find("#" + p).focus();
            e = 1;
            return false
        }
        if (p == "reqPhone" && o.length && !Helper.isPhone(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(r)));
            $msgBoard.find("#" + p).focus();
            e = 1;
            return false
        }
        if (p == "reqEmail" && o.length && !Helper.isEmail(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(r)));
            $msgBoard.find("#" + p).focus();
            e = 1;
            return false
        }
    });
    if (e == 1) {
        return false
    }
    if (g == null || g == "") {
        Run.msgBoardShowMsg(LS.msgBoardInputContent);
        $msgBoard.find("#reqContent").focus();
        return
    }
    var d = 10000;
    if (g.length > d) {
        Run.msgBoardShowMsg(Helper.format(LS.msgBoardInputContent2, d));
        $msgBoard.find("#reqContent").focus();
        return
    }
    if (!j.hasClass("msgBoardCaptchaHide")) {
        if (m == null || m == "") {
            Run.msgBoardShowMsg(LS.msgBoardInputValidateCode);
            $msgBoard.find("#msgBoardCaptcha").focus();
            return
        }
    }
    Run.msgBoardShowMsg(LS.msgBoardDoing);
    var k = {};
    $msgBoard.find("input.msg_ipt").each(function () {
        var p = $(this).attr("id");
        var o = $(this).val();
        k[p] = $.trim(o)
    });
    k.reqContent = g;
    k.memberId = (l === undefined) ? 0 : l;
    $.ajax({
        type: "post",
        url: "ajax/msgBoard_h.php",
        data: "cmd=add&msgBdData=" + Helper.encodeUrl($.toJSON(k)) + "&validateCode=" + Helper.encodeUrl(m) + "&moduleId=" + Helper.encodeUrl(b),
        error: function () {
            var p = Run.getDialogContent(true, Helper.format(LS.systemError));
            var o = {htmlContent: p, width: 205, height: 78};
            Run.popupBox(o);
            setTimeout(function () {
                Helper.top.location.reload()
            }, 3000)
        },
        success: function (o) {
            o = jQuery.parseJSON(o);
            if (o.success) {
                var q = Run.getDialogContent(true, Helper.format(LS.msgBoardSendOkAutoOpen));
                var p = {htmlContent: q, width: 205, height: 78};
                Run.popupBox(p);
                setTimeout(function () {
                    Helper.top.location.reload()
                }, 3000);
                $msgBoard.find('#msgAdd input[type="text"]').val("");
                $msgBoard.find("#reqContent").val("")
            } else {
                if (o.errno == 1) {
                    Run.msgBoardShowMsg(LS.captchaError)
                } else {
                    if (o.errno == 2) {
                        Run.msgBoardShowMsg(LS.argsError)
                    } else {
                        if (o.errno == -4) {
                            Run.msgBoardShowMsg(LS.msgBoardAddCountLimit)
                        } else {
                            Run.msgBoardShowMsg(LS.systemError)
                        }
                    }
                }
                if (o.needCode) {
                    Run.msgBoardShowMsg(o.msg, b);
                    j.removeClass("msgBoardCaptchaHide")
                }
            }
            Run.changeMsgBoardValidateCode()
        }
    })
};
Run.changeMsgBoardValidateCode = function () {
    $("#msgBoardCaptchaImg").attr("src", "validateCode.php?" + Math.random() * 1000)
};
Run.setStarSelect = function (a) {
    _getBackgroundColor = function (c) {
        var d = "";
        while (c[0].tagName.toLowerCase() != "html") {
            d = c.css("background-color");
            if (d != "rgba(0, 0, 0, 0)" && d != "transparent") {
                break
            }
            c = c.parent()
        }
        return d
    };
    var b = "";
    if ($(".submitStarList").length > 0) {
        b = _getBackgroundColor($(".submitStarList"))
    }
    if (!b) {
        b = "#FFF"
    }
    $("body").on({
        click: function () {
            a = $(this).index();
            if (a < 5) {
                var c = $(this).parent();
                c.attr("star", a + 1);
                _changeSelectStar(a, c)
            }
        }, hover: function () {
            var d = $(this).index();
            if (d < 5) {
                var c = $(this).parent();
                _changeSelectStar(d, c)
            }
        }, mouseleave: function (d) {
            if (a < 5) {
                var c = $(this).parent();
                _changeSelectStar(a, c)
            }
        }
    }, ".submitStarList li");
    if ($(".statisticCommSwap").length != 0) {
        $(".statisticBox .percent span").css({"border-color": "transparent " + b + " transparent transparent"})
    }
    _changeSelectStar = function (e, g) {
        var h = $(".submitStarList").hasClass("fk-pdStyle5") || false;
        for (var f = 0; f < 5; f++) {
            var c = g.find("li").eq(f);
            if (f < e + 1) {
                if (e < 2) {
                    c.removeClass("select_more");
                    c.addClass("select_less")
                } else {
                    c.removeClass("select_less");
                    c.addClass("select_more")
                }
            } else {
                c.removeClass("select_more");
                c.removeClass("select_less")
            }
        }
        var j = "";
        var d = "";
        if (e == 0) {
            j = LS.badComment;
            d = "#b7b6b6"
        } else {
            if (e == 1) {
                j = LS.moderateComment;
                d = "#b7b6b6"
            } else {
                if (e == 2) {
                    j = LS.moderateComment;
                    d = "#ffb600"
                } else {
                    j = LS.highComment;
                    d = "#ffb600"
                }
            }
        }
        if (e == -1) {
            g.find("li:last").removeClass("scoreTipHover")
        } else {
            if (!h) {
                g.find("li:last").css({color: d})
            }
            g.find("li:last").html("<em></em><span></span>" + (e + 1) + LS.score + j);
            g.find("li:last").addClass("scoreTipHover")
        }
        if (!h) {
            g.find("li:last em").css({"border-color": "transparent " + d + " transparent transparent"})
        }
        g.find("li:last span").css({"border-color": "transparent " + b + " transparent transparent"})
    }
};
Run.msgSubmitShowMsg = function (b, a) {
    $("#msgSubmit" + a).find("#msgSAdd .msgSTips").show();
    $("#msgSubmit" + a).find("#msgSAdd .msgSTips").html(b)
};
Run.msgSubmitAddMsg = function (n, b, l) {
    $msgSubmit = $("#msgSubmit" + b);
    var a = $.trim($msgSubmit.find("#reqName").val());
    var h = $msgSubmit.find("#reqPhone").val();
    var i = $msgSubmit.find("#reqEmail").val();
    var g = $msgSubmit.find("#reqContent").val();
    var m = $msgSubmit.find("#msgSubmitCaptcha").val();
    var c = $msgSubmit.find(".msgSTips").show();
    var j = $msgSubmit.find(".J_msgBoardCaptcha");
    var f = 0;
    $msgSubmit.find("input.msgSubmit_isMust").each(function () {
        var p = $(this).attr("id");
        var q = $(this).attr("name");
        var o = $(this).val();
        if (o == "" || o == null) {
            c.html(Helper.format(LS.msgBoardInputIsEmpty, Helper.encodeHtml(q)));
            $msgSubmit.find("#" + p).focus();
            f = 1;
            return false
        }
        if (p == "reqPhone" && !Helper.isPhone(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(q)));
            $msgSubmit.find("#" + p).focus();
            f = 1;
            return false
        }
        if (p == "reqEmail" && !Helper.isEmail(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(q)));
            $msgSubmit.find("#" + p).focus();
            f = 1;
            return false
        }
    });
    if (f == 1) {
        return false
    }
    var e = 0;
    $msgSubmit.find("input.msgSubmit_ipt").each(function () {
        var p = $(this).attr("id");
        var r = $(this).attr("name");
        var o = $(this).val();
        var q = $(this).attr("maxlength");
        if (o.length > q) {
            c.html(Helper.format(LS.msgBoardInputMaxLength, Helper.encodeHtml(r), q));
            $msgSubmit.find("#" + p).focus();
            e = 1;
            return false
        }
        if (p == "reqPhone" && o.length && !Helper.isPhone(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(r)));
            $msgSubmit.find("#" + p).focus();
            e = 1;
            return false
        }
        if (p == "reqEmail" && o.length && !Helper.isEmail(o)) {
            c.html(Helper.format(LS.msgBoardInputCorrect, Helper.encodeHtml(r)));
            $msgSubmit.find("#" + p).focus();
            e = 1;
            return false
        }
    });
    if (e == 1) {
        return false
    }
    if (g == null || g == "") {
        Run.msgSubmitShowMsg(LS.msgBoardInputContent, b);
        $msgSubmit.find("#reqContent").focus();
        return
    }
    var d = 10000;
    if (g.length > d) {
        Run.msgSubmitShowMsg(Helper.format(LS.msgBoardInputContent2, d), b);
        $msgSubmit.find("#reqContent").focus();
        return
    }
    if (!j.hasClass("msgBoardCaptchaHide")) {
        if (m == null || m == "") {
            Run.msgSubmitShowMsg(LS.msgBoardInputValidateCode, b);
            $msgSubmit.find("#msgSubmitCaptcha").focus();
            return
        }
    }
    Run.msgSubmitShowMsg(LS.msgBoardDoing, b);
    var k = {};
    $msgSubmit.find("input.msgSubmit_ipt").each(function () {
        var p = $(this).attr("id");
        var o = $(this).val();
        k[p] = $.trim(o)
    });
    k.reqContent = g;
    k.memberId = (l === undefined) ? 0 : l;
    $.ajax({
        type: "post",
        url: "ajax/msgBoard_h.php",
        data: "cmd=add&msgBdData=" + Helper.encodeUrl($.toJSON(k)) + "&validateCode=" + Helper.encodeUrl(m) + "&vCodeId=" + Helper.encodeUrl(b) + "&moduleId=" + Helper.encodeUrl(b),
        error: function () {
            var p = Run.getDialogContent(true, Helper.format(LS.systemError));
            var o = {htmlContent: p, width: 205, height: 78};
            Run.popupBox(o);
            setTimeout(function () {
                Helper.top.location.reload()
            }, 3000)
        },
        success: function (o) {
            o = jQuery.parseJSON(o);
            if (o.success) {
                var q = Run.getDialogContent(true, Helper.format(LS.msgBoardSendOkAutoOpen));
                var p = {htmlContent: q, width: 205, height: 78};
                Run.popupBox(p);
                setTimeout(function () {
                    Helper.top.location.reload()
                }, 3000);
                $msgSubmit.find('#msgSAdd input[type="text"]').val("");
                $msgSubmit.find("#reqContent").val("")
            } else {
                if (o.errno == 1) {
                    Run.msgSubmitShowMsg(LS.captchaError, b)
                } else {
                    if (o.errno == 2) {
                        Run.msgSubmitShowMsg(LS.argsError, b)
                    } else {
                        if (o.errno == -4) {
                            Run.msgSubmitShowMsg(LS.msgBoardAddCountLimit, b)
                        } else {
                            Run.msgSubmitShowMsg(LS.systemError, b)
                        }
                    }
                }
                if (o.needCode) {
                    Run.msgSubmitShowMsg(o.msg, b);
                    j.removeClass("msgBoardCaptchaHide")
                }
            }
            Run.changeMsgSubmitValidateCode(b)
        }
    })
};
Run.changeMsgSubmitValidateCode = function (a) {
    $("#msgSubmit" + a).find("#msgSubmitCaptchaImg").attr("src", "validateCode.php?" + Math.random() * 1000 + "&vCodeId=" + a)
};
Run.fixMsgSubmitStyle = function (f) {
    var g = parseInt(Helper.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").width());
    var b = parseInt(Helper.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").find(".msgPanel_N").css("margin-right"));
    var a = parseInt(Helper.top.$("#module" + f + "").find("#msgSubmit" + f + "").find(".msgSAdd_N").find(".msgPanel_N").width());
    var d = a + b;
    if (Helper.top.$("#module" + f + "").width() <= 400) {
        if (Helper.top.$("#module" + f + "").width() < 150) {
            Helper.top.$("#module" + f + "").find(".msgSubmit_overToPoint").css("width", "60px");
            Helper.top.$("#module" + f + "").find(".msgSubmit_PropBoard").css("width", "56px");
            Helper.top.$("#module" + f + "").find(".paramResizeHandleRight").css("left", "56px")
        }
        Helper.top.$("#module" + f + "").find("#msgSubmit" + f + "").css({"margin-left": "6px"});
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".g_itext").css({width: "106px"});
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").css({
            "line-height": "70px",
            height: "70px"
        });
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
            width: "104px",
            height: "64px"
        });
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddButton_N").find(".msgSubmit_overToPoint").css({width: "5px"});
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgCaptcha_N").find(".validateCode_N").css({
            "float": "none",
            "margin-left": "50px"
        });
        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgCaptcha_N").find("#msgSubmitCaptchaImg").css({
            "margin-bottom": "15px",
            "margin-top": "10px"
        });
        if (Helper.top.$("#module" + f + "").width() > 300) {
            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".m_ibutton").css({"float": "left"})
        }
    }
    var c;
    var e = Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").length;
    if (Helper.top.$("#module" + f + "").width() > 400) {
        if (d <= g && g < 2 * d) {
            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: "194px"});
            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"})
        } else {
            if (2 * d <= g && g < 3 * d) {
                if (e > 2) {
                    c = a + b + 194;
                    Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                    Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                } else {
                    if (e == 2) {
                        c = a + b + 194;
                        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                        Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                    } else {
                        if (e == 1) {
                            c = 194;
                            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                        }
                    }
                }
            } else {
                if (g >= 3 * d) {
                    if (g >= 3 * (b + a)) {
                        if (e > 2) {
                            c = 2 * (a + b) + 194;
                            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                        } else {
                            if (e == 2) {
                                c = a + b + 194;
                                Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                                Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                            } else {
                                if (e == 1) {
                                    c = 194;
                                    Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                                    Helper.top.$("#module" + f + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: c + "px"})
                                }
                            }
                        }
                    }
                }
            }
        }
        if (Helper.top.$("#module" + f + "").width() > 300 && Helper.top.$("#module" + f + "").width() < 650) {
            Helper.top.$("#module" + f + "").find(".msgSAdd").find(".m_ibutton").css({"float": "left"})
        }
    }
};
Run.fixMsgBoardStyle = function (g) {
    var h = parseInt(Helper.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").width());
    var b = parseInt(Helper.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").find(".msgPanel_N").css("margin-right"));
    var a = parseInt(Helper.top.$("#module" + g + "").find("#msgBoard" + g + "").find(".msgSAdd_N").find(".msgPanel_N").width());
    var e = a + b;
    var c = 280 + b;
    if (Helper.top.$("#module" + g + "").width() <= 400) {
        Helper.top.$("#module" + g + "").find("#msgBoard" + g + "").css({"margin-left": "6px"});
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".g_itext").css({width: "106px"});
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({
            width: "104px",
            height: "64px"
        });
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").css({
            "line-height": "70px",
            height: "70px"
        });
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".msgTitle_N").find(".msgUser").css({
            "margin-left": "35px",
            "text-align": "center"
        });
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".msgContent").find(".userMsg").css({
            "margin-left": "16px",
            "margin-top": "16px"
        });
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgBoardPanel").find(".user_level_name").css({position: "relative"});
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddButton_N").find(".msgSubmit_overToPoint").css({width: "5px"});
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgCaptcha_N").find(".validateCode_N").css({
            "float": "none",
            "margin-left": "50px"
        });
        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgCaptcha_N").find("#msgBoardCaptchaImg").css({
            "margin-bottom": "15px",
            "margin-top": "10px"
        });
        Helper.top.$("#module" + g + "").find("#pagenation" + g + "").find("div").each(function (i, j) {
            if ($(this).hasClass("pagePrev_N") || $(this).hasClass("pageNext_N") || $(this).hasClass("J_pageArrow_N")) {
                $(this).show()
            } else {
                $(this).hide()
            }
        })
    } else {
        Helper.top.$("#module" + g + "").find("#pagenation" + g + "").find("div").each(function (i, j) {
            $(this).show()
        })
    }
    var d;
    var f = Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").length;
    if (Helper.top.$("#module" + g + "").width() > 400) {
        if (e <= h && h < 2 * e) {
            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: "244px"})
        } else {
            if (2 * e <= h && h < 3 * c) {
                if (f > 2) {
                    d = a + b + 246;
                    Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
                    Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                } else {
                    if (f == 2) {
                        d = a + b + 246;
                        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
                        Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                    } else {
                        if (f == 1) {
                            d = 246;
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                        }
                    }
                }
            } else {
                if (h > 3 * c) {
                    if (h >= 3 * (b + a)) {
                        if (f > 2) {
                            d = 2 * (a + b) + 194;
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                        } else {
                            if (f == 2) {
                                d = a + b + 194;
                                Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                                Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                            } else {
                                if (f == 1) {
                                    d = 246;
                                    Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
                                    Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                                }
                            }
                        }
                    } else {
                        if (f >= 2) {
                            d = a + b + 194;
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "194px"});
                            Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                        } else {
                            if (f == 1) {
                                d = 246;
                                Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgPanel_N").find(".g_itext").css({width: "246px"});
                                Helper.top.$("#module" + g + "").find(".msgSAdd").find(".msgAddText_N").find(".g_textarea").css({width: d + "px"})
                            }
                        }
                    }
                }
            }
        }
    }
};
Run.jumpToPage = function (d, b, a) {
    var c = parseInt($(Helper.top.$("#module" + d + "").find(".pagenation_N").find(".jumpPageDiv").find("#jumpPage")).val());
    if (isNaN(c)) {
        c = 1
    }
    if (c > b) {
        c = parseInt(b)
    }
    if (c == 0) {
        c = 1
    }
    window.location.href = "" + a + "?m" + d + "pageno=" + c + "#module" + d + ""
};
Run.msgSubmitCusResize = function (b) {
    var a = "#msgSubmit" + b;
    Run.msgComCusResize(b, a)
};
Run.msgBoardCusResize = function (b) {
    var a = "#msgBoard" + b;
    Run.msgComCusResize(b, a)
};
Run.msgComCusResize = function (g, d) {
    var c = $(d).find(".msgSAdd");
    var f = c.find(".msgSubmit_PropBoard");
    var b = f.width();
    f.attr("class", "msgSubmit_PropBoard paramResize");
    c.find(".msgFlag_N").find(".msgSubmit_overToPoint").attr("class", "msgSubmit_overToPoint");
    var a = c.find(".paramResize");
    a.hover(function () {
        a.css("cursor", "auto")
    });
    h();
    var e = c.find(".paramResize,.u-paramResize-w,.u-paramResize-e");
    e.hover(function () {
        a.css({
            "border-left": "1px dashed #2b73ba",
            "border-right": "1px dashed #2b73ba",
            "border-top": "1px solid #2b73ba",
            "border-bottom": "1px solid #2b73ba"
        })
    }, function () {
        a.css("border", "1px dashed transparent")
    });
    function h() {
        if (a.length < 1) {
            return
        }
        a.each(function () {
            var o = $(this), i = Helper.isIE8() ? $(document) : $(window), q, n, k = $(this).parent(), m, l = {};
            if (o.hasClass("paramResize")) {
                o.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='position:absolute;width:5px;height:" + $(o).height() + "px;z-index:999'></div></div>");
                o.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div class='paramResizeHandleRight' style='position:absolute;top:0px;left:" + b + "px;width:5px;height:" + $(o).height() + "px;z-index:999'></div></div>");
                $(".u-paramResize-e,.u-paramResize-w").css("cursor", "e-resize")
            }
            q = $(o).prev();
            n = $(o).next();
            if (!n.hasClass("u-paramResize-e") || !q.hasClass("u-paramResize-w")) {
                return
            }
            q.off("mousedown.fi").on("mousedown.fi", r);
            n.off("mousedown.fi").on("mousedown.fi", r);
            function r(s) {
                s = s || window.event;
                l.x = s.pageX;
                if ($(this).hasClass("u-paramResize-w")) {
                    l.dir = "w";
                    l.ptb = parseInt(k.css("width"))
                } else {
                    if ($(this).hasClass("u-paramResize-e")) {
                        l.dir = "e";
                        l.ptb = parseInt(k.css("width"))
                    }
                }
                m = $("#dockTip").show().css({left: "-1000px;", top: "-1000px"});
                i.off("mousemove.fi").on("mousemove.fi", j);
                i.off("mouseup.fi").on("mouseup.fi", p);
                s.preventDefault()
            }

            function j(v) {
                $("body").css("cursor", "e-resize");
                a.css({
                    "border-left": "1px dashed #2b73ba",
                    "border-right": "1px dashed #2b73ba",
                    "border-top": "1px solid #2b73ba",
                    "border-bottom": "1px solid #2b73ba"
                });
                v = v || window.event;
                var w = {x: v.pageX}, t, z, s = 1, u = 200, y = "", x;
                if (l.dir == "w") {
                    t = l.x - w.x;
                    z = l.ptb + t;
                    z = z > s ? z : s;
                    z = z > u ? u : z;
                    z = Math.round(z);
                    y = "宽度:"
                } else {
                    if (l.dir == "e") {
                        t = w.x - l.x;
                        z = l.ptb + t;
                        z = z > s ? z : s;
                        z = z > u ? u : z;
                        z = Math.round(z);
                        y = "宽度:"
                    }
                }
                if (d.indexOf("msgSubmit") > -1) {
                    x = 280 - 60 + z;
                    f.parent().css({width: z + "px"});
                    f.css({width: (z - 4) + "px"});
                    c.find(".paramResizeHandleRight").css("left", (z - 4) + "px");
                    c.find(".msgPanel_N").css({width: x + "px"});
                    Run.fixMsgSubmitStyle(g)
                } else {
                    if (d.indexOf("msgBoard") > -1) {
                        x = 330 - 60 + z;
                        f.parent().css({width: z + "px"});
                        f.css({width: (z - 4) + "px"});
                        c.find(".paramResizeHandleRight").css("left", (z - 4) + "px");
                        c.find(".msgPanel_N").css({width: x + "px"});
                        Run.fixMsgBoardStyle(g)
                    }
                }
                m.html(y + z).css({left: v.pageX - 28, top: v.pageY - 40});
                v.preventDefault()
            }

            function p(t) {
                $("body").css("cursor", "");
                a.css("border", "1px dashed transparent");
                t = t || window.event;
                l.dir = "";
                i.off("mousemove.fi");
                i.off("mouseup.fi");
                m.hide();
                var s = Run.getModuleAttr(g);
                s.data.changed = true;
                Run.styleChanged();
                l = {};
                t.preventDefault()
            }
        })
    }
};
Run.desMallBuyCount = function (c) {
    var a = $("#cartbuyCount" + c).val();
    var b = 1;
    if (Helper.isInteger(a)) {
        b = parseInt(a)
    }
    b--;
    if ($("#limitAmountDiv").text() == "") {
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
    }
    $("#cartbuyCount" + c).val(b)
};
Run.incMallBuyCount = function (c) {
    var a = $("#cartbuyCount" + c).val();
    var b = 0;
    if (Helper.isInteger(a)) {
        b = parseInt(a)
    }
    b++;
    if ($("#limitAmountDiv").text() == "") {
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
    }
    $("#cartbuyCount" + c).val(b)
};
Run.mallBuyCountChange = function (c) {
    if ($("#limitAmountDiv").text() == "") {
        var a = $("#cartbuyCount" + c).val();
        var b = 1;
        if (Helper.isInteger(a)) {
            b = parseInt(a)
        }
        if (b < 2) {
            b = 1;
            $("#buyCountDes" + c).addClass("disableMallJian");
            $("#buyCountInc" + c).removeClass("disableMallJia")
        } else {
            if (b > 9999998) {
                b = 9999999;
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c).removeClass("disableMallJian");
                $("#buyCountInc" + c).removeClass("disableMallJia")
            }
        }
        $("#cartbuyCount" + c).val(b)
    }
};
Run.mallBuy = function (e, b, g) {
    var d = "mbuy.php?id=" + e;
    if (b && b != "undefined") {
        var c = $("#module" + b);
        var h = c.find(".optionMsg");
        if (Helper.isNull(c)) {
            return
        }
        var i = true;
        var f = [];
        d += "&fromDetail=true";
        c.find(".optionItemWrap").each(function () {
            var k = $(this).parent().parent().find(".propName").text();
            if (k.charAt(k.length - 1) == ":" || k.charAt(k.length - 1) == "：") {
                k = k.substring(0, k.length - 1)
            }
            if ($(this).find(".optionItemHover").length == 1) {
                var l = $(this).attr("data");
                var j = $(this).find(".optionItemHover").attr("data");
                var m = {};
                m.name = l;
                m.value = parseInt(j);
                f.push(m);
                h.hide()
            } else {
                h.show();
                if (b === "PdSlide") {
                    var o = $(this).parent().parent().position();
                    var n = $(".fk-slideForProduct .f-propListContent");
                    n.scrollTop(o.top)
                }
                h.html(Helper.format(LS.mallCartChoiceItemError, Helper.encodeHtml(k)));
                i = false;
                return false
            }
        });
        if (!i) {
            return false
        }
        if (f.length > 0) {
            d += "&optionList=" + Helper.encodeUrl($.toJSON(f))
        }
    }
    if (g && g.length > 0) {
        d += "&" + g
    }
    var a = window.open(d + "&ram=" + Math.random(), "mallcart");
    a.focus();
    if (Helper.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        event.stopPropagation();
        event.preventDefault()
    }
};
Run.MallAjaxErrno = {
    ok: 0,
    error: 1,
    manager: 2,
    login: 3,
    idNotExist: 4,
    orderSettle: 5,
    noMall: 6,
    toProductDetail: 7,
    orderNotExist: 8,
    networkError: 9,
    outOfMallAmount: 10,
    mallAmountZero: 11,
    mallOptionStop: 12,
    OutOfAllowAmount: 13,
    notAdded: 14,
    payDomainError: 15,
    couponNotFound: 16,
    couponUnavail: 17,
    couponOverTime: 18,
    authMemberNotAllow: 19
};
Run.getDialogHtml = function (r, g) {
    if (!Helper.isInteger(r.rt)) {
        r.rt = 1
    }
    var h = parseInt(r.rt), d = 0, m = 0, k = "", e = "about:blant;", p = LS.goToMallCartStr, a = LS.continueShopping,
        b = LS.resultHelperlMsg, n = "resultHelperlIcon";
    if (!g) {
        g = "javascript:;"
    }
    var i = "mcart.php";
    var q = "target='_blank'";
    var f;
    switch (h) {
        case Run.MallAjaxErrno.ok:
            n = "suc-ico";
            b = LS.resultSuccessMsg;
            if (typeof(r.totalPrice) != "undefined") {
                d = r.totalPrice
            }
            if (typeof(r.totalAmount) != "undefined") {
                m = r.totalAmount
            }
            if (typeof(r.choiceCurrencyVal) != "undefiend") {
                k = r.choiceCurrencyVal
            }
            var j = k + d;
            f = Helper.format(LS.cartDetailInfo, m, j);
            break;
        case Run.MallAjaxErrno.error:
            Run.getTopWindow().location.href = "mcart.php?msg=2";
            return false;
            break;
        case Run.MallAjaxErrno.manager:
            n = "resultHelperlIcon";
            b = "购买失败。";
            var p = "去购物车结算";
            var a = "继续购物";
            f = "当前为管理状态，购买失败。";
            r.success = true;
            break;
        case Run.MallAjaxErrno.login:
            return false;
            break;
        case Run.MallAjaxErrno.idNotExist:
            Run.getTopWindow().location.href = "mcart.php?msg=1";
            return false;
            break;
        case Run.MallAjaxErrno.orderSettle:
            Run.getTopWindow().location.href = "mcart.php";
            return false;
            break;
        case Run.MallAjaxErrno.noMall:
            Run.getTopWindow().location.href = "mcart.php";
            return false;
            break;
        case Run.MallAjaxErrno.toProductDetail:
            Run.getTopWindow().location.href = "pd.php?id=" + productId + "&ram=" + Math.random();
            return false;
            break;
        case Run.MallAjaxErrno.orderNotExist:
            Run.getTopWindow().location.href = "mcart.php?msg=1";
            return false;
            break;
        case Run.MallAjaxErrno.networkError:
            f = LS.networkError;
            break;
        case Run.MallAjaxErrno.outOfMallAmount:
            f = LS.mallAmountOverFlow;
            break;
        case Run.MallAjaxErrno.mallAmountZero:
            f = LS.mallAmountZero;
            break;
        case Run.MallAjaxErrno.mallOptionStop:
            f = LS.mallOptionStop;
            break;
        case Run.MallAjaxErrno.OutOfAllowAmount:
            f = LS.allowAmountOverFlow;
            break;
        case Run.MallAjaxErrno.notAdded:
            f = LS.mallProductNotAdded;
            break;
        case Run.MallAjaxErrno.authMemberNotAllow:
            f = r.data + LS.authLevelBuy;
            break;
        default:
            Run.getTopWindow().location.href.reload();
            return false
    }
    var l = [];
    if (r.success) {
        l = ["<div class='mallCartOperate'>", "<a id='settleAccountsBtn' class='formBtn' " + q + " href='" + i + "' style='width:108px; height:35px; background:#ff6d00;font-size:14px;'>" + p + "</a>", "<a id='dialogContinueShopping' href='javascript:;' class='shopping popupBClose' style='font-size:14px; color:#636363 !important;'>", a, "</a>", "</div>"]
    }
    var c = "";
    if (Run.getTopWindow()._lcid === 1033) {
        c = "letter-spacing:0px;"
    }
    var o = ["<table style='width:100%;height:100%;'>", "<tr>", "<td style='width:50px;'></td>", "<td style='width:280px;'>", "<div class='" + n + " addItemTextTips' style='font-size:14px; color:#636363' >" + b + "</div>", "<div class='cartInfoContent' style='" + c + "' >" + f + "</div>", l.join(""), "</td>", "<td style='width:50px;'></td>", "</tr>", "</table>"];
    if (h == Run.MallAjaxErrno.mallAmountZero || h == Run.MallAjaxErrno.OutOfAllowAmount || h == Run.MallAjaxErrno.outOfMallAmount) {
        o[0] = "<table style='width:100%;height:100%;margin-top:10px;'>"
    }
    return o.join("")
};
var loginDialogCache = [];
loginDialogCache.html = "";
loginDialogCache.qqOpen = false;
loginDialogCache.sinaOpen = false;
loginDialogCache.wxOpen = false;
loginDialogCache.qqAppId = "";
loginDialogCache.sinaAppKey = "";
loginDialogCache.wxAppKey = "";
loginDialogCache.qqReUri = "";
loginDialogCache.sinaReUri = "";
loginDialogCache.wxReUri = "";
loginDialogCache.displayList;
loginDialogCache.noRemark;
loginDialogCache.REMARK_MAXLEN;
loginDialogCache.extendParam;
var loginDialogLock = false;
Run.createLoginDialog = function (C, e, q, E, g, A) {
    var m, v, w, B, F, z, n, b;
    var l, H, s;
    var o = "";
    var k = "";
    var d = "";
    var G = "";
    var j = "";
    var t = "";
    var i = "";
    var x;
    var f;
    var y;
    var u;
    var r = "";
    if (loginDialogLock) {
        return
    }
    loginDialogLock = true;
    if (loginDialogCache != null && loginDialogCache.html != null && loginDialogCache.html != "") {
        var J = parseInt(Math.random() * 10000);
        var p = {boxId: J, boxName: "loginDialog", title: "", htmlContent: loginDialogCache.html, width: 380};
        r = Run.popupBox(p);
        if (loginDialogCache.qqOpen || loginDialogCache.sinaOpen || loginDialogCache.wxOpen) {
            var a = {};
            a.pid = C;
            a.mid = e;
            a.url = q;
            a.opList = g;
            a.count = A;
            a.where = E;
            $.cookie("forThirtLoginBuy", $.toJSON(a))
        }
        if (loginDialogCache.qqOpen) {
            Run.initQQLogin(loginDialogCache.qqAppId, loginDialogCache.qqReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_qqLogin", loginDialogCache.extendParam)
        }
        if (loginDialogCache.sinaOpen) {
            Run.initWBLogin(loginDialogCache.sinaAppKey, loginDialogCache.sinaReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_wbLogin", loginDialogCache.extendParam)
        }
        if (loginDialogCache.wxOpen) {
            Run.initWXLogin(loginDialogCache.wxAppKey, loginDialogCache.wxReUri, loginDialogCache.displayList, loginDialogCache.noRemark, loginDialogCache.REMARK_MAXLEN, "ld_wxLogin", loginDialogCache.extendParam)
        }
        c();
        loginDialogLock = false
    } else {
        $.ajax({
            type: "post", url: "ajax/site_h.php?cmd=getMemberLoginMsg", error: function () {
                Helper.ing("获取登录信息错误,请稍后再试.")
            }, success: function (K) {
                var K = jQuery.parseJSON(K);
                if (K.success) {
                    var P = K.msg;
                    v = P.findPwdOpen;
                    m = P.autoLogin;
                    w = P.qqOpen;
                    B = P.sinaOpen;
                    F = P.wxOpen;
                    z = P.noRemark;
                    n = P.signUpbyMobile;
                    b = P.proOpen;
                    l = P.qqReUrlId;
                    H = P.sinaReUrlId;
                    s = P.wxReUrlId;
                    o = P.qqReUri;
                    k = P.sinaReUri;
                    d = P.wxReUri;
                    G = P.qqAppId;
                    j = P.sinaAppKey;
                    t = P.wxAppKey;
                    i = P.registerHtml;
                    x = $.toJSON(P.displayList);
                    f = $.toJSON(P.extendParam);
                    y = P.REMARK_MAXLEN;
                    u = P.ACCT_MAXLEN;
                    loginDialogCache.qqOpen = w;
                    loginDialogCache.sinaOpen = B;
                    loginDialogCache.wxOpen = F;
                    loginDialogCache.qqAppId = G;
                    loginDialogCache.sinaAppKey = j;
                    loginDialogCache.wxAppKey = t;
                    loginDialogCache.qqReUri = o;
                    loginDialogCache.sinaReUri = k;
                    loginDialogCache.wxReUri = d;
                    loginDialogCache.displayList = x;
                    loginDialogCache.noRemark = z;
                    loginDialogCache.REMARK_MAXLEN = y;
                    loginDialogCache.extendParam = f;
                    var Q = [];
                    Q = h(Q, m, v, "");
                    Q = D(Q, w, B, F);
                    Q = I(Q, n, b);
                    var N = Q.join("");
                    loginDialogCache.html = N;
                    var O = parseInt(Math.random() * 10000);
                    var L = {boxId: O, boxName: "loginDialog", title: "", htmlContent: N, width: 380};
                    r = Run.popupBox(L);
                    if (w || B || F) {
                        var M = {};
                        M.pid = C;
                        M.mid = e;
                        M.url = q;
                        M.opList = g;
                        M.count = A;
                        M.where = E;
                        $.cookie("forThirtLoginBuy", $.toJSON(M))
                    }
                    if (w) {
                        Run.initQQLogin(G, o, x, z, y, "ld_qqLogin", f)
                    }
                    if (B) {
                        Run.initWBLogin(j, k, x, z, y, "ld_wbLogin", f)
                    }
                    if (F) {
                        Run.initWXLogin(t, d, x, z, y, "ld_wxLogin", f)
                    }
                    c();
                    loginDialogLock = false
                }
            }
        })
    }
    function h(N, L, M, K) {
        N.push("<div id='J_memberLoginDialogPanel' class='memberLoginDialogPanel'>\n");
        N.push("<div class='loginAndRegister'>\n");
        N.push("<div class='login loginDialogSelected'>" + LS.memberLogin + "</div>\n");
        N.push("<div class='register'>" + LS.memberReg + "</div>\n");
        N.push("</div>\n");
        N.push("<div class='splitLine'></div>\n");
        N.push("<div class='memberLoginDialogItemList'>\n");
        N.push("<div id='memberLoginAcct' class='J_memberLoginItem memberLoginDialogItem'>\n");
        N.push("<input id='memberAcct' class='generateInput memberAcctInput' type='text' value='" + ($.cookie("loginMemberAcct") == null ? "" : $.cookie("loginMemberAcct")) + "' placeholder='" + LS.loginDialogAcct + "' />\n");
        N.push("</div>\n");
        N.push("<div id='memberLoginPwd' class='J_memberLoginItem memberLoginDialogItem itemSpace'>\n");
        N.push("<input id='memberPwd' class='generateInput memberPwdInput' type='password' placeholder='" + LS.loginDialogPsw + "' onkeydown='if (Helper.isEnterKey(event)){$(\"#J_memberLoginDialogPanel .J_loginButton\").click();}'/>\n");
        N.push("</div>\n");
        N.push("<div class='J_memberLoginItem memberCaptcha memberLoginDialogItem'>\n");
        N.push("<input id='memberLoginCaptcha' class='memberCaptchaInput' type='text' placeholder='" + LS.loginDialogCaptcha + "' />\n");
        N.push("<img alt='' id='memberCaptchaImg' class='memberCaptchaImg' onclick='Run.changeCaptchaImg(this)' title='" + LS.msgBoradChageValidateCode + "'/>\n");
        N.push("</div>\n");
        if (L || M) {
            N.push("<div class='memberLoginDialogItem'>\n");
            if (L) {
                if (M) {
                    N.push("<div class='autoLogin'>\n");
                    N.push("<input type='checkbox' value='1' id='memberLoginDialogAutoLogin' /><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogRememberMe + "</label><label class='special' for='memberLoginDialogAutoLogin'>" + LS.loginDialogAutoLogin + "</label>\n")
                } else {
                    N.push("<div class='autoLogin autoLogin_noFindPwd g_specialClass'>\n");
                    N.push("<input type='checkbox' value='1' id='memberLoginDialogAutoLogin' /><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogRememberMe + "</label><label for='memberLoginDialogAutoLogin'>" + LS.loginDialogAutoLogin + "</label>\n")
                }
                N.push("</div>\n")
            }
            N.push("<div class='signup'>\n");
            if (M) {
                N.push("<a hidefocus='true' href='javascript:;' onclick='Run.memberFdPwdStepOne(0);return false;'>" + LS.loginDialogFindPsw + "?</a>\n")
            }
            N.push("</div>\n");
            N.push("</div>\n")
        }
        N.push("<div class='memberLoginDialogItem memberLoginDialogItem_Button'>\n");
        N.push("<div class=' J_loginButton loginButton loginButton'>\n");
        N.push("<div class='left'></div>\n");
        N.push("<div class='middle'>" + LS.memberLogin + "</div>\n");
        N.push("<div class='right'></div>\n");
        N.push("</div>\n");
        N.push("</div>\n");
        N.push("</div>\n");
        return N
    }

    function D(N, L, K, M) {
        if (L || K || M) {
            N.push("<div class='thirdPartyLogin'>\n");
            N.push("<div class='thirdPartyTips'>" + LS.loginDialogUseThird + "</div>\n");
            N.push("<div class='thirdPartyGroup'>\n");
            if (L) {
                N.push("<a id='ld_qqLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem qq'></a>")
            }
            if (K) {
                N.push("<a id='ld_wbLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem sina'></a>")
            }
            if (M) {
                N.push("<a id='ld_wxLogin' href='javascript:;' hidefocus='true' class='thirdPartyItem wx'></a>")
            }
            N.push("</div>\n");
            N.push("</div>\n")
        }
        N.push("</div>\n");
        return N
    }

    function I(M, L, K) {
        M.push("<div id='J_memberRegisterDialogPanel' class='memberRegisterDialogPanel' style='display:none;'>\n");
        M.push("<div class='loginAndRegister'>\n");
        M.push("<div class='login'>" + LS.memberLogin + "</div>\n");
        M.push("<div class='register loginDialogSelected'>" + LS.memberReg + "</div>\n");
        M.push("</div>\n");
        M.push("<div class='splitLine'></div>\n");
        M.push("<div class='memberSignupContent' cellpadding='0' cellspacing='0'>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='text' id='memberSignupAcct' placeholder='" + LS.loginDialogAcct + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='password' id='memberSignupPwd' placeholder='" + LS.loginDialogPsw + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push("<div class='memberSignupItem itemSpace'>\n");
        M.push("<div class='itemMiddle'>\n");
        M.push("<input type='password' id='memberSignupRepwd' placeholder='" + LS.loginDialogConfirmPsw + "' maxlength='" + u + "' />\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'>*</div>\n");
        M.push("</div>\n");
        M.push(i);
        if (z) {
            M.push("<div class='memberSignupItem_remark itemSpace'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<textarea id='memberSignupRemark' placeholder='" + LS.loginDialogComment + "' maxlength='" + y + "'></textarea>\n");
            M.push("</div>\n");
            M.push("<div class='itemRight'></div>\n");
            M.push("</div>\n")
        }
        M.push("<div class='memberSignupItem_captcha'>\n");
        M.push("<div class='itemMiddle' style='float:left;width: 150px;'>\n");
        M.push("<input id='memberSignupCaptcha' type='text' maxlength='4' placeholder='" + LS.loginDialogCaptcha + "' onkeydown='if (Helper.isEnterKey(event)){$(\"#J_memberRegisterButton\").click();}'/>\n");
        M.push("</div>\n");
        M.push("<div class='itemRight'><img alt='' id='memberSignupCaptchaImg' class='memberSignupCaptchaImg' onclick='Run.changeCaptchaImg(this)' title='" + LS.msgBoradChageValidateCode + "' src='validateCode.php?" + parseInt(Math.random() * 1000) + "'/></div>\n");
        M.push("</div>\n");
        if (L) {
            M.push("<div class='mobileItem itemSpace'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<input type='text' id='messageAuthCode' maxlength='6' placeholder='" + LS.loginDialogMsgCode + "' />\n");
            M.push("</div>\n");
            M.push("<div class='itemRight'><div title='" + LS.getMobileMsmCode + "' class='getMobileCdBtn' onclick='Run.getSignMobileCode(\"J_memberRegisterDialogPanel\",2)'>" + LS.getMobileMsmCode + "</div></div>\n");
            M.push("</div>\n")
        }
        M.push("</div>\n");
        if (K) {
            M.push("<div class='memberSignupItem_regInfo'>\n");
            M.push("<div class='itemMiddle'>\n");
            M.push("<input type='checkbox' id='memberAgreePro' maxlength='" + y + "' checked /><label for='memberAgreePro'>" + LS.loginDialogReadAndAgree + "</label>\n");
            M.push("<a hidefocus='true' href='mProtocol.php' target='_blank'>《" + LS.loginDialogAgreement + "》</a>\n");
            M.push("</div>\n");
            M.push("</div>\n")
        }
        M.push("<div id='J_memberRegisterButton' class='memberSignupItem_signupButton'>\n");
        M.push("<div class='itemLeft'>&nbsp;</div>\n");
        M.push("<div class='itemMiddle'>" + LS.memberReg + "</div>\n");
        M.push("<div class='itemRight'>&nbsp;</div>\n");
        M.push("</div>\n");
        M.push("</div>\n");
        return M
    }

    function c() {
        $("#J_memberLoginDialogPanel .J_loginButton").off("click").on("click", function () {
            if (!_manageMode) {
                Run.memberLogin4(C, e, q, E, g, A)
            } else {
                Helper.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再登录会员。")
            }
        });
        $("#J_memberRegisterButton").off("click").on("click", function () {
            if (!_manageMode) {
                Run.memberSignupDialogSubmit("J_memberRegisterDialogPanel", Helper.top.location.href, 2, C, e, q, E, g, A)
            } else {
                Helper.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再注册会员。")
            }
        });
        $(".loginAndRegister").find(".login").off("click").on("click", function () {
            $("#J_memberLoginDialogPanel").show();
            $("#J_memberRegisterDialogPanel").hide()
        });
        $(".loginAndRegister").find(".register").off("click").on("click", function () {
            $("#J_memberLoginDialogPanel").hide();
            $("#J_memberRegisterDialogPanel").show()
        });
        $("#J_memberRegisterDialogPanel .memberSignupContent").mCustomScrollbar({
            theme: "greyish-thin",
            scrollSpeed: 10,
            advanced: {updateOnContentResize: true},
            axis: "y",
            callbacks: {}
        })
    }
};
Run.mallBuying = {};
Run.mallBuy2 = function (e, a, p) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行购买。");
        return
    }
    if (typeof(Run.mallBuying[e]) == "undefined") {
        Run.mallBuying[e] = false
    }
    var f = false;
    $.each(Run.mallBuying, function (j, i) {
        if (i) {
            f = true;
            return false
        }
    });
    if (f) {
        return
    }
    Run.mallBuying[e] = true;
    var n = "id=" + e;
    if (a && a != "undefined") {
        var c;
        if (a === "PdSlide") {
            c = $("#fk-productSlideContent")
        } else {
            c = $("#module" + a)
        }
        var q = c.find(".optionMsg");
        if (Helper.isNull(c)) {
            Run.mallBuying[e] = false;
            return
        }
        var r = true;
        var k = [];
        n += "&fromDetail=true";
        var m = $.cookie("isNeedAddCartItem");
        if (typeof m == "undefined" || m == null || m == "") {
            c.find(".optionItemWrap").each(function () {
                var v = $(this);
                if (v.find(".optionItemHover").length == 1) {
                    var u = v.attr("data"), t = v.attr("type"), i = v.find(".optionItemHover").attr("data"), w = {};
                    w.name = u;
                    w.value = parseInt(i);
                    if (t != null) {
                        w.type = parseInt(t)
                    }
                    k.push(w);
                    q.hide()
                } else {
                    var j = v.parent().parent().find(".propName").text();
                    if (j.charAt(j.length - 1) == ":" || j.charAt(j.length - 1) == "：") {
                        j = j.substring(0, j.length - 1)
                    }
                    q.show();
                    q.html(Helper.format(LS.mallCartChoiceItemError, Helper.encodeHtml(j)));
                    if (a === "PdSlide") {
                        var y = $(this).parent().parent().position();
                        var x = $(".fk-slideForProduct .f-propListContent");
                        x.scrollTop(y.top)
                    }
                    r = false;
                    return false
                }
            });
            if (Run.optionsStr.oldOptionsStr != "null" && Run.optionsStr.oldOptionsStr) {
                var o = Run.optionsStr.oldOptionsStr.split("_"), d = [];
                for (var h = 0; h < o.length; h++) {
                    for (var g = 0; g < k.length; g++) {
                        if (k[g].name == o[h]) {
                            d.push(k[g])
                        }
                    }
                }
                k = d
            }
            if (!r) {
                Run.mallBuying[e] = false;
                return false
            }
            if (k.length > 0) {
                n += "&optionList=" + Helper.encodeUrl($.toJSON(k))
            }
            var b = $("#cartbuyCount" + a).val();
            var l = 1;
            if (Helper.isInteger(b)) {
                l = parseInt(b)
            }
            if (l < 1) {
                l = 1
            } else {
                if (l > 9999999) {
                    l = 9999999
                }
            }
            $("#cartbuyCount" + a).val(l);
            n += "&amount=" + l
        } else {
            var s = $.parseJSON(m);
            k = Helper.decodeUrl(s.opList);
            if (typeof k != "undefined" && k != "[]" && k != "") {
                n += "&optionList=" + Helper.encodeUrl(k)
            }
            n += "&amount=" + s.count;
            $.cookie("isNeedAddCartItem", null)
        }
    }
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=addCartItem", data: n, error: function () {
            var j = Run.getDialogHtml({rt: Run.MallAjaxErrno.networkError}, p);
            var i = {htmlContent: j, width: 382, height: 115};
            Run.popupBox(i);
            Run.mallBuying[e] = false
        }, success: function (i) {
            var v = $.parseJSON(i);
            Run.refreshTopAndRightBarMallCartNum();
            if (v.rt == Run.MallAjaxErrno.login) {
                Run.createLoginDialog(e, a, p, "addCartItem", Helper.encodeUrl($.toJSON(k)), l);
                Run.mallBuying[e] = false;
                return
            }
            var w = Run.getDialogHtml(v);
            Run.mallBuying[e] = false;
            if (!w) {
                return
            }
            var u = {};
            var t = parseInt(v.rt);
            if (t == Run.MallAjaxErrno.mallAmountZero || t == Run.MallAjaxErrno.outOfMallAmount) {
                u = {htmlContent: w, width: 240, height: 116, boxName: "mallAmountZero"}
            } else {
                if (t == Run.MallAjaxErrno.OutOfAllowAmount) {
                    u = {htmlContent: w, width: 240, height: 116, boxName: "allowAmountFlow"}
                } else {
                    if (t == Run.MallAjaxErrno.notAdded) {
                        u = {htmlContent: w, width: 240, height: 116, boxName: "notAdded"}
                    } else {
                        if (t == Run.MallAjaxErrno.authMemberNotAllow) {
                            u = {htmlContent: w, width: 240, height: 100, boxName: "authMemberNotAllow"}
                        } else {
                            u = {htmlContent: w, width: 372, height: 150, boxName: "mallBuy"}
                        }
                    }
                }
            }
            var j = Run.popupBox(u)
        }
    });
    if (Helper.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        if (!Helper.isMozilla()) {
            event.stopPropagation();
            event.preventDefault()
        }
    }
};
Run.initOptionsStr = function (a) {
    Run.optionsStr.oldOptionsStr = a
};
Run.optionsStr = {};
Run.mallImmeBuying = false;
Run.mallImmeBuy = function (f, b) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行立刻购买。");
        return
    }
    if (Run.mallImmeBuying) {
        return
    }
    Run.mallImmeBuying = true;
    var n = "id=" + f;
    var d;
    if (b === "PdSlide") {
        d = $("#fk-productSlideContent")
    } else {
        d = $("#module" + b)
    }
    var m = $.cookie("isNeedAddCartItem");
    if (typeof m == "undefined" || m == null || m == "") {
        if (b && b != "undefined") {
            var p = d.find(".optionMsg");
            if (Helper.isNull(d)) {
                return
            }
            var r = true;
            var k = [];
            n += "&fromDetail=true";
            d.find(".optionItemWrap").each(function () {
                var v = $(this);
                if (v.find(".optionItemHover").length == 1) {
                    var u = v.attr("data"), t = v.attr("type"), i = v.find(".optionItemHover").attr("data"), w = {};
                    w.name = u;
                    w.value = parseInt(i);
                    if (t != null) {
                        w.type = parseInt(t)
                    }
                    k.push(w);
                    p.hide()
                } else {
                    var j = v.parent().parent().find(".propName").text();
                    if (j.charAt(j.length - 1) == ":" || j.charAt(j.length - 1) == "：") {
                        j = j.substring(0, j.length - 1)
                    }
                    p.show();
                    p.html(Helper.format(LS.mallCartChoiceItemError, Helper.encodeHtml(j)));
                    if (b === "PdSlide") {
                        var y = $(this).parent().parent().position();
                        var x = $(".fk-slideForProduct .f-propListContent");
                        x.scrollTop(y.top)
                    }
                    r = false;
                    return false
                }
            });
            if (Run.optionsStr.oldOptionsStr != "null" && Run.optionsStr.oldOptionsStr) {
                var o = Run.optionsStr.oldOptionsStr.split("_"), e = [];
                for (var h = 0; h < o.length; h++) {
                    for (var g = 0; g < k.length; g++) {
                        if (k[g].name == o[h]) {
                            e.push(k[g])
                        }
                    }
                }
                k = e
            }
            if (!r) {
                Run.mallImmeBuying = false;
                return false
            }
            if (k.length > 0) {
                n += "&optionList=" + Helper.encodeUrl($.toJSON(k))
            }
        }
        var q = $("#cartbuyCount" + b), c = q.val(), l = 1;
        if (Helper.isInteger(c)) {
            l = parseInt(c)
        }
        if (l < 1) {
            l = 1
        } else {
            if (l > 9999999) {
                l = 9999999
            }
        }
        q.val(l);
        var a = {pid: f, amount: l, optList: $.toJSON(k)};
        n += "&amount=" + l + "&codata=" + $.toJSON(a)
    } else {
        var k = [];
        var s = $.parseJSON(m);
        k = Helper.decodeUrl(s.opList);
        if (b && b != "undefined") {
            n += "&fromDetail=true";
            if (typeof k != "undefined" && k != "[]" && k != "") {
                n += "&optionList=" + Helper.encodeUrl(k)
            }
        }
        var a = {pid: s.pid, amount: s.count, optList: $.toJSON(k)};
        n += "&amount=" + s.count + "&codata=" + $.toJSON(a);
        $.cookie("isNeedAddCartItem", null)
    }
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=addIme", data: n, error: function () {
            Run.mallImmeBuying = false;
            Helper.ing(LS.networkError, true)
        }, success: function (i) {
            Run.mallImmeBuying = false;
            var j = $.parseJSON(i);
            if (j.rt == Run.MallAjaxErrno.login) {
                Run.createLoginDialog(f, b, "", "immeBuy", Helper.encodeUrl($.toJSON(k)), l)
            } else {
                if (j.rt == Run.MallAjaxErrno.mallAmountZero) {
                    Helper.ing(LS.mallAmountZero, true)
                } else {
                    if (j.rt == Run.MallAjaxErrno.mallOptionStop) {
                        Helper.ing(LS.mallOptionStop, true)
                    } else {
                        if (j.rt == Run.MallAjaxErrno.outOfMallAmount) {
                            Helper.ing(LS.mallAmountOverFlow, true)
                        } else {
                            if (j.rt == Run.MallAjaxErrno.OutOfAllowAmount) {
                                Helper.ing(LS.allowAmountOverFlow, true)
                            } else {
                                if (j.rt == Run.MallAjaxErrno.notAdded) {
                                    Helper.ing(LS.mallProductNotAdded, true)
                                } else {
                                    if (j.rt == Run.MallAjaxErrno.authMemberNotAllow) {
                                        Helper.ing(j.data + LS.authLevelBuy, true)
                                    } else {
                                        Helper.top.location.href = "mstl.php?imme"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    });
    if (Helper.isIE()) {
        window.event.cancelBubble = true;
        window.event.returnValue = false
    } else {
        if (!Helper.isMozilla()) {
            event.stopPropagation();
            event.preventDefault()
        }
    }
};
Run.desMallCartAmount = function (c, d, g, m, h, r, f) {
    var e = Helper.top.$("#module" + c);
    var q = e.find(".itemLine" + d);
    var o = q.find(".amountEdit");
    var l = parseInt(o.val());
    var k = q.find(".J_mcart-pdSelect").prop("checked");
    var j = l;
    l--;
    if (l < h || l == h) {
        l = h;
        $("#buyCountDes" + c + "_" + d).addClass("disableMallJian");
        $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
    } else {
        if (l > 9999998) {
            l = 9999999;
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
        } else {
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
        }
    }
    o.val(l);
    if (j != l && k) {
        Run.mallCartAmountChange(c, d, g, m, h, r, f)
    } else {
        var b = parseFloat(q.find(".amountEdit").attr("_itemprice"), 2);
        var n = parseInt(q.find(".amountEdit").val());
        var i = (b * n);
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            i = Helper.formatPriceEn(i)
        } else {
            i = i.toFixed(2)
        }
        q.find(".itemTotalText").text(i)
    }
};
Run.incMallCartAmount = function (c, d, g, m, h, r, f) {
    var e = Helper.top.$("#module" + c);
    var q = e.find(".itemLine" + d);
    var o = q.find(".amountEdit");
    var l = parseInt(o.val());
    var j = l;
    var k = q.find(".J_mcart-pdSelect").prop("checked");
    l++;
    if (l < 2) {
        l = 1;
        $("#buyCountDes" + c + "_" + d).addClass("disableMallJian");
        $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
    } else {
        if ((l > r || l == r) && r != 0) {
            l = r;
            $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
            $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
        } else {
            if (l > 9999998) {
                l = 9999999;
                $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
                $("#buyCountInc" + c + "_" + d).addClass("disableMallJia")
            } else {
                $("#buyCountDes" + c + "_" + d).removeClass("disableMallJian");
                $("#buyCountInc" + c + "_" + d).removeClass("disableMallJia")
            }
        }
    }
    o.val(l);
    if (j != l && k) {
        Run.mallCartAmountChange(c, d, g, m, h, r, f)
    } else {
        var b = parseFloat(q.find(".amountEdit").attr("_itemprice"), 2);
        var n = parseInt(q.find(".amountEdit").val());
        var i = (b * n);
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            i = Helper.formatPriceEn(i)
        } else {
            i = i.toFixed(2)
        }
        q.find(".itemTotalText").text(i)
    }
};
Run.mallCartAmountChange = function (a, b, e, l, i, n, d) {
    var c = Helper.top.$("#module" + a);
    var m = c.find(".itemLine" + b);
    var f = m.find(".amountEdit");
    var h = f.val();
    var g = 1;
    var j = m.find(".J_mcart-pdSelect").prop("checked");
    if (Helper.isInteger(h)) {
        g = parseInt(h)
    }
    if (g < i) {
        g = i;
        $("#buyCountDes" + a + "_" + b).addClass("disableMallJian");
        $("#buyCountInc" + a + "_" + b).removeClass("disableMallJia")
    } else {
        if ((g > n || g == n) && n != 0) {
            g = n;
            $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
            $("#buyCountInc" + a + "_" + b).addClass("disableMallJia")
        } else {
            if (g > d) {
                g = d;
                Helper.ing(LS.mallAmountOverFlow, true);
                $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
                $("#buyCountInc" + a + "_" + b).addClass("disableMallJia")
            } else {
                if (g > 9999998) {
                    g = 9999999;
                    $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
                    $("#buyCountInc" + a + "_" + b).addClass("disableMallJia")
                } else {
                    $("#buyCountDes" + a + "_" + b).removeClass("disableMallJian");
                    $("#buyCountInc" + a + "_" + b).removeClass("disableMallJia")
                }
            }
        }
    }
    f.val(g);
    var k = c.find(".cartMsg");
    if (isNaN(g) || g <= 0 || g > 9999999) {
        k.html(LS.mallCartAmountError);
        return
    }
    c.find(".amountEdit").attr("disabled", true);
    k.show();
    if (c.find(".mallCartNew").length > 0) {
        k.hide()
    }
    k.html(LS.mallCartUpdating);
    $.ajax({
        type: "post",
        url: "ajax/order_h.php?cmd=setItem&orderId=" + e,
        data: "itemId=" + l + "&amount=" + g,
        error: function () {
            c.find(".amountEdit").removeAttr("disabled");
            k.html(LS.mallCartUpdateError)
        },
        success: function (o) {
            c.find(".amountEdit").removeAttr("disabled");
            var o = jQuery.parseJSON(o);
            if (o.success) {
                k.html(LS.mallCartUpdateOk);
                Run.reCountCartMoney(c)
            } else {
                if (o.rt == -3) {
                    k.html(LS.mallCartUpdateNotFound)
                } else {
                    if (o.rt == -9) {
                        k.html(LS.mallCartUpdateStatusError)
                    } else {
                        k.html(LS.mallCartUpdateError)
                    }
                }
            }
        }
    })
};
Run.reCountCartMoney = function (d) {
    var b = d.find(".cartTotalValue");
    var g = b.attr("choiceCurrencyVal");
    var c = b.attr("levelDiscount");
    var a = b.attr("levelName");
    var f = 0;
    var e = 0;
    d.find(".itemListcount").each(function () {
        var p = $.parseJSON($(this).attr("saleInfo"));
        var n = $(this).find(".itemLine");
        if (d.find(".J_mallCart").hasClass("mallCartNew")) {
            n = $(this).find(".goodsInfoLine")
        }
        if (typeof(n) != "undefined" && n != null && n.length > 0) {
            var u = 0;
            if (typeof(p) != "undefined" && p != null && Run.checkSaleProVal(p)) {
                var j = $(this).attr("lineno");
                var q = p.other.ruleData.d;
                if (p.other.ruleData.s == "1" || p.other.ruleData.s == "2") {
                    var h = 0;
                    var l = 0;
                    n.each(function () {
                        var i = Run.getEachItemPrice(this);
                        var v = $(this).find(".J_mcart-pdSelect").prop("checked");
                        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                            $(this).find(".itemTotalText").text(Helper.formatPriceEn(i))
                        } else {
                            $(this).find(".itemTotalText").text(i.toFixed(2))
                        }
                        if (v) {
                            l += i
                        }
                    });
                    var q = p.other.ruleData.d;
                    var t = 0;
                    var m = 0;
                    for (var o = 0; o < q.length; o++) {
                        var s = parseFloat(q[o].m);
                        var k = parseFloat(q[o].n);
                        if (s <= 0) {
                            s = 0;
                            k = 0
                        }
                        if (l >= s) {
                            if (s > t) {
                                t = s;
                                m = k
                            }
                        }
                    }
                    f += l;
                    e += l - m;
                    if (m > 0) {
                        var r = [];
                        r.push("<div class='needPay'>");
                        r.push(g + (l - m).toFixed(2));
                        r.push("</div>");
                        r.push("<div class='itemTotalPay'>");
                        r.push(g + l.toFixed(2));
                        r.push("</div>");
                        $(".J_salePrice_" + j).html(r.join(""));
                        $(".J_salePrice_" + j).css("bottom", "1px");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectGray")
                    } else {
                        $(".J_salePrice_" + j).removeAttr("style");
                        $(".J_salePrice_" + j).html(g + l.toFixed(2));
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceRed");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectGray");
                        $(".J_salePrice_" + j).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectRed")
                    }
                }
            } else {
                n.each(function () {
                    p = $.parseJSON($(this).attr("saleInfo"));
                    var v = $(this).find(".J_mcart-pdSelect").prop("checked");
                    var i = Run.getEachItemPrice(this);
                    if (v) {
                        u += i;
                        f += i
                    }
                    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                        $(this).find(".itemTotalText").text(Helper.formatPriceEn(i))
                    } else {
                        $(this).find(".itemTotalText").text(i.toFixed(2))
                    }
                })
            }
            e += u
        }
    });
    Run.refreshTopAndRightBarMallCartNum();
    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
        if (d.has("mallCartNew")) {
            $(".J_countTotal").html(LS.goodsTotalMoney + "<span class='countTotalText'>" + g + Helper.formatPriceEn(f) + "</span>");
            $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.offsetMoney + "<span class='countSaveText'>" + g + Helper.formatPriceEn(f - e) + "</span>");
            d.find(".cartTotalValue").html("<span class='currencyValText'>" + g + "</span>" + Helper.formatPriceEn(e))
        } else {
            $(".J_countTotal").html(LS.shoppingCartCountMoney + g + Helper.formatPriceEn(f));
            $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.shoppingCartCountReduce + g + Helper.formatPriceEn(f - e));
            d.find(".cartTotalValue").html(g + Helper.formatPriceEn(e))
        }
    } else {
        if (d.has("mallCartNew")) {
            $(".J_countTotal").html(LS.goodsTotalMoney + "<span class='countTotalText'>" + g + f.toFixed(2) + "</span>");
            $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.offsetMoney + "<span class='countSaveText'>" + g + (f - e).toFixed(2) + "</span>");
            d.find(".cartTotalValue").html("<span class='currencyValText'>" + g + "</span>" + e.toFixed(2))
        } else {
            $(".J_countTotal").html(LS.shoppingCartCountMoney + g + f.toFixed(2));
            $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.shoppingCartCountReduce + g + (f - e).toFixed(2));
            d.find(".cartTotalValue").html(g + e.toFixed(2))
        }
    }
};
Run.getEachItemPrice = function (d) {
    var c = parseFloat($(d).find(".amountEdit").attr("_itemprice"), 2);
    var b = parseInt($(d).find(".amountEdit").val());
    if (isNaN(b)) {
        return parseFloat($(d).find(".itemTotalText").html())
    } else {
        return (c * b)
    }
};
Run.showSaleRedPromotion = function (e, c, a, m, k) {
    if (typeof(e) == "undefined" || typeof(c) == "undefined" || e == null || c == null) {
        return
    }
    if (c < 0) {
        return
    }
    var h = $(".showRedsalePro").eq(0).width();
    var l = $(".J_fullReduceCalss_" + c).eq(0).width();
    if (Run.checkSaleProVal(e)) {
        var f = e.other.ruleData.d;
        if (f.length > 0) {
            var g = "";
            var b = [];
            for (var d = 0; d < f.length; d++) {
                if (typeof(f[d].m) != "undefined" && typeof(f[d].n) != "undefined") {
                    if (d != 0) {
                        b.push(LS.comma)
                    }
                    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                        b.push(Helper.format(LS.salePromotionFullReduce, Helper.formatPriceEn(f[d].m, null, true), Helper.formatPriceEn(f[d].n, null, true)))
                    } else {
                        b.push(Helper.format(LS.salePromotionFullReduce, f[d].m, f[d].n))
                    }
                }
            }
            if (e.other.ruleData.s == "1") {
                g = Helper.format(LS.salePromotionSigle, b.join(""))
            } else {
                if (e.other.ruleData.s == "2") {
                    g = Helper.format(LS.salePromotionGroup, b.join(""))
                }
            }
            $(".J_saleWord_" + c).css({left: (45 + l) + "px", width: (h - 235 - l) + "px"});
            $(".J_saleWord_" + c).html(g);
            $(".J_saleWord_" + c).attr("title", g)
        }
    }
    if (typeof(a) == "undefined" || typeof(m) == "undefined" || typeof(k) == "undefined" || a == null || m == null || k == null) {
        return
    }
    if (a == m) {
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            $(".J_salePrice_" + c).html(k + Helper.formatPriceEn(a))
        } else {
            $(".J_salePrice_" + c).html(k + a.toFixed(2))
        }
    } else {
        var j = [];
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            j.push("<div class='needPay'>");
            j.push(k + Helper.formatPriceEn(a));
            j.push("</div>");
            j.push("<div class='itemTotalPay'>");
            j.push(k + Helper.formatPriceEn(m));
            j.push("</div>")
        } else {
            j.push("<div class='needPay'>");
            j.push(k + a.toFixed(2));
            j.push("</div>");
            j.push("<div class='itemTotalPay'>");
            j.push(k + m.toFixed(2));
            j.push("</div>")
        }
        $(".J_salePrice_" + c).html(j.join(""));
        $(".J_salePrice_" + c).css("bottom", "1px");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalss").addClass("fullReduceRed");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalss").removeClass("fullReduceGray");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalssRect").addClass("fullReduceRectRed");
        $(".J_salePrice_" + c).parent(".showRedsalePro").find(".fullReduceCalssRect").removeClass("fullReduceRectGray")
    }
};
Run.showCountPrice = function (e, b, g, c, a, d) {
    if (typeof(e) == "undefined" || typeof(b) == "undefined" || typeof(g) == "undefined" || e == null || b == null || g == null) {
        return
    }
    var h = b - e;
    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
        h = Helper.formatPriceEn(h);
        b = Helper.formatPriceEn(b);
        e = Helper.formatPriceEn(e)
    } else {
        h = h.toFixed(2);
        b = b.toFixed(2);
        e = e.toFixed(2)
    }
    if (d) {
        $(".J_countTotal").html(LS.goodsTotalMoney + "<span class='countTotalText'>" + g + b + "</span>");
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.offsetMoney + "<span class='countSaveText'>" + g + h + "</span>");
        var f = [];
        f.push("<span class='cartTotalName'>");
        f.push(LS.finalPayMoney);
        f.push("</span>");
        f.push("<span class='cartTotalValue mCart_color' choiceCurrencyVal ='" + g + "' levelDiscount='" + c + "' levelName='" + a + "'  >");
        f.push("<span class='currencyValText'>" + g + "</span>" + e);
        f.push("</span>");
        $(".J_countNeedPay").html(f.join(""))
    } else {
        $(".J_countTotal").html(LS.shoppingCartCountMoney + g + b);
        $(".J_countSave").html("&nbsp;&nbsp;&nbsp;" + LS.shoppingCartCountReduce + g + h);
        var f = [];
        f.push("<span class='cartTotalName'>");
        f.push(LS.shouldPayMoney);
        f.push("</span>");
        f.push("<span class='cartTotalValue g_stress' choiceCurrencyVal ='" + g + "' levelDiscount='" + c + "' levelName='" + a + "'  >");
        f.push(g + e);
        f.push("</span>");
        $(".J_countNeedPay").html(f.join(""))
    }
};
Run.showSaleMemOrRedPrice = function (d, a, i, h, b) {
    if (typeof(d) != "undefined" && d != null) {
        if (Run.checkSaleProVal(d)) {
            var e = d.other.ruleData.d;
            if (e.length > 0) {
                var f = "";
                var c = e[0].m;
                if (d.other.ruleData.s == "1") {
                    if (_lcid == 2052 || _lcid == 1028) {
                        f = Helper.format(LS.salePromotionPdDisCount, c.toFixed(1))
                    } else {
                        f = Helper.format(LS.salePromotionPdDisCount, Helper.formatPriceEn(10 * (10 - c), 1))
                    }
                } else {
                    if (d.other.ruleData.s == "2") {
                        if (_lcid == 2052 || _lcid == 1028) {
                            f = Helper.format(LS.salePromotionPdLapse, h + c.toFixed(2))
                        } else {
                            f = Helper.format(LS.salePromotionPdLapse, h + Helper.formatPriceEn(c))
                        }
                    }
                }
                var g = [];
                g.push("<div class='saleMemOrRedName'>");
                g.push("<table cellpadding='0' cellspacing='0'><tr>");
                g.push("<td>");
                g.push(LS.salePromotionName);
                g.push("</td>");
                g.push("<td>");
                g.push("<div class='saleMemOrJt'>");
                g.push("</div>");
                g.push("</td>");
                g.push("</tr></table>");
                g.push("</div>");
                g.push("<div class='saleMemOrRedVal'>");
                g.push(LS.salePromotionActivity + Helper.encodeHtml(d.name));
                g.push("<div style='height:3px;'></div>");
                g.push(f);
                g.push("</div>");
                $(".J_itemPrice_" + b).filter(":not('.mallCartNew .J_itemPrice_" + b + "')").css("margin-top", "-18px");
                $(".J_saleMemOrRedPrice_" + b).html(g.join(""))
            }
        }
    } else {
        if (a > 0 && a < 1) {
            var g = [];
            g.push("<div class='saleMemOrRedName'>");
            g.push("<table cellpadding='0' cellspacing='0'><tr>");
            g.push("<td>");
            g.push(LS.memberPrice);
            g.push("</td>");
            g.push("<td>");
            g.push("<div class='saleMemOrJt'>");
            g.push("</div>");
            g.push("</td>");
            g.push("</tr></table>");
            g.push("</div>");
            g.push("</div>");
            g.push("<div class='saleMemOrRedVal'>");
            a = Math.round(a * 100);
            g.push(i + Helper.format(LS.salePromotionRedVal, "*" + a + "%"));
            g.push("</div>");
            $(".J_itemPrice_" + b).filter(":not('.mallCartNew .J_itemPrice_" + b + "')").css("margin-top", "-18px");
            $(".J_saleMemOrRedPrice_" + b).html(g.join(""))
        }
    }
};
Run.checkSaleProVal = function (a) {
    if (typeof(a.other) != "undefined") {
        if (typeof(a.other.ruleData) != "undefined") {
            if (typeof(a.other.ruleData.s) != "undefined" && typeof(a.other.ruleData.d) != "undefined") {
                if (a.other.ruleData.d != null && a.other.ruleData.d.length > 0) {
                    return true
                }
            }
        }
    }
    return false
};
Run.showSaleMemOrRedValInIE = function () {
    $(".saleProSignHover").hover(function () {
        $(this).find(".saleMemOrRedName").css("border-bottom-width", "0px");
        $(this).find(".saleMemOrRedVal").css({"background-color": "#ffefe9", display: "block"});
        $(this).find(".saleMemOrJt").addClass("saleMemOrJtUp")
    }, function () {
        $(this).find(".saleMemOrRedName").css("border-bottom-width", "1px");
        $(this).find(".saleMemOrRedVal").css({"background-color": "#ffefe9", display: "none"});
        $(this).find(".saleMemOrJt").removeClass("saleMemOrJtUp")
    })
};
Run.mallCartItemDel = function (h, e, a, g, d, c) {
    var b = Helper.top.$("#module" + h);
    var f = b.find(".cartMsg");
    f.show();
    if (b.find(".mallCartNew").length > 0) {
        f.hide()
    }
    f.html(LS.mallCartUpdating);
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=delItem&orderId=" + a, data: "itemId=" + g, error: function () {
            f.html(LS.mallCartUpdateError)
        }, success: function (s) {
            var s = jQuery.parseJSON(s);
            if (s.success) {
                f.html(LS.mallCartUpdateOk);
                var q = b.find(".itemLine" + e);
                var p = q.parent();
                var m = p.find(".itemLine");
                var j = m.length;
                var n = 0;
                for (var l = 0; l < j; l++) {
                    if (q.attr("class") == m.eq(l).attr("class")) {
                        n = l;
                        break
                    }
                }
                if (j > 1) {
                    if (n == (j - 1)) {
                        p.find(".separatorLine").eq((n - 1)).remove();
                        var k = m.eq((j - 1)).find(".J_saleXuXian").attr("style");
                        m.eq((j - 2)).find(".J_saleXuXian").attr("style", k)
                    } else {
                        b.find(".separatorLine" + e).remove()
                    }
                }
                q.remove();
                if (j == 1) {
                    var o = p.attr("lineno");
                    b.find(".J_saleRemove_" + o).remove()
                }
                setTimeout(function () {
                    var i = b.find(".J_saleTabItem_" + c).length;
                    if (i <= 0) {
                        b.find(".J_saleTabRemove_" + c).remove()
                    }
                }, 100);
                var r = b.find(".itemLine");
                if (r.length == 0) {
                    Helper.top.location.reload()
                } else {
                    Run.reCountCartMoney(b)
                }
            } else {
                if (s.rt == -3) {
                    f.html(LS.mallCartUpdateNotFound)
                } else {
                    if (s.rt == -9) {
                        f.html(LS.mallCartUpdateStatusError)
                    } else {
                        f.html(LS.mallCartUpdateError)
                    }
                }
                if (b.find(".mallCartNew").length > 0) {
                    f.hide()
                }
            }
        }
    })
};
Run.mallSettle = function (b) {
    var c = $(".J_mcart-pdSelect").not("input:checked");
    var a = $(".J_mcart-pdSelect").filter("input:checked");
    var d = new Array();
    $(c).each(function () {
        var e = $(this).attr("itemId");
        d.push(e)
    });
    $(".J_mallCart .itemInvalid").each(function () {
        var e = $(this).attr("itemid");
        d.push(e)
    });
    if (a.length > 500) {
        Helper.ing(LS.mcartTooLong)
    } else {
        if (a.length) {
            if (b > 0) {
                Helper.top.location.href = "mstl.php?id=" + b + "&unCheckedItemIds=" + d
            } else {
                Helper.top.location.href = "mstl.php"
            }
        } else {
            Helper.ing(LS.mallSelectSettleItem)
        }
    }
};
Run.mallSelectAllShop = function (g, e) {
    var d = $("#module" + g), f = d.find("#selectAll"), h = d.find(".J_mcart-pdSelect"),
        b = d.find(".J_mcart-pdSelect:checked"), a = h.not("input:checked");
    var c = f.prop("checked");
    if (!e) {
        if (c) {
            a.click();
            f.prop("checked", true)
        } else {
            b.click();
            f.prop("checked", false)
        }
    } else {
        h.prop("checked", c)
    }
    Run.setCheckBoxToFalgDiv(d)
};
Run.mallSelectShop = function (a, b, e, h, f, d) {
    var c = $("#module" + a), i = c.find(".J_mcart-pdSelect"), g = c.find("#selectAll");
    g.prop("checked", true);
    $.each(i, function (j, k) {
        if (!$(k).prop("checked")) {
            g.prop("checked", false);
            return false
        }
    });
    if (!f) {
        Run.mallCartAmountChange(a, b, e, h, d)
    }
    Run.setCheckBoxToFalgDiv(c)
};
Run.mallStlPayMode = function (b, c) {
    var a = Helper.top.$("#module" + b);
    a.find("input[name=mallPay]").val(c);
    if (c == 2) {
        a.find(".bankList").show()
    } else {
        a.find(".bankList").hide()
    }
    if (c == 3 || c == 4 || c == 5 || c == 6 || c == 7 || c == 9 || c == 8 || c == 10) {
        a.find(".payOnlinePanel").show();
        a.find(".payOnlinePanel input[value='" + c + "']").click();
        if (c === 8) {
            $(a.find(".payOnlinePanel input[type='radio']")[0]).click()
        }
    } else {
        a.find(".payOnlinePanel").hide()
    }
};
Run.mallStlCalcTotal = function (a) {
    var b = Helper.top.$("#module" + a);
    var e = parseFloat(b.find(".cartTotal").attr("pay_price"));
    if (isNaN(e)) {
        return
    }
    var c = parseFloat(b.find("input[name=mallShip]:checked").attr("price"));
    if (isNaN(c)) {
        c = 0
    }
    if ($("#mallShipTemplate_province").length > 0) {
        var i = b.find("input[name=mallShip]:checked");
        i.attr("provinceCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area1")));
        i.attr("cityCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area2")));
        i.attr("countyCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area3")));
        i.attr("isCus", $.trim($("#mallShipTemplate_areaBoxInput").attr("isCus")))
    }
    var f = 0;
    if ($("#offsetMoney").length > 0) {
        var h = $("#offsetMoney").attr("_offsetmoney");
        if (!isNaN(h)) {
            f = parseFloat(h);
            if ((e + c) < f) {
                Helper.ing(Helper.format(LS.integral_maxUse, $("#useItg").attr("_maxuse"), Helper.encodeHtml($("#useItg").attr("__itegName"))), true);
                $("#useItg").focus();
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    b.find(".mallStlTotal .totalValue").text(Helper.formatPriceEn(e + c))
                } else {
                    b.find(".mallStlTotal .totalValue").text((e + c).toFixed(2))
                }
                return
            }
        }
    }
    var g = 0;
    if ($("#couponOffsetMoney").length > 0) {
        var h = $("#couponOffsetMoney").attr("_offsetmoney");
        if (!isNaN(h)) {
            g = parseInt(h)
        }
    }
    if (e < (f + g)) {
        return false
    }
    var d = parseInt(b.find("#presentItg").attr("value"));
    if (d > 0) {
        b.find("#presentItg").text(parseInt((e - f - g).toFixed(2) * d))
    }
    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
        b.find("#shippingMoneyVal").text(Helper.formatPriceEn(c)).attr("_shipmoney", c);
        b.find(".mallStlTotal .totalValue").text(Helper.formatPriceEn(e + c - f - g))
    } else {
        b.find("#shippingMoneyVal").text(c.toFixed(2)).attr("_shipmoney", c);
        b.find(".mallStlTotal .totalValue").text((e + c - f - g).toFixed(2))
    }
};
Run.mallStlChangeBank = function (a) {
    $("#" + a).attr("checked", true)
};
Run.mallNumeric = function (a) {
    $("#module" + a + " .numeric").numeric({decimal: " ", negative: false})
};
Run.getBackgroundColor = function (a) {
    var b = "";
    while (a[0].tagName.toLowerCase() != "html") {
        b = a.css("background-color");
        if (b != "rgba(0, 0, 0, 0)" && b != "transparent") {
            break
        }
        a = a.parent()
    }
    return b
};
Run.getMallSubmitData = function (f, u, s, e, p) {
    var j = "";
    f.find(".propItemValue").each(function () {
        var z = $(this), C = z.attr("_required") == 1;
        if (z.hasClass("J-pccS") && p) {
            var E = ($("#areaBoxInput").attr("isCus") == 1);
            var x = $("#areaBoxInput").attr("area1");
            if (C && (x == null || x == "")) {
                j = LS.mallStlSubmitAddrErr;
                return false
            }
            var A = $("#areaBoxInput").attr("area2");
            if (C && !E && (A == null || A == "")) {
                j = LS.mallStlSubmitAddrErr;
                return false
            }
            var G = $("#areaBoxInput").attr("area3"), v = $("#addrInfo_street"),
                H = $.trim($("#addrInfo_street").val());
            if (C && H === "") {
                j = LS.editStreetAddr;
                return false
            }
            var B = $("#areaBoxInput").val().replace(/-/g, "") + H;
            if (e != 0) {
                var D = {};
                D.provinceCode = x;
                D.cityCode = A;
                D.countyCode = G;
                D.streetAddr = H;
                s.addr_info = D;
                s.addr = B;
                s.isDefault = 1
            }
            u.addr = B
        } else {
            var F = z.attr("_field");
            var w;
            var y;
            if (F == "mobile") {
                w = z.find("input").val();
                if (w.length > 0) {
                    if (!Helper.isNationMobile(w)) {
                        j = LS.mallStlSubmitInput2 + z.attr("_prop");
                        return false
                    } else {
                        y = z.find("select").val()
                    }
                } else {
                    y = ""
                }
            } else {
                w = z.find("input").val()
            }
            if (C == 1 && !w) {
                j = LS.mallStlSubmitInput + z.attr("_prop");
                return false
            }
            if (w && w.length > 0) {
                if (F === "email" && !Helper.isEmail(w)) {
                    j = LS.mallStlSubmitInput2 + z.attr("_prop");
                    return false
                }
                if (F === "phone" && !Helper.isPhone(w)) {
                    j = LS.mallStlSubmitInput2 + z.attr("_prop");
                    return false
                }
            }
            if (typeof F !== "undefined") {
                u[F] = w;
                if (e != 0 && p) {
                    s[F] = w;
                    if (F == "mobile" && w.length > 0) {
                        s.mobileCt = y
                    }
                }
                if (F == "mobile" && w.length > 0) {
                    u.mobileCt = y
                }
            }
        }
    });
    if (j != "") {
        return j
    }
    if (Run.orderMessageOpen) {
        var o = Helper.decodeHtml($("#orderLeveaMsgIn").val());
        if (o.length > Run.orderMessageMaxNum) {
            o = o.substring(0, Run.orderMessageMaxNum)
        }
        if (o !== Run.orderLeveaMsgTip) {
            u.msg = o
        } else {
            u.msg = ""
        }
    } else {
        u.msg = ""
    }
    var c = f.find("input[name=mallShip]:checked");
    if ($("#mallShipTemplate_province").length === 1 && c.length === 1) {
        var i = parseInt(c.attr("provinceCode")), l = parseInt(c.attr("cityCode")), h = parseInt(c.attr("countyCode")),
            b = (c.attr("isCus") == 1);
        if (!i || isNaN(i) || (!site_cityUtil.isValidProvince(i) && !b)) {
            j = LS.mallStlSubmitAddrErr;
            return j
        }
        if ((!l || isNaN(l) || !site_cityUtil.isValidCity(l, i)) && !b) {
            j = LS.mallStlSubmitAddrErr;
            return j
        }
        if (isNaN(i)) {
            i = -1
        }
        if (isNaN(l)) {
            l = -1
        }
        if (isNaN(h)) {
            h = -1
        }
        var k = {
            type: parseInt(c.val()),
            templateId: parseInt(c.attr("templateId")),
            provinceCode: i,
            cityCode: l,
            countyCode: h,
            isCus: b,
            streetAddr: $.trim($("#streetAddress").val())
        };
        if ($.trim($("#streetAddress").val()) == "") {
            k.streetAddr = $.trim($("#addrInfo_street").val())
        }
        u.shipType = k
    } else {
        if (c.length === 1) {
            u.shipType = parseInt(c.val())
        }
    }
    var m = f.find("input[name=mallPay]:checked");
    if (m.length == 1) {
        u.payMode = parseInt(m.val())
    }
    var n = parseInt(m.val());
    var t = $("#useItg");
    if (t.length > 0) {
        var d = t.val();
        if (Helper.isInteger(d)) {
            var g = parseInt(t.attr("_maxUse")), a = parseInt(t.attr("_currentitg")), r = t.attr("_itgname");
            if (d > a) {
                j = Helper.format(LS.integral_notOverCurrent, Helper.encodeHtml(r), Helper.encodeHtml(r));
                return j
            }
            if (d > g) {
                j = Helper.format(LS.integral_notOver, Helper.encodeHtml(r), g);
                return j
            }
            if (d < 0) {
                j = LS.integral_inputInteger;
                return j
            }
            u.useItg = parseInt(d)
        } else {
            if (d.length != 0) {
                j = LS.integral_inputInteger;
                return j
            }
        }
    }
    if ($("#presentItgShow").length > 0) {
        u.presentItg = true
    }
    if ($("#couponList  input:checked").length > 0) {
        var q = $("#couponList  input:checked").attr("data_id");
        u.cdId = Number(q)
    }
    return j
};
Run.mallImmeSubmit = function (c, l, n, j) {
    var i = {}, e = {}, c = Helper.top.$("#module" + c), f = c.find(".stlMsg");
    var d = Run.getMallSubmitData(c, i, e, l, n);
    if (d != "") {
        f.show();
        f.html(d);
        Run.scrollToDiv(c);
        return
    }
    var b = c.find(".mallStlOpt input");
    b.attr("disabled", true);
    f.show();
    f.html(LS.mallStlSubmitting);
    Run.scrollToDiv(c);
    if (l != 0 && n) {
        var k = {}, g = [];
        g.push(e);
        k.addrInfoList = g;
        $.ajax({
            type: "post",
            url: action = "ajax/memberAdm_h.php?cmd=set&opera=addAddr&id=" + l,
            data: "info=" + Helper.encodeUrl($.toJSON(k)),
            success: function (o) {
            },
            error: function () {
            }
        })
    }
    if (i.payMode == 5) {
        var m = i.name;
        var a = new RegExp("[\\u4E00-\\u9FFF]+", "g");
        if (m) {
            if (m.length < 2) {
                if (!a.test(m)) {
                    f.hide();
                    Run.scrollToDiv(c);
                    Helper.ing(LS.orderValidRecvName);
                    b.attr("disabled", false);
                    return
                }
            }
        } else {
            if (l != 0 && j) {
                var h = "";
                if (j.length < 2) {
                    if (!a.test(m)) {
                        h = "会员"
                    }
                }
                i.name = h + j
            } else {
                i.name = "游客"
            }
        }
    }
    $.ajax({
        type: "post",
        url: "ajax/order_h.php?cmd=settle&imme",
        data: "data=" + Helper.encodeUrl($.toJSON(i)),
        error: function () {
            b.removeAttr("disabled");
            f.html(LS.mallStlSubmitError)
        },
        success: function (o) {
            b.removeAttr("disabled");
            var o = jQuery.parseJSON(o);
            if (o.success) {
                Helper.top.location.href = "mdetail.php?id=" + o.oid + "&suc=1"
            } else {
                if (o.rt == -3) {
                    f.html(LS.mallStlSubmitNotFound)
                } else {
                    if (o.rt == -9) {
                        f.html(LS.mallStlSubmitStatusError)
                    } else {
                        if (o.rt == Run.MallAjaxErrno.outOfMallAmount) {
                            f.html(Helper.format(LS.mallAmountOverNameList, o.productsName))
                        } else {
                            f.html(LS.mallStlSubmitError)
                        }
                    }
                }
            }
        }
    })
};
Run.mallSubmit = function (e, a, b, q, n, p, l) {
    if (a == 0) {
        Helper.top.location.href = "mdetail.php";
        return
    }
    var k = {}, g = {}, e = Helper.top.$("#module" + e), h = e.find(".stlMsg");
    var f = Run.getMallSubmitData(e, k, g, n, p);
    if (f != "") {
        h.show();
        h.html(f);
        Run.scrollToDiv(e);
        return
    }
    var d = e.find(".mallStlOpt input");
    d.attr("disabled", true);
    h.show();
    h.html(LS.mallStlSubmitting);
    Run.scrollToDiv(e);
    if (n != 0 && p) {
        var m = {}, i = [];
        i.push(g);
        m.addrInfoList = i;
        $.ajax({
            type: "post",
            url: action = "ajax/memberAdm_h.php?cmd=set&opera=addAddr&id=" + n,
            data: "info=" + Helper.encodeUrl($.toJSON(m)),
            success: function (r) {
            },
            error: function () {
            }
        })
    }
    if (k.payMode == 5) {
        var o = k.name;
        var c = new RegExp("[\\u4E00-\\u9FFF]+", "g");
        if (o) {
            if (o.length < 2) {
                if (!c.test(o)) {
                    h.hide();
                    Run.scrollToDiv(e);
                    Helper.ing(LS.orderValidRecvName);
                    d.attr("disabled", false);
                    return
                }
            }
        } else {
            if (n != 0 && l) {
                var j = "";
                if (l.length < 2) {
                    if (!c.test(o)) {
                        j = "会员"
                    }
                }
                k.name = j + l
            } else {
                k.name = "游客"
            }
        }
    }
    $.ajax({
        type: "post",
        url: "ajax/order_h.php?cmd=delItem&orderId=" + a,
        data: "itemIds=" + Helper.encodeUrl($.toJSON(b)),
        error: function () {
            d.removeAttr("disabled");
            h.html(LS.mallStlSubmitError)
        },
        success: function () {
            $.ajax({
                type: "post",
                url: "ajax/order_h.php?cmd=settle&orderId=" + a,
                data: "data=" + Helper.encodeUrl($.toJSON(k)),
                error: function () {
                    d.removeAttr("disabled");
                    h.html(LS.mallStlSubmitError)
                },
                success: function (r) {
                    d.removeAttr("disabled");
                    var r = jQuery.parseJSON(r);
                    if (r.success) {
                        $.ajax({
                            type: "post",
                            url: "ajax/order_h.php?cmd=addAfterShop",
                            data: "data=" + Helper.encodeUrl($.toJSON(q)),
                            error: function () {
                                d.removeAttr("disabled");
                                h.html(LS.mallStlSubmitError)
                            },
                            success: function (s) {
                                Helper.top.location.href = "mdetail.php?id=" + a + "&suc=1"
                            }
                        })
                    } else {
                        if (r.rt == -3) {
                            h.html(LS.mallStlSubmitNotFound)
                        } else {
                            if (r.rt == -9) {
                                h.html(LS.mallStlSubmitStatusError)
                            } else {
                                if (r.rt == Run.MallAjaxErrno.outOfMallAmount) {
                                    h.html(Helper.format(LS.mallAmountOverNameList, r.productsName))
                                } else {
                                    if (r.rt == Run.MallAjaxErrno.OutOfAllowAmount) {
                                        h.html(Helper.format(LS.allowAmountOverNameList, r.productsName))
                                    } else {
                                        if (r.rt == Run.MallAjaxErrno.couponOverTime) {
                                            h.html(LS.couponOverTime)
                                        } else {
                                            if (r.rt == Run.MallAjaxErrno.couponUnavail) {
                                                h.html(LS.couponUnavail)
                                            } else {
                                                if (r.rt == Run.MallAjaxErrno.couponNotFound) {
                                                    h.html(LS.couponNotFound)
                                                } else {
                                                    h.html(LS.mallStlSubmitError)
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            })
        }
    })
};
Run.initModuleMallAddrInfo = function (c, b, f, u, q) {
    var t = "-----------", z = [], m, B, r, y, C, o, A;
    if (Run.addrInfoListGlobal != null && Run.addrInfoListGlobal != []) {
        c = Run.addrInfoListGlobal
    }
    if (c.length == 0) {
        var n = "";
        n += "<div class='spaceLine'></div>";
        $.each(site_cityUtil.getAreaGroupsPinYin(), function (j, D) {
            n += "<div class='pv_group' style='" + (D[0] == "OS" ? "display:none;" : "") + "'>";
            n += "<div class='group_head'>" + D[0] + "</div>";
            n += "<div class='group_content'>";
            $.each(D[1], function (E, i) {
                if (u == 2052 || u == 1028) {
                    n += "<div class='group_item' pid='" + i + "' pname='" + site_cityUtil.getInfo(i).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(i).name) + "</div>"
                } else {
                    n += "<div class='group_item' pid='" + i + "' pname='" + site_cityUtil.getInfoEn(i).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(i).name) + "</div>"
                }
            });
            n += "</div>";
            n += "</div>";
            n += "<div class='spaceLine'></div>"
        });
        $("#areaBox1 .pv_content").html("").append(n);
        if ($("#areaBox1").length > 0) {
            $("#areaBox1").css("left", $("#areaBoxInput").position().left + 13)
        }
        $("#areaBoxInput").hide();
        var a = $(".J_isOldStyle2").length > 0;
        if (a) {
            $("#areaBox1").parents(".propList").css("overflow", "visible")
        }
        $(document).unbind("click.forAreaBox3").bind("click.forAreaBox3", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (i) {
            k(i)
        });
        function k(i) {
            if (i.stopPropagation) {
                i.stopPropagation()
            } else {
                i.cancelBubble = true
            }
        }

        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                $("#areaBoxInput").hide()
            } else {
                $("#areaBoxInput").show()
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show();
                $("#areaBoxInput").val("")
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100);
                    $("#areaBoxInput").val($("#areaBox1").find(".group_item[pid='990000']").text())
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show();
                    $("#areaBoxInput").val("")
                }
            }
            $("#mallShipTemplate_allArea").val($("#allArea").val());
            $("#mallShipTemplate_allArea").change();
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                return
            }
            var i = d($("#allArea").val());
            $("#sec_box .sec_content").append(i);
            $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text());
            if (i === null || i === undefined || i === "") {
                $("#areaBox2").hide();
                $(".J-ssq").hide();
                $("#areaBoxInput").hide()
            }
        });
        $("#areaBoxInput").unbind("click").bind("click", function (i) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {
                } else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            k(i)
        });
        $("#areaBox1 .J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $("#areaBox2 .J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $("#areaBox2 .J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var i = $(this).attr("pname");
            var j = $(this).attr("pid");
            $("#areaBox1 .J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + i);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", j);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            $("#areaBox1 .city_content").remove();
            var E = s(site_cityUtil.getCities(j));
            var D = $(E).html();
            if (D === null || D === undefined || D === "") {
                $("#areaBox1").hide()
            }
            $("#city_box").append(E);
            $("#mallShipTemplate_province_box .group_item[pid='" + j + "']").click()
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            $("#areaBox1 .J_areaHead .county").click();
            var G = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", D);
            $("#areaBoxInput").attr("area3", "");
            $("#areaBox1 .county_content").remove();
            var F = l(site_cityUtil.getCounty(D));
            var E = $(F).html();
            if (E === null || E === undefined || E === "") {
                $("#areaBox1").hide()
            }
            $("#county_box").append(F);
            $("#mallShipTemplate_city_box .group_item[cid='" + D + "']").click()
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            var E = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(E, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", D);
            $("#areaBox1").hide();
            $("#mallShipTemplate_county_box .group_item[cid='" + D + "']").click()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var F = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", D);
            $("#areaBoxInput").attr("area3", "");
            var E = d(D);
            if (E === null || E === undefined || E === "") {
                $("#areaBox2").hide()
            }
            $("#thd_box .thd_content").append(E);
            $("#mallShipTemplate_sec_box .group_item[cid='" + D + "']").click()
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var i = $(this).attr("cname");
            var D = $(this).attr("cid");
            var E = $("#areaBoxInput").attr("lastArea");
            var j = $("#areaBoxInput").attr("lastAreaType");
            if (j != null && j == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(E, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + i);
            $("#areaBoxInput").attr("lastArea", "-" + i);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", D);
            $("#areaBox2").hide();
            $("#mallShipTemplate_thd_box .group_item[cid='" + D + "']").click()
        })
    }
    $(".addrMsg_default, .addrMsg").click(function () {
        var F = $(this).attr("_item");
        $(this).find(".selected").show();
        if ($(this).parent().find(".addrMsg_default").hasClass("isDefault")) {
            $(this).parent().find(".addrMsg_default").attr("class", "addrMsg isDefault")
        } else {
            $(this).parent().find(".addrMsg_default").attr("class", "addrMsg notDefault")
        }
        if ($(this).hasClass("isDefault")) {
            $(this).attr("class", "addrMsg_default isDefault")
        } else {
            $(this).attr("class", "addrMsg_default notDefault")
        }
        $(this).parent().find(".addrMsg_default, .addrMsg").each(function () {
            if ($(this).attr("_item") != F) {
                $(this).find(".selected").hide()
            }
        });
        var D = c[F];
        if (D.addr_info != null) {
            var H = D.addr_info["isCus"];
            if (!H) {
                var K = "";
                var I = "";
                var G = "";
                if (u == 2052 || u == 1028) {
                    K = site_cityUtil.getInfo(D.addr_info.countyCode).name;
                    I = site_cityUtil.getInfo(D.addr_info.cityCode).name;
                    G = site_cityUtil.getInfo(D.addr_info.provinceCode).name
                } else {
                    K = site_cityUtil.getInfoEn(D.addr_info.countyCode).name;
                    I = site_cityUtil.getInfoEn(D.addr_info.cityCode).name;
                    G = site_cityUtil.getInfoEn(D.addr_info.provinceCode).name
                }
                if (D.addr_info.provinceCode == 990000) {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_allArea").val("os");
                    $("#mallShipTemplate_allArea").change()
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                    $("#mallShipTemplate_allArea").val("cn");
                    $("#mallShipTemplate_allArea").change()
                }
                $("#mallShipTemplate_areaBoxInput").attr("area1", D.addr_info.provinceCode);
                $("#mallShipTemplate_areaBoxInput").attr("area2", D.addr_info.cityCode);
                $("#mallShipTemplate_areaBoxInput").attr("area3", D.addr_info.countyCode);
                $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + K);
                $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                setTimeout(function () {
                    $("#mallShipTemplate_areaBox1 .group_item[pid='" + D.addr_info.provinceCode + "']").click();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + D.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + D.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(D.addr_info.streetAddr)
            } else {
                setTimeout(function () {
                    $("#mallShipTemplate_allArea").val(D.addr_info.provinceCode);
                    $("#mallShipTemplate_allArea").change();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + D.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + D.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(D.addr_info.streetAddr)
            }
        }
        for (var E = 0; E < b.length; E++) {
            if (b[E] != null) {
                var j = b[E]["fieldKey"];
                var J = D[j];
                $(".propList").find(".propItemValue").each(function () {
                    if ($(this).attr("_field") == j) {
                        $(this).find("input").val(J)
                    }
                });
                if (j == "mobile") {
                    j = "mobileCt";
                    J = D[j];
                    $(".propList").find(".propItemValue").each(function () {
                        if ($(this).attr("_field") == j) {
                            $(this).find("input").val(J)
                        }
                    })
                }
            }
        }
    });
    for (var w = 0; w < c.length; w++) {
        var e = c[w];
        if (e.isDefault == 1) {
            for (var v = 0; v < b.length; v++) {
                if (b[v] != null) {
                    var g = b[v]["fieldKey"];
                    var p = e[g];
                    $(".propList").find(".propItemValue").each(function () {
                        if ($(this).attr("_field") == g) {
                            $(this).find("input").val(p)
                        }
                    });
                    if (g == "mobile") {
                        g = "mobileCt";
                        p = e[g];
                        $(".propList").find(".propItemValue").each(function () {
                            if ($(this).attr("_field") == g) {
                                $(this).find("input").val(p)
                            }
                        })
                    }
                }
            }
            if (e.addr_info != null) {
                $(".addrMsg_default, .addrMsg").each(function () {
                    if ($(this).attr("_item") == w) {
                        $(this).click()
                    }
                })
            }
        }
    }
    if (f == 7) {
        $(".addrMsg_default, .addrMsg").each(function () {
            if ($(this).attr("_item") == (c.length - 1)) {
                $(this).click()
            }
        })
    } else {
        if (f != 6) {
            $(".addrMsg_default, .addrMsg").each(function () {
                if ($(this).attr("_item") == f) {
                    $(this).click()
                }
            })
        }
    }
    if (Helper.isIE6()) {
        if (c.length > 2) {
            $(".addrMsgList").attr("style", "cursor:pointer;height:300px;width:690px;")
        } else {
            $(".addrMsgList").attr("style", "cursor:pointer;height:150px;")
        }
    }
    function s(j) {
        var i = "";
        i += "<div class='city_content'>";
        $.each(j, function (D, E) {
            if (u == 2052 || u == 1028) {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfo(E.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(E.id).name) + "</div>"
            } else {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfoEn(E.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(E.id).name) + "</div>"
            }
        });
        i += "</div>";
        return i
    }

    function l(j) {
        var i = "";
        i += "<div class='county_content'>";
        $.each(j, function (D, E) {
            if (u == 2052 || u == 1028) {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfo(E.id).name + "'>" + site_cityUtil.getInfo(E.id).name + "</div>"
            } else {
                i += "<div class='group_item' cid='" + E.id + "' cname='" + site_cityUtil.getInfoEn(E.id).name + "'>" + site_cityUtil.getInfoEn(E.id).name + "</div>"
            }
        });
        i += "</div>";
        return i
    }

    function h(j) {
        var i = "";
        var D = false;
        $.each(q, function (E, F) {
            if (D) {
                return
            }
            if (F.id == j) {
                i = F.name;
                D = true
            }
        });
        return i
    }

    function x(j) {
        var i = [];
        $.each(q, function (D, E) {
            if (E.parentId == j) {
                i.push(E)
            }
        });
        return i
    }

    function d(i) {
        if (isNaN(i)) {
            return ""
        }
        var D = parseInt(i);
        var j = "";
        $.each(x(D), function (E, F) {
            j += "<div class='group_item' cid='" + F.id + "' cname='" + F.name + "'>" + F.name + "</div>"
        });
        return j
    }
};
Run.changePayModePopup = function (a, c) {
    var e = "g_stress";
    if ($("#changePayMode").hasClass("mDetailStyleFlag")) {
        e = "mDetail_hover_color"
    }
    $("#changePayMode").hover(function () {
        $("#changePayMode").addClass(e)
    }, function () {
        $("#changePayMode").removeClass(e)
    });
    $("#changePayMode").on("click", function () {
        var h = [];
        h.push("<div class='payModePop J_payModepop'>");
        h.push("<div class='p-title'>");
        h.push(LS.choosePayment);
        h.push("</div>");
        if (c.length > 3) {
            h.push("<div class='p-content1'>")
        } else {
            h.push("<div class='p-content2'>")
        }
        $.each(c, function (j, l) {
            var k = d(l);
            if (k) {
                h.push("<div class='p-payMode J_payMode' _data='" + l + "'>");
                h.push("<div class='p-payMode-" + k + "'>");
                h.push("</div>");
                h.push("</div>")
            }
        });
        h.push("</div>");
        h.push("<div class='p-foot'>");
        h.push("<div class='payModeBtn' id='payModeBtn'>");
        h.push(LS.goAndPay);
        h.push("</div>");
        h.push("</div>");
        h.push("</div>");
        var g = {};
        if (c.length > 3) {
            g.height = 295
        } else {
            g.height = 250
        }
        g.width = 500;
        g.htmlContent = h.join("");
        var f = Run.popupBox(g);
        f.find(".J_payMode").on("click", function () {
            $(".J_payModepop").find(".J_payMode").removeClass("selected");
            $(".J_payModepop").find(".selected1").remove();
            $(this).addClass("selected");
            $(this).append("<div class='selected1'></div>")
        });
        $("#payModeBtn").on("click", function () {
            var i = $(".J_payModepop").find(".selected").attr("_data");
            if (!i) {
                Helper.ing(LS.selectPaymentFirst, true);
                return
            }
            var j = {};
            j.payMode = i;
            $.ajax({
                type: "post",
                url: "ajax/order_h.php?cmd=setOrder",
                data: "id=" + a + "&info=" + $.toJSON(j),
                dataType: "json",
                error: function () {
                    Helper.ing(LS.mallStlSubmitError)
                },
                success: function (k) {
                    if (k.success) {
                        var l = b();
                        if (l) {
                            var m;
                            if (i == 3) {
                                m = "tenpay.php?orderId=" + a
                            } else {
                                if (i == 4 || i == 5 || i == 6) {
                                    m = "alipay.php?orderId=" + a
                                } else {
                                    if (i == 7) {
                                        m = "paypal.php?orderId=" + a
                                    } else {
                                        if (i == 9) {
                                            m = "cbpay.php?orderId=" + a
                                        } else {
                                            if (i == 10) {
                                                Run.getWxpayUrl(a);
                                                f.find(".popupBClose").click();
                                                return
                                            } else {
                                                Run.getTopWindow().location.reload();
                                                return
                                            }
                                        }
                                    }
                                }
                            }
                            Run.getTopWindow().location.href = m
                        }
                    } else {
                        Helper.ing(k.msg)
                    }
                }
            })
        })
    });
    function d(f) {
        if (f == 2) {
            return "bank"
        } else {
            if (f == 3) {
                return "tenpay"
            } else {
                if (f == 4 || f == 5 || f == 6 || f == 8) {
                    return "alipay"
                } else {
                    if (f == 7) {
                        return "paypal"
                    } else {
                        if (f == 9) {
                            return "pm"
                        } else {
                            if (f == 10 || f == 11) {
                                return "wxpay"
                            }
                        }
                    }
                }
            }
        }
    }

    function b() {
        var f = true;
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=checkOrder",
            data: "orderId=" + a,
            async: false,
            dataType: "json",
            error: function () {
                Helper.ing(LS.mallStlSubmitError)
            },
            success: function (g) {
                if (!g.success) {
                    f = false;
                    if (g.rt == -3) {
                        Helper.ing(LS.mallStlSubmitNotFound)
                    } else {
                        if (g.rt == -9) {
                            Helper.ing(LS.mallStlSubmitStatusError)
                        } else {
                            if (g.rt == Run.MallAjaxErrno.outOfMallAmount) {
                                Helper.ing(Helper.format(LS.mallAmountOverNameList, g.productsName))
                            } else {
                                if (g.rt == Run.MallAjaxErrno.OutOfAllowAmount) {
                                    Helper.ing(Helper.format(LS.allowAmountOverNameList, g.productsName))
                                } else {
                                    if (g.rt == Run.MallAjaxErrno.payDomainError) {
                                        Helper.ing(LS.mallPayDomainError)
                                    } else {
                                        Helper.ing(LS.mallStlSubmitError)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        });
        return f
    }
};
Run.initPayOrder = function (a) {
    var b = new Run.payOrder(a);
    b.init()
};
Run.payOrder = function (a) {
    this.orderId = a
};
(function (f, a, c) {
    var g = a.prototype;
    var b, h = f(".dtlSubmit"), d = f(".detailMsg");
    g.init = function () {
        b = this.orderId;
        i()
    };
    function i() {
        h.on("click", function () {
            var j = e(b);
            if (j) {
                var k = f(this).attr("_href");
                if (k != "WXPAY") {
                    Run.getTopWindow().location.href = k
                } else {
                    Run.getWxpayUrl(b)
                }
            }
        })
    }

    function e() {
        var j = true;
        f.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=checkOrder",
            data: "orderId=" + b,
            async: false,
            dataType: "json",
            error: function () {
                Helper.ing(LS.mallStlSubmitError)
            },
            success: function (k) {
                if (!k.success) {
                    j = false;
                    if (k.rt == -3) {
                        d.html(LS.mallStlSubmitNotFound)
                    } else {
                        if (k.rt == -9) {
                            d.html(LS.mallStlSubmitStatusError)
                        } else {
                            if (k.rt == Run.MallAjaxErrno.outOfMallAmount) {
                                d.html(Helper.format(LS.mallAmountOverNameList, k.productsName))
                            } else {
                                if (k.rt == Run.MallAjaxErrno.OutOfAllowAmount) {
                                    d.html(Helper.format(LS.allowAmountOverNameList, k.productsName))
                                } else {
                                    if (k.rt == Run.MallAjaxErrno.payDomainError) {
                                        d.html(LS.mallPayDomainError)
                                    } else {
                                        d.html(LS.mallStlSubmitError)
                                    }
                                }
                            }
                        }
                    }
                    d.show()
                }
            }
        });
        return j
    }
})(jQuery, Run.payOrder);
Run.initModuleMallShipTemplate = function (z, A, d, C, n, e, b, t, p) {
    var j = C.vType || 1, u = C.sco || 0, g = C.openItemList;
    var s = "-----------", y = [], l, B, q, w, D, o, x;
    var i = true;
    var m = "";
    m += "<div class='spaceLine'></div>";
    $.each(site_cityUtil.getAreaGroupsPinYin(), function (E, F) {
        m += "<div class='pv_group' style='" + (F[0] == "OS" ? "display:none;" : "") + "'>";
        m += "<div class='group_head'>" + F[0] + "</div>";
        m += "<div class='group_content'>";
        $.each(F[1], function (H, G) {
            if (t == 2052 || t == 1028) {
                m += "<div class='group_item' pid='" + G + "' pname='" + site_cityUtil.getInfo(G).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(G).name) + "</div>"
            } else {
                m += "<div class='group_item' pid='" + G + "' pname='" + site_cityUtil.getInfoEn(G).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(G).name) + "</div>"
            }
        });
        m += "</div>";
        m += "</div>";
        m += "<div class='spaceLine'></div>"
    });
    $("#mallShipTemplate_areaBox1 .pv_content").html("").append(m);
    var a = $(".J_isOldStyle").length > 0;
    if (a) {
        $("#mallShipTemplate_allArea").parents(".shipList").css("overflow", "visible")
    }
    $(document).unbind("click.forAreaBox4").bind("click.forAreaBox4", function () {
        $("#mallShipTemplate_areaBox1").hide();
        $("#mallShipTemplate_areaBox2").hide()
    });
    $("#mallShipTemplate_areaBox1,#mallShipTemplate_areaBox2").unbind("click.forAreaBox2").bind("click.forAreaBox2", function (E) {
        h(E)
    });
    function h(E) {
        if (E.stopPropagation) {
            E.stopPropagation()
        } else {
            E.cancelBubble = true
        }
    }

    $("#mallShipTemplate_allArea").change(function () {
        if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "os") {
            $("#mallShipTemplate_areaBoxInput").hide();
            $("#mallShipTemplate_areaBox1").hide();
            $("#mallShipTemplate_areaBox2").hide()
        } else {
            $("#mallShipTemplate_areaBoxInput").show()
        }
        if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "") {
            return
        }
        $("#mallShipTemplate_areaBoxInput").attr("isCn", 0);
        $("#mallShipTemplate_areaBoxInput").attr("isCus", 0);
        $("#mallShipTemplate_areaBoxInput").attr("isOs", 0);
        $("#mallShipTemplate_areaBoxInput").attr("area1", "");
        $("#mallShipTemplate_areaBoxInput").attr("area2", "");
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        if ($("#mallShipTemplate_allArea").val() == "cn") {
            $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
            $("#mallShipTemplate_areaBox1 .pv").click();
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            $("#mallShipTemplate_areaBoxInput").val("")
        } else {
            if ($("#mallShipTemplate_allArea").val() == "os") {
                $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                $("#mallShipTemplate_areaBoxInput").attr("area1", 990000);
                $("#mallShipTemplate_areaBoxInput").attr("area2", 990100);
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBox1").find(".group_item[pid='990000']").text());
                Run.mallStlCalcTotal(z)
            } else {
                $("#mallShipTemplate_areaBoxInput").attr("isCus", 1);
                $("#mallShipTemplate_areaBoxInput").attr("area1", $("#mallShipTemplate_allArea").val());
                $("#mallShipTemplate_areaBox2 .sec_content").html("");
                $("#mallShipTemplate_areaBox2 .thd_content").html("");
                $("#mallShipTemplate_areaBoxInput").val("")
            }
        }
        if ($("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            return
        }
        var E = c($("#mallShipTemplate_allArea").val());
        $("#mallShipTemplate_sec_box .sec_content").append(E);
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + $("#mallShipTemplate_allArea option[value='" + $("#mallShipTemplate_allArea").val() + "']").text());
        var F = $("#mallShipTemplate_allArea").val();
        i = false;
        if (A === 0) {
            Run.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (H, J) {
            if (u) {
                var I = false, G = C.scrl || [];
                $.each(G, function (L, K) {
                    if (K.st === J.type) {
                        var M = false;
                        if (i) {
                            M = $.inArray(parseInt(F), K.arl) > -1
                        } else {
                            M = $.inArray(parseInt(F), K.carl) > -1
                        }
                        if (M) {
                            if (K.fc === 1) {
                                if (j === 1) {
                                    if (A >= K.d1) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                            if (K.fc === 2) {
                                if (d >= K.d2) {
                                    I = true;
                                    return false
                                }
                            }
                            if (K.fc === 3) {
                                if (j === 1) {
                                    if (A >= K.d1 && d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1 && d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                            if (K.fc === 4) {
                                if (j === 1) {
                                    if (A >= K.d1 || d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                } else {
                                    if (A <= K.d1 || d >= K.d2) {
                                        I = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (I) {
                    $("#template_item_money" + J.type).html("").html(LS.freeShipping);
                    $("#template_item_" + J.type).attr("price", 0);
                    return
                }
            }
            if (!J.regionList || J.regionList.length <= 0) {
                $("#template_item_money" + J.type).html("").html((n + J.defaultPrice.toFixed(2)));
                $("#template_item_" + J.type).attr("price", J.defaultPrice.toFixed(1));
                return true
            }
            $.each(J.regionList, function (Q, T) {
                var L = false;
                if (i) {
                    L = $.inArray(parseInt(F), T.areaList) < 0
                } else {
                    L = $.inArray(parseInt(F), T.cusAreaList) < 0
                }
                if (L) {
                    $("#template_item_money" + J.type).html("").html((n + J.defaultPrice.toFixed(2)));
                    $("#template_item_" + J.type).attr("price", J.defaultPrice.toFixed(1));
                    return true
                }
                var P = 0, M = T.price, R = T.rha == null ? 1 : T.rha, S = T.ria == null ? 1 : T.ria, N = T.rip || 0;
                var O = A;
                if (R > 0) {
                    P = M;
                    O -= R
                }
                if (S > 0 && O > 0) {
                    var K = (O / S).toFixed(1);
                    K = Math.ceil(K);
                    P += N * K
                }
                $("#template_item_money" + J.type).html("").html((n + P.toFixed(2)));
                $("#template_item_" + J.type).attr("price", P.toFixed(1));
                return false
            })
        });
        Run.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_areaBoxInput").unbind("click").bind("click", function (E) {
        if ($("#mallShipTemplate_allArea").val() == "cn") {
            $("#mallShipTemplate_areaBox1").toggle();
            $("#mallShipTemplate_areaBox2").hide();
            $("#mallShipTemplate_province_box").show();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").hide()
        } else {
            if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "os") {
            } else {
                $("#mallShipTemplate_areaBox2").toggle();
                $("#mallShipTemplate_areaBox1").hide();
                $("#mallShipTemplate_sec_box").show();
                $("#mallShipTemplate_thd_box").hide()
            }
        }
        h(E)
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .pv").click(function () {
        $("#mallShipTemplate_province_box").show();
        $("#mallShipTemplate_city_box").hide();
        $("#mallShipTemplate_county_box").hide()
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .city").click(function () {
        $("#mallShipTemplate_province_box").hide();
        $("#mallShipTemplate_city_box").show();
        $("#mallShipTemplate_county_box").hide()
    });
    $("#mallShipTemplate_areaBox1 .J_areaHead .county").click(function () {
        $("#mallShipTemplate_province_box").hide();
        $("#mallShipTemplate_city_box").hide();
        $("#mallShipTemplate_county_box").show()
    });
    $("#mallShipTemplate_areaBox2 .J_areaHead2 .sec").click(function () {
        $("#mallShipTemplate_sec_box").show();
        $("#mallShipTemplate_thd_box").hide()
    });
    $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click(function () {
        $("#mallShipTemplate_sec_box").hide();
        $("#mallShipTemplate_thd_box").show()
    });
    $("#mallShipTemplate_province_box .group_item").bind("click", function () {
        $("#mallShipTemplate_areaBox1 .city_content").remove();
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var E = $(this).attr("pname");
        var F = $(this).attr("pid");
        $("#mallShipTemplate_areaBox1 .J_areaHead .city").click();
        $("#mallShipTemplate_areaBoxInput").val("");
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + E);
        $("#mallShipTemplate_areaBoxInput").removeAttr("lastArea");
        $("#mallShipTemplate_areaBoxInput").removeAttr("lastAreaType");
        $("#mallShipTemplate_areaBoxInput").attr("area1", F);
        $("#mallShipTemplate_areaBoxInput").attr("area2", "");
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        $("#mallShipTemplate_areaBox1 .city_content").remove();
        var G = r(site_cityUtil.getCities(F));
        $("#mallShipTemplate_city_box").append(G);
        $.each(g, function (H, I) {
            $("#template_item_" + I.type).attr("price", I.defaultPrice.toFixed(1))
        });
        Run.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_city_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        $("#mallShipTemplate_areaBox1 .J_areaHead .county").click();
        var I = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F != "") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "city");
        $("#mallShipTemplate_areaBoxInput").attr("area2", G);
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        $("#mallShipTemplate_areaBox1 .county_content").remove();
        var H = k(site_cityUtil.getCounty(G));
        $("#mallShipTemplate_county_box").append(H);
        if (A === 0) {
            Run.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (K, M) {
            if (u) {
                var L = false, J = C.scrl || [];
                $.each(J, function (O, N) {
                    if (N.st === M.type) {
                        var P = false;
                        if (i) {
                            P = $.inArray(parseInt(G), N.arl) > -1
                        } else {
                            P = $.inArray(parseInt(G), N.carl) > -1
                        }
                        if (P) {
                            if (N.fc === 1) {
                                if (j === 1) {
                                    if (A >= N.d1) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 2) {
                                if (d >= N.d2) {
                                    L = true;
                                    return false
                                }
                            }
                            if (N.fc === 3) {
                                if (j === 1) {
                                    if (A >= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 4) {
                                if (j === 1) {
                                    if (A >= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (L) {
                    $("#template_item_money" + M.type).html("").html(LS.freeShipping);
                    $("#template_item_" + M.type).attr("price", 0);
                    return
                }
            }
            if (!M.regionList || M.regionList.length <= 0) {
                $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(2)));
                $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                return true
            }
            $.each(M.regionList, function (T, W) {
                var O = false;
                if (i) {
                    O = $.inArray(parseInt(G), W.areaList) < 0
                } else {
                    O = $.inArray(parseInt(G), W.cusAreaList) < 0
                }
                if (O) {
                    $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(2)));
                    $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                    return true
                }
                var S = 0, P = W.price, U = W.rha == null ? 1 : W.rha, V = W.ria == null ? 1 : W.ria, Q = W.rip || 0;
                var R = A;
                if (U > 0) {
                    S = P;
                    R -= U
                }
                if (V > 0 && R > 0) {
                    var N = (R / V).toFixed(1);
                    N = Math.ceil(N);
                    S += Q * N
                }
                $("#template_item_money" + M.type).html("").html((n + S.toFixed(2)));
                $("#template_item_" + M.type).attr("price", S.toFixed(1));
                return false
            })
        });
        Run.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_county_box").delegate(".group_item", "click", function () {
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        var H = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F == "county") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(H, ""))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
        $("#mallShipTemplate_areaBoxInput").attr("area3", G);
        $("#mallShipTemplate_areaBox1").hide();
        Run.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_sec_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        $("#mallShipTemplate_areaBox2 .thd_content").html("");
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click();
        var I = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F != "" && $("#mallShipTemplate_areaBoxInput").val().indexOf("-") != -1) {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "sec");
        $("#mallShipTemplate_areaBoxInput").attr("area2", G);
        $("#mallShipTemplate_areaBoxInput").attr("area3", "");
        var H = c(G);
        $("#mallShipTemplate_thd_box .thd_content").append(H);
        if (A === 0) {
            Run.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (K, M) {
            if (u) {
                var L = false, J = C.scrl || [];
                $.each(J, function (O, N) {
                    if (N.st === M.type) {
                        var P = false;
                        if (i) {
                            P = $.inArray(parseInt(G), N.arl) > -1
                        } else {
                            P = $.inArray(parseInt(G), N.carl) > -1
                        }
                        if (P) {
                            if (N.fc === 1) {
                                if (j === 1) {
                                    if (A >= N.d1) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 2) {
                                if (d >= N.d2) {
                                    L = true;
                                    return false
                                }
                            }
                            if (N.fc === 3) {
                                if (j === 1) {
                                    if (A >= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 && d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                            if (N.fc === 4) {
                                if (j === 1) {
                                    if (A >= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                } else {
                                    if (A <= N.d1 || d >= N.d2) {
                                        L = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (L) {
                    $("#template_item_money" + M.type).html("").html(LS.freeShipping);
                    $("#template_item_" + M.type).attr("price", 0);
                    return
                }
            }
            if (!M.regionList || M.regionList.length <= 0) {
                $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(2)));
                $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                return true
            }
            $.each(M.regionList, function (T, W) {
                var O = false;
                if (i) {
                    O = $.inArray(parseInt(G), W.areaList) < 0
                } else {
                    O = $.inArray(parseInt(G), W.cusAreaList) < 0
                }
                if (O) {
                    $("#template_item_money" + M.type).html("").html((n + M.defaultPrice.toFixed(2)));
                    $("#template_item_" + M.type).attr("price", M.defaultPrice.toFixed(1));
                    return true
                }
                var S = 0, P = W.price, U = W.rha == null ? 1 : W.rha, V = W.ria == null ? 1 : W.ria, Q = W.rip || 0;
                var R = A;
                if (U > 0) {
                    S = P;
                    R -= U
                }
                if (V > 0 && R > 0) {
                    var N = (R / V).toFixed(1);
                    N = Math.ceil(N);
                    S += Q * N
                }
                $("#template_item_money" + M.type).html("").html((n + S.toFixed(2)));
                $("#template_item_" + M.type).attr("price", S.toFixed(1));
                return false
            })
        });
        Run.mallStlCalcTotal(z)
    });
    $("#mallShipTemplate_thd_box").delegate(".group_item", "click", function () {
        if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
            i = true
        } else {
            i = false
        }
        var E = $(this).attr("cname");
        var G = $(this).attr("cid");
        var H = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
        var F = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
        if (F != null && F == "thd") {
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(H, ""))
        }
        $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + E);
        $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "thd");
        $("#mallShipTemplate_areaBoxInput").attr("area3", G);
        $("#mallShipTemplate_areaBox2").hide();
        if (A === 0) {
            Run.mallStlCalcTotal(z);
            return
        }
        $.each(g, function (J, L) {
            if (u) {
                var K = false, I = C.scrl || [];
                $.each(I, function (N, M) {
                    if (M.st === L.type) {
                        var O = false;
                        if (i) {
                            O = $.inArray(parseInt(G), M.arl) > -1
                        } else {
                            O = $.inArray(parseInt(G), M.carl) > -1
                        }
                        if (O) {
                            if (M.fc === 1) {
                                if (j === 1) {
                                    if (A >= M.d1) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                            if (M.fc === 2) {
                                if (d >= M.d2) {
                                    K = true;
                                    return false
                                }
                            }
                            if (M.fc === 3) {
                                if (j === 1) {
                                    if (A >= M.d1 && d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1 && d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                            if (M.fc === 4) {
                                if (j === 1) {
                                    if (A >= M.d1 || d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                } else {
                                    if (A <= M.d1 || d >= M.d2) {
                                        K = true;
                                        return false
                                    }
                                }
                            }
                        }
                    }
                });
                if (K) {
                    $("#template_item_money" + L.type).html("").html(LS.freeShipping);
                    $("#template_item_" + L.type).attr("price", 0);
                    return
                }
            }
            if (!L.regionList || L.regionList.length <= 0) {
                $("#template_item_money" + L.type).html("").html((n + L.defaultPrice.toFixed(2)));
                $("#template_item_" + L.type).attr("price", L.defaultPrice.toFixed(1));
                return true
            }
            $.each(L.regionList, function (S, V) {
                var N = false;
                if (i) {
                    N = $.inArray(parseInt(G), V.areaList) < 0
                } else {
                    N = $.inArray(parseInt(G), V.cusAreaList) < 0
                }
                if (N) {
                    $("#template_item_money" + L.type).html("").html((n + L.defaultPrice.toFixed(2)));
                    $("#template_item_" + L.type).attr("price", L.defaultPrice.toFixed(1));
                    return true
                }
                var R = 0, O = V.price, T = V.rha == null ? 1 : V.rha, U = V.ria == null ? 1 : V.ria, P = V.rip || 0;
                var Q = A;
                if (T > 0) {
                    R = O;
                    Q -= T
                }
                if (U > 0 && Q > 0) {
                    var M = (Q / U).toFixed(1);
                    M = Math.ceil(M);
                    R += P * M
                }
                $("#template_item_money" + L.type).html("").html((n + R.toFixed(2)));
                $("#template_item_" + L.type).attr("price", R.toFixed(1));
                return false
            })
        });
        Run.mallStlCalcTotal(z)
    });
    $("#template_item_" + e.type).click();
    function r(F) {
        var E = "";
        E += "<div class='city_content'>";
        $.each(F, function (G, H) {
            if (t == 2052 || t == 1028) {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfo(H.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(H.id).name) + "</div>"
            } else {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfoEn(H.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(H.id).name) + "</div>"
            }
        });
        E += "</div>";
        return E
    }

    function k(F) {
        var E = "";
        E += "<div class='county_content'>";
        $.each(F, function (G, H) {
            if (t == 2052 || t == 1028) {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfo(H.id).name + "'>" + site_cityUtil.getInfo(H.id).name + "</div>"
            } else {
                E += "<div class='group_item' cid='" + H.id + "' cname='" + site_cityUtil.getInfoEn(H.id).name + "'>" + site_cityUtil.getInfoEn(H.id).name + "</div>"
            }
        });
        E += "</div>";
        return E
    }

    function f(F) {
        var E = "";
        var G = false;
        $.each(p, function (H, I) {
            if (G) {
                return
            }
            if (I.id == F) {
                E = I.name;
                G = true
            }
        });
        return E
    }

    function v(F) {
        var E = [];
        $.each(p, function (G, H) {
            if (H.parentId == F) {
                E.push(H)
            }
        });
        return E
    }

    function c(E) {
        if (isNaN(E)) {
            return ""
        }
        var G = parseInt(E);
        var F = "";
        $.each(v(G), function (H, I) {
            F += "<div class='group_item' cid='" + I.id + "' cname='" + I.name + "'>" + I.name + "</div>"
        });
        return F
    }
};
Run.initPresentIpt = function () {
    var a = $("#useItg");
    if (a.length > 0) {
        a.bind("blur", function () {
            var h = parseInt(a.attr("_needitg"));
            var f = parseInt(a.val());
            var k = a.attr("_itgname");
            var j = parseInt(a.attr("_maxuse"));
            var b = 0;
            if (isNaN(f)) {
                f = 0
            }
            var c = $(this).attr("moduleId");
            var d = Helper.top.$("#module" + c);
            var g = parseFloat(d.find(".cartTotal").attr("pay_price"));
            if (isNaN(g)) {
                return
            }
            if ($("#couponList").length > 0 && $("#couponList input:checkbox").is(":checked")) {
                var i = 0;
                if ($("#couponOffsetMoney").length > 0) {
                    var l = $("#couponOffsetMoney").attr("_offsetmoney");
                    if (!isNaN(l)) {
                        i = parseInt(l);
                        var m = Math.floor((g - i) * h);
                        if (m < j) {
                            j = m
                        }
                    }
                }
            }
            if (f > j) {
                Helper.ing(Helper.format(LS.integral_maxUse, j, Helper.encodeHtml(k)), true);
                a.val(j);
                var e = (j / h).toFixed(2);
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    $("#offsetMoney").text(Helper.formatPriceEn(e)).attr("_offsetmoney", e)
                } else {
                    $("#offsetMoney").text(e).attr("_offsetmoney", e)
                }
                Run.mallStlCalcTotal(c);
                return
            }
            if (f > parseInt(a.attr("_currentItg"))) {
                Helper.ing(Helper.format(LS.integral_notOverCurrent, Helper.encodeHtml(k), Helper.encodeHtml(k)));
                a.focus();
                return
            }
            if (f < 0) {
                Helper.ing(LS.integral_inputInteger);
                a.focus();
                return
            } else {
                if (f == 0) {
                    $("#integralInfo").hide()
                } else {
                    $("#integralInfo").show()
                }
            }
            var e = (f / h).toFixed(2);
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                $("#offsetMoney").text(Helper.formatPriceEn(e)).attr("_offsetmoney", e)
            } else {
                $("#offsetMoney").text(e).attr("_offsetmoney", e)
            }
            if ($("#couponList").length > 0) {
                $("#couponList input:checkbox").each(function () {
                    var n = parseInt($(this).attr("_minPrice"));
                    if (g - e < n) {
                        $(this).parents("#couponList tr").hide();
                        if ($(this).prop("checked")) {
                            $(".useItgTip .maxUse").text($("#useItg").attr("_maxuse"));
                            $(".cp-offsetTip .used-count").text("0");
                            $("#couponOffsetMoney").text("0.00");
                            $("#couponOffsetMoney").attr("_offsetmoney", "0.00")
                        }
                        $("#couponList input:checkbox").attr("checked", false)
                    } else {
                        $(this).parents("#couponList tr").show()
                    }
                });
                if ($("#couponList tr").is(":visible")) {
                    $("#couponListTip").hide()
                } else {
                    $("#couponListTip").show()
                }
            }
            Run.mallStlCalcTotal(c)
        })
    }
};
Run.deductionItem = function (a) {
    $("#itgTitle,#couponTitle").click(function () {
        if (Helper.isIE6() || Helper.isIE7()) {
            $(this).next().show()
        } else {
            $(this).next().slideToggle()
        }
        if ($(this).find(".switch-sign").text() == "+") {
            $(this).find(".switch-sign").text("-")
        } else {
            $(this).find(".switch-sign").text("+")
        }
    });
    var b = Run.getBackgroundColor($(".J-fk-triangle"));
    $(".J-fk-triangle").css("border-color", "transparent transparent " + b + " transparent");
    $(".couponMsg input:checkbox").click(function () {
        if ($(this).is(":checked")) {
            $(this).attr("checked", false)
        } else {
            $(this).attr("checked", true)
        }
    });
    $(".couponMsg tr").click(function () {
        var i = $(this).find("input:checkbox").is(":checked");
        $("#couponList input:checkbox").attr("checked", false);
        var g = 0;
        $(".cp-offsetTip .used-count").text("0");
        if (!i) {
            $(".cp-offsetTip .used-count").text("1");
            var j = $(this).find("input:checkbox");
            j.attr("checked", true);
            g = parseFloat(j.attr("data_saveprice"))
        }
        if ($(".integralMsg").length > 0) {
            var d = $("#useItg"), f = parseInt(d.attr("_needitg")), h = parseInt(d.attr("_maxuse"));
            var c = Helper.top.$("#module" + a);
            var e = parseFloat(c.find(".cartTotal").attr("pay_price"));
            if (isNaN(e)) {
                return
            }
            var k = Math.floor((e - g) * f);
            if (k < h) {
                $(".useItgTip .maxUse").text(k)
            } else {
                $(".useItgTip .maxUse").text(h)
            }
        }
        if (g > 0) {
            $("#couponInfo").show()
        } else {
            $("#couponInfo").hide()
        }
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            $("#couponOffsetMoney").text(Helper.formatPriceEn(g))
        } else {
            $("#couponOffsetMoney").text(g.toFixed(2))
        }
        $("#couponOffsetMoney").attr("_offsetmoney", g);
        Run.mallStlCalcTotal(a)
    });
    $("#clickShowInput").click(function () {
        $(this).next().show();
        $(this).remove()
    })
};
Run.showBankList = function (b) {
    var a = $("#" + b).attr("value");
    $("#mallPay").attr("value", a)
};
Run.initOnlineBankList = function () {
    $("#payOnlinePanel").insertAfter($("#onlineItem")[0])
};
Run.getWxpayUrl = function (b) {
    var a = $("#wxpayBtn");
    if (a.attr("_sending") === "true") {
        Helper.ing("您的操作太频繁，请稍后再试。", true);
        return
    }
    a.attr("_sending", "true");
    $.ajax({
        type: "post", url: "ajax/mall_h.php?cmd=getWxpayUrl", data: "orderId=" + b, error: function () {
            Helper.ing("系统错误。")
        }, success: function (c) {
            var d = $.parseJSON(c);
            if (d.success) {
                Run.showWxQRCode(d.url, b)
            } else {
                Helper.ing(d.errMsg + "(请联系网站管理员)")
            }
        }
    })
};
Run.showWxQRCode = function (a, b) {
    var h = parseInt(Math.random() * 10000);
    var i = 480;
    var d = 800;
    var f = ["<div  id='wxpayQrCodeBox" + h + "' class='popupBg'  style='filter: alpha(opacity=50); opacity:0.5;'></div>", "<div id='wxPayQRCodeDisplay" + h + "' class='webRunQRCodeDisplay' style='z-index:9032;display:block;width: " + d + "px;height:" + i + "px;left:" + (Helper.top.document.documentElement.clientWidth - d) / 2 + "px;'>", "<div class='wxqrCodeTitileBox'>", "<div class='wxqrCodeTitile'>微信支付</div>", "<a hidefocus='true' href='javascript:;' class='cancelBtn' onclick='Run.closeWxQrcodeDiv(" + h + ");return false;'></a>", "<div style='clear:both;'></div>", "</div>", "<div class='wxpayQrCodeBox'>", "<div class='wxpayQrCodeImgBox'>", "<img title='' src='/qrCode.php?cmd=wxPayQrCode&&url=" + a + "' >", "</div>", "<div class='wxpayQrCodeTips'></div>", "</div>", "<div  class='wxGuardImg'></div>", "<div style='clear:both;'></div>", "<div class='paidTips'>完成支付5秒后没跳转，请刷新页面。</div>", "</div>"];
    Helper.top.$(f.join("")).appendTo("body");
    var e = Helper.top.document.documentElement.clientHeight;
    var g = (e - i) / 2;
    var c = $(window).scrollTop();
    $("#wxPayQRCodeDisplay" + h).css("top", g + c);
    $("#wxpayBtn").attr("_sending", "false");
    setInterval("Run.checkOrderStatue(" + b + ")", 2000)
};
Run.closeWxQrcodeDiv = function (a) {
    Helper.top.$("#wxpayQrCodeBox" + a).remove();
    Helper.top.$("#wxPayQRCodeDisplay" + a).remove();
    top.location.reload()
};
Run.checkOrderStatue = function (a) {
    $.ajax({
        type: "post", url: "ajax/mall_h.php?cmd=checkOrderStatue", data: "orderId=" + a, error: function () {
            Helper.ing("系统错误。")
        }, success: function (b) {
            var c = $.parseJSON(b);
            if (c.success) {
                Helper.top.location.href = "mdetail.php?id=" + a + "&suc=2"
            }
        }
    })
};
Run.mallCartInit = function (c) {
    var b = Helper.top.$("#memberBar");
    if (b.length < 1) {
        return
    }
    var a = b.find("#mallCart_js");
    var d = b.find(".mallCartPanel");
    $(a).find(".mallCartItem").bind("click", function () {
        window.open("mcart.php", "_blank")
    });
    $(d).find(".checkMallCartBtn").bind("click", function () {
        window.open("mcart.php", "_blank")
    });
    Run.refreshTopAndRightBarMallCartNum();
    if (c != 13 && c != 14) {
        $(a).bind("mouseenter", function (e) {
            var f = b.find(".mallCartPanel");
            $(this).attr("_mouseIn", 1);
            $(this).find(".mallCartItem").addClass("mallCartItem_hover");
            if (!$(f).is(":visible")) {
                Run.refreshTopBarMallCart(this)
            }
        }).bind("mouseleave", function () {
            $(this).attr("_mouseIn", 0);
            setTimeout(function () {
                var e = b.find(".mallCartPanel");
                var f = $(e).attr("_mouseIn");
                if (f != 1) {
                    $(e).hide();
                    b.find(".mallCartItem").removeClass("mallCartItem_hover")
                }
            }, 50)
        });
        $(d).bind("mouseenter", function () {
            $(this).attr("_mouseIn", 1)
        }).bind("mouseleave", function () {
            $(this).attr("_mouseIn", 0);
            setTimeout(function () {
                var f = Helper.top.$("#memberBar");
                var e = f.find("#mallCart_js");
                var g = $(e).attr("_mouseIn");
                if (g != 1) {
                    f.find(".mallCartPanel").hide();
                    f.find(".mallCartItem").removeClass("mallCartItem_hover")
                }
            }, 50)
        })
    }
};
Run.mobiWebInit = function () {
    var c = Helper.top.$("#memberBar").find("#mobiWeb_js");
    var b = Helper.top.$("#memberBar").find(".mobiWebPanel");
    var a = Helper.top.$("#memberBar").find("#mobiWebQRCode_js");
    $(c).bind("mouseenter", function (f) {
        $(this).attr("_mouseIn", 1);
        $(this).find(".mobiWebItem").addClass("mobiWebItem_hover");
        var d = parseInt($(c).css("margin-left"));
        var e = parseInt($(a).css("width")) + 2;
        var g = $(c).position().left + d - e + $(c).width();
        $(b).css("left", g + "px");
        $(b).show()
    }).bind("mouseleave", function () {
        $(this).attr("_mouseIn", 0);
        setTimeout(function () {
            var d = Helper.top.$("#memberBar").find(".mobiWebPanel");
            var e = $(d).attr("_mouseIn");
            if (e != 1) {
                $(d).hide();
                Helper.top.$("#memberBar").find(".mobiWebItem").removeClass("mobiWebItem_hover")
            }
        }, 50)
    });
    $(b).bind("mouseenter", function (d) {
        $(this).attr("_mouseIn", 1)
    }).bind("mouseleave", function () {
        $(this).attr("_mouseIn", 0);
        setTimeout(function () {
            var d = Helper.top.$("#memberBar").find("#mobiWeb_js");
            var e = $(d).attr("_mouseIn");
            if (e != 1) {
                Helper.top.$("#memberBar").find(".mobiWebPanel").hide();
                Helper.top.$("#memberBar").find(".mobiWebItem").removeClass("mobiWebItem_hover")
            }
        }, 50)
    })
};
Run.refreshTopBarMallCart = function (a) {
    var d = Helper.top.$("#memberBar").find("#mallCartList_js");
    var b = $(a).position().top + $(a).height();
    var c = parseInt($(a).css("margin-left"));
    var e = $(a).position().left + c - parseInt($(d).css("width")) - 2 + $(a).width();
    var f = Helper.top.$("#memberBar").find(".mallCartPanel");
    $(f).css("top", b + "px").css("left", e + "px");
    $(f).show().children().before("<div class='mallCartLoad'></div>");
    if (Helper.isIE6()) {
        var g = $(f).height();
        $(f).find(".mallCartLoad").css("height", g + "px")
    }
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=getTopBarMallCartList", data: "", success: function (h) {
            var i = $.parseJSON(h);
            var k = i.topBarProductList;
            if (i.success && k.length > 0) {
                Run.refreshTopAndRightBarMallCartNum();
                Run.createTopBarMallCartList(k, i.orderId, i.choiceCurrencyVal)
            } else {
                var j = Helper.top.$("#memberBar").find(".mallCartPanel");
                Run.refreshTopAndRightBarMallCartNum();
                $(j).find(".mcProductList").html(LS.memberMallCartNoProduct);
                $(j).find(".checkMallCartBtn").removeClass("checkMallCartBtn_hasPro");
                $(j).find(".mall_cart_total").remove()
            }
            Helper.top.$("#memberBar").find(".mallCartPanel").find(".mallCartLoad").remove()
        }
    })
};
Run.createTopBarMallCartList = function (c, a, k) {
    Helper.top.$("#memberBar").find(".mcProductList").attr("data-orderId", a).html("");
    var i = [];
    var b = 0, m = 0;
    var g = 0;
    for (var h in c) {
        b += c[h].amount
    }
    for (h = 0; h < c.length; h++) {
        var d = c[h], e = d.amount;
        if (d.isValid) {
            m += d.price * e
        }
    }
    var j = [];
    j.push("<div class='mall_cart_total'>");
    j.push("<div>");
    j.push(Helper.format(LS.shoppingCartCalculatePro, b));
    j.push("</div>");
    j.push("<div>");
    if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
        j.push("<span class='sC-priceTotal'>" + LS.shoppingCartCountMoney + "<b>" + k.toString() + Helper.formatPriceEn(m.toFixed(2)) + "</b></span>")
    } else {
        j.push("<span class='sC-priceTotal'>" + LS.shoppingCartCountMoney + "<b>" + k.toString() + m.toFixed(2) + "</b></span>")
    }
    j.push("</div>");
    j.push("</div>");
    i.push("<ul>");
    i.push("<div style='text-align: left;padding:0 15px;'>" + LS.memberMallCartJoin + "：</div>");
    for (var h in c) {
        var d = c[h];
        var e = d.amount;
        if (g == 5) {
            break
        }
        b = b - e;
        f(d);
        g++
    }
    i.push("<li class='mcProductListTip'></li>");
    Helper.top.$("#memberBar").find(".checkMallCartBtn").css("margin-top", "12px");
    i.push("</ul>");
    Helper.top.$("#memberBar").find(".mcProductList").append(i.join(""));
    Helper.top.$("#memberBar").find(".mall_cart_total").remove();
    Helper.top.$("#memberBar").find(".mcProductList").after(j.join(""));
    var l = [];
    Helper.top.$("#memberBar").find(".mcProductList .mcPdInvalid").each(function () {
        l.push($(this).prop("outerHTML"));
        $(this).remove()
    });
    Helper.top.$("#memberBar").find(".mcProductListTip").before(l.join(""));
    Helper.top.$("#memberBar").find(".checkMallCartBtn").addClass("checkMallCartBtn_hasPro");
    function f(s) {
        var t = d.isValid ? "" : " mcPdInvalid ";
        var p = d.inValidType;
        var q = [];
        if (d.picId != "") {
            q.push("<div class='mcProductList_proPic'>");
            q.push("<img alt=" + Helper.encodeHtml(d.name) + " src=" + d.picPath + ">");
            q.push("</div>")
        } else {
            q.push("<div class='mcProductList_proNoPic'></div>")
        }
        var o = "";
        if (t != "") {
            if (p == "notAdded") {
                o = "title='" + LS.notAdded + "'"
            } else {
                o = " title='" + LS.invalid + "' "
            }
        }
        var n = s.amount;
        if (s.amount > 9999) {
            n = (n + "").substring(0, 3) + "..."
        }
        i.push("<li class='mcProductList_pro " + t + "' data-itemId='" + d.id + "'" + o + ">");
        i.push(q.join(""));
        i.push("<div class='mcProductList_proName' style='width: 85px;'>");
        i.push("<span title='" + Helper.encodeHtml(d.name) + "' style='width:95px;'>" + Helper.encodeHtml(d.name) + "</span>");
        if (!t) {
            i.push("<span title='" + Helper.encodeHtml(d.optionType) + "'>" + Helper.encodeHtml(d.optionType) + "</span>")
        } else {
            i.push("<span " + o + "> [" + LS.invalid + "]</span>")
        }
        i.push("</div>");
        i.push("<div class='mcProductList_proPrice' style='width: 95px;'>");
        var r = d.price.toFixed(2);
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            r = Helper.formatPriceEn(d.price)
        }
        if (t) {
            i.push("<span>" + k.toString() + "</span><span class='s_invalid_price'>" + r + "</span>")
        } else {
            i.push("<span>" + k.toString() + "</span><span class='s_price'>" + r + "</span>")
        }
        i.push("<span style='margin-left: 10px;float:right;margin-top:-18px;'>×" + n + "</span>");
        i.push("</div>");
        i.push("<div class='mcProductList_proDel' style=''><a hidefocus='true' href='javascript:;' ");
        i.push("onclick='Run.delTopBarMallCartItem(" + a + ", " + d.id + ");return false;'>" + LS.memberMallCartDel + "</a>");
        i.push("</div>");
        i.push("</li>")
    }
};
Run.delTopBarMallCartItem = function (a, b) {
    $.ajax({
        type: "post",
        url: "ajax/order_h.php?cmd=delItem",
        data: {orderId: a, itemId: b, isTopBarMallCart: true},
        error: function (c) {
            var d = $.parseJSON(c);
            if (!d.success) {
                Helper.ing("系统繁忙，请稍后重试。", true)
            }
        },
        success: function (c) {
            var e = $.parseJSON(c);
            if (e.success) {
                var d = Helper.top.$("#memberBar").find("#mallCart_js");
                $(d).find("[data-itemId=" + b + "]").first().remove();
                Run.refreshTopBarMallCart(d)
            } else {
                if (e.rt == -2) {
                    Helper.ing("参数错误，请稍后重试。", true)
                }
            }
        }
    })
};
Run.refreshTopAndRightBarMallCartNum = function () {
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=getMallCartProductNum", data: "", success: function (a) {
            var f = $.parseJSON(a);
            if (f.success) {
                if (f.rt == 1) {
                    var e = $.trim(f.productAmount);
                    var c = Helper.top.$("#memberBar").find("#mallCart_js");
                    if (c.length > 0) {
                        e = (e > 99) ? "99+" : e;
                        $(c).find(".mallCart_proNum").text("(" + e + ")")
                    }
                    var g = Helper.top.$(".shoppingAmount");
                    var b = Helper.top.$(".shoppingAmountContent");
                    if (e > 0 || e == "99+") {
                        g.css("display", "block").text(e);
                        b.css("display", "block")
                    } else {
                        g.css("display", "none").text(e);
                        b.css("display", "none")
                    }
                    var d = Helper.top.$("#J_WebRightBar").find("#rbar_cart");
                    if (d.length > 0) {
                        if (e == "99+") {
                            $(d).find(".fk-rbar-cartItem-cirNum").text("...")
                        } else {
                            $(d).find(".fk-rbar-cartItem-cirNum").text(e)
                        }
                    }
                }
            }
        }
    })
};
Run.showContacterExtMsg = function (f) {
    var e = $("#module" + f), g = e.find(".J-head-more"), b = e.find(".J-cont-msg-ext"),
        a = e.find(".fk-order-dt").width(), c = b.width(), d = a - g.position().left;
    g.hover(function () {
        b.css({top: g.position().top + g.height() + 14});
        if (d >= c) {
            b.css({left: g.position().left - 140})
        } else {
            b.find(".cont-tri").css({left: c - 50});
            b.css({left: g.position().left - (c - d) - 10})
        }
        b.show()
    }, function () {
        b.hide()
    })
};
Run.showOrderNewMoreBox = function (d) {
    var c = $("#module" + d), e = c.find(".J_orderRecvMore"), b = c.find(".J_orderNewMoreBox"),
        a = c.find(".J_orderRecvMoreIcon");
    if (b.find("table tr").length == 0) {
        return
    }
    e.click(function () {
        if (b.is(":hidden")) {
            a.removeClass("orderRecvMoreIconDown");
            a.addClass("orderRecvMoreIconUp")
        } else {
            a.addClass("orderRecvMoreIconDown");
            a.removeClass("orderRecvMoreIconUp")
        }
        b.slideToggle()
    })
};
Run.initFlowMsg = function (c, a) {
    var b = $("#module" + c);
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=flowMsg", data: "id=" + a, success: function (e) {
            var g = $.parseJSON(e);
            b.find(".J-ajaxLoad").hide();
            if (g.msgList == null || g.msgList.length === 0 || !g.success) {
                if (g.success) {
                    b.find(".J-no-msg").show()
                } else {
                    Helper.ing(g.msg, true);
                    b.find(".J-err-msg").show()
                }
                var j = b.find(".mDetail_color").css("color");
                b.find(".noFlowMsgTip").css("color", j)
            } else {
                var k = "", h = "", d = [];
                d.push("<ul class='msgFlowList'>");
                var f = b.find(".mDetailOld").length > 0, i = 0;
                $.each(g.msgList, function (l, m) {
                    k = "";
                    h = "";
                    if (l === i) {
                        k = " class='mDetail_color lastFlowMsgLine'";
                        if (f) {
                            k = " class='lastFlowMsgLine g_stress'"
                        }
                        h = " mDetail_bg"
                    }
                    d.push("<li" + k + ">");
                    d.push("<span class='circleAround'><i class='circlePoint " + h + "'></i></span>");
                    d.push("<span class='f-time'>" + m.time + "</span>");
                    d.push("<span>" + m.context + "</span>");
                    d.push("</li>")
                });
                d.push("</ul>");
                b.find(".J-flow-msg").append(d.join(""));
                if (f) {
                    var j = b.find(".lastFlowMsgLine").css("color");
                    b.find(".lastFlowMsgLine .circlePoint").css("background-color", j)
                }
            }
        }
    })
};
Run.initmCenterFlowQuery = function (b) {
    var a = $("#module" + b), c = a.find(".J-mallOrder");
    c.find(".J-flow").hover(function () {
        var l = $(this), g = l.attr("_oi"), h = l.offset().top + l.outerHeight() + 8, m = l.offset().left - 100,
            j = $("#m" + b + "-f-" + g);
        if (j.length > 0) {
            j.show();
            if (Helper.isIE6() || Helper.isIE7()) {
                h += 10
            }
            j.css({top: h, left: m});
            return true
        }
        var e = l.attr("_fn"), f = l.attr("_fnu");
        var d = $(this).attr("_colorStyleType");
        var i = $(this).attr("_colorStyle");
        var k = ["<div id='m", b, "-f-", g, "' class='" + (d > 0 ? "g-flow-msg" + i : "g-flow-msg") + " fk-flow g_border J-f-block' style='top:", h, "px;left:", m, "px;'>", "<div class='" + (d > 0 ? "g-b-head-ico" + i : "g-b-head-ico") + " b-head-ico'></div>", "<div class='b-head'>", "<span>", e, "</span>", "<span class='head-bill'>", LS.flowBill, f, "</span>", "</div>", "<div class='flow-ajaxLoading J-ajaxLoad'>&nbsp;</div>", "<div class='no-msg J-no-msg'>", LS.flowNoMsg, "</div>", "<div class='flow-msg J-flow-msg'></div>", "</div>"];
        j = $(k.join(""));
        j.appendTo("body");
        $.ajax({
            type: "post", url: "ajax/order_h.php?cmd=flowMsg", data: "id=" + g, success: function (o) {
                var q = $.parseJSON(o);
                j.find(".J-ajaxLoad").hide();
                if (q.msgList == null || q.msgList.length === 0 || !q.success) {
                    j.find(".J-no-msg").show()
                } else {
                    var n = [];
                    n.push("<ul>");
                    if (q.msgList.indexOf("http") < 0) {
                        for (var p = 0; p < q.msgList.length; p++) {
                            var r = q.msgList[p];
                            firstCls = "";
                            if (p === 0) {
                                firstCls = " class='g_stress'"
                            }
                            n.push("<li" + firstCls + ">");
                            n.push("<div>" + r.context + "</div>");
                            n.push("<div class='f-time'>" + r.time + "</div>");
                            n.push("</li>");
                            if (p === 2) {
                                break
                            }
                        }
                        n.push("</ul>");
                        j.find(".J-flow-msg").append(n.join(""))
                    }
                }
                if (q.success) {
                } else {
                    Helper.ing(q.msg, true)
                }
            }
        })
    }, function () {
        var e = $(this), d = e.attr("_oi");
        $("#m" + b + "-f-" + d).hide()
    })
};
Run.initOrderSuc = function (e, d) {
    var c = $("#module" + e);
    var b = "";
    if (d == 1) {
        b = LS.orderDetailSubmitSuc
    } else {
        if (d == 2) {
            b = LS.orderDetailPaySuc
        }
    }
    var a = ["<div class='fk-order-tip formBox' style='width:235px; height:78px; padding:0 0;background-color:#FFF;'>", "<div class='J-close formXRun' style='margin-top:3px; width:30px;'></div>", "<div class='ico suc-ico' style='margin-top:27px; float:left;'>&nbsp;</div>", "<div class='t-txt' style='margin-top:30px; text-align:center;'>" + b + "</div>", "<div>"];
    tip = $(a.join(""));
    c.prepend(tip);
    tip.find(".J-close").click(function () {
        tip.remove()
    });
    tip.css({top: 20, left: (c.width() - tip.width()) / 2});
    tip.fadeOut(5000);
    Helper.top.window.setTimeout(function () {
        tip.remove()
    }, 5000)
};
Run.initConfirmReceipt = function (c, d) {
    var b = $("#module" + c);
    var a = b.find(".memberOrderNewPanel").length > 0;
    b.find(".J-con-rpt").click(function () {
        var i = $(this), f = i.parent().parent();
        orderId = i.attr("_oid");
        var g = ["<div class='fk-conRpt' style='margin-top:16px;'>", "<div style='padding:10px; font-family:微软雅黑; font-size:12px; color:rgb(99,99,99);'>", LS.orderConfirmMsg, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' title='", LS.cancel, "' style='margin-right:20px;width:60px; height:26px; line-height:25px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover' title='", LS.orderSure, "' style='width:77px; height:26px; background:#1779ff; line-height:25px; border:0;'>" + LS.orderSure + "</span>", "</div>", "</div>"];
        var k = parseInt(Math.random() * 10000);
        var e = {boxId: k, title: "", htmlContent: g.join(""), width: 372, height: 150, boxName: "confirmReceipt"};
        var h = Run.popupBox(e);
        var j = "cmd=setStatus&id=" + orderId + "&status=20";
        h.find(".J-rpt-save").on("click", function () {
            $.ajax({
                type: "post", url: "ajax/order_h.php", data: j, error: function () {
                    Helper.ing(LS.systemError, false)
                }, success: function (l) {
                    var m = $.parseJSON(l);
                    if (m.success) {
                        if (d) {
                            if (a) {
                                f.find(".oOptTd").append("<a  hidefocus='true' title='" + LS.comment + "' href='oc.php?id=" + orderId + "' target='_blank'><span class='optIcon opComent'></span></a>")
                            } else {
                                f.find(".itemOpt").append("<span title='" + LS.comment + "' class='pd-ct J-pd-ct' _oid='" + orderId + "'></span>");
                                Run.initPdComment(c)
                            }
                        }
                        Helper.ing(LS.orderSureMsg, true);
                        f.find(".J-status").text(m.msg);
                        f.find(".J-flow").remove();
                        Helper.top.$("#popupBg" + k).remove();
                        h.remove();
                        i.remove()
                    } else {
                        Helper.ing(m.msg, true)
                    }
                }
            })
        })
    })
};
Run.initConOrderCancel = function (b, c) {
    var a = $("#module" + b);
    if (!c) {
        a.find(".J-order-cancel").hover(function () {
            var d = $(this);
            d.attr("class", "order-cancel-hover")
        }, function () {
            var d = $(this);
            d.attr("class", "order-cancel")
        })
    }
    a.find(".J-order-cancel").click(function () {
        var h = $(this), e = h.parent().parent();
        orderId = h.attr("_oid");
        var f = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.orderCancelMsg, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
        var j = parseInt(Math.random() * 10000);
        var d = {boxId: j, title: "", htmlContent: f.join(""), width: 360};
        var g = Run.popupBox(d);
        var i = "cmd=setStatus&id=" + orderId + "&status=25";
        g.find(".J-rpt-save").on("click", function () {
            $.ajax({
                type: "post", url: "ajax/order_h.php", data: i, error: function () {
                    Helper.ing(LS.systemError, false)
                }, success: function (k) {
                    var l = $.parseJSON(k);
                    if (l.success) {
                        Helper.ing(LS.orderCanceled, true);
                        setTimeout(function () {
                            document.location.reload()
                        }, 200)
                    } else {
                        Helper.ing(l.msg, true)
                    }
                }
            })
        })
    })
};
Run.initPdComment = function (b) {
    var a = $("#module" + b);
    a.find(".J-pd-ct").unbind("click").bind("click", function () {
        var e = $(this), c = e.attr("_oid"), d = a.find(".J-pd-panel" + c), f = d.find(".msgImgList");
        if (Helper.isIE6()) {
            f.css("display", "none")
        }
        if (d.is(":visible")) {
            d.hide()
        } else {
            d.show();
            if (Helper.isIE6()) {
                setTimeout(function () {
                    f.css({display: "block"});
                    var g = f.find("td");
                    if (typeof(g) != "undefined" && g != null) {
                        f.find("td").eq(0).find("div").click()
                    }
                }, 20)
            }
        }
    })
};
Run.commMenUpAllImgList = null;
Run.setMenCommUpAllImgList = function (a) {
    Run.commMenUpAllImgList = Helper.fkEval("(" + a + ")");
    if (Helper.isIE6() || Helper.isIE7()) {
        $(".msgBoard_upImg_border").css({width: "50px", height: "50px"})
    }
};
Run.siteMenCommImgFileUpload2 = function (b, e, g, a, d) {
    if (!Helper.isIE()) {
        Run.siteMenCommImgFileUpload2H5(b, e, g, a, d);
        return
    }
    var f = g.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.php",
        button_placeholder_id: e,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {ctrl: "Filedata", app: 21, type: 0, fileUploadLimit: 5, isRunForm: true},
        file_types: f.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        },
        file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Helper.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Helper.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        },
        upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(i.name)), true);
                j.tbNum = d;
                onFileUploadEvent("upload", j)
            } else {
                Helper.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        },
        upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Helper.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadFileExist, Helper.encodeHtml(i.name)), true)
                } else {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof(a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb" + d).eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                if (typeof(swfObjList) == "undefined") {
                    swfObjList = {}
                }
                swfObj = swfObjList[d];
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_start_handler: function (h) {
            Helper.enablePopupWindowBtn(0, "save", false);
            Helper.ing(LS.siteFormSubmitFileUploadPrepare, false)
        },
        view_progress: function (h, k, j, i) {
            Helper.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (typeof(swfObjList) == "undefined") {
        swfObjList = {}
    }
    swfObjList[d] = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Run.productMenCommImgTableCtrl2(k, o, j, l, a, i, m.tbNum, q)
        }
    }
};
Run.siteMenCommImgFileUpload2H5 = function (b, e, h, a, d) {
    $("#" + e).parent(".uploadImgDiv").css("background-image", "url(" + _resRoot + "/image/site/msgUpImg/upload1.jpg)");
    var f = h.split(",");
    var c = {
        siteFree: false,
        updateUrlViewRes: "",
        auto: true,
        fileTypeExts: f.join(";"),
        multi: false,
        fileSizeLimit: b * 1024 * 1024,
        breakPoints: true,
        saveInfoLocal: false,
        showUploadedPercent: false,
        showUploadedSize: false,
        removeTimeout: 9999999,
        post_params: {app: 21, type: 0, fileUploadLimit: b, isRunForm: true},
        isBurst: false,
        isDefinedButton: true,
        buttonText: "",
        uploader: "/ajax/commUpsiteimg_h.php?cmd=mobiUpload&_TOKEN=" + $("#_TOKEN").attr("value"),
        onUploadSuccess: function (i, k) {
            var j = jQuery.parseJSON(k);
            if (j.success) {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(i.name)), true);
                j.tbNum = d;
                onFileUploadEvent("upload", j)
            } else {
                Helper.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        },
        onUploadError: function (i, j) {
            Helper.ing("网络繁忙，文件:" + i.name + "上传失败，请稍后重试")
        },
        onSelect: function () {
            if (a == null || typeof(a) == "undefined") {
                a = 5
            }
            var j = $("#msgBoardAddImgTb" + d).eq(0);
            var i = j.find("td").length;
            if (i >= (a + 1)) {
                Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                var k = j.find("td").eq(j.find("td").length - 1);
                k.css("display", "none");
                return false
            }
            return true
        },
        onUploadStart: function (i) {
            $("#progressBody_ " + i.id).remove();
            $("#progressWrap_" + i.id).remove()
        }
    };
    if (typeof(swfObjList) == "undefined") {
        swfObjList = {}
    }
    var g = $("#" + e).uploadify(c);
    $("#" + e).find(".uploadify-button").css("width", 50).css("height", 50).css("display", "inline-block");
    onFileUploadEvent = function (q, n) {
        if (q == "upload") {
            var k = n.id;
            var p = n.name;
            var m = n.size;
            var l = n.path;
            var r = n.pathSmall;
            var j = n.fileId;
            var i = n.width;
            var o = n.height;
            Run.productMenCommImgTableCtrl2(l, p, k, m, a, j, n.tbNum, r)
        }
    }
};
Run.productMenCommImgTableCtrl2 = function (l, a, b, g, c, d, j, k) {
    var h = $("#pdCommTb" + j).eq(0);
    var i = h.find(".J_td").length - 1;
    var e = h.find(".J_td").eq(i);
    e.html((i) + "/" + c);
    var f = [];
    f.push("<td class='J_td'>");
    f.push("<table class='pdCtIconDiv' cellpadding='0' cellspacing='0'>");
    f.push("<tr>");
    f.push("<td>");
    f.push("<img alt='' class='pdCtIcon' src='" + k + "' _name='" + a + "'  _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "' _path='" + l + "'  _smallPath='" + k + "'/>");
    f.push("</td>");
    f.push("</tr>");
    f.push("</table>");
    f.push("<span onclick='Run.productMenCommImgDelete2(this," + j + ")' class='delPicIcon'/>");
    f.push("</td>");
    e.before(f.join(""));
    if (i >= c) {
        h.find(".J_td").eq(0).hide()
    }
};
Run.productMenCommImgDelete2 = function (a, d) {
    var e = $("#pdCommTb" + d).eq(0);
    var b = e.find(".J_td").length;
    for (var c = 0; c < b; c++) {
        if (e.find(".J_td").eq(c).find(".delPicIcon")[0] === a) {
            e.find(".J_td").eq(c).remove();
            break
        }
    }
    b = e.find(".J_td").length - 1;
    var f = e.find(".J_td").eq(b);
    f.html((b - 1) + "/" + f.attr("maxNum"));
    e.find(".J_td").eq(0).show()
};
Run.orderPdCommentAddCom2 = function (o, q, k, m) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var u = $("#oCommentItem" + q), s = $("#ocArea" + q), d = $.trim(s.val()), j = parseInt(s.attr("minlength")),
        e = parseInt(s.attr("maxlength"));
    if (typeof(d) != "string" || "" == d) {
        s.focus();
        Helper.ing(LS.commentNotEmpty, true);
        return
    }
    if (d.length < j) {
        Helper.ing(Helper.format(LS.commentLenTips, Helper.encodeHtml(j)), true);
        return
    }
    if (d.length > e) {
        Helper.ing(Helper.format(LS.commentLenTips, Helper.encodeHtml(e)), true);
        return
    }
    var r = $("#pdCommTb" + k);
    var h = [];
    var l = [];
    if (r != null && typeof(r) != "undefined") {
        var c = r.eq(0);
        var g = c.find("td").length;
        if (g > 1) {
            for (var x = 0; x < (g - 1); x++) {
                var f = c.find(".J_td").eq(x).find(".pdCtIcon");
                if (f != null && typeof(f) != "undefined" && f.length > 0) {
                    var y = {};
                    var b = {};
                    var w = f.attr("_id");
                    var A = f.attr("_name");
                    var v = f.attr("_path");
                    var a = f.attr("_smallpath");
                    var p = f.attr("_file_size");
                    var t = f.attr("_file_id");
                    y.imgId = w;
                    y.imgName = A;
                    y.imgSize = p;
                    y.tempFileId = t;
                    h.push(y);
                    b.path = v;
                    b.smallPath = a;
                    l.push(b)
                }
            }
        }
    }
    var z = $(".submitStarList").attr("star");
    if (!z) {
        z = 5
    }
    var n = {oid: o, iid: q, commImgList: $.toJSON(h), comment: d, star: z};
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=addPC", data: n, error: function () {
            Helper.ing(LS.systemError)
        }, success: function (L) {
            var G = jQuery.parseJSON(L);
            if (G.success) {
                Helper.ing(LS.submitSuccess, true);
                var K = G.imgsPathStr;
                s.remove();
                var H = u.find(".commentStarLine");
                var E = u.find(".commentLine");
                var C = u.find(".commentOptLine");
                H.remove();
                E.remove();
                C.css({visibility: "hidden", position: "absolute", "z-index": "-1"});
                var B = 0;
                if (typeof(Run.commMenUpAllImgList) != "undefined" && Run.commMenUpAllImgList != null) {
                    B = Run.commMenUpAllImgList.length
                } else {
                    Run.commMenUpAllImgList = []
                }
                var i = [];
                var I = '<div class="commentLine">';
                I += '<table class="commentTable"><tbody><tr>';
                I += '<td class="ctTitleTd"></td>';
                I += '<td class="ctCommentArea">';
                I += '<div class="ctContent">';
                I += Helper.encodeHtml(d);
                I += "</div>";
                I += "</td>";
                I += "</tr></tbody></table>";
                I += "</div>";
                I += '<div class="commentLine">';
                I += '<table class="commentTable"><tbody><tr>';
                I += '<td class="ctTitleTd"></td>';
                I += '<td><div class="ctOpt J_imgDiv">';
                I += '<table class="pdCtIconList J_imageTable" border="0" cellspacing="0" cellpadding="0"><tbody><tr>';
                $.each(h, function (N, O) {
                    I += '<td class="J_td">';
                    I += '<table class="pdCtIconDiv" cellpadding="0" cellspacing="0" onclick="Run.showMenCommImgList(\'' + O.imgId + "_" + k + "_" + N + "','" + K[N]["path"] + "','picGroupId_" + k + "','" + k + "','" + N + "', true)\"><tr><td>";
                    I += '<img id="' + O.imgId + "_" + k + "_" + N + '" class="pdCtIcon" src="' + l[N]["smallPath"] + '"/>';
                    I += "</td></tr></table>";
                    I += "</td>";
                    var M = new Object();
                    M.data = K[N]["path"];
                    i.push(M)
                });
                I += "</tr></tbody></table>";
                I += "</div></td>";
                I += "</tr></tbody></table>";
                I += "</div>";
                I += '<div class="commentStarLine"><table class="commentTable"><tr>';
                I += '<td class="ctTitleTd"></td>';
                I += "<td>";
                if (m) {
                    I += '<div class="lt-ctStarList">';
                    for (var D = 1; D <= 5; D++) {
                        if (D <= z) {
                            I += '<li class="fk-icons-star lt_select_more ctStar"></li>'
                        } else {
                            I += '<li class="fk-icons-star lt_no_select ctStar"></li>'
                        }
                    }
                    I += "</div>"
                }
                I += '<div class="ctTime">' + G.ctime + '<span class="commented">[' + LS.commentOK + "]</span></div>";
                I += "</td>";
                I += "</tr></table></div>";
                var F = new Object();
                F.data = i;
                Run.commMenUpAllImgList.push(F);
                u.append(I)
            } else {
                var J = "";
                switch (G.rt) {
                    case 1:
                        J = LS.commentError;
                        break;
                    case 2:
                        J = LS.mallStlSubmitNotFound;
                        break;
                    case 3:
                        J = LS.commentError;
                        break;
                    case 5:
                        J = LS.paramError;
                        break;
                    case 6:
                        Helper.top.location.href = "login.php?url=" + Helper.encodeUrl(Helper.getUrlRoot(top.location.href)) + "&errno=11";
                        return false;
                        break;
                    case 7:
                        J = LS.commentClosed;
                        break;
                    case 8:
                        J = LS.commentExist;
                        break;
                    case 9:
                        J = LS.commentCountLimit;
                        break;
                    default:
                        J = LS.systemError;
                        break
                }
                Helper.ing(J)
            }
        }
    })
};
Run.siteMenCommImgFileUpload = function (b, e, g, a, d) {
    var f = g.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.php",
        button_placeholder_id: e,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {ctrl: "Filedata", app: 21, type: 0, fileUploadLimit: 5, isRunForm: true},
        file_types: f.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        },
        file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Helper.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Helper.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        },
        upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(i.name)), true);
                j.tbNum = d;
                onFileUploadEvent("upload", j)
            } else {
                Helper.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        },
        upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Helper.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadFileExist, Helper.encodeHtml(i.name)), true)
                } else {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof(a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb" + d).eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                if (typeof(swfObjList) == "undefined") {
                    swfObjList = {}
                }
                swfObj = swfObjList[d];
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_start_handler: function (h) {
            Helper.ing(LS.siteFormSubmitFileUploadPrepare, false)
        },
        view_progress: function (h, k, j, i) {
            Helper.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (typeof(swfObjList) == "undefined") {
        swfObjList = {}
    }
    swfObjList[d] = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Run.productMenCommImgTableCtrl(k, o, j, l, a, i, m.tbNum, q)
        }
    }
};
Run.productMenCommImgTableCtrl = function (l, a, b, g, c, d, j, k) {
    var h = $("#msgBoardAddImgTb" + j).eq(0);
    var i = h.find("td").length;
    var e = h.find("td").eq(i - 1);
    e.find(".msgBoard_showImgCount").html((i) + "/" + c);
    var f = [];
    if (Helper.isIE6() || Helper.isIE7()) {
        f.push("<td class='msgBoard_upImg_tb_td2' style='border:0px !important;padding-right:3px;'>");
        f.push("<div class='msgBoard_upImg_border' style='width:50px !important;height:50px !important;margin-left:3px;'>")
    } else {
        f.push("<td class='msgBoard_upImg_tb_td2' style='border:0px !important;'>");
        f.push("<div class='msgBoard_upImg_border'>")
    }
    f.push("<span onclick='Run.productMenCommImgDelete(this," + j + ")' class='msgBoard_upImgTop_set'/>");
    if (Helper.isIE6() || Helper.isIE7()) {
        f.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + k + "' _name='" + a + "'  _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "' _path='" + l + "'  _smallPath='" + k + "'></p></div>")
    } else {
        f.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + k + "' _name='" + a + "'   _id='" + b + "' _file_size='" + g + "' _file_id='" + d + "'  _path='" + l + "' _smallPath='" + k + "' style='margin-left:-1px;'></p></div>")
    }
    f.push("</div>");
    f.push("</td>");
    e.before(f.join(""))
};
Run.productMenCommImgDelete = function (a, d) {
    var e = $("#msgBoardAddImgTb" + d).eq(0);
    var b = e.find("td").length;
    for (var c = 0; c < b; c++) {
        if (e.find("td").eq(c).find(".msgBoard_upImgTop_set")[0] === a) {
            e.find("td").eq(c).remove();
            break
        }
    }
    b = e.find("td").length;
    var f = e.find("td").eq(b - 1);
    f.find(".msgBoard_showImgCount").html((b - 1) + "/" + f.attr("maxNum"));
    if (b <= f.attr("maxNum")) {
        if (Helper.isIE6() || Helper.isIE7()) {
            f.css({display: "block", "padding-top": "7px"})
        } else {
            if (Helper.isIE()) {
                f.css({display: "block", "padding-top": "8px"})
            } else {
                f.css({display: "block", "padding-top": "12px"})
            }
        }
    }
};
Run.showMenCommImgList = function (i, l, d, h, c, b) {
    var f = $("#" + d);
    if (f != null && typeof(f) != "undefined") {
        f.remove()
    }
    var k = $("#" + i);
    var g = k.parentsUntil(".J_imgDiv", ".J_imageTable");
    g.attr("chooseTr", h);
    g.attr("chooseTd", c);
    var e;
    if (b) {
        e = g.find(".J_td")
    } else {
        e = g.find("td");
        b = false
    }
    e.find(".show_msg_border_rect").remove();
    var j = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    e.eq(c).prepend(j);
    var a = [];
    a.push("<div id='" + d + "' class='show_msg_outer_div'>");
    if (Helper.isIE6() || Helper.isIE7()) {
        a.push("<span onclick=Run.commShowPicClose('" + d + "','" + i + "') class='msg_close_show_img_icon' style='margin-top:-8px;'/>");
        a.push("<div class='show_msg_bordered_div' style='width:298px !important; margin-top:-8px;'></div>");
        a.push("<div class='show_msg_border_div' style='width:299px !important;margin-top:-8px;'>")
    } else {
        a.push("<span onclick=Run.commShowPicClose('" + d + "','" + i + "') class='msg_close_show_img_icon'/>");
        a.push("<div class='show_msg_bordered_div'  style='width:299px;'></div>");
        a.push("<div class='show_msg_border_div' style='margin-top:-8px;margin-left:1px;'>")
    }
    a.push("<div><p><img alt='' class='msg_up_show_img_set' src='" + l + "'></p></div>");
    a.push("</div>");
    a.push("</div>");
    g.after(a.join(""));
    setTimeout(function () {
        $("#" + d).hover(function () {
            var m = $("#" + d);
            if (m.find("#J_showCommPicMoveSign").attr("class") == null || typeof(m.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
                var n = [];
                n.push("<div id='J_showCommPicMoveSign'>");
                n.push("<img alt='' class='showCommPicMoveLeftClickArea' onclick=Run.showMenCommImgMove('" + i + "','" + d + "','left'," + b + ")>");
                n.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mLeft.png' onclick=Run.showMenCommImgMove('" + i + "','" + d + "','left'," + b + ") class='showCommPicMoveLeft'>");
                n.push("<img alt='' class='showCommPicMoveRightClickArea' onclick=Run.showMenCommImgMove('" + i + "','" + d + "','right'," + b + ")>");
                n.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mRight.png' onclick=Run.showMenCommImgMove('" + i + "','" + d + "','right'," + b + ") class='showCommPicMoveRight'>");
                n.push("</div>");
                m.prepend(n.join(""))
            }
        }, function () {
            var m = $("#" + d);
            if (Helper.isIE7()) {
                setTimeout(function () {
                    m.find("#J_showCommPicMoveSign").remove()
                }, 500)
            } else {
                m.find("#J_showCommPicMoveSign").remove()
            }
        })
    }, 10)
};
Run.showMenCommImgMove = function (h, b, g, a) {
    if (h == null || g == null) {
        return
    }
    var j = $("#" + h);
    var d = j.parentsUntil(".J_imgDiv", ".J_imageTable");
    currentChooseTr = d.attr("chooseTr");
    currentChooseTd = d.attr("chooseTd");
    if (currentChooseTr == null || currentChooseTd == null) {
        return
    }
    if (Run.commMenUpAllImgList == null) {
        return
    }
    var k = 0;
    var c;
    if (a) {
        c = d.find(".J_td")
    } else {
        c = d.find("td");
        a = false
    }
    var f = parseInt(c.length);
    if (f <= 1) {
        return
    }
    if (g == "left") {
        if (currentChooseTd == "0" || currentChooseTd == 0) {
            k = f - 1
        } else {
            k = parseInt(currentChooseTd) - 1
        }
    } else {
        if (g == "right") {
            k = parseInt(currentChooseTd) + 1;
            if (k >= Run.commMenUpAllImgList[currentChooseTr].data.length) {
                k = 0
            }
        }
    }
    c.eq(currentChooseTd).find(".show_msg_border_rect").remove();
    var i = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    c.eq(k).prepend(i);
    d.attr("chooseTd", k);
    var e = $("#" + b).find(".msg_up_show_img_set").parent();
    $("#" + b).find(".msg_up_show_img_set").remove();
    e.append("<img alt='' class='msg_up_show_img_set' src='" + Run.commMenUpAllImgList[currentChooseTr].data[k].data + "'>")
};
Run.orderPdCommentAddCom = function (n, p, j, l) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var s = $(".J-ct-panel-" + n + "-" + p), z = $("#pc_" + n + "_" + p), d = $.trim(z.val()), h = z.attr("minlength");
    if (typeof(d) != "string" || "" == d) {
        z.focus();
        Helper.ing(LS.commentNotEmpty, true);
        return
    }
    if (d.length < h) {
        Helper.ing(Helper.format(LS.commentLenTips, Helper.encodeHtml(h)), true);
        return
    }
    var q = $("#msgBoardAddImgTb" + j);
    var g = [];
    var k = [];
    if (q != null && typeof(q) != "undefined") {
        var c = q.eq(0);
        var f = c.find("td").length;
        if (f > 1) {
            for (var v = 0; v < (f - 1); v++) {
                var e = c.find("td").eq(v).find(".msgBoard_upImg_set");
                if (e != null && e != "undefined") {
                    var w = {};
                    var b = {};
                    var u = e.attr("_id");
                    var y = e.attr("_name");
                    var t = e.attr("_path");
                    var a = e.attr("_smallpath");
                    var o = e.attr("_file_size");
                    var r = e.attr("_file_id");
                    w.imgId = u;
                    w.imgName = y;
                    w.imgSize = o;
                    w.tempFileId = r;
                    g.push(w);
                    b.path = t;
                    b.smallPath = a;
                    k.push(b)
                }
            }
        }
    }
    var x = $(".submitStarList").attr("star");
    if (!x) {
        x = 5
    }
    var m = {oid: n, iid: p, commImgList: $.toJSON(g), comment: d, star: x};
    $.ajax({
        type: "post", url: "ajax/order_h.php?cmd=addPC", data: m, error: function () {
            Helper.ing(LS.systemError)
        }, success: function (E) {
            var P = jQuery.parseJSON(E);
            if (P.success) {
                Helper.ing(LS.submitSuccess, true);
                var O = s.find(".g_textarea").parent();
                var M = s.find(".ct-area3");
                var K = s.find(".g_ibutton").parent();
                var D = s.find(".ct-comm-title"), C = s.find(".submitStarList");
                var Q = s.find(".msgBoard_submit_btn").parent();
                O.remove();
                M.css({visibility: "hidden", position: "absolute", "z-index": "-1"});
                K.remove();
                D.remove();
                C.remove();
                Q.remove();
                var N = 0;
                if (typeof(Run.commMenUpAllImgList) != "undefined" && Run.commMenUpAllImgList != null) {
                    N = Run.commMenUpAllImgList.length
                } else {
                    Run.commMenUpAllImgList = []
                }
                var F = [];
                F.push("<div class='ct-area2'>" + d + "</div>");
                F.push("<div  class='msgImgList ct-area3' style='margin-top:-12px;'>");
                F.push("<table>");
                F.push("<tr style='border:0px !important;'>");
                var i = [];
                if (g != "[]" && g.length > 0 && P.imgsPathStr != "null" && g.length == P.imgsPathStr.length) {
                    for (var L = 0; L < g.length; L++) {
                        var J = g[L].imgId;
                        var I = P.imgsPathStr[L].path;
                        var A = k[L].smallPath;
                        F.push("<td class='msgBoard_showImg_tb_td' style='border:0px !important;'>");
                        F.push("<div onclick=Run.showMenCommImgList('" + J + "','" + I + "','picGroupId_" + N + "','" + N + "','" + L + "') class='msgBoard_upImg_border'>");
                        F.push("<div><p><img alt='' class='msgBoard_upImg_set' id='" + J + "' src='" + A + "'></p></div>");
                        F.push("</div>");
                        F.push("</td>");
                        var G = new Object();
                        G.data = I;
                        i.push(G)
                    }
                }
                F.push("</tr>");
                F.push("</table>");
                F.push("</div>");
                F.push("<div class='ct-time'>");
                F.push("<span style='margin-right:10px;'>" + P.ctime + "</span>");
                F.push("<span class='g_stress'>" + LS.commentOK + "</span>");
                F.push("</div>");
                if (l) {
                    F.push("<div class='commStarList comm-star-list'>");
                    for (var L = 1; L <= 5; L++) {
                        if (L <= x) {
                            F.push("<li class='fk-icons-star lt_select_more'></li>")
                        } else {
                            F.push("<li class='fk-icons-star lt_no_select'></li>")
                        }
                    }
                    F.push("</div>")
                }
                var H = new Object();
                H.data = i;
                Run.commMenUpAllImgList.push(H);
                s.append(F.join(""));
                if (Helper.isIE6() || Helper.isIE7()) {
                    setTimeout(function () {
                        $(".msgBoard_upImg_border").css({width: "50px", height: "50px"})
                    }, 50)
                }
            } else {
                var B = "";
                switch (P.rt) {
                    case 1:
                        B = LS.commentError;
                        break;
                    case 2:
                        B = LS.mallStlSubmitNotFound;
                        break;
                    case 3:
                        B = LS.commentError;
                        break;
                    case 5:
                        B = LS.paramError;
                        break;
                    case 6:
                        Helper.top.location.href = "login.php?url=" + Helper.encodeUrl(Helper.getUrlRoot(top.location.href)) + "&errno=11";
                        return false;
                        break;
                    case 7:
                        B = LS.commentClosed;
                        break;
                    case 8:
                        B = LS.commentExist;
                        break;
                    case 9:
                        B = LS.commentCountLimit;
                        break;
                    default:
                        B = LS.systemError;
                        break
                }
                Helper.ing(B)
            }
        }
    })
};
Run.changeIEMsgInputWidth = function () {
    if (isIE = navigator.userAgent.indexOf("MSIE") != -1) {
        $("#orderLeveaMsgIn").css({height: "17px", "line-height": "17px", width: "98%"})
    }
};
Run.orderLeveaMsgTip = "";
Run.orderMessageOpen = false;
Run.orderMessageMaxNum = 0;
Run.setLisMsgInput = function (c, a, b) {
    Run.orderMessageOpen = a;
    Run.orderLeveaMsgTip = c;
    Run.orderMessageMaxNum = b;
    $(function () {
        $("#orderLeveaMsgIn").focusin(function () {
            if ($(this).val() === Run.orderLeveaMsgTip) {
                $(this).val("")
            }
            $(this).css("color", "#333")
        });
        $("#orderLeveaMsgIn").focusout(function () {
            $(this).css("color", "black");
            if ($(this).val() == "") {
                $(this).val(Run.orderLeveaMsgTip);
                $(this).css("color", "#b8b8b8")
            }
        })
    })
};
Run.setLisMsgInputInit = function (a) {
    $(function () {
        $("#orderLeveaMsgIn").val(a);
        $("#orderLeveaMsgIn").css("color", "#b8b8b8")
    })
};
(function (i) {
    i.cusAreaList = [];
    i.isHideCN = false;
    i.isHideOS = false;
    i.initMstlDomEvent = function (y, A, I, F) {
        i.cusAreaList = A;
        i.isHideCN = I;
        i.isHideOS = F;
        var G = y.moduleId, t = y.sessionMid, s = y.memberId, u = y.addrInfoList, C = y.orderId,
            w = y.unCheckeditemIdList, v = y.unCheckedItemList, D = y.isFirstTime, z = y.memberName, H = y.imme,
            r = y.newPropList, B = y.mobileCtNameList, x = y.operaKey, E = {};
        E.addrInfoList = u;
        $(".addrListWrap").off("click.mstl").on("click.mstl", ".addrMsg", function (M) {
            var K = $(M.currentTarget), J = parseInt(K.attr("_item")), L = $(M.target || M.srcElement), J;
            if (L.hasClass("editAddrBtn")) {
                e(J, t, u, s, r, B);
                g(J, u, r);
                M.stopPropagation();
                return
            }
            if (K.hasClass("j_addrMsg") && !K.hasClass("selectedMsg")) {
                $(".selectedMsg").removeClass("selectedMsg mstl_border");
                K.addClass("selectedMsg mstl_border");
                p(J, u);
                return
            }
            if (K.hasClass("addAddrMsgPanel")) {
                e(-1, t, u, s, r, B);
                return
            }
        });
        $(".delAddrBtn").click(function (P) {
            var J = $(this).parent().parent().attr("_item");
            var L = ["<div class='fk-cancelOrder'>", "<div style='padding:10px;'>", LS.conCancelAddrInfo, "</div>", "<div style='padding:10px 0 18px 0;'>", "<span class='J-rpt-cancel popupBClose' style='margin-right:20px;'>", LS.cancel, "</span>", "<span class='J-rpt-save con-hover'>" + LS.confirm + "</span>", "</div>", "</div>"];
            var O = parseInt(Math.random() * 10000);
            var K = {boxId: O, title: "", htmlContent: L.join(""), width: 300};
            var M = i.popupBox(K);
            var N = "ajax/memberAdm_h.php?cmd=set&id=" + t;
            M.find(".J-rpt-save").on("click", function () {
                u.splice(J, 1);
                $.ajax({
                    type: "post", url: N, data: "info=" + Helper.encodeUrl($.toJSON(E)), error: function () {
                        Helper.ing(LS.systemError, false)
                    }, success: function (Q) {
                        var R = $.parseJSON(Q);
                        if (R.success) {
                            var S = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                            document.location.href = "mstl.php" + S
                        } else {
                            Helper.ing(R.msg, true)
                        }
                    }
                })
            });
            P.stopPropagation()
        });
        $(".setDefaultBtn").click(function (L) {
            var K = $(this).parent().parent().attr("_item");
            var J = "ajax/memberAdm_h.php?cmd=set&id=" + t;
            for (index in u) {
                u[index].isDefault = 0
            }
            u[K].isDefault = 1;
            $.ajax({
                type: "post", url: J, data: "info=" + Helper.encodeUrl($.toJSON(E)), error: function () {
                    Helper.ing(LS.systemError, false)
                }, success: function (M) {
                    var N = $.parseJSON(M);
                    if (N.success) {
                        var O = document.location.search.search(/imme/) > -1 ? "?imme" : "";
                        document.location.href = "mstl.php" + O
                    } else {
                        Helper.ing(N.msg, true)
                    }
                }
            });
            L.stopPropagation()
        });
        $(".mallShipSelect").off("change.mstl").on("change.mstl", function (M) {
            var K = $(this).find("option:selected"), L = $(".shippingPay"), N = $("#shippingMoneyVal"),
                J = parseFloat(K.attr("price")).toFixed(2);
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                L.text(Helper.formatPriceEn(J)).attr("_shipmoney", J);
                N.text(Helper.formatPriceEn(J)).attr("_shipmoney", J)
            } else {
                L.text(J).attr("_shipmoney", J);
                N.text(J).attr("_shipmoney", J)
            }
            f()
        }).trigger("change.mstl");
        $(".payListWrap").off("click.mstl").on("click.mstl", ".payItemBox", function (K) {
            var J = $(K.currentTarget);
            if (!J.hasClass("payChecked")) {
                $(".payChecked").removeClass("payChecked mstl_border mstl_payChecked");
                J.addClass("payChecked mstl_border mstl_payChecked");
                if (J.hasClass("payItemBox2")) {
                    $(".banksMsgWrap").addClass("banksMsgWrapShow")
                } else {
                    $(".banksMsgWrap").removeClass("banksMsgWrapShow")
                }
            }
        });
        if ($(".payChecked ").hasClass("payItemBox2")) {
            $(".banksMsgWrap").addClass("banksMsgWrapShow")
        }
        $(".payItemBox1, .payItemBox2").off("mouseenter.mstl").on("mouseenter.mstl", function () {
            var K = $(this), J = K.find(".payMethod").attr("tips");
            if (!J) {
                return
            }
            var L = "<div class='payTipsPanel'>";
            L += "<div class='panelTriOut'>";
            L += "<div class='panelTriIn'></div>";
            L += "</div>";
            L += J;
            L += "</div>";
            K.append(L)
        }).off("mouseleave.mstl").on("mouseleave.mstl", function () {
            var J = $(this), K = J.find(".payTipsPanel");
            if (K.length > 0) {
                K.remove()
            }
        });
        a();
        l();
        $(".mstlSublimeBtn").off("click.mstl").on("click.mstl", function () {
            var J = false;
            var N = $(".addrListWrap .selectedMsg").attr("_item");
            if (u.length > 0 && N != null) {
                for (var O = 0; O < r.length; O++) {
                    var R = r[O].fieldKey;
                    var K = r[O].name;
                    var Q = r[O].required;
                    if (R == "addr") {
                        J = true
                    }
                    if (!Q) {
                        continue
                    }
                    if (u[N][R] == null || u[N][R] == "") {
                        Helper.ing(LS.addrInfoInputError + K, 1);
                        return
                    }
                }
                if (J) {
                    var L = u[N]["addr_info"].isCus || "";
                    var S = u[N]["addr_info"].provinceCode || "";
                    var P = u[N]["addr_info"].cityCode || "";
                    var M = u[N]["addr_info"].countyCode || "";
                    if (S != "" && L) {
                        if (q(S) == "") {
                            Helper.ing(LS.enterCorrectAddress, 1);
                            return
                        }
                    }
                    if (P != "" && L) {
                        if (q(P) == "") {
                            Helper.ing(LS.enterCorrectAddress, 1);
                            return
                        }
                    }
                    if (M != "" && L) {
                        if (q(M) == "") {
                            Helper.ing(LS.enterCorrectAddress, 1);
                            return
                        }
                    }
                }
            } else {
                Helper.ing(LS.enterConsignee, 1);
                return
            }
            b(G, C, w, v, s, D, z, u, H, r)
        });
        if (x == 7) {
            $(".addrMsg").each(function () {
                if ($(this).attr("_item") == (u.length - 1)) {
                    $(this).click()
                }
            })
        } else {
            if (x != 6) {
                $(".addrMsg").each(function () {
                    if ($(this).attr("_item") == x) {
                        $(this).click()
                    }
                })
            }
        }
        if ($(".selectedMsg").length > 0) {
            p(parseInt($(".selectedMsg").attr("_item")), u)
        }
        i.placeholder($(".msgforSeller, .integralValInput"))
    };
    function g(y, s, r) {
        var L = s[y], E = $(".addAddrPopPanel"), x = $("#addrDetail"), H = Helper.top._lcid, G, v, C, D, t = false, F;
        for (var J = 0; J < r.length; J++) {
            F = r[J];
            if (F.fieldKey == "addr") {
                var B = L.addr_info.isCus;
                if (!B) {
                    var A = "";
                    var w = "";
                    var u = "";
                    if (H == 2052 || H == 1028) {
                        A = site_cityUtil.getInfo(L.addr_info.countyCode).name;
                        w = site_cityUtil.getInfo(L.addr_info.cityCode).name;
                        u = site_cityUtil.getInfo(L.addr_info.provinceCode).name
                    } else {
                        A = site_cityUtil.getInfoEn(L.addr_info.countyCode).name;
                        w = site_cityUtil.getInfoEn(L.addr_info.cityCode).name;
                        u = site_cityUtil.getInfoEn(L.addr_info.provinceCode).name
                    }
                    if (L.addr_info.provinceCode == 990000) {
                        $("#areaBoxInput").attr("isOs", 1);
                        $("#allArea").val("os");
                        $("#allArea").change()
                    } else {
                        $("#areaBoxInput").attr("isCn", 1);
                        $("#allArea").val("cn");
                        $("#allArea").change()
                    }
                    $("#areaBoxInput").attr("area1", L.addr_info.provinceCode);
                    $("#areaBoxInput").attr("area2", L.addr_info.cityCode);
                    $("#areaBoxInput").attr("area3", L.addr_info.countyCode);
                    x.val(L.addr_info.streetAddr || "");
                    $("#areaBoxInput").attr("lastArea", "-" + A);
                    $("#areaBoxInput").attr("lastAreaType", "county");
                    setTimeout(function () {
                        $("#areaBox1 .group_item[pid='" + L.addr_info.provinceCode + "']").click();
                        setTimeout(function () {
                            $("#areaBox1 .group_item[cid='" + L.addr_info.cityCode + "']").click();
                            setTimeout(function () {
                                $("#areaBox1 .group_item[cid='" + L.addr_info.countyCode + "']").click()
                            }, 0)
                        }, 0)
                    }, 0);
                    $("#areaBox1").hide()
                } else {
                    var K = q(L.addr_info.countyCode);
                    var I = q(L.addr_info.cityCode);
                    var z = q(L.addr_info.provinceCode);
                    $("#allArea").val(L.addr_info.provinceCode);
                    $("#allArea").change();
                    $("#areaBoxInput").attr("lastArea", "-" + K);
                    $("#areaBoxInput").attr("lastAreaType", "thd");
                    $("#areaBoxInput").val(z + "-" + I + "-" + K);
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", L.addr_info.provinceCode);
                    $("#areaBoxInput").attr("area2", L.addr_info.cityCode);
                    $("#areaBoxInput").attr("area3", L.addr_info.countyCode);
                    $("#addrDetail").val(L.addr_info.streetAddr)
                }
                t = true;
                continue
            }
            D = E.find("#" + F.fieldKey);
            if (D.length > 0 && L[F.fieldKey]) {
                D.val(L[F.fieldKey] || "");
                if (F.fieldKey == "mobile") {
                    $("#mobileCt").val(L.mobileCt)
                }
            }
        }
        if (!t && $("#mallShipTemplate_province").length === 1) {
            if (H == 2052 || H == 1028) {
                G = $("#addrInfo_county"), v = $("#addrInfo_city"), C = $("#addrInfo_province");
                C.val(L.addr_info.provinceCode);
                C.trigger("change");
                v.val(L.addr_info.cityCode);
                v.trigger("change");
                G.val(L.addr_info.countyCode)
            }
            x.val(L.addr_info.streetAddr || "")
        }
    }

    function e(z, u, w, t, s, A) {
        var M = [], D, P, G, L, S, F, N, y, C = "", I = Helper.top._lcid;
        var O = {};
        O.addrInfoList = w;
        var R = {};
        $.each(i.cusAreaList, function (U, V) {
            if (V.parentId == null || V.parentId == "" || V.parentId === 0) {
                R[V.id] = V
            }
        });
        if (I == 2052 || I == 1028) {
            N = site_cityUtil.getProvince();
            site_cityUtil.simpleProvinceName(N)
        }
        y = {};
        y.width = 942;
        var Q = parseInt($(".mallStlNew").attr("themecolor"));
        var v = isNaN(Q) ? "" : ("mstlColor" + Q);
        y.extClass = "addAddrPopPanel " + v;
        y.title = "<div class='addAddrPanelTitle'>" + LS.shippingAddress + "</div>";
        C += "<div class='addAddrPanelContent'>";
        var x = false;
        var E = {};
        for (var K = 0; K < s.length; K++) {
            E = s[K];
            if (E.fieldKey == "addr") {
                var r = (I == 2052 || I == 1028) ? "中国" : "China";
                var H = (I == 2052 || I == 1028) ? "海外" : "Oversea";
                C += "<div class='newAddrLine'><label class='itemLabel'>" + LS.Region + "<i class='mustWrite'>*</i></label>";
                C += "<select id='allArea' class='allArea addrSelectInput'>";
                C += "<option value=''>------</option>";
                if (!i.isHideCN) {
                    C += "<option value='cn'>" + r + "</option>"
                }
                if (!i.isHideOS) {
                    C += "<option value='os'>" + H + "</option>"
                }
                $.each(R, function (U, V) {
                    C += "<option value='" + R[U].id + "'>" + Helper.encodeHtml(R[U].name) + "</option>"
                });
                C += "</select>";
                C += "<input type='text' id='areaBoxInput' class='areaBoxInput' class='itemValInput' style='width:295px;' placeholder='------' readOnly='true' isCn isOs isCus area1 area2 area3/>";
                C += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
                C += "<div id='province_box' class='province_box'>";
                C += "<div class='pv_head J_areaHead'>";
                C += "<div class='pv_pv pv'>" + LS.province + "</div>";
                C += "<div class='pv_city city'>" + LS.city + "</div>";
                C += "<div class='pv_county county'>" + LS.county + "</div>";
                C += "</div>";
                C += "<div class='pv_content'>";
                C += "<div class='spaceLine'></div>";
                $.each(site_cityUtil.getAreaGroupsPinYin(), function (U, V) {
                    C += "<div class='pv_group' style='" + (V[0] == "OS" ? "display:none;" : "") + "'>";
                    C += "<div class='group_head'>" + V[0] + "</div>";
                    C += "<div class='group_content'>";
                    $.each(V[1], function (X, W) {
                        if (I == 2052 || I == 1028) {
                            C += "<div class='group_item' pid='" + W + "' pname='" + site_cityUtil.getInfo(W).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(W).name) + "</div>"
                        } else {
                            C += "<div class='group_item' pid='" + W + "' pname='" + site_cityUtil.getInfoEn(W).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(W).name) + "</div>"
                        }
                    });
                    C += "</div>";
                    C += "</div>";
                    C += "<div class='spaceLine'></div>"
                });
                C += "</div>";
                C += "</div>";
                C += "<div id='city_box' class='city_box' style='display:none;'>";
                C += "<div class='city_head J_areaHead'>";
                C += "<div class='city_pv pv'>" + LS.province + "</div>";
                C += "<div class='city_city city'>" + LS.city + "</div>";
                C += "<div class='city_county county'>" + LS.county + "</div>";
                C += "</div>";
                C += "</div>";
                C += "<div id='county_box' class='county_box' style='display:none;'>";
                C += "<div class='county_head J_areaHead'>";
                C += "<div class='county_pv pv'>" + LS.province + "</div>";
                C += "<div class='county_city city'>" + LS.city + "</div>";
                C += "<div class='county_county county'>" + LS.county + "</div>";
                C += "</div>";
                C += "</div>";
                C += "</div>";
                C += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
                C += "<div id='sec_box' class='sec_box'>";
                C += "<div class='sec_head J_areaHead2'>";
                C += "<div class='sec_sec sec'>" + LS.firstRegion + "</div>";
                C += "<div class='sec_thd thd'>" + LS.secRegion + "</div>";
                C += "</div>";
                C += "<div class='sec_content'></div>";
                C += "</div>";
                C += "<div id='thd_box' class='thd_box' style='display:none;'>";
                C += "<div class='thd_head J_areaHead2'>";
                C += "<div class='thd_sec sec'>" + LS.firstRegion + "</div>";
                C += "<div class='thd_thd thd'>" + LS.secRegion + "</div>";
                C += "</div>";
                C += "<div class='thd_content'></div>";
                C += "</div>";
                C += "</div>";
                C += "</div>";
                C += "<p class='newAddrLine'><label class='itemLabel'>" + LS.addrDetail + "<i class='mustWrite'>" + (E.required ? "*" : "&nbsp;") + "</i></label>";
                C += "<input id='addrDetail' class='addrDetail itemValInput' placeholder='" + LS.addrDetail + "' maxLength='100'></p>";
                x = true;
                continue
            }
            C += "<p class='newAddrLine j_newAddrLine'>";
            C += "<label class='itemLabel'>";
            C += E.name;
            C += "<i class='mustWrite'>" + (E.required ? "*" : "&nbsp;") + "</i>";
            C += "</label>";
            if (E.fieldKey == "mobile") {
                C += "<select id='mobileCt' name='mobileCt' class='mobileCt'>";
                if (A != null && A.length > 0) {
                    for (var J = 0; J < A.length; J++) {
                        var T = A[J]["ctCode"];
                        C += "<option value='" + A[J]["ctName"] + "'>" + A[J]["ctShowName"] + T + "</option>"
                    }
                }
                C += "</select>"
            }
            C += "<input id='" + E.fieldKey + "' class='itemValInput " + E.fieldKey + "' maxLength='50'>";
            C += "</p>"
        }
        if (!x && $("#mallShipTemplate_province").length === 1) {
            var r = (I == 2052 || I == 1028) ? "中国" : "China";
            var H = (I == 2052 || I == 1028) ? "海外" : "Oversea";
            C += "<div class='newAddrLine'><label class='itemLabel'>" + LS.Region + "<i class='mustWrite'>*</i></label>";
            C += "<select id='allArea' class='allArea addrSelectInput'>";
            C += "<option value=''>------</option>";
            if (!i.isHideCN) {
                C += "<option value='cn'>" + r + "</option>"
            }
            if (!i.isHideOS) {
                C += "<option value='os'>" + H + "</option>"
            }
            $.each(R, function (U, V) {
                C += "<option value='" + R[U].id + "'>" + Helper.encodeHtml(R[U].name) + "</option>"
            });
            C += "</select>";
            C += "<input type='text' id='areaBoxInput' class='itemValInput areaBoxInput' style='width:295px;' placeholder='------' readOnly='true' isCn isOs isCus area1 area2 area3/>";
            C += "<div id='areaBox1' class='areaBox1 areaBox1New' style='display:none;'>";
            C += "<div id='province_box' class='province_box'>";
            C += "<div class='pv_head J_areaHead'>";
            C += "<div class='pv_pv pv'>" + LS.province + "</div>";
            C += "<div class='pv_city city'>" + LS.city + "</div>";
            C += "<div class='pv_county county'>" + LS.county + "</div>";
            C += "</div>";
            C += "<div class='pv_content'>";
            C += "<div class='spaceLine'></div>";
            $.each(site_cityUtil.getAreaGroupsPinYin(), function (U, V) {
                C += "<div class='pv_group' style='" + (V[0] == "OS" ? "display:none;" : "") + "'>";
                C += "<div class='group_head'>" + V[0] + "</div>";
                C += "<div class='group_content'>";
                $.each(V[1], function (X, W) {
                    if (I == 2052 || I == 1028) {
                        C += "<div class='group_item' pid='" + W + "' pname='" + site_cityUtil.getInfo(W).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(W).name) + "</div>"
                    } else {
                        C += "<div class='group_item' pid='" + W + "' pname='" + site_cityUtil.getInfoEn(W).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(W).name) + "</div>"
                    }
                });
                C += "</div>";
                C += "</div>";
                C += "<div class='spaceLine'></div>"
            });
            C += "</div>";
            C += "</div>";
            C += "<div id='city_box' class='city_box' style='display:none;'>";
            C += "<div class='city_head J_areaHead'>";
            C += "<div class='city_pv pv'>" + LS.province + "</div>";
            C += "<div class='city_city city'>" + LS.city + "</div>";
            C += "<div class='city_county county'>" + LS.county + "</div>";
            C += "</div>";
            C += "</div>";
            C += "<div id='county_box' class='county_box' style='display:none;'>";
            C += "<div class='county_head J_areaHead'>";
            C += "<div class='county_pv pv'>" + LS.province + "</div>";
            C += "<div class='county_city city'>" + LS.city + "</div>";
            C += "<div class='county_county county'>" + LS.county + "</div>";
            C += "</div>";
            C += "</div>";
            C += "</div>";
            C += "<div id='areaBox2' class='areaBox2 areaBox2New' style='display:none;'>";
            C += "<div id='sec_box' class='sec_box'>";
            C += "<div class='sec_head J_areaHead2'>";
            C += "<div class='sec_sec sec'>" + LS.firstRegion + "</div>";
            C += "<div class='sec_thd thd'>" + LS.secRegion + "</div>";
            C += "</div>";
            C += "<div class='sec_content'></div>";
            C += "</div>";
            C += "<div id='thd_box' class='thd_box' style='display:none;'>";
            C += "<div class='thd_head J_areaHead2'>";
            C += "<div class='thd_sec sec'>" + LS.firstRegion + "</div>";
            C += "<div class='thd_thd thd'>" + LS.secRegion + "</div>";
            C += "</div>";
            C += "<div class='thd_content'></div>";
            C += "</div>";
            C += "</div>";
            C += "</div>";
            C += "<p class='newAddrLine'><label class='itemLabel'></label>";
            C += "<input id='addrDetail' class='addrDetail itemValInput' placeholder='" + LS.addrDetail + "' maxLength='100'></p>"
        }
        C += "<p class='newAddrLine'><label class='itemLabel'></label><span id='sublimeNewAddr' class='sublimeNewAddr addAddrBtn mstl_bg'>" + LS.confirm + "</span><span id='cancelNewAddr' class='cancelNewAddr addAddrBtn'>" + LS.cancel + "</span></p>";
        C += "</div>";
        y.htmlContent = C;
        i.popupBox(y);
        if ($("#areaBoxInput").length > 0) {
            $("#areaBox1,#areaBox2").css("left", $("#areaBoxInput").position().left)
        }
        $("#areaBoxInput").hide();
        $(document).unbind("click.forAreaBox").bind("click.forAreaBox", function () {
            $("#areaBox1").hide();
            $("#areaBox2").hide()
        });
        $("#areaBox1,#areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (U) {
            B(U)
        });
        function B(U) {
            if (U.stopPropagation) {
                U.stopPropagation()
            } else {
                U.cancelBubble = true
            }
        }

        $("#allArea").change(function () {
            if ($("#allArea").val() == null || $("#allArea").val() == "" || $("#allArea").val() == "os") {
                $("#areaBoxInput").hide()
            } else {
                $("#areaBoxInput").show()
            }
            $("#areaBox1").hide();
            $("#areaBox2").hide();
            if ($("#allArea").val() == null || $("#allArea").val() == "") {
                return
            }
            $("#areaBoxInput").attr("isCn", 0);
            $("#areaBoxInput").attr("isCus", 0);
            $("#areaBoxInput").attr("isOs", 0);
            $("#areaBoxInput").attr("area1", "");
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            if ($("#allArea").val() == "cn") {
                $("#areaBoxInput").attr("isCn", 1);
                $("#areaBox1 .pv").click();
                $("#areaBox1 .city_content").remove();
                $("#areaBox1 .county_content").remove();
                $("#areaBox1").show();
                $("#areaBoxInput").val("")
            } else {
                if ($("#allArea").val() == "os") {
                    $("#areaBoxInput").attr("isOs", 1);
                    $("#areaBoxInput").attr("area1", 990000);
                    $("#areaBoxInput").attr("area2", 990100);
                    $("#areaBoxInput").val($("#areaBox1").find(".group_item[pid='990000']").text())
                } else {
                    $("#areaBoxInput").attr("isCus", 1);
                    $("#areaBoxInput").attr("area1", $("#allArea").val());
                    $("#areaBox2 .sec_content").html("");
                    $("#areaBox2 .thd_content").html("");
                    $("#areaBox2").show();
                    $("#areaBoxInput").val("")
                }
            }
            if ($("#allArea").val() == "cn" || $("#allArea").val() == "os") {
                return
            }
            var U = c($("#allArea").val());
            $("#sec_box .sec_content").append(U);
            $("#areaBoxInput").val($("#areaBoxInput").val() + $("#allArea option[value='" + $("#allArea").val() + "']").text());
            if (U === null || U === undefined || U === "") {
                $("#areaBox2").hide();
                $(".J-ssq").hide();
                $("#areaBoxInput").hide()
            }
        });
        $("#areaBoxInput").unbind("click").bind("click", function (U) {
            if ($("#allArea").val() == "cn") {
                $("#areaBox1").toggle();
                $("#areaBox2").hide();
                $("#province_box").show();
                $("#city_box").hide();
                $("#county_box").hide()
            } else {
                if ($("#allArea").val() == null || $("#allArea").val() == "os") {
                } else {
                    $("#areaBox2").toggle();
                    $("#areaBox1").hide();
                    $("#sec_box").show();
                    $("#thd_box").hide()
                }
            }
            B(U)
        });
        $("#areaBox1 .J_areaHead .pv").click(function () {
            $("#province_box").show();
            $("#city_box").hide();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .city").click(function () {
            $("#province_box").hide();
            $("#city_box").show();
            $("#county_box").hide()
        });
        $("#areaBox1 .J_areaHead .county").click(function () {
            $("#province_box").hide();
            $("#city_box").hide();
            $("#county_box").show()
        });
        $(".J_areaHead2 .sec").click(function () {
            $("#sec_box").show();
            $("#thd_box").hide()
        });
        $(".J_areaHead2 .thd").click(function () {
            $("#sec_box").hide();
            $("#thd_box").show()
        });
        $("#province_box .group_item").bind("click", function () {
            $("#areaBox1 .city_content").remove();
            $("#areaBox1 .county_content").remove();
            var U = $(this).attr("pname");
            var V = $(this).attr("pid");
            $("#areaBox1 .J_areaHead .city").click();
            $("#areaBoxInput").val("");
            $("#areaBoxInput").val($("#areaBoxInput").val() + U);
            $("#areaBoxInput").removeAttr("lastArea");
            $("#areaBoxInput").removeAttr("lastAreaType");
            $("#areaBoxInput").attr("area1", V);
            $("#areaBoxInput").attr("area2", "");
            $("#areaBoxInput").attr("area3", "");
            $(".city_content").remove();
            var X = m(site_cityUtil.getCities(V));
            var W = $(X).html();
            if (W === null || W === undefined || W === "") {
                $("#areaBox1").hide()
            }
            $("#city_box").append(X)
        });
        $("#city_box").delegate(".group_item", "click", function () {
            $("#areaBox1 .county_content").remove();
            var U = $(this).attr("cname");
            var W = $(this).attr("cid");
            $("#areaBox1 .J_areaHead .county").click();
            var Z = $("#areaBoxInput").attr("lastArea");
            var V = $("#areaBoxInput").attr("lastAreaType");
            if (V != null && V != "") {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + U);
            $("#areaBoxInput").attr("lastArea", "-" + U);
            $("#areaBoxInput").attr("lastAreaType", "city");
            $("#areaBoxInput").attr("area2", W);
            $("#areaBoxInput").attr("area3", "");
            $(".county_content").remove();
            var Y = d(site_cityUtil.getCounty(W));
            var X = $(Y).html();
            if (X === null || X === undefined || X === "") {
                $("#areaBox1").hide()
            }
            $("#county_box").append(Y)
        });
        $("#county_box").delegate(".group_item", "click", function () {
            var U = $(this).attr("cname");
            var W = $(this).attr("cid");
            var X = $("#areaBoxInput").attr("lastArea");
            var V = $("#areaBoxInput").attr("lastAreaType");
            if (V != null && V == "county") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(X, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + U);
            $("#areaBoxInput").attr("lastArea", "-" + U);
            $("#areaBoxInput").attr("lastAreaType", "county");
            $("#areaBoxInput").attr("area3", W);
            $("#areaBox1").hide()
        });
        $("#sec_box").delegate(".group_item", "click", function () {
            $("#areaBox2 .thd_content").html("");
            var U = $(this).attr("cname");
            var W = $(this).attr("cid");
            $(".J_areaHead2 .thd").click();
            var Y = $("#areaBoxInput").attr("lastArea");
            var V = $("#areaBoxInput").attr("lastAreaType");
            if (V != null && V != "" && $("#areaBoxInput").val().indexOf("-") != -1) {
                $("#areaBoxInput").val($("#areaBoxInput").val().substring(0, $("#areaBoxInput").val().indexOf("-")))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + U);
            $("#areaBoxInput").attr("lastArea", "-" + U);
            $("#areaBoxInput").attr("lastAreaType", "sec");
            $("#areaBoxInput").attr("area2", W);
            $("#areaBoxInput").attr("area3", "");
            var X = c(W);
            if (X === null || X === undefined || X === "") {
                $("#areaBox2").hide()
            }
            $("#thd_box .thd_content").append(X)
        });
        $("#thd_box").delegate(".group_item", "click", function () {
            var U = $(this).attr("cname");
            var W = $(this).attr("cid");
            var X = $("#areaBoxInput").attr("lastArea");
            var V = $("#areaBoxInput").attr("lastAreaType");
            if (V != null && V == "thd") {
                $("#areaBoxInput").val($("#areaBoxInput").val().replace(X, ""))
            }
            $("#areaBoxInput").val($("#areaBoxInput").val() + "-" + U);
            $("#areaBoxInput").attr("lastArea", "-" + U);
            $("#areaBoxInput").attr("lastAreaType", "thd");
            $("#areaBoxInput").attr("area3", W);
            $("#areaBox2").hide()
        });
        $(".sublimeNewAddr").off("click.mstl").on("click.mstl", function () {
            h(z, O, u, t, s)
        });
        $(".cancelNewAddr").off("click.mstl").on("click.mstl", function () {
            $(".popupBClose").click()
        })
    }

    function m(s) {
        var r = "";
        r += "<div class='city_content'>";
        $.each(s, function (t, u) {
            if (Helper.top._lcid == 2052 || Helper.top._lcid == 1028) {
                r += "<div class='group_item' cid='" + u.id + "' cname='" + site_cityUtil.getInfo(u.id).name + "'>" + site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(u.id).name) + "</div>"
            } else {
                r += "<div class='group_item' cid='" + u.id + "' cname='" + site_cityUtil.getInfoEn(u.id).name + "'>" + site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(u.id).name) + "</div>"
            }
        });
        r += "</div>";
        return r
    }

    function d(s) {
        var r = "";
        r += "<div class='county_content'>";
        $.each(s, function (t, u) {
            if (Helper.top._lcid == 2052 || Helper.top._lcid == 1028) {
                r += "<div class='group_item' cid='" + u.id + "' cname='" + site_cityUtil.getInfo(u.id).name + "'>" + site_cityUtil.getInfo(u.id).name + "</div>"
            } else {
                r += "<div class='group_item' cid='" + u.id + "' cname='" + site_cityUtil.getInfoEn(u.id).name + "'>" + site_cityUtil.getInfoEn(u.id).name + "</div>"
            }
        });
        r += "</div>";
        return r
    }

    function q(s) {
        var r = "";
        var t = false;
        $.each(i.cusAreaList, function (u, v) {
            if (t) {
                return
            }
            if (v.id == s) {
                r = v.name;
                t = true
            }
        });
        return r
    }

    function j(s) {
        var r = [];
        $.each(i.cusAreaList, function (t, u) {
            if (u.parentId == s) {
                r.push(u)
            }
        });
        return r
    }

    function c(r) {
        if (isNaN(r)) {
            return ""
        }
        var t = parseInt(r);
        var s = "";
        $.each(j(t), function (u, v) {
            s += "<div class='group_item' cid='" + v.id + "' cname='" + v.name + "'>" + v.name + "</div>"
        });
        return s
    }

    function h(B, N, u, t, r) {
        var v = N.addrInfoList;
        var C = {};
        var x = B == -1 ? {} : v[B];
        var G = $(".addAddrPopPanel"), J = Helper.top._lcid, I, z, E, F, H, D = false, y = false, L, w = false, P = "";
        for (var M = 0; M < r.length; M++) {
            H = r[M];
            D = H.required;
            if (H.fieldKey == "addr") {
                w = D;
                var O = $("#allArea").val();
                if (O == null || O == "") {
                    Helper.ing(LS.selectArea);
                    return
                } else {
                    if (O == "cn" || O == "os") {
                        C.isCus = false
                    } else {
                        C.isCus = true
                    }
                }
                I = $("#areaBoxInput").attr("area3");
                z = $("#areaBoxInput").attr("area2");
                E = $("#areaBoxInput").attr("area1");
                if (z == null) {
                    z = -1
                }
                if (I == null) {
                    I = -1
                }
                if (E == "" && w) {
                    Helper.ing(LS.mallStlSubmitAddrErr, 1);
                    return
                }
                if (z == "" && w && !C.isCus) {
                    Helper.ing(LS.mallStlSubmitAddrErr, 1);
                    return
                }
                C.provinceCode = parseInt(E);
                C.cityCode = parseInt(z);
                C.countyCode = parseInt(I);
                L = $("#areaBoxInput").val().replace(/-/g, "");
                var A = $("#addrDetail");
                if (A.val() == "" && w) {
                    Helper.ing(LS.editStreetAddr, 1);
                    return
                }
                C.streetAddr = A.val();
                x.addr_info = C;
                x.addr = (L || "") + A.val();
                if (D && !x.addr) {
                    return Helper.ing(LS.addrInfoInputError + H.name, 1)
                }
                y = true;
                continue
            }
            F = G.find("#" + H.fieldKey);
            if (F.length > 0) {
                P = F.val();
                if (D && P == "") {
                    return Helper.ing(LS.addrInfoInputError + H.name, 1)
                }
                if (H.fieldKey == "email" && !Helper.isEmail(P) && D) {
                    Helper.ing(LS.addrInfoInputError + H.name, 1);
                    return
                }
                if (H.fieldKey == "phone" && !Helper.isPhone(P) && D) {
                    Helper.ing(LS.addrInfoInputError + H.name, 1);
                    return
                }
                if (H.fieldKey == "mobile") {
                    x.mobileCt = $("#mobileCt").val();
                    if (!Helper.isNationMobile(P)) {
                        return Helper.ing(LS.mobileNumRegular)
                    }
                }
                x[H.fieldKey] = F.val()
            }
        }
        if (!y && $("#mallShipTemplate_province").length === 1) {
            var s = $("#allArea").val();
            if (s == null || s == "") {
                Helper.ing(LS.selectArea);
                return
            } else {
                if (s == "cn" || s == "os") {
                    C.isCus = false
                } else {
                    C.isCus = true
                }
            }
            I = $("#areaBoxInput").attr("area3");
            z = $("#areaBoxInput").attr("area2");
            E = $("#areaBoxInput").attr("area1");
            if (E == null || E == "") {
                Helper.ing(LS.mallStlSubmitAddrErr, 1);
                return
            }
            if ((z == null || z == "") && !C.isCus) {
                Helper.ing(LS.mallStlSubmitAddrErr, 1);
                return
            }
            C.provinceCode = parseInt(E);
            C.cityCode = parseInt(z);
            C.countyCode = parseInt(I);
            L = $("#areaBoxInput").val().replace(/-/g, "");
            var A = $("#addrDetail");
            if (A.val() == "" && w) {
                Helper.ing(LS.editStreetAddr, 1);
                return
            }
            C.streetAddr = A.val();
            x.addr_info = C;
            x.addr = (L || "") + A.val();
            if (!x.addr) {
                return Helper.ing(LS.addrInfoInputError + H.name, 1)
            }
        }
        if (B == -1) {
            if (t == 0) {
                x.isDefault = 1
            }
            v.push(x);
            var K = "ajax/memberAdm_h.php?cmd=set&opera=addAddr&id=" + u
        } else {
            K = "ajax/memberAdm_h.php?cmd=set&opera=editAddr&editItem=" + B + "&id=" + u;
            x = v[B]
        }
        if (!!t) {
            $(".sublimeNewAddr").off("click.mstl");
            $.ajax({
                type: "post", url: K, data: "info=" + Helper.encodeUrl($.toJSON(N)), success: function (Y) {
                    var S = $.parseJSON(Y);
                    if (S.success) {
                        var T = document.location.search.search(/imme/) > -1 ? "?imme&" : "?";
                        if (B == -1) {
                            document.location.href = "mstl.php" + T + "opera=add"
                        } else {
                            var Q = N.addrInfoList[B];
                            var R = $(".j_addrMsg[_item='" + B + "']");
                            R.find(".addrName span").text(Q.name);
                            R.find(".addrPhone span").text(Q.phone);
                            R.find(".msgAddrText").text(Q.addr);
                            if (Q.phone == null || Q.phone == "") {
                                R.find(".addrPhone span").text(Q.mobile)
                            }
                            if ((Q.addr_info != null || Q.addr_info != "") && R.hasClass("selectedMsg")) {
                                var V = Q.addr_info.isCus;
                                if (!V) {
                                    var X = "";
                                    var W = "";
                                    var U = "";
                                    if (J == 2052 || J == 1028) {
                                        X = site_cityUtil.getInfo(Q.addr_info.countyCode).name;
                                        W = site_cityUtil.getInfo(Q.addr_info.cityCode).name;
                                        U = site_cityUtil.getInfo(Q.addr_info.provinceCode).name
                                    } else {
                                        X = site_cityUtil.getInfoEn(Q.addr_info.countyCode).name;
                                        W = site_cityUtil.getInfoEn(Q.addr_info.cityCode).name;
                                        U = site_cityUtil.getInfoEn(Q.addr_info.provinceCode).name
                                    }
                                    if (Q.addr_info.provinceCode == 990000) {
                                        $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                                        $("#mallShipTemplate_allArea").val("os");
                                        $("#mallShipTemplate_allArea").change()
                                    } else {
                                        $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                                        $("#mallShipTemplate_allArea").val("cn");
                                        $("#mallShipTemplate_allArea").change()
                                    }
                                    $("#mallShipTemplate_areaBoxInput").attr("area1", Q.addr_info.provinceCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("area2", Q.addr_info.cityCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("area3", Q.addr_info.countyCode);
                                    $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + X);
                                    $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                                    setTimeout(function () {
                                        $("#mallShipTemplate_areaBox1 .group_item[pid='" + Q.addr_info.provinceCode + "']").click();
                                        setTimeout(function () {
                                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + Q.addr_info.cityCode + "']").click();
                                            setTimeout(function () {
                                                $("#mallShipTemplate_areaBox1 .group_item[cid='" + Q.addr_info.countyCode + "']").click()
                                            }, 0)
                                        }, 0)
                                    }, 0);
                                    $("#streetAddress").val(Q.addr_info.streetAddr)
                                } else {
                                    setTimeout(function () {
                                        $("#mallShipTemplate_allArea").val(Q.addr_info.provinceCode);
                                        $("#mallShipTemplate_allArea").change();
                                        setTimeout(function () {
                                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + Q.addr_info.cityCode + "']").click();
                                            setTimeout(function () {
                                                $("#mallShipTemplate_areaBox2 .group_item[cid='" + Q.addr_info.countyCode + "']").click()
                                            }, 0)
                                        }, 0)
                                    }, 0);
                                    $("#streetAddress").val(Q.addr_info.streetAddr)
                                }
                            }
                            $(".addAddrPanelContent").parents(".formMSG").next(".popupBClose").click()
                        }
                    } else {
                        Helper.ing(S.msg)
                    }
                }, error: function () {
                    Helper.ing(LS.systemError)
                }
            })
        } else {
            n(N)
        }
    }

    function n(t) {
        var r = [], s = t.addrInfoList[0];
        r.push("<div class='addrMsg j_addrMsg selectedMsg mstl_border' _item='0'>");
        r.push("<div class='headerBg'></div>");
        r.push("<div class='dealAddrHandler'>");
        r.push("<div class='delAddrBtn vDelAddrBtn mstl_deleteBtn'></div>");
        r.push("<div class='editAddrBtn mstl_editBtn'></div>");
        r.push("<div class='setDefaultBtn  vSetDefaultBtn mstl_color'>设为默认</div>");
        r.push("</div>");
        r.push("<div class='addrItem addrName'><i class='msgIcon msgIconName'></i>" + (s.name || "") + "</div>");
        r.push("<div class='addrItem addrPhone'><i class='msgIcon msgIconPhone'></i>" + (s.phone || s.mobile || "") + "</div>");
        r.push("<div class='addrItem addrDetial'><i class='msgIcon msgIconAddr'></i><span class='msgAddrText'>" + (s.addr || "") + "</span></div>");
        r.push("<div class='bottomSelected mstl_selectFlag'></div>");
        r.push("</div>");
        $(".addrListWrap").html("").append(r.join(""));
        p(0, t.addrInfoList);
        $(".popupBClose").click()
    }

    function a() {
        var r = $("#useItg");
        if (r.length < 1) {
            return
        }
        if (parseInt(r.attr("_currentitg")) == 0) {
            r.prop("disabled", true);
            return
        }
        $(".integralTitle").off("click.mstl").on("click.mstl", function (t) {
            var s = $(this);
            if (s.hasClass("discountChecked")) {
                s.removeClass("discountChecked");
                s.next().val("").trigger("blur").attr("disabled", "true")
            } else {
                s.addClass("discountChecked");
                s.next().removeAttr("disabled")
            }
        });
        r.bind("blur", function () {
            var y = parseInt(r.attr("_needitg"));
            var w = parseInt(r.val());
            var B = r.attr("_itgname");
            var A = parseInt(r.attr("_maxuse"));
            var s = 0;
            if (isNaN(w)) {
                w = 0
            }
            var t = $(this).attr("moduleId");
            var u = Helper.top.$("#module" + t);
            var x = parseFloat(u.find(".calTotalItem").attr("pay_price"));
            if (isNaN(x)) {
                return
            }
            if ($("#couponCheckBox").length > 0 && $("#couponCheckBox").prop("checked")) {
                var z = 0;
                if ($("#couponOffsetMoney").length > 0) {
                    var C = $("#couponOffsetMoney").attr("_offsetmoney");
                    if (!isNaN(C)) {
                        z = parseInt(C);
                        var D = Math.floor((x - z) * y);
                        if (D < A) {
                            A = D
                        }
                    }
                }
            }
            if (w > A) {
                Helper.ing(Helper.format(LS.integral_maxUse, A, Helper.encodeHtml(B)), true);
                r.val(A);
                var v = (A / y).toFixed(2);
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    $("#offsetMoney").text(Helper.formatPriceEn(v))
                } else {
                    $("#offsetMoney").text(v)
                }
                $("#offsetMoney").attr("_offsetmoney", v);
                f();
                return
            }
            if (w > parseInt(r.attr("_currentItg"))) {
                Helper.ing(Helper.format(LS.integral_notOverCurrent, Helper.encodeHtml(B), Helper.encodeHtml(B)));
                r.focus();
                return
            }
            if (w < 0) {
                Helper.ing(LS.integral_inputInteger);
                r.focus();
                return
            }
            var v = (w / y).toFixed(2);
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                $("#offsetMoney").text(Helper.formatPriceEn(v))
            } else {
                $("#offsetMoney").text(v)
            }
            $("#offsetMoney").attr("_offsetmoney", v);
            if (w > 0) {
                $("#integralInfo").show()
            } else {
                $("#integralInfo").hide()
            }
            if ($("#couponCheckBox").length > 0) {
                $(".couponShowList option").each(function () {
                    var E = parseInt($(this).attr("_minPrice"));
                    if (x - v < E) {
                        $(this).hide();
                        if ($(this).prop("checked")) {
                            $("#couponOffsetMoney").text("0.00").attr("_offsetmoney", "0.00")
                        }
                        $(".couponShowList").val(-1)
                    } else {
                        $(this).show()
                    }
                })
            }
            f()
        })
    }

    function l() {
        var r = $("#couponCheckBox"), s = $(".couponShowList");
        if (r.length < 1) {
            return
        }
        if (s.find("option").length == 1) {
            r.prop("disabled", true);
            return
        }
        $(".couponTitle").off("click.mstl").on("click.mstl", function (u) {
            var t = $(this);
            if (t.hasClass("discountChecked")) {
                t.removeClass("discountChecked");
                t.next().val(-1).trigger("change").attr("disabled", "true")
            } else {
                t.addClass("discountChecked");
                t.next().removeAttr("disabled")
            }
        });
        s.off("change.mstl").on("change.mstl", function (x) {
            var u = $(this), v = u.find("option:selected");
            var w = $(this).find("input:checkbox").is(":checked");
            var t = 0;
            if (u.val() != -1) {
                t = parseFloat(v.attr("data_saveprice"))
            }
            if (t > 0) {
                $("#couponInfo").show()
            } else {
                $("#couponInfo").hide()
            }
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                $("#couponOffsetMoney").text(Helper.formatPriceEn(t)).attr("_offsetmoney", t)
            } else {
                $("#couponOffsetMoney").text(t.toFixed(2)).attr("_offsetmoney", t)
            }
            f()
        })
    }

    function f() {
        var v = parseFloat($(".calTotalItem").attr("pay_price")).toFixed(2) * 100 || 0,
            s = parseFloat($("#offsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            r = parseFloat($("#couponOffsetMoney").attr("_offsetmoney")).toFixed(2) * 100 || 0,
            w = parseFloat($("#shippingMoneyVal").attr("_shipmoney")).toFixed(2) * 100 || 0, u = $("#finalPay"),
            t = ((v + w - s - r) / 100).toFixed(2);
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            u.text(Helper.formatPriceEn(t))
        } else {
            u.text(t)
        }
    }

    function k() {
        var s = $(".mallShipSelect").find("option:selected");
        shippingMoneytext = $(".shippingPay"), culshippingMoneyVal = $("#shippingMoneyVal"), price = parseFloat(s.attr("price")).toFixed(2);
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            shippingMoneytext.text(Helper.formatPriceEn(price)).attr("_shipmoney", price);
            culshippingMoneyVal.text(Helper.formatPriceEn(price)).attr("_shipmoney", price)
        } else {
            shippingMoneytext.text(price).attr("_shipmoney", price);
            culshippingMoneyVal.text(price).attr("_shipmoney", price)
        }
        if ($("#mallShipTemplate_province").length > 0) {
            var r = $(".mallShipSelect option:selected");
            r.attr("provinceCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area1")));
            r.attr("cityCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area2")));
            r.attr("countyCode", $.trim($("#mallShipTemplate_areaBoxInput").attr("area3")))
        }
        f()
    }

    i.initModuleMallShipTemplateNew = function (J, K, s, M, A, t, r, E) {
        var x = M.vType || 1, F = M.sco || 0, u = M.openItemList;
        var D = "-----------", I = [], y, L, C, G, N, B, H;
        var w = true;
        var z = "";
        z += "<div class='spaceLine'></div>";
        $.each(site_cityUtil.getAreaGroupsPinYin(), function (O, P) {
            z += "<div class='pv_group' style='" + (P[0] == "OS" ? "display:none;" : "") + "'>";
            z += "<div class='group_head'>" + P[0] + "</div>";
            z += "<div class='group_content'>";
            $.each(P[1], function (R, Q) {
                if (E == 2052 || E == 1028) {
                    z += "<div class='group_item' pid='" + Q + "' pname='" + site_cityUtil.getInfo(Q).name + "'>" + site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(Q).name) + "</div>"
                } else {
                    z += "<div class='group_item' pid='" + Q + "' pname='" + site_cityUtil.getInfoEn(Q).name + "'>" + site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(Q).name) + "</div>"
                }
            });
            z += "</div>";
            z += "</div>";
            z += "<div class='spaceLine'></div>"
        });
        $("#mallShipTemplate_areaBox1 .pv_content").html("").append(z);
        $(document).unbind("click.forAreaBox2").bind("click.forAreaBox2", function () {
            $("#mallShipTemplate_areaBox1").hide();
            $("#mallShipTemplate_areaBox2").hide()
        });
        $("#mallShipTemplate_areaBox1,#mallShipTemplate_areaBox2").unbind("click.forAreaBox").bind("click.forAreaBox", function (O) {
            v(O)
        });
        function v(O) {
            if (O.stopPropagation) {
                O.stopPropagation()
            } else {
                O.cancelBubble = true
            }
        }

        $("#mallShipTemplate_allArea").change(function () {
            if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "os") {
                $("#mallShipTemplate_areaBoxInput").hide();
                $("#mallShipTemplate_areaBox1").hide();
                $("#mallShipTemplate_areaBox2").hide()
            } else {
                $("#mallShipTemplate_areaBoxInput").show()
            }
            if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "") {
                return
            }
            $("#mallShipTemplate_areaBoxInput").attr("isCn", 0);
            $("#mallShipTemplate_areaBoxInput").attr("isCus", 0);
            $("#mallShipTemplate_areaBoxInput").attr("isOs", 0);
            $("#mallShipTemplate_areaBoxInput").attr("area1", "");
            $("#mallShipTemplate_areaBoxInput").attr("area2", "");
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            if ($("#mallShipTemplate_allArea").val() == "cn") {
                $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                $("#mallShipTemplate_areaBox1 .pv").click();
                $("#mallShipTemplate_areaBox1 .city_content").remove();
                $("#mallShipTemplate_areaBox1 .county_content").remove();
                $("#mallShipTemplate_areaBoxInput").val("")
            } else {
                if ($("#mallShipTemplate_allArea").val() == "os") {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_areaBoxInput").attr("area1", 990000);
                    $("#mallShipTemplate_areaBoxInput").attr("area2", 990100);
                    $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBox1").find(".group_item[pid='990000']").text());
                    k()
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCus", 1);
                    $("#mallShipTemplate_areaBoxInput").attr("area1", $("#mallShipTemplate_allArea").val());
                    $("#mallShipTemplate_areaBox2 .sec_content").html("");
                    $("#mallShipTemplate_areaBox2 .thd_content").html("");
                    $("#mallShipTemplate_areaBoxInput").val("")
                }
            }
            if ($("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                return
            }
            var O = c($("#mallShipTemplate_allArea").val());
            $("#mallShipTemplate_sec_box .sec_content").append(O);
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + $("#mallShipTemplate_allArea option[value='" + $("#mallShipTemplate_allArea").val() + "']").text());
            var P = $("#mallShipTemplate_allArea").val();
            w = false;
            if (K === 0) {
                k();
                return
            }
            $.each(u, function (R, T) {
                if (F) {
                    var S = false, Q = M.scrl || [];
                    $.each(Q, function (V, U) {
                        if (U.st === T.type) {
                            var W = false;
                            if (w) {
                                W = $.inArray(parseInt(P), U.arl) > -1
                            } else {
                                W = $.inArray(parseInt(P), U.carl) > -1
                            }
                            if (W) {
                                if (U.fc === 1) {
                                    if (x === 1) {
                                        if (K >= U.d1) {
                                            S = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= U.d1) {
                                            S = true;
                                            return false
                                        }
                                    }
                                }
                                if (U.fc === 2) {
                                    if (s >= U.d2) {
                                        S = true;
                                        return false
                                    }
                                }
                                if (U.fc === 3) {
                                    if (x === 1) {
                                        if (K >= U.d1 && s >= U.d2) {
                                            S = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= U.d1 && s >= U.d2) {
                                            S = true;
                                            return false
                                        }
                                    }
                                }
                                if (U.fc === 4) {
                                    if (x === 1) {
                                        if (K >= U.d1 || s >= U.d2) {
                                            S = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= U.d1 || s >= U.d2) {
                                            S = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (S) {
                        $("#template_item_" + T.type).attr("price", 0);
                        return
                    }
                }
                if (!T.regionList || T.regionList.length <= 0) {
                    $("#template_item_" + T.type).attr("price", T.defaultPrice.toFixed(1));
                    return true
                }
                $.each(T.regionList, function (aa, ad) {
                    var V = false;
                    if (w) {
                        V = $.inArray(parseInt(P), ad.areaList) < 0
                    } else {
                        V = $.inArray(parseInt(P), ad.cusAreaList) < 0
                    }
                    if (V) {
                        $("#template_item_" + T.type).attr("price", T.defaultPrice.toFixed(1));
                        return true
                    }
                    var Z = 0, W = ad.price, ab = ad.rha == null ? 1 : ad.rha, ac = ad.ria == null ? 1 : ad.ria,
                        X = ad.rip || 0;
                    var Y = K;
                    if (ab > 0) {
                        Z = W;
                        Y -= ab
                    }
                    if (ac > 0 && Y > 0) {
                        var U = (Y / ac).toFixed(1);
                        U = Math.ceil(U);
                        Z += X * U
                    }
                    $("#template_item_" + T.type).attr("price", Z.toFixed(1));
                    return false
                })
            });
            k()
        });
        $("#mallShipTemplate_areaBoxInput").unbind("click").bind("click", function (O) {
            if ($("#mallShipTemplate_allArea").val() == "cn") {
                $("#mallShipTemplate_areaBox1").toggle();
                $("#mallShipTemplate_areaBox2").hide();
                $("#mallShipTemplate_province_box").show();
                $("#mallShipTemplate_city_box").hide();
                $("#mallShipTemplate_county_box").hide()
            } else {
                if ($("#mallShipTemplate_allArea").val() == null || $("#mallShipTemplate_allArea").val() == "os") {
                } else {
                    $("#mallShipTemplate_areaBox2").toggle();
                    $("#mallShipTemplate_areaBox1").hide();
                    $("#mallShipTemplate_sec_box").show();
                    $("#mallShipTemplate_thd_box").hide()
                }
            }
            v(O)
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .pv").click(function () {
            $("#mallShipTemplate_province_box").show();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").hide()
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .city").click(function () {
            $("#mallShipTemplate_province_box").hide();
            $("#mallShipTemplate_city_box").show();
            $("#mallShipTemplate_county_box").hide()
        });
        $("#mallShipTemplate_areaBox1 .J_areaHead .county").click(function () {
            $("#mallShipTemplate_province_box").hide();
            $("#mallShipTemplate_city_box").hide();
            $("#mallShipTemplate_county_box").show()
        });
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .sec").click(function () {
            $("#mallShipTemplate_sec_box").show();
            $("#mallShipTemplate_thd_box").hide()
        });
        $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click(function () {
            $("#mallShipTemplate_sec_box").hide();
            $("#mallShipTemplate_thd_box").show()
        });
        $("#mallShipTemplate_province_box .group_item").bind("click", function () {
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var O = $(this).attr("pname");
            var P = $(this).attr("pid");
            $("#mallShipTemplate_areaBox1 .J_areaHead .city").click();
            $("#mallShipTemplate_areaBoxInput").val("");
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + O);
            $("#mallShipTemplate_areaBoxInput").removeAttr("lastArea");
            $("#mallShipTemplate_areaBoxInput").removeAttr("lastAreaType");
            $("#mallShipTemplate_areaBoxInput").attr("area1", P);
            $("#mallShipTemplate_areaBoxInput").attr("area2", "");
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            $("#mallShipTemplate_areaBox1 .city_content").remove();
            var R = m(site_cityUtil.getCities(P));
            var Q = $(R).html();
            if (Q === null || R === undefined || R === "") {
                $("#areaBox1").hide()
            }
            $("#mallShipTemplate_city_box").append(R);
            $.each(u, function (S, T) {
                $("#template_item_" + T.type).attr("price", T.defaultPrice.toFixed(1))
            });
            k()
        });
        $("#mallShipTemplate_city_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                w = true
            } else {
                w = false
            }
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var O = $(this).attr("cname");
            var Q = $(this).attr("cid");
            $("#mallShipTemplate_areaBox1 .J_areaHead .county").click();
            var S = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var P = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (P != null && P != "") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "city");
            $("#mallShipTemplate_areaBoxInput").attr("area2", Q);
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            $("#mallShipTemplate_areaBox1 .county_content").remove();
            var R = d(site_cityUtil.getCounty(Q));
            $("#mallShipTemplate_county_box").append(R);
            if (K === 0) {
                k();
                return
            }
            $.each(u, function (U, W) {
                if (F) {
                    var V = false, T = M.scrl || [];
                    $.each(T, function (Y, X) {
                        if (X.st === W.type) {
                            var Z = false;
                            if (w) {
                                Z = $.inArray(parseInt(Q), X.arl) > -1
                            } else {
                                Z = $.inArray(parseInt(Q), X.carl) > -1
                            }
                            if (Z) {
                                if (X.fc === 1) {
                                    if (x === 1) {
                                        if (K >= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 2) {
                                    if (s >= X.d2) {
                                        V = true;
                                        return false
                                    }
                                }
                                if (X.fc === 3) {
                                    if (x === 1) {
                                        if (K >= X.d1 && s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1 && s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 4) {
                                    if (x === 1) {
                                        if (K >= X.d1 || s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1 || s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (V) {
                        $("#template_item_" + W.type).attr("price", 0);
                        return
                    }
                }
                if (!W.regionList || W.regionList.length <= 0) {
                    $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                    return true
                }
                $.each(W.regionList, function (ad, ag) {
                    var Y = false;
                    if (w) {
                        Y = $.inArray(parseInt(Q), ag.areaList) < 0
                    } else {
                        Y = $.inArray(parseInt(Q), ag.cusAreaList) < 0
                    }
                    if (Y) {
                        $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                        return true
                    }
                    var ac = 0, Z = ag.price, ae = ag.rha == null ? 1 : ag.rha, af = ag.ria == null ? 1 : ag.ria,
                        aa = ag.rip || 0;
                    var ab = K;
                    if (ae > 0) {
                        ac = Z;
                        ab -= ae
                    }
                    if (af > 0 && ab > 0) {
                        var X = (ab / af).toFixed(1);
                        X = Math.ceil(X);
                        ac += aa * X
                    }
                    $("#template_item_" + W.type).attr("price", ac.toFixed(1));
                    return false
                })
            });
            k()
        });
        $("#mallShipTemplate_county_box").delegate(".group_item", "click", function () {
            var O = $(this).attr("cname");
            var Q = $(this).attr("cid");
            var R = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var P = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (P != null && P == "county") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(R, ""))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
            $("#mallShipTemplate_areaBoxInput").attr("area3", Q);
            $("#mallShipTemplate_areaBox1").hide();
            k()
        });
        $("#mallShipTemplate_sec_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                w = true
            } else {
                w = false
            }
            $("#mallShipTemplate_areaBox2 .thd_content").html("");
            var O = $(this).attr("cname");
            var Q = $(this).attr("cid");
            $("#mallShipTemplate_areaBox2 .J_areaHead2 .thd").click();
            var S = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var P = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (P != null && P != "" && $("#mallShipTemplate_areaBoxInput").val().indexOf("-") != -1) {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().substring(0, $("#mallShipTemplate_areaBoxInput").val().indexOf("-")))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "sec");
            $("#mallShipTemplate_areaBoxInput").attr("area2", Q);
            $("#mallShipTemplate_areaBoxInput").attr("area3", "");
            var R = c(Q);
            $("#mallShipTemplate_thd_box .thd_content").append(R);
            if (K === 0) {
                k();
                return
            }
            $.each(u, function (U, W) {
                if (F) {
                    var V = false, T = M.scrl || [];
                    $.each(T, function (Y, X) {
                        if (X.st === W.type) {
                            var Z = false;
                            if (w) {
                                Z = $.inArray(parseInt(Q), X.arl) > -1
                            } else {
                                Z = $.inArray(parseInt(Q), X.carl) > -1
                            }
                            if (Z) {
                                if (X.fc === 1) {
                                    if (x === 1) {
                                        if (K >= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 2) {
                                    if (s >= X.d2) {
                                        V = true;
                                        return false
                                    }
                                }
                                if (X.fc === 3) {
                                    if (x === 1) {
                                        if (K >= X.d1 && s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1 && s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                                if (X.fc === 4) {
                                    if (x === 1) {
                                        if (K >= X.d1 || s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= X.d1 || s >= X.d2) {
                                            V = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (V) {
                        $("#template_item_" + W.type).attr("price", 0);
                        return
                    }
                }
                if (!W.regionList || W.regionList.length <= 0) {
                    $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                    return true
                }
                $.each(W.regionList, function (ad, ag) {
                    var Y = false;
                    if (w) {
                        Y = $.inArray(parseInt(Q), ag.areaList) < 0
                    } else {
                        Y = $.inArray(parseInt(Q), ag.cusAreaList) < 0
                    }
                    if (Y) {
                        $("#template_item_" + W.type).attr("price", W.defaultPrice.toFixed(1));
                        return true
                    }
                    var ac = 0, Z = ag.price, ae = ag.rha == null ? 1 : ag.rha, af = ag.ria == null ? 1 : ag.ria,
                        aa = ag.rip || 0;
                    var ab = K;
                    if (ae > 0) {
                        ac = Z;
                        ab -= ae
                    }
                    if (af > 0 && ab > 0) {
                        var X = (ab / af).toFixed(1);
                        X = Math.ceil(X);
                        ac += aa * X
                    }
                    $("#template_item_" + W.type).attr("price", ac.toFixed(1));
                    return false
                })
            });
            k()
        });
        $("#mallShipTemplate_thd_box").delegate(".group_item", "click", function () {
            if ($("#mallShipTemplate_allArea").val() == "" || $("#mallShipTemplate_allArea").val() == "cn" || $("#mallShipTemplate_allArea").val() == "os") {
                w = true
            } else {
                w = false
            }
            var O = $(this).attr("cname");
            var Q = $(this).attr("cid");
            var R = $("#mallShipTemplate_areaBoxInput").attr("lastArea");
            var P = $("#mallShipTemplate_areaBoxInput").attr("lastAreaType");
            if (P != null && P == "thd") {
                $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val().replace(R, ""))
            }
            $("#mallShipTemplate_areaBoxInput").val($("#mallShipTemplate_areaBoxInput").val() + "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + O);
            $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "thd");
            $("#mallShipTemplate_areaBoxInput").attr("area3", Q);
            $("#mallShipTemplate_areaBox2").hide();
            if (K === 0) {
                k();
                return
            }
            $.each(u, function (T, V) {
                if (F) {
                    var U = false, S = M.scrl || [];
                    $.each(S, function (X, W) {
                        if (W.st === V.type) {
                            var Y = false;
                            if (w) {
                                Y = $.inArray(parseInt(Q), W.arl) > -1
                            } else {
                                Y = $.inArray(parseInt(Q), W.carl) > -1
                            }
                            if (Y) {
                                if (W.fc === 1) {
                                    if (x === 1) {
                                        if (K >= W.d1) {
                                            U = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= W.d1) {
                                            U = true;
                                            return false
                                        }
                                    }
                                }
                                if (W.fc === 2) {
                                    if (s >= W.d2) {
                                        U = true;
                                        return false
                                    }
                                }
                                if (W.fc === 3) {
                                    if (x === 1) {
                                        if (K >= W.d1 && s >= W.d2) {
                                            U = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= W.d1 && s >= W.d2) {
                                            U = true;
                                            return false
                                        }
                                    }
                                }
                                if (W.fc === 4) {
                                    if (x === 1) {
                                        if (K >= W.d1 || s >= W.d2) {
                                            U = true;
                                            return false
                                        }
                                    } else {
                                        if (K <= W.d1 || s >= W.d2) {
                                            U = true;
                                            return false
                                        }
                                    }
                                }
                            }
                        }
                    });
                    if (U) {
                        $("#template_item_" + V.type).attr("price", 0);
                        return
                    }
                }
                if (!V.regionList || V.regionList.length <= 0) {
                    $("#template_item_" + V.type).attr("price", V.defaultPrice.toFixed(1));
                    return true
                }
                $.each(V.regionList, function (ac, af) {
                    var X = false;
                    if (w) {
                        X = $.inArray(parseInt(Q), af.areaList) < 0
                    } else {
                        X = $.inArray(parseInt(Q), af.cusAreaList) < 0
                    }
                    if (X) {
                        $("#template_item_" + V.type).attr("price", V.defaultPrice.toFixed(1));
                        return true
                    }
                    var ab = 0, Y = af.price, ad = af.rha == null ? 1 : af.rha, ae = af.ria == null ? 1 : af.ria,
                        Z = af.rip || 0;
                    var aa = K;
                    if (ad > 0) {
                        ab = Y;
                        aa -= ad
                    }
                    if (ae > 0 && aa > 0) {
                        var W = (aa / ae).toFixed(1);
                        W = Math.ceil(W);
                        ab += Z * W
                    }
                    $("#template_item_" + V.type).attr("price", ab.toFixed(1));
                    return false
                })
            });
            k()
        });
        $("#template_item_" + t.type).click()
    };
    function p(x, y) {
        var r = y[x] || (y[0] = {}), t = Helper.top._lcid;
        if ($("#mallShipTemplate_province").length < 1) {
            return
        }
        if (r.addr_info != null) {
            var v = r.addr_info["isCus"];
            if (!v) {
                var w = "";
                var u = "";
                var s = "";
                if (t == 2052 || t == 1028) {
                    w = site_cityUtil.getInfo(r.addr_info.countyCode).name;
                    u = site_cityUtil.getInfo(r.addr_info.cityCode).name;
                    s = site_cityUtil.getInfo(r.addr_info.provinceCode).name
                } else {
                    w = site_cityUtil.getInfoEn(r.addr_info.countyCode).name;
                    u = site_cityUtil.getInfoEn(r.addr_info.cityCode).name;
                    s = site_cityUtil.getInfoEn(r.addr_info.provinceCode).name
                }
                if (r.addr_info.provinceCode == 990000) {
                    $("#mallShipTemplate_areaBoxInput").attr("isOs", 1);
                    $("#mallShipTemplate_allArea").val("os");
                    $("#mallShipTemplate_allArea").change()
                } else {
                    $("#mallShipTemplate_areaBoxInput").attr("isCn", 1);
                    $("#mallShipTemplate_allArea").val("cn");
                    $("#mallShipTemplate_allArea").change()
                }
                $("#mallShipTemplate_areaBoxInput").attr("area1", r.addr_info.provinceCode);
                $("#mallShipTemplate_areaBoxInput").attr("area2", r.addr_info.cityCode);
                $("#mallShipTemplate_areaBoxInput").attr("area3", r.addr_info.countyCode);
                $("#mallShipTemplate_areaBoxInput").attr("lastArea", "-" + w);
                $("#mallShipTemplate_areaBoxInput").attr("lastAreaType", "county");
                setTimeout(function () {
                    $("#mallShipTemplate_areaBox1 .group_item[pid='" + r.addr_info.provinceCode + "']").click();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox1 .group_item[cid='" + r.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox1 .group_item[cid='" + r.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(r.addr_info.streetAddr)
            } else {
                setTimeout(function () {
                    $("#mallShipTemplate_allArea").val(r.addr_info["provinceCode"]);
                    $("#mallShipTemplate_allArea").change();
                    setTimeout(function () {
                        $("#mallShipTemplate_areaBox2 .group_item[cid='" + r.addr_info.cityCode + "']").click();
                        setTimeout(function () {
                            $("#mallShipTemplate_areaBox2 .group_item[cid='" + r.addr_info.countyCode + "']").click()
                        }, 0)
                    }, 0)
                }, 0);
                $("#streetAddress").val(r.addr_info.streetAddr)
            }
        }
    }

    function o(aa, Y, V, D, z) {
        var M = $(".selectedMsg"), N = parseInt(M.attr("_item")), C = V[N] || {}, v = C.addr_info, F = Helper.top._lcid,
            H = {}, E = {}, U = "";
        var A, ab, u = false;
        for (var X = 0; X < z.length; X++) {
            A = z[X];
            ab = A.fieldKey;
            if (ab == "addr") {
                if (!v) {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
                E.isCus = v.isCus;
                E.provinceCode = parseInt(v.provinceCode);
                E.cityCode = parseInt(v.cityCode);
                E.countyCode = parseInt(v.countyCode);
                E.streetAddr = v.streetAddr;
                if (isNaN(E.cityCode)) {
                    E.cityCode = -1
                }
                if (isNaN(E.countyCode)) {
                    E.countyCode = -1
                }
                if (D) {
                    Y.addr_info = E;
                    Y.addr = E.streetAddr;
                    Y.isDefault = 1;
                    Y.name = v.name;
                    Y.email = v.email;
                    Y.phone = v.phone;
                    Y.zip = v.zip
                }
                aa.addr_info = E;
                aa.addr = E.streetAddr;
                aa.addr = "";
                if (!E.isCus) {
                    if (site_cityUtil.isValidProvince(E.provinceCode)) {
                        if (F == 2052 || F == 1028) {
                            aa.addr += site_cityUtil.getInfo(E.provinceCode).name
                        } else {
                            aa.addr += site_cityUtil.getInfoEn(E.provinceCode).name
                        }
                    }
                    if (site_cityUtil.isValidCity(E.cityCode)) {
                        if (F == 2052 || F == 1028) {
                            aa.addr += site_cityUtil.getInfo(E.cityCode).name
                        } else {
                            aa.addr += site_cityUtil.getInfoEn(E.cityCode).name
                        }
                    }
                    if (F == 2052 || F == 1028) {
                        aa.addr += site_cityUtil.getInfo(E.countyCode).name
                    } else {
                        aa.addr += site_cityUtil.getInfoEn(E.countyCode).name
                    }
                    aa.addr += E.streetAddr
                } else {
                    aa.addr = C.addr
                }
                if (typeof E.provinceCode != "number" || typeof E.cityCode != "number") {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
                if (typeof E.countyCode != "number") {
                    delete E.countyCode
                }
                u = true;
                continue
            }
            if (ab == "mobile") {
                aa.mobileCt = C.mobileCt
            }
            aa[ab] = C[ab]
        }
        if (!u && $("#mallShipTemplate_province").length === 1) {
            if (!v) {
                U = LS.mallStlSubmitAddrErr;
                return U
            }
            E.isCus = v.isCus;
            E.provinceCode = parseInt(v.provinceCode);
            E.cityCode = parseInt(v.cityCode);
            E.countyCode = parseInt(v.countyCode);
            E.streetAddr = v.streetAddr;
            if (isNaN(E.cityCode)) {
                E.cityCode = -1
            }
            if (isNaN(E.countyCode)) {
                E.countyCode = -1
            }
            if (D) {
                Y.addr_info = E;
                Y.addr = E.streetAddr;
                Y.isDefault = 1;
                Y.name = v.name;
                Y.email = v.email;
                Y.phone = v.phone;
                Y.zip = v.zip
            }
            aa.addr_info = E;
            aa.addr = E.streetAddr;
            aa.addr = "";
            if (!E.isCus) {
                if (site_cityUtil.isValidProvince(E.provinceCode)) {
                    aa.addr += site_cityUtil.getInfo(E.provinceCode).name
                }
                if (site_cityUtil.isValidCity(E.cityCode)) {
                    aa.addr += site_cityUtil.getInfo(E.cityCode).name
                }
                aa.addr += site_cityUtil.getInfo(E.countyCode).name;
                aa.addr += E.streetAddr
            } else {
                aa.addr = C.addr
            }
            if (typeof E.provinceCode != "number" || typeof E.cityCode != "number") {
                U = LS.mallStlSubmitAddrErr;
                return U
            }
            if (typeof E.countyCode != "number") {
                delete E.countyCode
            }
        }
        var x = $(".mallShipSelect"), T = x.find("option:checked");
        if ($("#mallShipTemplate_province").length === 1 && T.length === 1) {
            var G = E.provinceCode, S = E.cityCode, J = E.countyCode, Q = $.trim(E.streetAddr);
            if (!E.isCus) {
                if (!G || isNaN(G) || !site_cityUtil.isValidProvince(G)) {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
                if (!S || isNaN(S) || !site_cityUtil.isValidCity(S, G)) {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
            } else {
                if (!G || isNaN(G)) {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
                if (!S || isNaN(S)) {
                    U = LS.mallStlSubmitAddrErr;
                    return U
                }
            }
            if (isNaN(G)) {
                G = -1
            }
            if (isNaN(S)) {
                S = -1
            }
            if (isNaN(J)) {
                J = -1
            }
            var B = {type: parseInt(T.attr("value")), templateId: parseInt(T.attr("templateId")), streetAddr: Q};
            B.provinceCode = G;
            B.cityCode = S;
            B.countyCode = J;
            B.isCus = E.isCus;
            aa.shipType = B
        } else {
            if (T.length === 1) {
                aa.shipType = parseInt(T.attr("value"))
            }
        }
        var t = $(".payChecked");
        if (t.length == 1) {
            aa.payMode = parseInt(t.attr("_paymode"))
        }
        var P = $(".msgforSeller");
        if (P.length > 0) {
            var Z = Helper.decodeHtml(P.val());
            var R = parseInt(P.attr("maxlength"));
            if (Z.length > R) {
                Z = Z.substring(0, R)
            }
            var I = P.attr("plcaeholder");
            if (Z !== I) {
                aa.msg = Z
            } else {
                aa.msg = ""
            }
        } else {
            aa.msg = ""
        }
        var r = $("#useItg"), L = $("#integralCheckBox");
        if (L.length > 0 && L.prop("checked")) {
            var ad = r.val();
            if (Helper.isInteger(ad)) {
                var K = parseInt(r.attr("_maxUse")), W = parseInt(r.attr("_currentitg")), s = r.attr("_itgname");
                if (ad > W) {
                    U = Helper.format(LS.integral_notOverCurrent, Helper.encodeHtml(s), Helper.encodeHtml(s));
                    return U
                }
                if (ad > K) {
                    U = Helper.format(LS.integral_notOver, Helper.encodeHtml(s), K);
                    return U
                }
                if (ad < 0) {
                    U = LS.integral_inputInteger;
                    return U
                }
                aa.useItg = parseInt(ad)
            } else {
                if (ad.length != 0) {
                    U = LS.integral_inputInteger;
                    return U
                }
            }
        }
        if ($("#presentItgShow").length > 0) {
            aa.presentItg = true
        }
        var y = $("#couponCheckBox"), O = $(".couponShowList"), ac;
        if (O.length > 0 && parseInt(O.val()) != -1) {
            ac = O.find("option:selected");
            var w = ac.attr("data_id");
            aa.cdId = Number(w)
        }
        return U
    }

    function b(v, F, y, x, u, G, z, w, I, s) {
        if (!I && F == 0) {
            Helper.top.location.href = "mdetail.php";
            return
        }
        var J = {}, H = {}, v = Helper.top.$("#module" + v), C = v.find(".stlMsg");
        var B = o(J, H, w, G, s);
        if (B != "") {
            C.show();
            C.html(B);
            i.scrollToDiv(v);
            return
        }
        var D = v.find(".mallStlOpt input");
        D.attr("disabled", true);
        C.show();
        C.html(LS.mallStlSubmitting);
        i.scrollToDiv(v);
        if (u != 0 && G) {
            var r = {}, w = [];
            w.push(H);
            r.addrInfoList = w;
            $.ajax({
                type: "post",
                url: action = "ajax/memberAdm_h.php?cmd=set&opera=addAddr&id=" + u,
                data: "info=" + Helper.encodeUrl($.toJSON(r)),
                success: function (K) {
                },
                error: function () {
                }
            })
        }
        if (J.payMode == 5) {
            var E = J.name;
            var A = new RegExp("[\\u4E00-\\u9FFF]+", "g");
            if (E) {
                if (E.length < 2) {
                    if (!A.test(E)) {
                        C.hide();
                        i.scrollToDiv(v);
                        Helper.ing(LS.orderValidRecvName);
                        D.attr("disabled", false);
                        return
                    }
                }
            } else {
                if (u != 0 && z) {
                    var t = "";
                    if (z.length < 2) {
                        if (!A.test(E)) {
                            t = "会员"
                        }
                    }
                    J.name = t + z
                } else {
                    J.name = "游客"
                }
            }
        }
        if (I) {
            $.ajax({
                type: "post",
                url: "ajax/order_h.php?cmd=settle&imme",
                data: "data=" + Helper.encodeUrl($.toJSON(J)),
                error: function () {
                    D.removeAttr("disabled");
                    C.html(LS.mallStlSubmitError)
                },
                success: function (K) {
                    D.removeAttr("disabled");
                    var K = jQuery.parseJSON(K);
                    if (K.success) {
                        Helper.top.location.href = "mdetail.php?id=" + K.oid + "&suc=1"
                    } else {
                        if (K.rt == -3) {
                            C.html(LS.mallStlSubmitNotFound)
                        } else {
                            if (K.rt == -9) {
                                C.html(LS.mallStlSubmitStatusError)
                            } else {
                                if (K.rt == i.MallAjaxErrno.outOfMallAmount) {
                                    C.html(Helper.format(LS.mallAmountOverNameList, K.productsName))
                                } else {
                                    C.html(LS.mallStlSubmitError)
                                }
                            }
                        }
                    }
                }
            })
        } else {
            $.ajax({
                type: "post",
                url: "ajax/order_h.php?cmd=delItem&orderId=" + F,
                data: "itemIds=" + Helper.encodeUrl($.toJSON(y)),
                error: function () {
                    D.removeAttr("disabled");
                    C.html(LS.mallStlSubmitError)
                },
                success: function () {
                    $.ajax({
                        type: "post",
                        url: "ajax/order_h.php?cmd=settle&orderId=" + F,
                        data: "data=" + Helper.encodeUrl($.toJSON(J)),
                        error: function () {
                            D.removeAttr("disabled");
                            C.html(LS.mallStlSubmitError)
                        },
                        success: function (K) {
                            D.removeAttr("disabled");
                            var K = jQuery.parseJSON(K);
                            if (K.success) {
                                $.ajax({
                                    type: "post",
                                    url: "ajax/order_h.php?cmd=addAfterShop",
                                    data: "data=" + Helper.encodeUrl($.toJSON(x)),
                                    error: function () {
                                        D.removeAttr("disabled");
                                        C.html(LS.mallStlSubmitError)
                                    },
                                    success: function (L) {
                                        Helper.top.location.href = "mdetail.php?id=" + F + "&suc=1"
                                    }
                                })
                            } else {
                                if (K.rt == -3) {
                                    C.html(LS.mallStlSubmitNotFound)
                                } else {
                                    if (K.rt == -9) {
                                        C.html(LS.mallStlSubmitStatusError)
                                    } else {
                                        if (K.rt == i.MallAjaxErrno.outOfMallAmount) {
                                            C.html(Helper.format(LS.mallAmountOverNameList, K.productsName))
                                        } else {
                                            if (K.rt == i.MallAjaxErrno.OutOfAllowAmount) {
                                                C.html(Helper.format(LS.allowAmountOverNameList, K.productsName))
                                            } else {
                                                if (K.rt == i.MallAjaxErrno.couponOverTime) {
                                                    C.html(LS.couponOverTime)
                                                } else {
                                                    if (K.rt == i.MallAjaxErrno.couponUnavail) {
                                                        C.html(LS.couponUnavail)
                                                    } else {
                                                        if (K.rt == i.MallAjaxErrno.couponNotFound) {
                                                            C.html(LS.couponNotFound)
                                                        } else {
                                                            C.html(LS.mallStlSubmitError)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    })
                }
            })
        }
    }
})(Run);
Run.placeholder = function (b) {
    var a = "placeholder" in document.createElement("input");
    if (!a) {
        b.each(function (g, c) {
            var f = $(this), d = f.attr("placeholder"), j = f.position(), e = f.outerHeight(true),
                k = f.outerWidth(true), m = f.css("padding-left"), l = f.css("padding-top"),
                i = $("<span class='J_wrap-placeholder'></span>").text(d).css({
                    display: "inline-block",
                    height: e,
                    "line-height": e + "px",
                    position: "absolute",
                    left: j.left,
                    top: j.top,
                    paddingLeft: 8,
                    paddingTop: l,
                    color: "#aaa"
                });
            i.appendTo(f.parent());
            f.on("focusin keyup", function () {
                f.val() != "" ? i.hide() : i.show()
            });
            i.on("click", function () {
                f.focus()
            });
            f.siblings(".fk_lowIEPlaceholderStyle").remove()
        })
    }
};
Run.mCartsaleItemCk = function (e) {
    var input = $(e).prev();
    if (input.prop("checked")) {
        input.prop("checked", false)
    } else {
        input.prop("checked", true)
    }
    eval($(e).prev().attr("onclick"))
};
Run.setCheckBoxToFalgDiv = function (b) {
    if (b.find(".J_mallCart").hasClass("mallCartNew")) {
        var a = b.find(".mCartCheckDiv");
        a.each(function () {
            var c = $(this).prev();
            if (c.prop("checked")) {
                $(this).addClass("itemLabelChecked mCart_checked")
            } else {
                $(this).removeClass("itemLabelChecked mCart_checked")
            }
        })
    }
};
Run.initOrderList = function (d) {
    var b = $("#module" + d);
    var a = b.find(".J_showMorePd");
    a.unbind("click").on("click.showOrderItem", function () {
        var f = $(this).attr("_oid");
        var e = $(this).parent().siblings("#hidePdItem" + f);
        if ($(this).hasClass("J_showing")) {
            e.slideUp();
            $(this).removeClass("J_showing").addClass("J_hidden")
        } else {
            e.slideDown();
            $(this).addClass("J_showing").removeClass("J_hidden")
        }
        e.css("zoom", 1)
    });
    var c = b.find(".J_pdName");
    c.hover(function () {
        $(this).addClass("g_selected")
    }, function () {
        $(this).removeClass("g_selected")
    })
};
Run.refundImgUpload = function (c, e) {
    var d = "*.jpg,*.jpeg,*.bmp,*.gif,*.png,*.ico".split(",");
    var a = 5;
    var b = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.php",
        button_placeholder_id: c,
        file_size_limit: "5MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "52px",
        button_height: "52px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/add.png",
        requeue_on_error: false,
        post_params: {ctrl: "Filedata", app: 21, type: 0, fileUploadLimit: 5, isRunForm: true},
        file_types: d.join(";"),
        file_dialog_complete_handler: function (f) {
            this._allSuccess = false;
            this.startUpload()
        },
        file_queue_error_handler: function (g, f, h) {
            switch (f) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Helper.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Helper.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        },
        upload_success_handler: function (g, f) {
            var h = jQuery.parseJSON(f);
            this._allSuccess = h.success;
            this._sysResult = h.msg;
            if (h.success) {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(g.name)), true);
                onFileUploadEvent("upload", h)
            } else {
                Helper.ing(LS.siteFormSubmitFileUploadFile + g.name + "   " + h.msg)
            }
        },
        upload_error_handler: function (g, f, h) {
            if (f == -280) {
                Helper.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (f == -270) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadFileExist, Helper.encodeHtml(g.name)), true)
                } else {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(g.name)))
                }
            }
        },
        upload_complete_handler: function (g) {
            if (g.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof(a) == "undefined") {
                    a = 5
                }
                var h = $("#msgBoardAddImgTb").eq(0);
                var f = h.find("td").length;
                if (f >= (a + 1)) {
                    Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var i = h.find("td").eq(h.find("td").length - 1);
                    i.css("display", "none");
                    return
                }
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (g.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(g.name)))
                }
            }
        },
        upload_start_handler: function (f) {
            Helper.enablePopupWindowBtn(0, "save", false);
            Helper.ing(LS.siteFormSubmitFileUploadPrepare, false)
        },
        view_progress: function (f, i, h, g) {
            Helper.ing(LS.siteFormSubmitFileUploadIng + g + "%", false)
        }
    };
    swfObj = SWFUploadCreator.create(b);
    onFileUploadEvent = function (n, k) {
        if (n == "upload") {
            var h = k.id;
            var m = k.name;
            var j = k.size;
            var i = k.path;
            var o = k.pathSmall;
            var g = k.fileId;
            var f = k.width;
            var l = k.height;
            if (!!e && (typeof e === "function")) {
                e(h, m, i, j, g, o, f, l)
            }
        }
    }
};
Run.refundinit = function (a, e, d) {
    $(".J_refundType").click(function () {
        $(".J_refundType").removeClass("refundSelected");
        $(this).addClass("refundSelected");
        if ($(this).attr("_type") == 1) {
            $("#refundHasRecvGood").hide();
            $("#refundType").removeClass("shortRefund")
        } else {
            $("#refundHasRecvGood").show();
            $("#refundType").addClass("shortRefund")
        }
    });
    $(".J_uploadIconDiv").live("mouseover mouseout", function (f) {
        if (f.type == "mouseover") {
            $(this).find(".J_closeIcon").show()
        } else {
            $(this).find(".J_closeIcon").hide()
        }
    });
    $(".J_closeIcon").live("click", function () {
        $(this).parent().remove();
        $("#refundUpload").show();
        $("#picNumCount").html($(".J_uploadIconDiv").length)
    });
    $("#refundArea").bind("propertychange input", function () {
        var g = $("#refundArea").val();
        var f = g.length;
        if (f <= 200) {
            $("#reasonWordNum").text(f);
            return
        }
        $("#refundArea").val(g.substring(0, 200))
    });
    $("#refundPrice").numeric({negative: false});
    $("#refundPrice").bind("propertychange input", function () {
        var f = parseFloat($(this).val()), g = parseFloat($(this).attr("_max"));
        if (f > g) {
            $("#refundPrice").val(g.toFixed(2))
        }
    });
    Run.refundImgUpload("refundImgSWFUpload", b);
    function b(i, o, l, m, g, p, f, h) {
        var j = "", n = "";
        if (f > h) {
            n = "width: 50px;"
        } else {
            n = "height: 50px;"
        }
        j += "<div class='J_uploadIconDiv uploadIconDiv' _tmpFileId='" + i + "' _fileSize='" + m + "' _fileName='" + Helper.encodeHtmlJs(o) + "' _fileId='" + g + "'>";
        j += "<img src='" + p + "' class='uploadImg' style='" + n + " vertical-align: middle;'/>";
        j += "<div class='closeIcon J_closeIcon'></div>";
        j += "</div>";
        $("#refundUploadList").prepend(j);
        var k = $(".J_uploadIconDiv").length;
        $("#picNumCount").html(k);
        if (k == 5) {
            $("#refundUpload").hide()
        }
    }

    var c = false;
    $("#noRefundCommit").click(function () {
        if (c) {
            return
        }
        var j = $("#refundTypeContent").find(".refundSelected");
        var p = 0;
        if (j.length == 1) {
            p = parseInt(j.attr("_type"))
        }
        var l = $("#refundPrice");
        var m = parseFloat(l.val());
        if (!m) {
            Helper.ing(LS.refundPriceErr, true);
            return
        }
        var g = parseFloat(l.attr("_max"));
        if (!g || m > g) {
            Helper.ing(LS.refundPriceTooMuchErr, true);
            return
        }
        var n = $.trim($("#refundPhone").val());
        if (!n) {
            Helper.ing(LS.refundNeedPhone, true);
            return
        }
        var h = $.trim($("#refundArea").val());
        if (!h) {
            Helper.ing(LS.refundEnterReason, true);
            return
        }
        if (h.length > 200) {
            Helper.ing(LS.refundReasonTooLong, true);
            return
        }
        c = true;
        var k = {};
        var f = $("#refundHasRecvGood");
        if (f.length == 1 && f.is(":visible")) {
            if ($("#recv").attr("checked")) {
                k.hasRecvGood = true
            } else {
                k.hasRecvGood = false
            }
        }
        k.refundPrice = m;
        k.refundType = p;
        k.refundPhone = n;
        k.refundReason = h;
        var i = $(".J_uploadIconDiv");
        if (i.length > 0) {
            var o = [];
            $.each(i, function (r, v) {
                var q = $(v);
                var s = q.attr("_fileId");
                if (!s) {
                    return true
                }
                var t = {};
                t.ii = s;
                var u = q.attr("_tmpFileId");
                if (u) {
                    t["in"] = q.attr("_fileName");
                    t.tfi = u;
                    t.is = q.attr("_fileSize")
                }
                o.push(t)
            });
            if (o.length > 0) {
                k.refundImgList = o
            }
        }
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setOrderNoRefund&orderId=" + a + "&itemId=" + e + "&nowStatus=" + d,
            data: "refundInfo=" + Helper.encodeUrl($.toJSON(k)),
            error: function () {
                c = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (q) {
                var q = $.parseJSON(q);
                if (q.success) {
                    window.location.reload()
                } else {
                    Helper.ing(q.msg, true);
                    c = false
                }
            }
        })
    });
    $("#sendFlowCommit").click(function () {
        if (c) {
            return
        }
        var g = $.trim($("#refundFlowCom").val());
        if (!g) {
            Helper.ing(LS.refundEnterFlowName, true);
            return
        }
        if (g.length > 30) {
            Helper.ing(LS.refundFlowNameTooLong, true);
            return
        }
        var i = $.trim($("#refundFlowID").val());
        if (!i) {
            Helper.ing(LS.refundEnterFlowCode, true);
            return
        }
        if (i.length > 30) {
            Helper.ing(LS.refundFlowCodeTooLong, true);
            return
        }
        var f = $.trim($("#refundPhone").val());
        if (!f) {
            Helper.ing(LS.refundNeedPhone, true);
            return
        }
        if (f.length > 30) {
            Helper.ing(LS.refundPhoneTooLong, true);
            return
        }
        var l = $.trim($("#refundArea").val());
        if (l.length > 200) {
            Helper.ing(LS.refundFlowDetailTooLong, true);
            return
        }
        c = true;
        var k = {company: g, flowId: i, phone: f, refundArea: l};
        var j = $(".J_uploadIconDiv");
        if (j.length > 0) {
            var h = [];
            $.each(j, function (o, s) {
                var m = $(s);
                var p = $(s).attr("_fileId");
                if (!p) {
                    return true
                }
                var q = {};
                q.ii = p;
                var r = m.attr("_tmpFileId");
                if (r) {
                    q["in"] = m.attr("_fileName");
                    q.tfi = r;
                    q.is = m.attr("_fileSize")
                }
                h.push(q)
            });
            if (h.length > 0) {
                k.flowImgList = h
            }
        }
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setRefundFlow&orderId=" + a + "&itemId=" + e + "&nowStatus=" + d,
            data: "flowInfo=" + Helper.encodeUrl($.toJSON(k)),
            error: function () {
                c = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (m) {
                var m = $.parseJSON(m);
                if (m.success) {
                    window.location.reload()
                } else {
                    Helper.ing(m.msg, true);
                    c = false
                }
            }
        })
    })
};
Run.printRemarkRefund = function (a, d, b) {
    $("#createRefundRemark").click(function () {
        var f = "";
        f += "<div class='remarkContent'>";
        f += "<textarea id='remarkInputArea' class='remarkInputArea' maxlength='200' placeholder='最多输入200字'></textarea>";
        f += "</div>";
        f += "<div class='remarkSubmit' id='remarkSubmit'>" + LS.refundSubmit + "</div>";
        var i = "<div class='refundRemarkTitle'>" + LS.refundWantReamrk + "</div>";
        var h = parseInt(Math.random() * 10000);
        var e = {boxId: h, title: i, htmlContent: f, width: 580, boxName: "remarkInfo", extClass: "refundRemarkPopup"};
        var g = Run.popupBox(e);
        $("#remarkInputArea").focus()
    });
    var c = false;
    $("#remarkSubmit").live("click.refundRemark", function () {
        if (c) {
            return
        }
        var e = $("#remarkInputArea").val();
        if ($.trim(e).length == 0) {
            Helper.ing(LS.refundRemarkNotEmpty);
            return
        }
        if (e.length > 200) {
            Helper.ing(LS.refundRemarkTooLong);
            return
        }
        c = true;
        Helper.ing(LS.refundRemarkSubmiting);
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setRefundRemark",
            data: "orderId=" + a + "&speaker=1&itemId=" + d + "&remark=" + Helper.encodeUrl(e),
            error: function () {
                c = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (g) {
                var g = $.parseJSON(g);
                if (g.success) {
                    Helper.ing(LS.refundRemarkSuccess, true);
                    $(".refundRemarkPopup").find(".popupBClose").click();
                    var f = $.format.date(new Date(g.remarkTime), "yyyy-MM-dd HH:mm:ss");
                    var h = "";
                    h += "<div class='recordContent'>";
                    h += "<div class='recordLine'>";
                    h += "<div class='recordSenderIcon memberIcon'></div>";
                    h += "<div class='recordSender'>" + b + "</div>";
                    h += "<div class='recordTime'>" + f + "</div>";
                    h += "</div>";
                    h += "<div class='recordDetail'>";
                    h += "<table class='recordDetailTable'>";
                    h += "<tr class='recordDetailLine'>";
                    h += "<td class='recordDetailCusTd' colspan='2'>";
                    h += Helper.encodeHtml(e);
                    h += "</td>";
                    h += "</tr>";
                    h += "</table>";
                    h += "<div class='triangleIco'>◆</div>";
                    h += "</div>";
                    h += "</div>";
                    $("#refundRemarkTitle").after(h)
                } else {
                    Helper.ing(g.msg, true)
                }
                c = false
            }
        })
    })
};
Run.refundPanelEvent = function (a, c, b) {
    $("#closeRefund").click(function () {
        var e = "";
        e += "<div class='refundCloseTips'>" + LS.refundCancelTip + "</div>";
        e += "<div class='refundCloseSubmit' id='closeRefundBtn'>" + LS.refundSure + "</div>";
        var g = parseInt(Math.random() * 10000);
        var d = {
            boxId: g,
            title: "",
            htmlContent: e,
            width: 358,
            boxName: "closeRefundInfo",
            extClass: "closeRefundPopup"
        };
        var f = Run.popupBox(d)
    });
    $("#closeRefundBtn").live("click.closeRefund", function () {
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setRefundStatus&type=del&nowStatus=" + b,
            data: "orderId=" + a + "&itemId=" + c,
            error: function () {
                isSave = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (d) {
                var d = $.parseJSON(d);
                if (d.success) {
                    window.location.reload()
                } else {
                    Helper.ing(d.msg, true);
                    isSave = false
                }
            }
        })
    });
    $("#editRefund").click(function () {
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setRefundStatus&type=edit&nowStatus=" + b,
            data: "orderId=" + a + "&itemId=" + c,
            error: function () {
                isSave = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (d) {
                var d = $.parseJSON(d);
                if (d.success) {
                    window.location.reload()
                } else {
                    Helper.ing(d.msg, true);
                    isSave = false
                }
            }
        })
    });
    $("#editFlow").click(function () {
        $.ajax({
            type: "post",
            url: "ajax/order_h.php?cmd=setRefundStatus&type=editFlow&nowStatus=" + b,
            data: "orderId=" + a + "&itemId=" + c,
            error: function () {
                isSave = false;
                Helper.ing("系统繁忙，请稍后重试。")
            },
            success: function (d) {
                var d = $.parseJSON(d);
                if (d.success) {
                    window.location.reload()
                } else {
                    Helper.ing(d.msg, true);
                    isSave = false
                }
            }
        })
    })
};
Run.remarkImgEvent = function () {
    $(".J_refundPic").click(function () {
        var c = $(this), f = c.parent();
        var b = f.find(".J_refundPic");
        var e = [], g = -1, d = c.attr("bigImg");
        $.each(b, function (j, k) {
            var h = $(k).attr("bigImg");
            if (h) {
                e.push(h);
                if (h == d) {
                    g = j
                }
            }
        });
        if (g < 0) {
            return
        }
        b.hide();
        f.data("imgList", e);
        f.data("index", g);
        var a = "";
        a += "<div class='picImgViewer J_imgViewer'>";
        if (b.length > 1) {
            a += "<div>";
            a += "<div class='picPage left J_page'></div>";
            a += "<div class='picPage right J_page'></div>";
            a += "</div>"
        }
        a += "<span class='closeIcon J_close'></span>";
        a += "<table cellpadding='0' cellspacing='0' class='picTb'><tr><td>";
        a += "<img class='picImg J_img' src='" + e[g] + "'/>";
        a += "</td></tr></table>";
        a += "</div>";
        c.parent().append(a)
    });
    $(".J_refundPicContain .J_close").live("click", function () {
        var a = $(this).parents(".J_refundPicContain");
        a.find(".picImgViewer").remove();
        a.find(".J_refundPic").show()
    });
    $(".J_refundPicContain .J_page").live("click", function () {
        var a = $(this).parents(".J_refundPicContain");
        var c = a.data("imgList"), d = a.data("index"), b = c.length;
        if (b <= 1) {
            return
        }
        if ($(this).hasClass("left")) {
            d--
        } else {
            d++
        }
        if (d < 0) {
            d = b - 1
        }
        if (d >= b) {
            d = 0
        }
        a.data("index", d);
        a.find(".J_img").attr("src", c[d])
    })
};
Run.showTopBar = function () {
    if (Helper.top.$("#arrow").hasClass("g_arrow_up")) {
        Helper.top.$("#arrow").removeClass("g_arrow_up");
        Helper.top.$("#topBar").hide()
    } else {
        Helper.top.$("#arrow").addClass("g_arrow_up");
        Helper.top.$("#topBar").show()
    }
    Run.resetGmainPos()
};
Run.showOrHideMailBox = function () {
    $.ajax({
        url: "../ajax/mail_h.php?cmd=showOrHideMailBox", data: "", success: function (a) {
            var b = $.parseJSON(a);
            if (b.success) {
                var c = ['<div id="mailInfo" title="进入企业邮箱" class="mailInfo" >', '<a href="' + b.linkAdd + '" target="_blank" onclick="Run.logDog(100038, 14);">', '<div class="mailIco"></div>', "</a>", "</div>"];
                $(".J_beforeMailBox.line").after(c.join(""));
                $(".J_beforeMailBox.line").css("display", "block")
            }
        }, error: function () {
            Helper.ing("系统异常，请稍后重试", true)
        }
    })
};
Run.copyWebRun = function (b) {
    var a = $.browser.msie;
    if (a) {
        clipboardData.setData("Text", b)
    } else {
        prompt(LS.shareTips, b)
    }
};
Run.initModuleFileList = function (a, b) {
    $("#module" + a + " .line table").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    Run.initContentSplitLine(a, b)
};
Run.richMarquee = function (c) {
    var t = {direction: "up", speed: "normal", loop: "infinite", moveout: false, isScrolling: false};
    $.extend(t, c);
    if (t.speed == "normal") {
        $.extend(t, {speed: 28})
    } else {
        if (t.speed == "slow") {
            $.extend(t, {speed: 60})
        } else {
            $.extend(t, {speed: 13})
        }
    }
    if (!t.id) {
        return
    }
    if ($("#module" + t.id).data("restart")) {
        var j = t.id;
        Helper.top.$("#richmarqueeNewParent" + j).after($("#module" + t.id).data("content"));
        Helper.top.$("#richmarqueeNewParent" + j).remove()
    }
    if (!$("#module" + t.id).data("content")) {
        var n = Helper.top.$(".formMiddleContent" + t.id).html();
        $("#module" + t.id).data("content", n)
    }
    if ($("#module" + t.id).data("_intab") !== 0) {
        Helper.top["richMarqueeInTab" + t.id] = t
    }
    var j = t.id, r = $("#richMarquee" + j), f = r.outerHeight(true), d = r.outerWidth(true), i = (d > a()) ? d : a(),
        e = g(), i = e > i ? e : i, x = t.direction, u = 0, h = "top", p = t.speed,
        v = (t.loop != "infinite" || t.loop <= 0) ? 1 : t.loop, l = t.moveout, y = t.isScrolling, w = 20,
        s = $("<div id='richMarqueeCopy" + j + "' class='richMarquee' style='position:absolute; overflow:hidden; width:" + i + "px; height:" + r.height() + "px ' ></div>"),
        m = $("<div id='richmarqueeNewParent" + j + "' style='overflow:hidden;width:" + i * 2 + "'></div>");

    function o() {
        Helper.stopInterval("rm" + j);
        if ($("#richmarqueeNewParent" + j).length < 1) {
            m.appendTo(r.parent());
            r.appendTo(m);
            s.appendTo(m);
            if (!y && !l) {
            } else {
                $(r.html()).appendTo(s)
            }
        } else {
            m = $("#richmarqueeNewParent" + j);
            r = $("#richMarquee" + j);
            s = $("richMarqueeCopy" + j)
        }
        if (x == "up") {
            u = f;
            h = "top"
        } else {
            if (x == "down") {
                u = 0 - f;
                if (y && !l) {
                    u = 0
                }
                h = "top"
            } else {
                if (x == "left") {
                    u = f;
                    h = "left"
                } else {
                    u = 0 - i;
                    if (y && !l) {
                        u = 0
                    }
                    if (y && l) {
                        u = -i
                    }
                    h = "left"
                }
            }
        }
        if (l) {
            r.css(h, 0)
        } else {
            r.css(h, u)
        }
        if (x == "up" || x == "down") {
            r.css("left", 0)
        }
        if (x == "left" || x == "right") {
            r.css("top", 0)
        }
        $("#richmarqueeNewParent" + j).mouseover(function () {
            Helper.stopInterval("rm" + j)
        }).mouseout(function () {
            if (v == "infinite" || v > 0) {
                Helper.startInterval("rm" + j)
            }
        });
        b();
        k(x)
    }

    function a() {
        var z = r.find("img");
        if (z.length > 0) {
            var B = z[0].width;
            for (var A = 0; A < z.length; A++) {
                if (B < z[A].width) {
                    B = z[A].width
                }
            }
            return B
        }
        return 0
    }

    function g() {
        var E = r.children(".richContent"), D = E.children(), B = D.length, A = 0, z = 0, C;
        for (C = B - 1; C >= 0; C--) {
            z = D.eq(C).outerWidth();
            if (z > A) {
                A = z
            }
        }
        return A
    }

    function b() {
        var z = r.find("img");
        $(z).load(function () {
            var A = r.height();
            if (f != A) {
                f = A;
                k(x)
            }
        })
    }

    function k(z) {
        if (z == "left" || z == "right") {
            m.css("position", "relative");
            m.css("width", i);
            s.css("top", 0);
            if (f != 0) {
                m.css("height", f)
            }
            if (z == "left") {
                s.css("margin-left", w);
                if (y && !l) {
                    r.css("left", i);
                    s.css("left", i * 2)
                }
                if (y && l) {
                    s.css("left", i)
                }
                if (!y && !l) {
                    r.css("left", d);
                    s.css("left", i + d)
                }
                if (!y && l) {
                    s.css("left", i + d)
                }
            } else {
                s.css("left", 0);
                r.css("margin-left", w);
                r.css("width", (i) + "px");
                if (y && !l) {
                    r.css("padding-left", i);
                    r.css("padding-right", i);
                    m.scrollLeft(i * 2 + w)
                }
                if (y && l) {
                    r.css("padding-left", i);
                    m.scrollLeft(i * 2)
                }
                if (!y && !l) {
                    r.css("padding-right", i + d);
                    r.css("padding-left", i + d);
                    m.scrollLeft(i + d + w)
                }
                if (!y && l) {
                    r.css("padding-right", i + d);
                    r.css("padding-left", i + d);
                    m.scrollLeft(i + d + w)
                }
            }
        }
        if (z == "up" || z == "down") {
            m.css("position", "relative");
            if (f != 0) {
                m.css("height", f)
            }
            m.css("width", i);
            s.css("left", 0);
            s.css("height", f);
            r.css("width", i);
            if (z == "up") {
                s.css("top", f * 2);
                s.css("margin-top", w);
                if (y && !l) {
                    m.scrollTop(0)
                }
                if (y && l) {
                    s.css("top", f);
                    m.scrollTop(0)
                }
                if (!y && !l) {
                    m.scrollTop(0)
                }
                if (!y && l) {
                    m.scrollTop(0)
                }
            } else {
                r.css("height", f);
                s.css("top", 0);
                r.css("margin-top", w);
                if (y && !l) {
                    r.css("padding-top", f);
                    r.css("padding-bottom", f);
                    m.scrollTop(f * 2 + w)
                }
                if (y && l) {
                    r.css("padding-top", f);
                    m.scrollTop(f * 2)
                }
                if (!y && !l) {
                    r.css("padding-top", f * 2);
                    r.css("padding-bottom", f * 2);
                    m.scrollTop(f * 2 + w)
                }
                if (!y && l) {
                    r.css("padding-top", f * 2);
                    r.css("padding-bottom", f * 2);
                    m.scrollTop(f * 2 + w)
                }
            }
        }
    }

    function q() {
        if (x == "left") {
            var z = m.scrollLeft();
            z++;
            if (y && !l) {
                if (z == i * 2 + w) {
                    m.scrollLeft(i)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (y && l) {
                if (z == i + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (!y && !l) {
                if (z == (i + d) + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
            if (!y && l) {
                if (z == i + d + w) {
                    m.scrollLeft(0)
                } else {
                    m.scrollLeft(z)
                }
            }
        } else {
            if (x == "right") {
                var z = m.scrollLeft();
                z--;
                if (y && !l) {
                    if (z == 0) {
                        m.scrollLeft(i + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (y && l) {
                    if (z == 0) {
                        m.scrollLeft(i + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (!y && !l) {
                    if (z == 0) {
                        m.scrollLeft(i + d + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
                if (!y && l) {
                    if (z == 0) {
                        m.scrollLeft(i + d + w)
                    } else {
                        m.scrollLeft(z)
                    }
                }
            } else {
                if (x == "up") {
                    var z = m.scrollTop();
                    z++;
                    if (y && !l) {
                        if (z == m.height() * 2 + w) {
                            m.scrollTop(f)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (y && l) {
                        if (z == m.height() + w) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && !l) {
                        if (z == m.height() * 2) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && l) {
                        if (z == m.height() * 2 + w) {
                            m.scrollTop(0)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                } else {
                    var z = m.scrollTop();
                    z--;
                    if (y && !l) {
                        if (z == 0) {
                            m.scrollTop(f + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (y && l) {
                        if (z == 0) {
                            m.scrollTop(f + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && !l) {
                        if (z == 0) {
                            m.scrollTop(f * 2 + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                    if (!y && l) {
                        if (z == 0) {
                            m.scrollTop(f * 2 + w)
                        } else {
                            m.scrollTop(z)
                        }
                    }
                }
            }
        }
    }

    o();
    Helper.stopInterval("rm" + j);
    Helper.addInterval("rm" + j, q, p);
    Helper.startInterval("rm" + j);
    if (!$("#module" + t.id).data("first1")) {
        $("#module" + t.id).data("first1", true);
        $("#module" + t.id).data("options", t)
    }
    Run.restartRichMarquee(t)
};
Run.restartRichMarquee = function (a) {
    if (!a) {
        return
    }
    var b = $("#module" + a.id);
    if (!b.data("first2")) {
        b.data("first2", true);
        if (a.speed == 28) {
            a.speed = "normal"
        } else {
            if (a.speed == 60) {
                a.speed = "slow"
            } else {
                a.speed = "fast"
            }
        }
        b.on("Helper_onModuleSizeChange", function () {
            Helper.stopInterval("rm" + a.id);
            b.data("restart", true);
            Run.richMarquee(a)
        });
        b.on("Helper_onModuleLayoutChange", function () {
            Helper.stopInterval("rm" + a.id);
            b.data("restart", true);
            Run.richMarquee(a)
        })
    }
};
Run.productScroll = function (k) {
    var f = {pauseDuration: 3000, showDuration: 600, scrollMode: "up"};
    var c = $.extend({}, f, k);
    var d = $("#module" + c.moduleId), b = d.find(".J_productTextList"), g = b.parent(),
        j = b.find(".productTextListTable"), h = j.outerHeight(), a = "proScroll" + c.moduleId;
    if (j.length < 2) {
        return
    }
    b.css({position: "relative", height: b.height() + "px"});
    g.css({overflow: "hidden"});
    b.mouseover(function () {
        Helper.stopInterval(a)
    }).mouseout(function () {
        Helper.startInterval(a)
    });
    function i() {
        function l() {
            if (c.scrollMode == "up") {
                b.animate({top: "-=" + h}, c.showDuration, function () {
                    var m = b.find(".productTextListTable:first");
                    m.appendTo(b).end().hide().fadeIn(400);
                    b.css({top: 0});
                    e()
                })
            } else {
                b.animate({top: "+=" + h}, c.showDuration, function () {
                    var m = b.find(".productTextListTable:last");
                    m.insertBefore(b.find(".productTextListTable:first")).end().hide().fadeIn(400);
                    b.css({top: 0});
                    e()
                })
            }
        }

        Helper.addTimeout(a, l, c.pauseDuration);
        Helper.startInterval(a)
    }

    function e() {
        i()
    }

    i()
};
Run.loadProductMarquee = function (w, I, D, u) {
    var f = Helper.top["Product" + w].ieOpt, h = Helper.top["Product" + w].tgOpt, m = Helper.top["Product" + w].paramLayoutType,
        p = Helper.top["Product" + w].callbackArgs;
    var c = Helper.top.$("#module" + w);
    if (Helper.isNull(c)) {
        return
    }
    c.find(".demo0>div").each(function () {
        if ($(this).attr("cloneDiv")) {
            $(this).remove()
        }
    });
    var t = c.find(".productMarqueeForm");
    var x = 0;
    if (Helper.isIE6() || Helper.isIE7()) {
        t.each(function () {
            var J = $(this).find(".imgDiv").width();
            $(this).css({width: +J + "px"})
        })
    }
    if (!D && m != 6) {
        if (t.length >= 1) {
            var i = t.first().find(".imgDiv");
            var F = i.width();
            var y = i.height();
            t.each(function () {
                var K = $(this).attr("faiWidth");
                var J = $(this).attr("faiHeight");
                if (Helper.isNull(J)) {
                    return
                }
                var L = Helper.Img.calcSize(K, J, F, y, Helper.Img.MODE_SCALE_FILL);
                if (L.height > x) {
                    x = L.height
                }
            })
        }
    }
    if (f.effType >= 4 && f.effType < 6) {
        if (m == 6) {
            Run.clearImageEffectContent_product(w, "sixth_ProductPanel")
        }
        if (m == 8) {
            Run.clearImageEffectContent_product(w, "eighth_ProductPanel")
        }
        Run.clearImageEffectContent_product(w, "propDiv")
    }
    var e = 0;
    var g = 0;
    var C = 0;
    var E = 0;
    var o = 0;
    var H = Run.getFormMiddleContentHeight(c, w);
    t.each(function () {
        var L = $(this);
        var N = c.find(".productMarqueeForms").attr("_bordertype");
        var M = parseInt(c.find(".productMarqueeForms").attr("_borderwidth"));
        var O = c.find(".productMarqueeForms").attr("_bgtype");
        var Z = L.attr("faiHeight");
        if (Helper.isNull(Z)) {
            return
        }
        var U = L.attr("faiWidth");
        var P = L.find(".imgDiv");
        var Y = P.width();
        if (D || m == 6) {
            x = P.height()
        }
        var K = {width: Y, height: x};
        if (I) {
            if (D) {
                K = Helper.Img.calcSize(U, Z, Y, x, Helper.Img.MODE_SCALE_FILL)
            } else {
                K = Helper.Img.calcSize(U, Z, Y, x, Helper.Img.MODE_SCALE_DEFLATE_HEIGHT)
            }
        }
        var J = P.width();
        if (J < K.width) {
            J = K.width
        }
        var aa = P.find("img");
        aa.css("width", K.width + "px");
        aa.css("height", K.height + "px");
        if (Helper.top._manageMode) {
            aa.data("realWidth", K.width);
            aa.data("realHeight", K.height)
        }
        if (L.find(".propWordWrapDiv").length > 0) {
            if (m == 6) {
                L.find(".propWordWrapDiv").width(J * 0.8)
            } else {
                L.find(".propWordWrapDiv").width(J)
            }
            L.find(".propWordWrapDiv").height("auto")
        } else {
            if (L.find(".first_ProductName,.second_ProductName,.third_ProductName,.fourth_ProductName,.fifth_ProductName,.sixth_ProductName").length > 0) {
                if (m == 6) {
                    L.find(".productName").width(J * 0.8)
                } else {
                    L.find(".productName").width(J)
                }
                L.find(".productName").height("auto")
            } else {
                var T = 0;
                L.find(".productName > a").each(function () {
                    if ($(this).width() > T) {
                        T = $(this).width()
                    }
                });
                if (T > J) {
                    J = T
                }
            }
        }
        var X = L.find(".propDiv");
        if (m == 6) {
            X.css("width", J * 0.8 + "px");
            L.find(".sixth_ProductName").css("width", "80%")
        } else {
            X.css("width", J + "px")
        }
        if (P.width() != J) {
            P.css("width", J + "px")
        }
        if (P.height() != x) {
            P.css("height", x + "px");
            if ($.browser.msie && $.browser.version == 6) {
                P.addClass("wocaie6").removeClass("wocaie6")
            }
        }
        if ($(".propWordWrapDiv").length > 0) {
            Run.unifiedAttrVal(c, ".propWordWrapDiv", "height")
        }
        if (m == 6) {
            L.find(".sixth_ProductPanel").css({
                top: "-" + (L.find(".sixth_ProductPanel").height() - 12) + "px",
                "max-height": x / 2 + 10
            })
        }
        if (L.outerHeight() > g && (u == 0 || u == 1)) {
            g = L.outerHeight()
        }
        if (H > g && (u == 2 || u == 3)) {
            g = H
        }
        var W = L.outerWidth(true);
        var V = L.outerHeight(true);
        if (W > C) {
            C = W
        }
        e += W;
        var R = $(this).find(".eighth_ProductPanel");
        var Q = R.find(".eighth_Pricepanel");
        var S = R.find(".fk_rightPiecePanel");
        if (!!R.length) {
            if (N == 1) {
                Q.css("left", "4px");
                S.css("right", "16px")
            } else {
                if (N == 2) {
                    Q.css("left", (4 + M) + "px");
                    S.css("right", (16 + M) + "px");
                    R.css("bottom", (84 + M) + "px")
                }
            }
        }
    });
    if (t.length >= 1) {
        t.each(function () {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var J = parseInt($(this).find(".fifth_mallBuy").width()) - 1;
                $(this).find(".fifth_mallBuy").css({"line-height": J + "px"})
            }
        })
    }
    tmpTotalWidth = e;
    var n = c.find(".demo");
    var B = c.find(".demo0");
    E = B.height();
    if (g > 0) {
        if (m == 6) {
            n.css("height", (g + 50) + "px")
        } else {
            n.css("height", g + "px")
        }
    }
    if (u == 0 || u == 1) {
        B.css("width", e + "px");
        if (t.length == 0) {
            return
        }
        var a = n.width(), A = B.width();
        if (A <= a) {
            jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
                moduleId: w,
                imgEffOption: f,
                tagetOption: h,
                callback: Run.createImageEffectContent_product,
                callbackArgs: p
            });
            return
        }
    }
    if (u == 2 || u == 3) {
        var g = n.height(), j = B.height();
        if (j <= g) {
            jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
                moduleId: w,
                imgEffOption: f,
                tagetOption: h,
                callback: Run.createImageEffectContent_product,
                callbackArgs: p
            });
            return
        }
    }
    var l = t.first().outerWidth(true);
    if (l == 0) {
        return
    }
    var G = Helper.top.productMarqueelist;
    var s = 0, d = t.length - 1;
    t.each(function (K, M) {
        if (s > a) {
            return false
        }
        var J = $(M).clone().attr("cloneDiv", "true"), N = J.children("div.imgDiv").attr("id");
        J.children("div.imgDiv").attr("id", N + "_clone");
        B.append(J);
        s += J.outerWidth(true);
        if (0 === K && (u == 2 || u == 3)) {
            $(M).css("clear", "both");
            J.css("clear", "both")
        }
        if (Helper.isIE6() || Helper.isIE7()) {
            if (K === d) {
                $(t[K]).after('<div style="clear:both;"></div>');
                J.after('<div style="clear:both;"></div>')
            }
        }
        if (typeof G != "undefined") {
            for (var K = 0; K < G.length; K++) {
                var L = G[K];
                if (L.cloneflag && L.cloneflag == N) {
                    $("#" + L.cloneflag + "_clone").mouseover(function () {
                        var O = Run.addEditLayer(this, L, 6);
                        if (!O) {
                            return
                        }
                        O.mouseover(function () {
                            Helper.stopInterval("marquee" + w)
                        }).mouseout(function () {
                            Helper.startInterval("marquee" + w)
                        })
                    }).mouseleave(function () {
                        Run.removeEditLayer(this)
                    });
                    break
                }
            }
        }
    });
    var r = e + s;
    if (u == 0 || u == 1) {
        B.css("width", r + "px")
    }
    function q() {
        var J = n.scrollLeft();
        J++;
        n.scrollLeft(J);
        if (J == e) {
            n.scrollLeft(0)
        }
    }

    function b() {
        e--;
        n.scrollLeft(e);
        if (e == 0) {
            n.scrollLeft(tmpTotalWidth);
            e = tmpTotalWidth
        }
    }

    function z() {
        var J = n.scrollTop();
        J--;
        n.scrollTop(J);
        if (J == 0) {
            n.scrollTop(E)
        }
    }

    function v() {
        var J = n.scrollTop();
        J++;
        n.scrollTop(J);
        if (J == E) {
            n.scrollTop(0)
        }
    }

    if (u == 0) {
        n.scrollLeft(2 * e);
        Helper.addInterval("marquee" + w, b, 35)
    } else {
        if (u == 1) {
            Helper.addInterval("marquee" + w, q, 35)
        } else {
            if (u == 2) {
                n.scrollTop(2 * E);
                Helper.addInterval("marquee" + w, z, 35)
            } else {
                if (u == 3) {
                    Helper.addInterval("marquee" + w, v, 35)
                }
            }
        }
    }
    n.mouseover(function () {
        Helper.stopInterval("marquee" + w)
    }).mouseleave(function () {
        Helper.startInterval("marquee" + w)
    });
    setTimeout(function () {
        Helper.startInterval("marquee" + w)
    }, 100);
    if (!c.data("first1")) {
        c.data("first1", true);
        c.data("options", {
            id: w,
            scale: I,
            fixHeight: D,
            proMarqueeDirection: u,
            ieOpt: f,
            tgOpt: h,
            callback: Run.createImageEffectContent_product,
            callbackArgs: p
        })
    }
    if (c.data("first2") && Helper.top._manageMode) {
        var k = c.data("productOptions");
        Run.initModuleProductListItemManage(k)
    }
    jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, {
        moduleId: w,
        imgEffOption: f,
        tagetOption: h,
        callback: Run.createImageEffectContent_product,
        callbackArgs: p
    });
    Run.restartProductMarquee(c)
};
Run.restartProductMarquee = function (a) {
    if (!a.data("first2")) {
        a.data("first2", true);
        a.on("Helper_onModuleSizeChange", function () {
            var b = a.data("options");
            Helper.stopInterval("marquee" + b.id);
            Run.loadProductMarquee(b.id, b.scale, b.fixHeight, b.proMarqueeDirection, b.ieOpt, b.tgOpt, b.callback, b.callbackArgs)
        });
        a.on("Helper_onModuleLayoutChange", function () {
            var b = a.data("options");
            Helper.stopInterval("marquee" + b.id);
            Run.loadProductMarquee(b.id, b.scale, b.fixHeight, b.proMarqueeDirection, b.ieOpt, b.tgOpt, b.callback, b.callbackArgs)
        })
    }
};
Run.initModuleProductFilter = function (c, b) {
    $("#module" + c + " .productFilterValue").mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    if (b) {
        var a = $("#module" + c).find(".formMiddle" + c).find("table.productFilterContent").find(".productFilterContentCenter");
        var d = a.find(".productFilterName");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var h = $(this).next();
                if (h.is(":visible")) {
                    f.removeClass("productFilterUnfold").addClass("productFilterFold");
                    h.hide()
                } else {
                    f.removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        })
    }
};
Run.initModuleProductCatalog = function (c, a) {
    $("#module" + c + " .productFilterValue").mouseover(function () {
        $(this).addClass("g_tableHover");
        $(this).find(".productFilterValueCenter").addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_tableHover");
        $(this).find(".productFilterValueCenter").removeClass("g_hover")
    });
    if (a) {
        var d = $("#module" + c).find(".formMiddle" + c).find("table .parentClickedTd");
        var b = $("#module" + c).find(".formMiddle" + c).find("table .parentCatalog a");
        $.each(d, function (e, g) {
            var f = $(g);
            f.css("cursor", "pointer");
            f.click(function () {
                var i = parseInt($(this).attr("prodId"));
                var h = $("#prodDiv" + i);
                if (h.is(":visible")) {
                    $(this).removeClass("productFilterUnfold").addClass("productFilterFold");
                    h.hide()
                } else {
                    $(this).removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        });
        $.each(b, function (e, g) {
            var f = $(g);
            f.click(function (l) {
                l.preventDefault();
                var i = parseInt($(this).attr("prodId"));
                var h = $("#prodDiv" + i);
                var k = $("#provId" + i);
                var j = $(this).parent().find(".parentClickedTd");
                if (h.is(":visible")) {
                    h.hide();
                    k.removeClass("productFilterUnfold").addClass("productFilterFold")
                } else {
                    k.removeClass("productFilterFold").addClass("productFilterUnfold");
                    h.show()
                }
            })
        })
    }
};
Run.loadProductTextList = function (b) {
    var a = $("#module" + b);
    if (Helper.isNull(a)) {
        return
    }
    if (!_manageMode) {
        a.find(".productTextListTable").on("mouseenter.manage", function () {
            $(this).addClass("g_hover")
        }).on("mouseleave.manage", function () {
            $(this).removeClass("g_hover")
        })
    }
};
Run.loadProductTile = function (b, h, i, k, j, g) {
    var f = $("#module" + b);
    if (Helper.isNull(f)) {
        return
    }
    var m = 0;
    var e = f.find(".productList").attr("_bordertype");
    var a = parseInt(f.find(".productList").attr("_borderwidth"));
    var l = f.find(".productList").attr("_bgtype");
    if (!i && g != 6 && g != 8) {
        f.find(".productTileForm").each(function () {
            var p = $(this).attr("faiWidth");
            var n = $(this).attr("faiHeight");
            if (Helper.isNull(n)) {
                return
            }
            var u = $(this).find(".imgDiv");
            var t = u.width();
            var q = u.height();
            var r = $(this).attr("faiWidthOr");
            var o = $(this).attr("faiHeightOr");
            var s = Helper.Img.calcSize(r, o, t, q, Helper.Img.MODE_SCALE_FILL);
            if (s.height > m) {
                m = s.height
            }
        })
    }
    f.find(".productTileForm").each(function () {
        var x = $(this).attr("faiHeight");
        if (Helper.isNull(x)) {
            return
        }
        var u = $(this).attr("faiWidth");
        var p = $(this).attr("faiWidthOr");
        var v = $(this).attr("faiHeightOr");
        var z = $(this).find(".imgDiv");
        var y = z.width();
        var n = $(this).find(".eighth_ProductPanel");
        var w = n.find(".eighth_Pricepanel");
        var o = n.find(".fk_rightPiecePanel");
        if (i || g == 6 || g == 8) {
            m = z.height()
        }
        var t = {width: y, height: m};
        if (h) {
            t = Helper.Img.calcSize(p, v, y, m, Helper.Img.MODE_SCALE_FILL)
        }
        var q = z.find("img");
        q.css("width", t.width + "px");
        q.css("height", t.height + "px");
        z.css("height", m + "px");
        if (Helper.top._manageMode) {
            q.data("realWidth", t.width);
            q.data("realHeight", t.height)
        }
        if (g == 4 || g == 5 || g == 9) {
            var s = $(this).find(".fifth_mallBuy");
            var r = s.width();
            s.css("line-height", r + "px");
            s.css("height", r + "px")
        }
        if (g == 6) {
            $(this).css({"margin-bottom": "54px", overflow: "visible"})
        }
        if (!!n.length) {
            if (e == 0) {
                if (l == 1) {
                    w.css("left", "15px");
                    o.css("right", "33px");
                    n.css("bottom", "36px")
                }
            } else {
                if (e == 1) {
                    w.css("left", "14px");
                    o.css("right", "34px");
                    n.css("bottom", "36px")
                } else {
                    if (e == 2) {
                        $(this).width(z.outerWidth());
                        $(this).height(z.outerHeight());
                        if (l == 1) {
                            w.css("left", (14 + a) + "px");
                            o.css("right", (36 + a) + "px");
                            n.css("bottom", (36 + a) + "px")
                        } else {
                            w.css("left", (4 + a) + "px");
                            o.css("right", (26 + a) + "px");
                            n.css("bottom", (25 + a) + "px")
                        }
                    }
                }
            }
        }
        if (g < 6) {
            $(this).width(z.outerWidth(true))
        }
    });
    if (j >= 4 && j < 6) {
        Run.clearImageEffectContent_product(b, "propList");
        return
    }
    if (k == -1 && f.find(".productNameWordWrap").length == 0) {
        Run.unifiedAttrVal(f, ".productTileForm", "height")
    }
    if (f.find(".productNameWordWrap").length > 0) {
        f.find(".productNameWordWrap").attr("paramLayoutType", g);
        if (g == 3) {
            var d = f.find(".productNameWordWrap");
            var c = 0;
            d.each(function () {
                var n = $(this).outerHeight();
                n = parseInt(n);
                if (n > c) {
                    c = n
                }
            });
            d.each(function () {
                $(this).css("height", c + "px")
            })
        } else {
            Run.unifiedAttrVal(f, ".productNameWordWrap", "height")
        }
        Run.unifiedAttrVal(f, ".productTileForm", "height")
    }
};
Run.initProductRestrict = function (a, h, f, e, c) {
    if (h) {
        var g = 0;
        if (c.count != null) {
            g = c.count
        }
        var i = 0;
        i = e - g;
        if (Helper.fkEval(i) < 0) {
            i = -1
        }
        var b = 1, d = -1;
        if (f > 1 && e != 0) {
            $("#limitAmountDiv").text("( " + LS.minAmount + " : " + f + " ; " + LS.maxAmount + " : " + i + " )");
            b = f;
            d = i
        } else {
            if (f == 1 && e != 0) {
                $("#limitAmountDiv").text("( " + LS.maxAmount + " : " + i + " )");
                d = i
            } else {
                if (f > 1 && e == 0) {
                    $("#limitAmountDiv").text("( " + LS.minAmount + " : " + f + " )");
                    b = f
                }
            }
        }
        $("#cartbuyCount" + a).unbind("change");
        $("#cartbuyCount" + a).val(b);
        $("#cartbuyCount" + a).change(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Helper.isInteger(j)) {
                k = parseInt(j)
            }
            if (k < b || k == b) {
                k = b;
                $("#buyCountDes" + a).addClass("disableMallJian");
                $("#buyCountInc" + a).removeClass("disableMallJia");
                if ((b > d || b == d) && d != -1) {
                    $("#buyCountInc" + a).addClass("disableMallJia")
                }
            } else {
                if (d != -1 && (k > d || k == d)) {
                    k = d;
                    $("#buyCountInc" + a).addClass("disableMallJia");
                    $("#buyCountDes" + a).removeClass("disableMallJian")
                } else {
                    if (k > 9999998) {
                        k = 9999999;
                        $("#buyCountDes" + a).removeClass("disableMallJian");
                        $("#buyCountInc" + a).addClass("disableMallJia")
                    } else {
                        $("#buyCountDes" + a).removeClass("disableMallJian");
                        $("#buyCountInc" + a).removeClass("disableMallJia")
                    }
                }
            }
            $("#cartbuyCount" + a).val(k)
        });
        $("#cartbuyCount" + a).change();
        $("#buyCountDes" + a).click(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Helper.isInteger(j)) {
                k = parseInt(j)
            }
            if (k < b + 1) {
                $("#cartbuyCount" + a).val(b);
                $("#buyCountDes" + a).addClass("disableMallJian")
            } else {
                $("#buyCountInc" + a).removeClass("disableMallJia")
            }
        });
        $("#buyCountInc" + a).click(function () {
            var j = $("#cartbuyCount" + a).val();
            var k = 1;
            if (Helper.isInteger(j)) {
                k = parseInt(j)
            }
            if (k > d - 1 && d != -1) {
                if (d > b) {
                    $("#cartbuyCount" + a).val(d);
                    $("#buyCountInc" + a).addClass("disableMallJia")
                } else {
                    $("#cartbuyCount" + a).val(b);
                    $("#buyCountInc" + a).addClass("disableMallJia")
                }
            } else {
                $("#buyCountDes" + a).removeClass("disableMallJian")
            }
        })
    }
};
Run.wipeOffRunOne = true;
Run.initProductOptions = function (n, g, r, b, p, k, t, j) {
    var a;
    if (n === "PdSlide") {
        a = $("#fk-productSlideContent")
    } else {
        a = $("#module" + n)
    }
    if (Helper.isNull(a)) {
        return
    }
    var q = a.find(".optionItemWrap");
    var o = [];
    var i = a.find("#realMallAmount").html();
    var l = a.find("#mallAmount").html();
    var c = a.find("#mallWeight").html();
    if (!r) {
        $.each(g, function (v, w) {
            if (typeof w.oAmount != "undefined") {
                delete w.oAmount
            }
        })
    }
    if (l <= 0) {
        s(q.find(".J-item"))
    } else {
        $.each(g, function (v, x) {
            if (x.oAmount <= 0 && q.length <= 1) {
                var w = q.find(".J-item").get(v);
                s(w)
            } else {
                if (x.oAmount <= 0 && q.length > 1) {
                    o.push(x.t2)
                }
            }
        })
    }
    q.find(".J-item").hover(function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        $(this).addClass("g_borderSelected fk-mainBorderColor fk-mainFontColor")
    }, function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        if (!$(this).hasClass("optionItemHover")) {
            $(this).removeClass("g_borderSelected fk-mainBorderColor fk-mainFontColor")
        }
    });
    q.find(".optionItem img").hover(function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        var x = $(this).parent();
        if (x.find("img").length === 0) {
            return false
        }
        var v = x.find(".J-img-tip");
        if (v.length > 0) {
            v.stop(true, true).fadeIn();
            return false
        }
        var w = x.find("span").text();
        v = ["<div class='img-tip J-img-tip'>", "<div>", w, "</div>", "<div class='tip-ico J-ico'></div>", "</div>"];
        v = $(v.join(""));
        x.append(v);
        v.find(".J-ico").css("left", (v.outerWidth() - 11) / 2);
        v.css("left", -((v.outerWidth() - 38) / 2));
        v.fadeIn()
    }, function () {
        if ($(this).attr("isEmptyAmount") == "1") {
            return
        }
        $(this).parent().find(".J-img-tip").fadeOut()
    });
    var e = $("#cartbuyCount" + n).val();
    var d = $("#imgDiv" + n);
    var h = "<div class='J-img-tri img-selected g_borderSelected'></div><div class='J-img-tri op-selected-ico'></div>";
    q.find(".optionItem").bind("click", function () {
        if ($(this).find(".J-item").attr("isEmptyAmount") == "1") {
            return
        }
        var X = $(this), Y = X.siblings(), O = X.find(".J-item");
        if (O.hasClass("J-isSelected")) {
            O.removeClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            O.parent().find(".J-img-tri").remove();
            a.find("#realMallAmount").html(i);
            a.find("#mallAmount").html(l);
            a.find("#mallWeight").html(c);
            if (p) {
                $("#limitAmountDiv").text("");
                $("#buyCountInc" + n).removeClass("disableMallJia");
                $("#buyCountDes" + n).removeClass("disableMallJian");
                $("#buyCountInc" + n).unbind("click");
                $("#buyCountDes" + n).unbind("click")
            }
            q.find(".optionItem").show();
            q.find(".J-item.g_borderSelected :first").parent().click().click()
        } else {
            O.addClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            Y.find(".J-item").removeClass("optionItemHover g_borderSelected fk-mainBorderColor fk-mainFontColor J-isSelected");
            Y.find(".J-img-tri").remove();
            if (O.hasClass("J-item-img")) {
                X.append(h)
            }
        }
        if (q.length > 1 && r) {
            var W = "";
            var ab = 0;
            q.each(function (ad, ae) {
                if ($(q[ad]).find(".J-item.g_borderSelected").length <= 0) {
                    W += "x_"
                } else {
                    W += $(q[ad]).find(".J-item.g_borderSelected").attr("data") + "_"
                }
            });
            W = W.substring(0, W.length - 1);
            $.each(g, function (ad, ae) {
                if (u(W, ae.t2)) {
                    if (ae.flag != 0 && !isNaN(ae.oAmount)) {
                        ab += ae.oAmount
                    }
                }
            });
            $("#mallAmount").text(ab)
        }
        var E = O.attr("_fk-org");
        if (d.length > 0 && E) {
            d.find("img").attr("src", E);
            var A = d.find(".cloud-zoom");
            if (A.length > 0) {
                d.attr("faihref", E);
                A.attr("href", E).data("zoom").destroy();
                A.CloudZoom({imageWidth: parseInt(O.attr("faiwidth")), imageHeight: parseInt(O.attr("faiheight"))})
            }
        }
        var G = q.length;
        var J = q.find(".J-item.g_borderSelected");
        if (G == J.length) {
            var z = "", Q, B, v, D, H;
            $.each(J, function (ad, ae) {
                z += $(ae).attr("data") + "_"
            });
            $.each(g, function (ad, af) {
                var ae = af.t2;
                if ((ae + "_") == z) {
                    Q = af.oPrice;
                    B = af.oAmount;
                    v = af.minAmount;
                    D = af.maxAmount;
                    H = af.w
                }
            });
            if (p) {
                $("#limitAmountDiv").text("");
                var w = 0;
                var ac = k.optionsCount;
                if (ac != null && ac.d != null) {
                    for (var U = 0; U < ac.d.length; U++) {
                        if ((ac.d[U].t + "_") == z) {
                            w = ac.d[U].c
                        }
                    }
                }
                var C = 0;
                C = D - w;
                if (Helper.fkEval(C) < 0) {
                    C = -1
                }
                var P = 1;
                var T = -1;
                if (v > 1 && D != 0) {
                    $("#limitAmountDiv").text("( " + LS.minAmount + " : " + v + " ; " + LS.maxAmount + " : " + C + " )");
                    P = v;
                    T = C
                } else {
                    if (v == 1 && D != 0) {
                        $("#limitAmountDiv").text("( " + LS.maxAmount + " : " + C + " )");
                        T = C
                    } else {
                        if (v > 1 && D == 0) {
                            $("#limitAmountDiv").text("( " + LS.minAmount + " : " + v + " )");
                            P = v
                        }
                    }
                }
                $("#cartbuyCount" + n).val(P);
                $("#cartbuyCount" + n).unbind("change");
                $("#cartbuyCount" + n).bind("change");
                $("#cartbuyCount" + n).change(function () {
                    var ad = $("#cartbuyCount" + n).val();
                    var ae = 1;
                    if (Helper.isInteger(ad)) {
                        ae = parseInt(ad)
                    }
                    if (ae < P || ae == P) {
                        ae = P;
                        $("#buyCountDes" + n).addClass("disableMallJian");
                        $("#buyCountInc" + n).removeClass("disableMallJia");
                        if ((P > T || P == T) && T != -1) {
                            $("#buyCountInc" + n).addClass("disableMallJia")
                        }
                    } else {
                        if (T != -1 && (ae > T || ae == T)) {
                            ae = T;
                            $("#buyCountInc" + n).addClass("disableMallJia");
                            $("#buyCountDes" + n).removeClass("disableMallJian")
                        } else {
                            if (ae > 9999998) {
                                ae = 9999999;
                                $("#buyCountDes" + n).removeClass("disableMallJian");
                                $("#buyCountInc" + n).addClass("disableMallJia")
                            } else {
                                $("#buyCountDes" + n).removeClass("disableMallJian");
                                $("#buyCountInc" + n).removeClass("disableMallJia")
                            }
                        }
                    }
                    $("#cartbuyCount" + n).val(ae)
                });
                $("#cartbuyCount" + n).change();
                $("#buyCountDes" + n).unbind("click");
                $("#buyCountInc" + n).unbind("click");
                $("#buyCountDes" + n).click(function () {
                    var ad = $("#cartbuyCount" + n).val();
                    var ae = 1;
                    if (Helper.isInteger(ad)) {
                        ae = parseInt(ad)
                    }
                    if (ae < P + 1) {
                        $("#cartbuyCount" + n).val(P);
                        $("#buyCountDes" + n).addClass("disableMallJian")
                    } else {
                        $("#buyCountInc" + n).removeClass("disableMallJia")
                    }
                });
                $("#buyCountInc" + n).click(function () {
                    var ad = $("#cartbuyCount" + n).val();
                    var ae = 1;
                    if (Helper.isInteger(ad)) {
                        ae = parseInt(ad)
                    }
                    if (ae > T - 1 && T != -1) {
                        if (T > P) {
                            $("#cartbuyCount" + n).val(T);
                            $("#buyCountInc" + n).addClass("disableMallJia")
                        } else {
                            $("#cartbuyCount" + n).val(P);
                            $("#buyCountInc" + n).addClass("disableMallJia")
                        }
                    } else {
                        $("#buyCountDes" + n).removeClass("disableMallJian")
                    }
                })
            }
            if (r) {
                $("#mallAmount").text(B)
            }
            if (Q == null || j) {
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    $("#realMallAmount").text(Helper.formatPriceEn(b))
                } else {
                    $("#realMallAmount").text(b)
                }
                Run.onlyChangeSalePrice(b)
            } else {
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    $("#realMallAmount").text(Helper.formatPriceEn(Q))
                } else {
                    $("#realMallAmount").text(Q)
                }
                Run.onlyChangeSalePrice(Q);
                if (Helper.isIE10()) {
                    if (Run.wipeOffRunOne) {
                        $(".pd_J .pd_propTable .propName").each(function (ad, ae) {
                            $(ae).removeClass("propName");
                            setTimeout(function () {
                                $(ae).addClass("propName")
                            }, 0)
                        })
                    }
                    Run.wipeOffRunOne = false
                }
            }
            if (H != null) {
                $("#mallWeight").text(H)
            }
        }
        if (G != J.length && G != 1) {
            m()
        }
        if ((G - 1) <= J.length && G != 1) {
            var N = "";
            $.each(q, function (ad, ae) {
                if ($(q[ad]).find(".J-item.g_borderSelected").length <= 0) {
                    N += "x_"
                } else {
                    N += $(q[ad]).find(".J-item.g_borderSelected").attr("data") + "_"
                }
            });
            if (N != "") {
                N = N.substring(0, N.length - 1)
            }
            var F = "";
            $.each(q, function (ad, af) {
                var ae = $(q[ad]).find(".J-item.g_borderSelected");
                if (ae.length <= 0) {
                    F = $(q[ad])
                }
            });
            if (F != "") {
                var Z = F.find(".J-item");
                $.each(Z, function (ad, af) {
                    var ae = N.replace("x", $(Z[ad]).attr("data"));
                    if ($.inArray(ae, o) >= 0) {
                        s(Z[ad])
                    } else {
                        f(Z[ad])
                    }
                })
            } else {
                $.each(q, function (ad, af) {
                    var ae = $(q[ad]).find(".J-item");
                    $.each(ae, function (ai, ah) {
                        if ($(ae[ai]).hasClass("g_borderSelected")) {
                            return
                        }
                        var ag = N.split("_");
                        ag[ad] = $(ae[ai]).attr("data");
                        var aj = ag.join("_");
                        if ($.inArray(aj, o) >= 0) {
                            s(ae[ai])
                        } else {
                            f(ae[ai])
                        }
                    })
                })
            }
        }
        var V = [], S = false;
        for (var U = 0; U < q.length; U++) {
            var I = q.eq("" + U + "");
            if (I.find(".J-item").hasClass("g_borderSelected")) {
                V.push(I.find(".J-item.g_borderSelected").attr("data"))
            } else {
                break
            }
        }
        if (V.length <= q.length && V.length > 1) {
            var L = V.length;
            for (var U = 0; U < L; U++) {
                $.each(g, function (ae, ag) {
                    var af = ag.t2;
                    var ad = af.split("_");
                    if (ag.flag == undefined) {
                        ag.flag = 1
                    }
                    if (ag.flag == 1 && arrHasSameBegin(ad, V)) {
                        S = true;
                        return false
                    }
                });
                if (!S) {
                    var M = q.eq(V.length - 1).find(".J-item");
                    var K = V.pop();
                    M.each(function () {
                        if ($(this).attr("data") == K) {
                            var ad = $(this).parent();
                            ad.hide()
                        }
                    });
                    M.parent().find(".J-img-tri").remove();
                    M.removeClass("g_borderSelected fk-mainBorderColor fk-mainFontColor optionItemHover J-isSelected")
                } else {
                    break
                }
            }
        }
        var aa = q.index(X.parent());
        for (var R = aa; R < V.length; R++) {
            var x = V.slice(0, R + 1);
            S = false;
            for (var U = x.length; U < q.length; U++) {
                var y = q.eq("" + U + "");
                y.find(".optionItem").each(function () {
                    var ad = $(this).find(".J-item").attr("data");
                    S = false;
                    $.each(g, function (af, ah) {
                        var ag = ah.t2;
                        var ae = ag.split("_");
                        if (ah.flag == undefined) {
                            ah.flag = 1
                        }
                        if (ad == ae[U] && ah.flag == 1 && arrHasSameBegin(ae, x)) {
                            S = true;
                            return false
                        }
                    });
                    if (!S) {
                        $(this).hide()
                    } else {
                        $(this).show()
                    }
                })
            }
        }
    });
    function s(v) {
        $(v).css({"border-style": "dashed", color: "#CDCDCD", cursor: "not-allowed"});
        $(v).attr("isEmptyAmount", "1")
    }

    function f(v) {
        $(v).css({"border-style": "", color: "", cursor: ""});
        $(v).attr("isEmptyAmount", "")
    }

    function m() {
        $(".optionItemWrap .J-item").css({"border-style": "", color: "", cursor: ""});
        $(".optionItemWrap .J-item").attr("isEmptyAmount", "")
    }

    function u(x, z) {
        if (x == "") {
            return false
        }
        var y = true;
        var w = x.split("_");
        var v = z.split("_");
        if (w.length != v.length) {
            return false
        }
        $.each(w, function (A, B) {
            if (w[A] == "x") {
                return
            }
            if (w[A] != v[A]) {
                y = false
            }
        });
        return y
    }
};
function arrHasSameBegin(b, d) {
    var a = true;
    for (var c = 0; c < d.length; c++) {
        if (d[c] != b[c]) {
            a = false
        }
    }
    return a
}
Run.initMbPdCollection = {};
(function (e, g, f) {
    g.init = function (l, j, h, i, k) {
        g.sessionMid = l;
        g.collectionList = j == null ? [] : j;
        g.pid = h;
        g._manageMode = i;
        a(k);
        c();
        if (e("#_TOKEN").length != 0 && !i && Helper.Cookie.get("collectId") == h && !e("#pdCollection .pdCollectIcon").hasClass("collectionSelect")) {
            e("#pdCollection").click()
        }
        Helper.Cookie.clear("collectId")
    };
    function b(h) {
        var i = {};
        i.productCollections = g.collectionList + "";
        e.post("ajax/member_h.php", {cmd: "set", id: g.sessionMid, info: e.toJSON(i)}, function (j) {
            if (j.success) {
                d(h)
            }
        }, "json")
    }

    function d(i) {
        var j = {height: 72};
        if (i == "suc") {
            j.width = 183;
            j.htmlContent = '<div class="suc-ico addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 29px; padding-left: 39px;">' + LS.sucCollection + "</div>"
        } else {
            if (i == "warn") {
                j.width = 210;
                j.htmlContent = '<div class="warn-ico addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 29px; padding-left: 39px;">' + LS.cancelCollection + "</div>"
            } else {
                if (i == "err") {
                    j.height = 90;
                    j.width = 280;
                    j.htmlContent = '<div class="resultHelperlIcon addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 39px; padding-left: 35px;">';
                    j.htmlContent += LS.isManagefailCollection + "</div>"
                }
            }
        }
        var h = Run.popupBox(j);
        h.find(".popupBClose").css({
            "margin-top": "9px",
            right: "9px",
            width: "12px",
            height: "12px",
            "background-position": "-1665px -110px"
        });
        if (i != "err") {
            setTimeout(function () {
                h.find(".popupBClose").click()
            }, 3000)
        }
    }

    function c() {
        e("#pdCollection").on("click", function () {
            if (g.sessionMid == 0) {
                if (g._manageMode) {
                    d("err")
                } else {
                    window.location.href = "login.php?url=" + Helper.encodeUrl(window.location.href);
                    Helper.Cookie.set("collectId", g.pid)
                }
            } else {
                if (e.inArray(g.pid, g.collectionList) == -1) {
                    g.collectionList.push(g.pid);
                    e("#pdCollection .pdCollectIcon").addClass("collectionSelect");
                    e("#pdCollection .pdCollectIcon").addClass("faisco-icons-star3");
                    e(".faisco-icons-star3").css({"font-size": "22px", "line-height": "22px", height: "22px"});
                    e("#pdCollection .pdCollectIcon").removeClass("faisco-icons-start2");
                    b("suc")
                } else {
                    if (e.inArray(g.pid, g.collectionList) != -1) {
                        g.collectionList.splice(e.inArray(g.pid, g.collectionList), 1);
                        e("#pdCollection .pdCollectIcon").removeClass("collectionSelect");
                        e("#pdCollection .pdCollectIcon").addClass("faisco-icons-start2");
                        e("#pdCollection .pdCollectIcon").removeClass("faisco-icons-star3");
                        b("warn")
                    }
                }
            }
        })
    }

    function a(h) {
        if (g.sessionMid != 0 && e.inArray(g.pid, g.collectionList) != -1) {
            e("#pdCollection .pdCollectIcon").addClass("collectionSelect");
            e("#pdCollection .pdCollectIcon").addClass("faisco-icons-star3");
            e(".faisco-icons-star3").css({"font-size": "22px", "line-height": "22px", height: "22px"});
            e("#pdCollection .pdCollectIcon").removeClass("faisco-icons-start2")
        }
        if (!!h) {
            return
        }
    }
})(jQuery, Run.initMbPdCollection);
Run.loadCollection = function () {
    $("#pdCollection").hover(function () {
        $("#pdCollection .collection").removeClass("text").addClass("productOperaTextColor").addClass("operaTextHover");
        $("#pdCollection .pdCollectIcon").removeClass("text").addClass("productOperaTextColor").addClass("operaTextHover")
    }, function () {
        $("#pdCollection .collection").addClass("text").removeClass("productOperaTextColor").removeClass("operaTextHover");
        $("#pdCollection .pdCollectIcon").addClass("text").removeClass("productOperaTextColor").removeClass("operaTextHover")
    });
    $("#pdCollection .collection,#pdCollection .pdCollectIcon").hover(function () {
        $("#pdCollection .collection").removeClass("text").addClass("productOperaTextColor").addClass("operaTextHover");
        $("#pdCollection .pdCollectIcon").removeClass("text").addClass("productOperaTextColor").addClass("operaTextHover")
    })
};
Run.getQueryString = function (a) {
    var b = new RegExp("(^|&)" + a + "=([^&]*)(&|$)");
    var c = window.location.search.substr(1).match(b);
    if (c != null) {
        return unescape(c[2])
    }
    return null
};
Run.loadProductDetail = function (n, q, k, i) {
    var c = $("#module" + n), u = i == 5 ? "vertical" : "horizontal", v = "leftIcon" + n, f = "rightIcon" + n, h, d;
    if (i == 5) {
        u = "vertical";
        v = "prePdIcon" + n;
        f = "nextPdIcon" + n
    }
    if (Helper.isNull(c)) {
        return
    }
    var j = c.find(".imgDiv");
    var l = j.attr("faiWidth");
    var s = j.attr("faiHeight");
    if (Helper.isNull(s)) {
        return
    }
    if (q == null && k == null) {
        var w = j.width();
        var p = j.height()
    } else {
        var w = q;
        var p = k
    }
    var b = Helper.Img.calcSize(l, s, w, p, Helper.Img.MODE_SCALE_DEFLATE_FILL);
    var o = b.height;
    var r = b.width;
    d = $("#imgGroup" + n);
    if (i == 5) {
        thumbList = d.find(".imgGroupDiv");
        if (q == null && k == null) {
            d.height(p)
        }
        if ((thumbList.length * thumbList.outerHeight(true)) <= p) {
            c.find("#prePdIcon" + n).hide();
            c.find("#nextPdIcon" + n).hide();
            d.find(".J_imgDivsStyle5").css({position: "absolute", top: "-8px", left: "0", height: p + "px"})
        } else {
            d.find(".J_imgDivsStyle5").height(p - 2 * d.find("#nextPdIcon" + n).width())
        }
    }
    var x = c.find(".imgGroupDiv");
    x.each(function () {
        var C = $(this).attr("faiWidth");
        var D = $(this).attr("faiHeight");
        if (Helper.isNull(D)) {
            return
        }
        var B = Helper.Img.calcSize(C, D, w, p, Helper.Img.MODE_SCALE_DEFLATE_FILL);
        if (B.height > o) {
            o = B.height
        }
        if (B.width > r) {
            r = B.width
        }
        var A = $(this).find("img");
        $(A).one("load", function () {
            var G = A.width();
            var H = A.height();
            C = A.attr("faiWidth");
            D = A.attr("faiHeight");
            var F = Helper.Img.MODE_SCALE_FILL;
            if (G == 1 && H == 1) {
                var E = new Image();
                E.src = A.data("original");
                $(E).on("load", function () {
                    G = E.width;
                    H = E.height;
                    B = Helper.Img.calcSize(G, H, C, D, F);
                    A.css("width", B.width + "px");
                    A.css("height", B.height + "px");
                    if (A.attr("src") != A.data("original")) {
                        A.attr("src", A.data("original"))
                    }
                    A.css("display", "block")
                })
            } else {
                B = Helper.Img.calcSize(G, H, C, D, F);
                if (B.width == 1) {
                    B.width = C
                }
                if (B.height == 1) {
                    B.height = D
                }
                A.css("width", B.width + "px");
                A.css("height", B.height + "px");
                A.css("display", "block")
            }
        })
    });
    var z = j.find("img");
    if (i != 5) {
        z.css("width", b.width + "px");
        z.css("height", b.height + "px")
    }
    z.css("display", "block");
    j.data("divWidth", w);
    j.data("divHeight", p);
    if (q != null && k != null) {
        j.css("height", k + "px");
        j.css("width", q + "px")
    }
    if (i == 2) {
        $(".pd_J .imgContainer_J").css("margin", "0px auto");
        $(".pd_J .imgContainer_J").css("float", "none");
        $(".pd_J .imgContainer_J").parent().css("width", "100%")
    }
    var a = j.find(".cloud-zoom");
    if (a.length == 1) {
        a.attr("rel", "adjustX:-4, adjustY:-4, maxWidth:" + w + ", maxHeight:" + o + ',position:"inside"');
        a.CloudZoom({imageHeight: s, imageWidth: l})
    }
    if (x.length > 1) {
        if (i != 5) {
            h = d.width() - $("#leftIcon" + n).outerWidth(true) - $("#rightIcon" + n).outerWidth(true)
        }
        $("#imgDivs" + n).width(h);
        var y = (a.length == 1) ? "true" : "false";
        Run.multiPhoto($("#imgDivs" + n), $("#imgDiv" + n), {leftIconID: v, rightIconID: f, zoom: y, direction: u})
    }
    var e = c.find(".pd_J").width(), g = c.find(".imgContainer_J").width(), t = c.find(".pdLayoutR_J"),
        m = c.find(".pdAppendLayout_J");
    if ((e - g) < 200) {
        t.appendTo(m)
    }
};
Run.productBigPicResponsive = function (a, c, d, f, g) {
    var b = $("#module" + a), l, i, k, j, e, h;
    if (d || b.length < 1) {
        return
    }
    i = b.width();
    if (c) {
        j = (i - 260) / 2
    } else {
        j = (i + 300) / 3
    }
    k = Helper.Img.calcSize(f, g, j, j, Helper.Img.MODE_SCALE_FILL);
    l = b.find("#imgDiv" + a);
    l.css({width: j + "px", height: j + "px"});
    l.find("img").css({width: k.width + "px", height: k.height + "px"});
    if (c) {
        b.find(".imgContainer_J").width(j + 130)
    } else {
        b.find(".imgContainer_J").width(j)
    }
    e = b.find("#imgGroup" + a);
    e.height(k.height)
};
Run.initPdCommentSwitch = function () {
    var a = 0;
    if (document.cookie.length > 0) {
        cStart = document.cookie.indexOf("tabSwitch=");
        if (-1 != cStart) {
            cStart = cStart + 10;
            cEnd = document.cookie.indexOf(";", cStart);
            if (-1 == cEnd) {
                cEnd = document.cookie.length
            }
            a = unescape(document.cookie.substring(cStart, cEnd))
        }
    }
    $(".tabSwitch").eq(a).click()
};
Run.pdSaleRecordPagenation = function (b, a) {
    $("#saleRecordSwitch").on("click", function () {
        if ($("#saleRecordPanel .tableBody").children().length == 0) {
            Run.loadSaleRecord(b, a, 1)
        }
    });
    $("body").on({
        hover: function () {
            $(this).addClass("g_hover")
        }, mouseleave: function () {
            $(this).removeClass("g_hover")
        }, click: function () {
            var d = $("#saleRecordPanel .pagenation .pageNo").not(":has('.g_border')").text();
            var c = 1;
            if ($(this).parent().hasClass("pagePrev")) {
                c = Number(d) - 1
            } else {
                if ($(this).parent().hasClass("pageNext")) {
                    c = Number(d) + 1
                } else {
                    c = Number($(this).text())
                }
            }
            Run.loadSaleRecord(b, a, c)
        }
    }, "#saleRecordPanel .pagenation .g_border")
};
Run.loadSaleRecord = function (c, a, b) {
    $.ajax({
        url: "ajax/product_h.php?cmd=getSaleRecordList",
        data: "pid=" + c + "&pno=" + b,
        type: "post",
        dataType: "json",
        success: function (e) {
            if (e.success) {
                $(".saleRecordBody tr").remove();
                var g = [];
                $.each(e.list, function (i, h) {
                    g.push("<tr class='b_li'>");
                    g.push("<td class='b_creator'><span class='msgBoard_msgUser_level' style='margin-right:12px;'></span>" + h.createName + "</td>");
                    if (a) {
                        g.push("<td class='b_optionType'>" + h.optionType + "</td>")
                    }
                    g.push("<td class='b_amount'>" + h.amount + "</td>");
                    var j = new Date(h.paidTime);
                    g.push("<td class='b_paidTime'><span>" + $.format.date(j, "yyyy-MM-dd") + "</span><br><span>" + $.format.date(j, "HH:mm:ss") + "</span></td>");
                    g.push("</tr>")
                });
                $(".saleRecordBody .tableBody").html(g.join(""));
                if ($(".saleRecordFooter .pagenation").length != 0) {
                    var d = [];
                    d.push("<div class='pagePrev'>");
                    if (b == 1) {
                        d.push("<span>" + LS.prevPager + "</span>")
                    } else {
                        d.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.prevPager + "</span></a>")
                    }
                    d.push("</div>");
                    if (b == 1) {
                        d.push("<div class='pageNo'><span>1</span></div>")
                    } else {
                        d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>1</span></a></div>")
                    }
                    if (b - 2 > 2) {
                        d.push("<div class='pageEllipsis'><span>...</span></div>");
                        for (var f = b - 2; f < b; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    } else {
                        for (var f = 2; f < b; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    }
                    if (b != 1 && b != e.totalPage) {
                        d.push("<div class='pageNo'><span>" + b + "</span></div>")
                    }
                    if (b + 2 < e.totalPage - 1) {
                        for (var f = b + 1; f <= b + 2; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                        d.push("<div class='pageEllipsis'><span>...</span></div>")
                    } else {
                        for (var f = b + 1; f <= e.totalPage - 1; f++) {
                            d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + f + "</span></a></div>")
                        }
                    }
                    if (b == e.totalPage) {
                        d.push("<div class='pageNo'><span>" + e.totalPage + "</span></div>")
                    } else {
                        d.push("<div class='pageNo'><a hidefocus='true' class='g_border' href='javascript:;'><span>" + e.totalPage + "</span></a></div>")
                    }
                    d.push("<div class='pageNext'>");
                    if (b == e.totalPage) {
                        d.push("<span>" + LS.nextPager + "</span>")
                    } else {
                        d.push("<a hidefocus='true' class='g_border' href='javascript:;'><span>" + LS.nextPager + "</span></a>")
                    }
                    d.push("</div>");
                    $(".saleRecordFooter .pagenation").children().remove();
                    $(".saleRecordFooter .pagenation").html(d.join(""))
                }
            }
        },
        error: function () {
            Helper.ing(LS.systemError)
        }
    })
};
Run.loadPdShareMore = function () {
    if (Helper.isIE6() || Helper.isIE7()) {
        if (Helper.isIE6()) {
            $(".productOpera .shareInfo").css({top: "20px", left: "0"});
            $(".productOpera .pdShareDiv").css({position: "relative"});
            $(".pdShare").css({"padding-top": "0"})
        }
        if (Helper.isIE7()) {
            $(".productOpera .shareInfo").css({top: "26px", left: "0"});
            $(".productOpera .pdShareDiv").css({position: "relative"})
        }
        var c = $(".productOpera .m_shareCtrl a").length;
        if (c < 7) {
            if (c == 0) {
                $(".productOpera .shareInfo").width("75px");
                $(".productOpera .shareInfo").height("30px")
            } else {
                $(".productOpera .shareInfo").width(c * 28 + "px")
            }
        } else {
            $(".productOpera .shareInfo").width("200px")
        }
        if ($(".productOpera .shareInfo").width < 75) {
            $(".productOpera .shareInfo").width("75px")
        }
    }
    $(".pdShareDiv .pdShare,.pdShareDiv .shareInfo ").hover(function () {
        $(".pdShareDiv .pdShare").children("div").removeClass("text").addClass("productOperaTextColor").addClass("operaTextHover")
    }, function () {
        $(".pdShareDiv .pdShare").children("div").addClass("text").removeClass("productOperaTextColor").removeClass("operaTextHover")
    });
    $(".pdShare .share ,.pdShare .pdShareIcon").hover(function () {
        $(".pdShare .share").addClass("productOperaTextColor").addClass("operaTextHover");
        $(".pdShare .pdShareIcon").addClass("productOperaTextColor").addClass("operaTextHover")
    });
    $("body").on({
        hover: function () {
            $("#pdShare").addClass("pdShareHover");
            $("#pdShare").css({"z-index": "999"});
            $(".shareInfo_J").css({"z-index": "998"});
            $(".productOpera .shareInfo").show();
            $(".shareDown").addClass("shareUp");
            $(".share").addClass("operaTextHover");
            if (Helper.isIE6() || Helper.isIE7()) {
                $(".productOpera").css("z-index", "1000")
            }
        }, mouseleave: function () {
            $("#pdShare").removeClass("pdShareHover");
            $("#pdShare").css({"z-index": ""});
            $(".shareInfo_J").css({"z-index": ""});
            $(".productOpera .shareInfo").hide();
            $(".shareDown").removeClass("shareUp");
            $(".share").removeClass("operaTextHover");
            if (Helper.isIE6() || Helper.isIE7()) {
                $(".productOpera").css("z-index", "")
            }
        }
    }, ".productOpera .pdShare,.productOpera .shareInfo");
    var d = $(".pd_J .pd_t_l_left_J"), b = d.find(".imgContainer_J"), a = d.find(".shareContainer_J"),
        e = a.find(".shareInfo_J");
    if (Helper.isIE6() || Helper.isIE7()) {
        d.width(b.width())
    }
    setTimeout(function () {
        var g = a.height(), h = e.height(), f = e.find(".shareMore_J");
        if (h > g + 5) {
            $(f).click(function () {
                if (a.hasClass("s_expand")) {
                    a.removeClass("s_expand");
                    f.find("div").removeClass("s_more_up")
                } else {
                    a.addClass("s_expand");
                    f.find("div").addClass("s_more_up")
                }
            })
        } else {
            f.remove()
        }
    }, 0)
};
Run.loadPdSerOnLineMore = function () {
    if (Helper.isIE6() || Helper.isIE7()) {
        if (Helper.isIE6()) {
            $(".productOpera .serOnlineInfo").css({top: "22px", left: "0"});
            $(".productOpera .pdSerOnlineDiv").css({position: "relative"});
            $(".pdSerOnline").css({"padding-top": "0"})
        }
        if (Helper.isIE7()) {
            $(".productOpera .serOnlineInfo").css({top: "28px", left: "0"});
            $(".productOpera .pdSerOnlineDiv").css({position: "relative"})
        }
    }
    $(".pdSerOnline,.serOnlineInfo").hover(function () {
        $(".pdSerOnline .pdKefuIcon").addClass("productOperaTextColor").addClass("operaTextHover").removeClass("text");
        $(".pdSerOnline .serOnline").addClass("productOperaTextColor").addClass("operaTextHover").removeClass("text")
    }, function () {
        $(".pdSerOnline .pdKefuIcon").addClass("text").removeClass("operaTextHover").removeClass("productOperaTextColor");
        $(".pdSerOnline .serOnline").addClass("text").removeClass("operaTextHover").removeClass("productOperaTextColor")
    });
    $(".pdSerOnline .pdKefuIcon,.pdSerOnline .serOnline").hover(function () {
        $(".pdSerOnline .pdKefuIcon").addClass("productOperaTextColor").addClass("operaTextHover").removeClass("text");
        $(".pdSerOnline .serOnline").addClass("productOperaTextColor").addClass("operaTextHover").removeClass("text")
    });
    $("body").on({
        hover: function () {
            $("#pdSerOnline").addClass("pdSerOnlineHover");
            $("#pdSerOnline").css({"z-index": "999"});
            $(".J_serOnlineInfo").css({"z-index": "998"});
            $(".productOpera .serOnlineInfo").show();
            $(".serOnlineDown").addClass("serOnlineUp");
            $(".pdSerOnline").addClass("operaTextHover");
            if (Helper.isIE6() || Helper.isIE7()) {
                $(".productOpera").css("z-index", "1000")
            }
            var d = 0;
            var a = 0;
            var b = 0;
            var e = 0;
            $(".serOnline-list:odd").each(function (f, g) {
                d = d > $(g).width() ? d : $(g).width();
                e++
            });
            $(".serOnline-list:even").each(function (f, g) {
                a = a > $(g).width() ? a : $(g).width();
                e++
            });
            var c = $("#pdSerOnline").width();
            b = d + a + 27;
            if (c > b) {
                $(".productDetail .serOnline-service").css("width", (c + 5) + "px");
                $(".productDetail .serOnline-list:odd").css("width", (d + c - b + 5) + "px");
                $(".productDetail .serOnline-list:even").css("width", a + "px")
            } else {
                $(".productDetail .serOnline-service").css("width", (b + 5) + "px");
                $(".productDetail .serOnline-list:odd").css("width", d + "px");
                $(".productDetail .serOnline-list:even").css("width", a + "px")
            }
            if (e > 1) {
                $(".productDetail .serOnline-list:even").css("margin-right", "27px")
            }
        }, mouseleave: function () {
            $("#pdSerOnline").removeClass("pdSerOnlineHover");
            $("#pdSerOnline").css({"z-index": ""});
            $(".J_serOnlineInfo").css({"z-index": ""});
            $(".productOpera .serOnlineInfo").hide();
            $(".serOnlineDown").removeClass("serOnlineUp");
            $(".pdSerOnline").removeClass("operaTextHover");
            if (Helper.isIE6() || Helper.isIE7()) {
                $(".productOpera").css("z-index", "")
            }
        }
    }, ".productOpera .pdSerOnline,.productOpera .serOnlineInfo")
};
Run.onlineServiceNameHoverShow = function () {
    var a = $("<div id='fk-seronlineDockTip' class='resizableToShowWidth dockTip' style='border:solid 1px #999999;background:#f9fafb;slineHeight:20px;fontSize:20px;padding:2px 5px;color:black;border-radius:2px;'></div>");
    $(".J_onlineServiceNameHoverShow").mouseover(function (c) {
        var d = this;
        var b = $(d).offset().left + 12;
        var f = $(d).offset().top + 30;
        a.html($(this).attr("_title")).css({left: (b || 0), top: (f || 0)}).show();
        $("body").append(a);
        setTimeout(function () {
            a.remove()
        }, 2000)
    }).mouseout(function () {
        a.remove()
    })
};
Run.onlineServiceWaWaIsOnline = function () {
    $(".J_aliWaWa").each(function () {
        var b = this;
        var a = $(b).attr("account");
        $(b).siblings(".serOnline-img").addClass("wawaImgOnline");
        if (a != null && typeof(a) != "undefined") {
            $.ajax({
                type: "post",
                dataType: "jsonp",
                url: "http://amos.alicdn.com/muliuserstatus.aw?beginnum=0&site=cnalichn&charset=utf-8&uids=" + Helper.encodeUrl(a),
                success: function (c) {
                    if (c.data != null) {
                        if (c.data[0] == 0) {
                            $(b).addClass("serOnlineOffline");
                            $(b).siblings(".serOnline-img").removeClass("wawaImgOnline");
                            $(b).siblings(".serOnline-img").addClass("wawaImgOffline")
                        } else {
                            $(b).removeClass("serOnlineOffline")
                        }
                    }
                }
            })
        }
    });
    $(".J_taobaoWaWa ").each(function () {
        var b = this;
        var a = $(b).attr("account");
        $(b).siblings(".serOnline-img").addClass("wawaImgOnline");
        if (a != null && typeof(a) != "undefined") {
            $.ajax({
                type: "post",
                dataType: "jsonp",
                url: "http://amos.alicdn.com/muliuserstatus.aw?beginnum=0&site=cntaobao&charset=utf-8&uids=" + Helper.encodeUrl(a),
                success: function (c) {
                    if (c.data != null) {
                        if (c.data[0] == 0) {
                            $(b).addClass("serOnlineOffline");
                            $(b).siblings(".serOnline-img").removeClass("wawaImgOnline");
                            $(b).siblings(".serOnline-img").addClass("wawaImgOffline")
                        } else {
                            $(b).removeClass("serOnlineOffline")
                        }
                    }
                }
            })
        }
    })
};
Run.loadProductSlide = function (a) {
    var b = $(".slide");
    if (Helper.isNull(b)) {
        return
    }
    var l = b.find(".imgDiv");
    var i = l.attr("faiWidth");
    var j = l.attr("faiHeight");
    var g = l.width();
    var d = l.height();
    var c = b.find(".imgGroupDiv");
    c.each(function () {
        var p = $(this).width();
        var r = $(this).height();
        var m = $(this).find("img");
        var o = m.attr("faiWidth");
        var q = m.attr("faiHeight");
        var n = Helper.Img.calcSize(o, q, p, r, Helper.Img.MODE_SCALE_FILL);
        m.css("width", n.width + "px");
        m.css("height", n.height + "px");
        m.css("display", "block")
    });
    var h = Helper.Img.calcSize(i, j, g, d, Helper.Img.MODE_SCALE_DEFLATE_FILL);
    var e = l.find("img");
    e.css("width", h.width + "px");
    e.css("height", h.height + "px");
    e.css("display", "block");
    var k = l.find(".cloud-zoom");
    if (k.length == 1) {
        k.attr("rel", "adjustX:-4, adjustY:-4, maxWidth:" + g + ", maxHeight:" + d + ',position:"inside"');
        k.CloudZoom({imageHeight: j, imageWidth: i})
    }
    if (c.length > 1) {
        var f = (k.length == 1) ? "true" : "false";
        Run.multiPhoto($("#imgDivs" + a), $("#imgDiv" + a), {
            leftIconID: "leftIcon" + a,
            rightIconID: "rightIcon" + a,
            zoom: f
        })
    }
};
Run.loadProductPicList = function (f, d, c, e, a) {
    var b = $("#module" + f);
    if (Helper.isNull(b)) {
        return
    }
    b.find(".productPicListForm").each(function () {
        var n = $(this).attr("faiHeight");
        if (Helper.isNull(n)) {
            return
        }
        var m = $(this).attr("faiWidth"), i = $(this).attr("faiWidthOr"), h = $(this).attr("faiHeightOr"),
            q = $(this).find(".imgDiv"), o = q.width(), p = q.height();
        if (c) {
            o = m;
            p = n
        }
        var l = {width: o, height: p};
        if (d) {
            l = Helper.Img.calcSize(i, h, o, p, Helper.Img.MODE_SCALE_FILL)
        }
        var g = q.find("img");
        g.css("width", l.width + "px");
        g.css("height", l.height + "px");
        q.css("height", l.height + "px");
        if (a == 4 || a == 5 || a == 9) {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var k = $(this).find(".fifth_mallBuy");
                var j = $(this).find(".fifth_mallBuy").width();
                k.css({"line-height": j + "px", height: j + "px", width: j + "px"})
            }
        }
    });
    Run.initContentSplitLine(f, e)
};
Run.loadProductDoublePicList = function (g, f, d, a) {
    var c = $("#module" + g);
    if (Helper.isNull(c)) {
        return
    }
    var e = 0;
    var b = 0;
    c.find(".doubleProduct").each(function () {
        $(this).find(".productDoublePicListForm").each(function () {
            var o = $(this).attr("faiHeight");
            if (Helper.isNull(o)) {
                return
            }
            var n = $(this).attr("faiWidth"), r = $(this).find(".imgDiv"), j = r.find("img"),
                s = $(this).find(".propList");
            j.css("width", 0);
            j.css("height", 0);
            var p = r.width(), q = r.height();
            if (d) {
                var i = $(this).attr("newWidth");
                var h = $(this).attr("newHeight");
                if (i && h) {
                    p = i;
                    q = h
                } else {
                    p = n;
                    q = o
                }
            }
            var m = {width: p, height: q};
            if (f) {
                m = Helper.Img.calcSize($(this).attr("faiWidthOr"), $(this).attr("faiHeightOr"), p, q, Helper.Img.MODE_SCALE_FILL)
            }
            j.css("width", m.width + "px");
            j.css("height", m.height + "px");
            r.css("height", q + "px");
            if (Number(q) > Number(b)) {
                if (Number(q) > Number(s.height())) {
                    b = q
                } else {
                    b = s.height()
                }
                e = Number(b) + 20 + Number($(this).css("margin-top").replace("px", "")) + Number($(this).css("margin-bottom").replace("px", ""));
                $(this).parent().css("height", (e) + "px")
            }
            if (a == 4 || a == 5 || a == 9) {
                if ($(this).find(".fifth_mallBuy").length > 0) {
                    var l = $(this).find(".fifth_mallBuy");
                    var k = $(this).find(".fifth_mallBuy").width();
                    l.css({"line-height": k + "px", width: k + "px", height: k + "px"})
                }
            }
        });
        e = 0;
        b = 0
    })
};
Run.loadProductHotTextList = function (e, d, c, a) {
    var b = $("#module" + e);
    if (Helper.isNull(b)) {
        return
    }
    b.find(".productHotTextListHot").each(function () {
        var k = $(this).attr("faiHeight");
        if (Helper.isNull(k)) {
            return
        }
        var j = $(this).attr("faiWidth");
        var n = $(this).find(".imgDiv");
        var l = n.width();
        var m = n.height();
        if (c) {
            l = j;
            m = k
        }
        var h = {width: l, height: m};
        if (d) {
            h = Helper.Img.calcSize($(this).attr("faiWidthOr"), $(this).attr("faiHeightOr"), l, m, Helper.Img.MODE_SCALE_FILL)
        }
        var f = n.find("img");
        f.css("width", h.width + "px");
        f.css("height", h.height + "px");
        n.css("height", h.height + "px");
        if (a == 4 || a == 5 || a == 9) {
            if ($(this).find(".fifth_mallBuy").length > 0) {
                var i = $(this).find(".fifth_mallBuy");
                var g = $(this).find(".fifth_mallBuy").width();
                i.css({"line-height": g + "px", height: g + "px", width: g + "px"})
            }
        }
    });
    b.find(".productHotTextListTable").each(function () {
        var k = $(this).find("tr");
        for (var j = 0; j < k.length; ++j) {
            var o = k[j];
            var h = $(o).find("td");
            $(h[1]).css("width", "30%");
            var g = h.length;
            var p = 100;
            p -= 30;
            for (var f = 2; f < g; ++f) {
                if (f == h.length - 1) {
                    var m = $(h[f]).attr("buybtn");
                    if (m) {
                        $(h[f]).css("width", "15%");
                        p -= 15;
                        break
                    }
                }
                var l = parseInt(p / g);
                $(h[f]).css("width", l + "%")
            }
        }
        $(this).mouseover(function () {
            $(this).addClass("g_hover")
        }).mouseleave(function () {
            $(this).removeClass("g_hover")
        })
    });
    b.find(".productHotTextListProp").each(function () {
        var k = $(this).find("tr");
        for (var j = 0; j < k.length; ++j) {
            var o = k[j];
            var h = $(o).find("td");
            $(h[1]).css({width: "30%", "margin-left": "5px"});
            var g = h.length;
            var p = 100;
            p -= 30;
            for (var f = 2; f < g; ++f) {
                if (f == h.length - 1) {
                    var m = $(h[f]).attr("buybtn");
                    if (m) {
                        $(h[f]).css({width: "15%", "margin-right": "5px"});
                        p -= 15;
                        break
                    }
                }
                var l = parseInt(p / g);
                $(h[f]).css("width", l + "%")
            }
        }
    })
};
Run.unifiedAttrVal = function (b, d, a) {
    var c = b.find(d);
    var e = 0;
    c.each(function () {
        var f = $(this).css(a);
        f = parseInt(f);
        if (f > e) {
            e = f
        }
    });
    c.each(function () {
        $(this).css(a, e + "px")
    })
};
Run.loadProductGallery = function (E) {
    var F = new Date().getMilliseconds();
    var W = E.id, T = E.scale, g = E.cus, y = E.paramLayoutType || "";
    var c = $("#module" + W), C = c.find("div.product-container");
    var U = c.find(".product-gallery").attr("_bordertype");
    var e = parseInt(c.find(".product-gallery").attr("_borderwidth"));
    var ac = c.find(".product-gallery").attr("_bgtype");
    var o, d;
    if (E.effType >= 4 && E.effType < 6) {
        if (y == 6) {
            Run.clearImageEffectContent_product(W, "sixth_ProductPanel")
        }
        if (y == 8) {
            Run.clearImageEffectContent_product(W, "eighth_ProductPanel")
        }
        Run.clearImageEffectContent_product(E.id, "prop-container")
    }
    if (C.length != 0) {
        var ah = $(C[0]).children("div.img-container"), p = ah.width(), R = ah.height();
        for (var aj = 0; aj < C.length; aj++) {
            ah = $(C[aj]).children("div.img-container");
            var n = ah.find("img"), M = n.attr("fHeight"), J = n.attr("fWidth");
            if (T) {
                var m = Helper.Img.calcSize(J, M, p, R, Helper.Img.MODE_SCALE_FILL);
                n.width(m.width);
                n.height(m.height);
                o = m.width;
                d = m.height
            } else {
                n.width(p);
                n.height(R);
                o = p;
                d = R
            }
            if (Helper.top._manageMode) {
                n.data("realWidth", o);
                n.data("realHeight", d)
            }
        }
        var Y = c.find(".gallery-control"), s = c.find(".gallery-control-prev"), ad = c.find(".gallery-control-next"),
            V = s.height(), f = s.width();
        var l = C.first(), ae = l.children("div.img-container"), K = ae.outerWidth(true), w = ae.outerHeight(true),
            Q = l.find("div.paramNewStyle"), ag = 0, I = l.find("div.prop-container"), k = 0;
        if (C.find(".fk-productName").length > 0) {
            C.find(".fk-productName").height("auto")
        }
        if (I.length > 0) {
            $.each(I, function (j) {
                k += $(I[j]).outerHeight(true)
            })
        }
        if (Q.length > 0) {
            $.each(Q, function (j) {
                ag += $(Q[j]).outerHeight(true)
            })
        }
        var v = w + k + ag;
        C.height(v);
        C.width(K);
        if (y == 6) {
            C.find("div.prop-container").width(K * 0.8);
            C.find(".sixth_ProductName").width("80%")
        } else {
            C.find("div.prop-container").width(K)
        }
        var H = c.find("div.product-gallery-preview");
        var a = c.find(".fk-productListForm").outerHeight() - c.find(".fk-productListForm").height();
        if (a > 0) {
            v += a
        }
        H.height(v);
        var G = c.find("div.product-gallery-inner"), r = G.outerHeight();
        if (r < V) {
            var X = G.height(), ab = r - X;
            var aa = Math.ceil((V - r) / 2);
            var t = Math.ceil(ab / 2) + aa;
            G.css("padding-top", t + "px").css("padding-bottom", t + "px")
        }
        var S = (G.outerHeight() / 2) - (V / 2);
        Y.css("top", S + "px");
        var b = 1, ak = s.innerWidth() - f, L = c.find("div.formMiddleContent").width(), u = L - ak - (f * 2),
            am = l.outerWidth(true), af = l.outerWidth(), h = am - af;
        if (u > am) {
            b = parseInt(u / am)
        }
        var P = (b * am) - h;
        H.width(P);
        var al = C.length;
        var z = al % b == 0 ? al / b : Math.floor(al / b) + 1;
        c.find("div.product-gallery-container").width(al * am);
        var q = C.length < b ? C.length : b;
        for (var ai = 0; ai < q; ai++) {
            var n = $(C[ai]).find("img");
            if (!n.attr("src")) {
                n.attr("src", n.attr("lzurl"))
            }
            n.show()
        }
        s.addClass("gallery-control-prev-disabled");
        if (z == 1) {
            ad.addClass("gallery-control-next-disabled")
        }
        s.click(function () {
            var x = $(this);
            if (x.hasClass("gallery-control-prev-disabled")) {
                return false
            }
            var an = x.parent(), j = an.find("div.product-gallery-container"), ao = an.find(".gallery-control-next");
            if (ao.hasClass("gallery-control-next-disabled")) {
                ao.removeClass("gallery-control-next-disabled")
            }
            if (j.position().left == 0 || j.is(":animated")) {
                return false
            }
            var i = c.find(".product-gallery-preview").width() + h;
            j.animate({left: "+=" + i + "px"}, function () {
                if (j.position().left == 0) {
                    x.addClass("gallery-control-prev-disabled")
                }
            })
        });
        ad.click(function () {
            var at = $(this);
            if (at.hasClass("gallery-control-next-disabled")) {
                return false
            }
            var an = at.parent(), i = an.find("div.product-gallery-container"), x = an.find(".gallery-control-prev");
            if (x.hasClass("gallery-control-prev-disabled")) {
                x.removeClass("gallery-control-prev-disabled")
            }
            var au = c.find(".product-gallery-preview").width() + h, av = -(z - 1) * (au);
            left_position = parseInt(i.css("left").replace("px"));
            if (left_position == av || i.is(":animated")) {
                return false
            }
            if (!at.data("loading_finish")) {
                var ar = (Math.abs(left_position) / (am * b)) + 1;
                var j = ar <= 1 ? 1 * b : ar * b, ap = j + b > C.length ? C.length : j + b;
                for (var ao = j; ao < ap; ao++) {
                    var aq = $(C[ao]).find("img");
                    if (!aq.attr("src")) {
                        aq.attr("src", aq.attr("lzurl"))
                    }
                    aq.show()
                }
            }
            i.animate({left: "-=" + au + "px"}, function () {
                var aw = parseInt(i.css("left").replace("px", ""));
                if (aw == av) {
                    at.data("loading_finish", true);
                    at.addClass("gallery-control-next-disabled")
                }
            })
        })
    } else {
        var Z = c.find("div.addNoProTips");
        c.find("div.product-gallery").height(100).html(Z)
    }
    c.find(".product-container").each(function () {
        var x = $(this).find(".eighth_ProductPanel");
        var i = x.find(".eighth_Pricepanel");
        var j = x.find(".fk_rightPiecePanel");
        if (!!x.length) {
            if (U == 1) {
                i.css("left", "4px");
                j.css("right", "16px")
            } else {
                if (U == 2) {
                    i.css("left", (4 + e) + "px");
                    j.css("right", (16 + e) + "px");
                    x.css("bottom", (84 + e) + "px")
                }
            }
        }
    });
    if (c.find(".prop-wordwrap-container").length > 0) {
        c.find(".product-container").height("auto");
        var A = 0;
        var N = 0;
        c.find(".product-container").each(function () {
            var i = $(this).height();
            N = $(this).outerHeight();
            if (i > A) {
                A = i
            }
        });
        c.find(".product-container").each(function () {
            $(this).height(A)
        });
        c.find(".product-gallery-preview").height(A);
        var G = c.find("div.product-gallery-inner"), Y = c.find(".gallery-control"),
            s = c.find(".gallery-control-prev"), V = s.height(), S = (G.outerHeight() / 2) - (V / 2);
        Y.css("top", S + "px")
    }
    if (y == 6) {
        var O = 0;
        c.find(".product-container").each(function () {
            var i = $(this).outerHeight();
            if (i > O) {
                O = i
            }
        });
        if (c.find(".prop-wordwrap-container").length == 0) {
            c.find(".sixth_ProductPanel").css({bottom: "40px"})
        } else {
            c.find(".product-gallery-preview").height(O + 30);
            c.find(".sixth_ProductPanel").css({bottom: ""})
        }
        c.find(".sixth_mallBuy").parent().height("auto")
    }
    if (C.length != 0) {
        for (var aj = 0; aj < C.length; aj++) {
            if ($(C[aj]).find(".fifth_mallBuy").length > 0) {
                var B = $(C[aj]).find(".fifth_mallBuy");
                var D = $(C[aj]).find(".fifth_mallBuy").width();
                B.css({"line-height": D + "px"})
            }
        }
    }
    if (c.find(".prop-wordwrap-container").length > 0) {
        Run.unifiedAttrVal(c, ".prop-wordwrap-container", "height")
    }
};
Run.loadProductSmallPic = function (z) {
    var N = z.id, F = z.scale, f = z.cus, J = z.dataObjs, O = z.bigPicObjs, o = z.tmp_allow_marketprice,
        D = z.tmp_allow_price, m = z.tmp_allow_price_menberLevel,
        H = parseInt($(".productSmallPicForms").attr("_mallbuybtntype")),
        A = $(".productSmallPicForms").attr("_mallbuybtncolor");
    if (m) {
        m = "title = '" + m + "'"
    }
    var c = $("#" + N);
    var u = z.paramLayoutType;
    c.on("Helper_onModuleSizeChange", function () {
        Run.smallPicModuleFix(N)
    });
    c.on("Helper_onModuleLayoutChange", function () {
        Run.smallPicModuleFix(N)
    });
    var y = c.find("div.productSmallPicBox");
    var Z = c.find(".smallPicUpForms").height();
    var g = c.find(".smallPicDownForms").height();
    c.find(".productSmallPicForms").height(Z + g);
    var I = c.find(".productSmallPicForms").width();
    var b = c.find(".smallPic_control").outerWidth(true);
    var W = I - b * 2 - c.find(".containerLeft").width();
    var Q = W > 150 ? W : 150;
    c.find(".containerRight").width(Q);
    c.find(".smallPicUpForms").css("width", I + "px");
    c.find(".smallPicDownForms").css("width", I + "px");
    var B = c.find(".smallPrePic_control").outerWidth(true);
    c.find(".smallPicDownFormsMid").css("width", I - 2 * B - 20 + "px");
    var l = c.find(".containerLeft").width() + c.find(".containerRight").width();
    c.find(".smallPicUpFormsMid").width(l);
    var Y = c.find(".smallPrePicContainer");
    var S = c.find(".smallPrePicOuter").outerWidth(true);
    var P = 0;
    if (Helper.isIE6()) {
        P = 2
    }
    Y.width(S * y.length + P);
    var G = Y.width();
    var U = c.find(".smallPicUpFormsMid").outerHeight() / 2 - 30;
    c.find(".smallPic_control").css("top", U + "px");
    var t = c.find(".smallPicDownFormsMid").width();
    var aa = y.length;
    var q = Math.floor(t / S) + 1;
    var w = aa % q == 0 ? aa / q : Math.floor(aa / q) + 1;
    if (w == 1 && t < Y.width()) {
        w = 2
    }
    var n = y.length < q ? y.length : q;
    for (var V = 0; V < n; V++) {
        var k = $(y[V]).find("img");
        Run.loadProductSmallPicItem(k)
    }
    var x = "default";
    var E = true;
    var a = false;
    var C = false;
    var e = false;
    var L = false;
    var s = "style='";
    var T = "";
    var p = "";
    var i = 0;
    if (Helper.isIE6() || Helper._isIE7) {
        H = 0
    }
    switch (H) {
        case 1:
            x = "first";
            i = 1;
            s += "border-radius:5px;height:33px;line-height:33px;";
            break;
        case 2:
            x = "second";
            i = 2;
            s += "border-radius:5px;height:31px;line-height:31px;";
            a = true;
            break;
        case 3:
            x = "third";
            i = 3;
            s += "border-radius:0px;height:33px;line-height:33px;";
            break;
        case 4:
            x = "fourth";
            i = 4;
            s += "border-radius:0px;height:31px;line-height:31px;";
            a = true;
            break;
        case 5:
            x = "fifth";
            i = 5;
            s += "border-radius:16px;height:33px;line-height:33px;";
            break;
        case 6:
            x = "sixth";
            i = 6;
            s += "border-radius:16px;height:31px;line-height:31px;";
            a = true;
            break;
        case 7:
            x = "seventh";
            i = 7;
            break;
        case 8:
            x = "eight";
            i = 8;
            a = true;
            break;
        case 9:
            x = "nine";
            s += "border-radius:2px;min-height:46px;min-width:46px;display:table;";
            i = 9;
            a = true;
            e = true;
            break;
        case 10:
            x = "ten";
            s += "border-radius:2px;min-height:48px;min-width:48px;";
            i = 10;
            C = true;
            break;
        case 11:
            x = "eleven";
            s += "min-height:48px;min-width:48px;display:table;";
            i = 11;
            a = true;
            e = true;
            break;
        case 12:
            x = "twelve";
            s += "min-height:50px;min-width:50px;";
            i = 12;
            C = true;
            break;
        case 13:
            x = "thirteen";
            s += "display:table;";
            i = 13;
            e = true;
            L = true;
            break;
        default:
            E = false
    }
    var K = E ? "fk-newMallBuyBtn" : "fk-mallBuy";
    var v = "";
    var X = L ? 32 : 30;
    var d = (i >= 7 && i <= 13) ? true : false;
    if (a) {
        s += "background:none;border:1px solid " + A + ";";
        v = "style='color: " + A + ";'"
    } else {
        if (!L) {
            s += "border:none;background-color: " + A + ";";
            v = "style='color: white;'"
        }
    }
    if (C) {
        T = "fk-mallBgCar";
        v = "style='color: " + A + ";"
    }
    if (e) {
        p = "faisco-icons-mallBuyCar";
        v = "style='color: " + A + ";font-size: " + X + "px;display:table-cell;";
        s += "color: " + A + ";";
        if (i == 11) {
            v += "padding-top: 3px;"
        }
        if (i == 13) {
            v += "vertical-align:bottom;"
        } else {
            v += "vertical-align:middle;"
        }
    }
    if (L) {
        s += "border:none;background:none;"
    }
    if (u == 2 || u == 3) {
        s += "width:60%;"
    }
    v += "'";
    s = E ? s += "'" : "";
    var r = c.find(".smallPicDownForms .g_imgPrev"), R = c.find(".smallPicDownForms .g_imgNext"),
        M = c.find(".smallPicUpForms .g_control_prev"), h = c.find(".smallPicUpForms .g_control_next");
    r.addClass("smallPic-control-prev-disabled");
    if (w == 1) {
        R.addClass("smallPic-control-next-disabled")
    }
    M.addClass("bigPic-control-prev-disabled");
    if (aa == 1) {
        h.addClass("bigPic-control-next-disabled")
    }
    c.find(".smallPicUpForms").mouseover(function () {
        $(".smallPic_control").css("display", "block")
    }).mouseleave(function () {
        $(".smallPic_control").css("display", "none")
    });
    r.click(function () {
        var af = $(this);
        if (af.hasClass("smallPic-control-prev-disabled")) {
            return false
        }
        var ab = af.parents(".smallPicDownForms").find(".smallPrePicContainer");
        var ah = Math.floor(c.find(".smallPicDownFormsMid").width() / S) + 1;
        var ae = af.parents(".smallPicDownForms").find(".g_imgNext");
        if (ae.hasClass("smallPic-control-next-disabled")) {
            ae.removeClass("smallPic-control-next-disabled")
        }
        var ad = parseInt(ab.css("left").replace("px"));
        var ag = Math.abs(ad) / S;
        var ac = ag - ah + 1 > 0 ? ag - ah + 1 : 0;
        if (ac == 0) {
            af.addClass("smallPic-control-prev-disabled")
        }
        var j = (ag - ac) * S;
        if (ab.is(":animated")) {
            return false
        }
        ab.animate({left: "+=" + j + "px"})
    });
    R.click(function () {
        var am = $(this);
        var ad = $("#" + N);
        if (am.hasClass("smallPic-control-next-disabled")) {
            return false
        }
        var j = am.parents(".smallPicDownForms").find(".smallPrePicContainer"),
            af = am.parents(".smallPicDownForms").find(".g_imgPrev"),
            ae = Math.floor(ad.find(".smallPicDownFormsMid").width() / S) + 1;
        if (af.hasClass("smallPic-control-prev-disabled")) {
            af.removeClass("smallPic-control-prev-disabled")
        }
        var an = (ae - 1) * S, al = parseInt(j.css("left").replace("px"));
        var ak = Math.abs(al) / S;
        var ao = ak + ae - 1 > aa - 1 ? aa - 1 : ak + ae - 1;
        var aj = ad.find(".smallPicDownFormsMid").width();
        if (j.is(":animated")) {
            return false
        }
        var ac;
        var ab, ah;
        if (ao >= aa - 1) {
            ab = ak;
            ah = aa - 1;
            if ((ah - ab + 1) * S <= aj) {
                ac = true;
                am.addClass("smallPic-control-next-disabled")
            }
        } else {
            ab = ao;
            ah = ao + ae - 1
        }
        for (var ag = ab; ag <= ah; ag++) {
            var ai = $(y[ag]).find("img");
            Run.loadProductSmallPicItem(ai)
        }
        if (!ac) {
            j.animate({left: "-=" + an + "px"})
        }
    });
    y.mouseover(function () {
        $(this).parent().addClass("smallPrePicOuterHover").addClass("g_border").addClass("g_borderHover")
    });
    y.mouseleave(function () {
        $(this).parent().removeClass("smallPrePicOuterHover").removeClass("g_borderHover").removeClass("g_border")
    });
    c.find(".smallPicUpFormsMid").mouseenter(function () {
        var j = $(this).parents(".form").attr("id");
        if (_manageMode == true) {
            Run.initModuleProductSmallPicItemManage(j, z.productSelect, z.isOpenImgEff)
        }
    }).mouseleave(function () {
        var j = $(this).parents(".form");
        var ab = j.find("div.containerLeft");
        if (_manageMode == true) {
            if (z.isOpenImgEff) {
                Run.removeEditLayer(ab)
            } else {
                Run.removeEditLayer(ab, null, 106)
            }
        }
    });
    M.click(function () {
        var af = $(this);
        if (af.hasClass("bigPic-control-prev-disabled")) {
            return false
        }
        var ab = $("#" + N);
        var j = ab.find(".smallPicDownForms").find(".smallPrePicContainer");
        var ad = Math.floor(ab.find(".smallPicDownFormsMid").width() / S) + 1;
        var ai = ab.data("positionLeft");
        var ae = Math.abs(ai) / S;
        var ah = ae + ad - 1 > aa - 1 ? aa - 1 : ae + ad - 1;
        var ag = ab.find(".smallPrePicSelected").parent();
        var aj = ag.index();
        if (aj >= ae && aj <= ah) {
            if (aj == ae) {
                ai += S
            }
        } else {
            ai = -(aj - 1) * S;
            j.css("left", "0px")
        }
        if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var ac = ag.prev().find("div.productSmallPicBox");
        ab.find("div.containerLeft").attr("productId", ac.attr("proid")).attr("productName", ac.find("img").attr("productname")).attr("topClassName", ac.find("img").attr("classname")).attr("topSwitch", ac.find("img").attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + ac.attr("proid"));
        j.animate({left: ai + "px"}, function () {
            ag.prev().find("div.productSmallPicBox").click()
        })
    });
    h.click(function () {
        var af = $(this);
        if (af.hasClass("bigPic-control-next-disabled")) {
            return false
        }
        var ab = $("#" + N);
        var j = $(".smallPicDownForms").find(".smallPrePicContainer");
        var ad = Math.floor(ab.find(".smallPicDownFormsMid").width() / S) + 1;
        var ai = ab.data("positionLeft");
        var ae = Math.abs(ai) / S;
        var ah = ae + ad - 1 > aa - 1 ? aa - 1 : ae + ad - 1;
        var ag = ab.find(".smallPrePicSelected").parent();
        var aj = ag.index();
        if (aj >= ae && aj <= ah) {
            if (aj == ah) {
                ai -= 2 * S
            }
        } else {
            ai = -(aj - 1) * S;
            j.css("left", "0px")
        }
        if (j.is(":animated")) {
            return false
        }
        $(".img_ProductPhoto_LR_Border").remove();
        $(".img_ProductPhoto_TB_Border").remove();
        $(".editLayer").remove();
        var ac = ag.next().find("div.productSmallPicBox");
        ab.find("div.containerLeft").attr("productId", ac.attr("proid")).attr("productName", ac.find("img").attr("productname")).attr("topClassName", ac.find("img").attr("classname")).attr("topSwitch", ac.find("img").attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + ac.attr("proid"));
        j.animate({left: ai + "px"}, function () {
            ag.next().find("div.productSmallPicBox").click()
        })
    });
    y.click(function () {
        var aq = $(this).find("img");
        Run.loadProductSmallPicItem($(this).parent().next().find("img"));
        Run.loadProductSmallPicItem(aq);
        var aj = $("#" + N);
        var ae = aj.find(".smallPicUpFormsMid .containerLeft img");
        aj.find(".containerRight").children().remove();
        var aI = z.scale;
        var ai = $(this).parent();
        ai.siblings(".smallPrePicOuter").find("div.productSmallPicBox").removeClass("smallPrePicSelected");
        $(this).addClass("smallPrePicSelected");
        ai.siblings(".smallPrePicOuter").removeClass("smallPrePicOuterClick").removeClass("g_borderSelected");
        ai.addClass("smallPrePicOuterClick").addClass("g_borderSelected");
        var aB = aj.find("#bigImgDetail");
        aB.remove();
        aj.find(".smallPic_td").append(ae);
        var aT = $(this).attr("proid");
        var aW = O[aT]["bigPicThumbPath"];
        var ao = O[aT]["bWidth"];
        var at = O[aT]["bHeight"];
        var j = aj.find(".containerLeft").width(), ag = aj.find(".containerLeft").height();
        if (aI) {
            var ap = Helper.Img.calcSize(ao, at, j, ag, Helper.Img.MODE_SCALE_FILL);
            ae.width(ap.width);
            ae.height(ap.height)
        } else {
            ae.css("width", j).css("height", ag)
        }
        var aA = [];
        aA.push("<div class='loadingImg' style='width:" + j + "px;height:" + ag + "px;'>");
        aA.push("<table cellspacing='0' cellpadding='0' class='loadingImgTable' style='width:" + j + "px;height:" + ag + "px;'><tbody><tr><td class='loadingImgTd'>");
        aA.push("<div class='ajaxLoading2' style='margin:0 auto;'></div>");
        aA.push("</td></tr></tbody></table>");
        aA.push("</div>");
        aj.find(".smallPic_td").append(aA.join(""));
        var aQ = ae.attr("src");
        if (aQ == aW) {
            ae.attr("src", "")
        }
        ae.attr("src", aW);
        ae.css("margin", "auto");
        var aw = aq.attr("alt");
        ae.attr("alt", aw);
        aj.find(".containerLeft").height(aj.find(".containerLeft").height());
        aj.find(".containerLeft").css("overflow", "hidden");
        var ba = $(this).find("img");
        var a8 = ba.attr("ifcenter");
        var a2 = ba.attr("ifshowname");
        var aG = ba.attr("ifwordwrap");
        var ak = ba.attr("ifmallbtn");
        var aX = ba.attr("aAttribute");
        var am = ba.attr("click");
        var aD = ba.attr("btntext");
        var a4 = ba.attr("topswitch");
        if (_manageMode) {
            if (a4 == "off" && !z.productSelect) {
                aj.find(".J_productListTopFlag").text("置顶").addClass("f-productListTopFlag")
            } else {
                aj.find(".J_productListTopFlag").text("").removeClass("f-productListTopFlag")
            }
        }
        if (C) {
            aD = "&nbsp;"
        } else {
            if (e) {
                aD = ""
            }
        }
        ae.wrap("<a id='bigImgDetail' " + aX + "></a>");
        var al = "text-align:center";
        var ah = "margin:0 auto;";
        if (a8 == "false") {
            al = "text-align:left";
            ah = "margin-left:0;"
        }
        if (u == 2) {
            al = "text-align:center"
        }
        if (u == 3 || u == 4 || u == 5 || u == 9) {
            al = "text-align:left"
        }
        var aU = "word-break:normal;white-space:normal;overflow:visible;text-overflow:clip";
        if (aG == "false") {
            aU = "white-space:nowrap;overflow:hidden;text-overflow:ellipsis"
        }
        var aA = [];
        var az = aj.find(".containerRight").width();
        aA.push("<div class='productParamContainer' style='width:" + az + "px;" + ah + "" + (u == 4 || u == 9 ? "position:absolute;bottom:10px;" : "") + "'>");
        if (a2 == "true") {
            if (u == 2) {
                aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='second_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Helper.encodeHtml($(this).find("img").attr("productname")) + "</div></a>");
                aA.push("<div class='dotted'></div>")
            } else {
                if (u == 3) {
                    aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='third_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Helper.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                } else {
                    if (u == 4 || u == 9) {
                        aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fourth_ProductName fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Helper.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                    } else {
                        if (u == 5) {
                            aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fifth_ProductName fk_paramNewStyle5 fk-productName' style='width:" + (az - 20) + "px;" + aU + ";'>" + Helper.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                        } else {
                            aA.push("<a " + aX + " title='" + $(this).find("img").attr("productname") + "' style='text-decoration:none;'><div class='fk-productName' style='width:" + (az - 20) + "px;margin:auto;" + al + ";margin-top:20px;margin-bottom:8px;" + aU + ";'>" + Helper.encodeHtml($(this).find("img").attr("productname")) + "</div></a>")
                        }
                    }
                }
            }
        }
        var an = J[aT];
        var a3 = J.lcid.lcid;
        var ad = J.lcid._isLogin;
        var aZ = "";
        var aM = "";
        var bb = false;
        var aH = false;
        var aE = "";
        var ac = "";
        var au = "";
        for (var a1 = 0; a1 < an.length; a1++) {
            var a6 = an[a1];
            var a0 = a6.vip, av = a6.name, aV = a6.value, a9 = a6.type, aP = a6.title;
            ac = "";
            var aY = "";
            var ab = aP ? "title = " + aP : "";
            if (a9 == 12) {
                if (u == 2 || u == 3 || u == 4 || u == 5 || u == 9) {
                    aH = true;
                    aM = aV;
                    continue
                }
                aY = "g_minor mallMarketPrice fk-prop-marketprice"
            }
            if (a9 == 11 && a0) {
                au = av;
                ac = " g_stress"
            }
            if (a9 == 11) {
                if (u == 2 || u == 3 || u == 4 || u == 5 || u == 9) {
                    bb = true;
                    aZ = aV;
                    continue
                }
                aY = "g_stress mallPrice fk-prop-price"
            }
            if (a9 == 17) {
                aY = " fk-prop-sales"
            } else {
                if (a9 == 13) {
                    aY = " fk-prop-amount"
                } else {
                    if (a9 != 11 && a9 != 12) {
                        aY = " fk-prop-other"
                    }
                }
            }
            aA.push("<div class='" + (u == 5 ? "fk_paramNewStyle5" : "") + "' style='" + (u == 2 || u == 3 ? "color:#767676;" : "") + " margin:auto;height:20px;line-height:20px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
            if (z.propNameShow || (a9 == 11 && a0)) {
                aA.push("<span class='fk-prop-name" + ac + "'>" + av + "：</span>")
            }
            aA.push("<span class='" + aY + "' " + ab + ">" + aV + "</span>");
            aA.push("</div>")
        }
        if ((u == 2 || u == 3) && (bb || aH)) {
            aA.push("<div class='g_stress fk_productSmallPicPiece second_Pricepanel' style='" + (u == 3 ? "text-align:left;" : "text-align:center;") + "'>");
            if (bb) {
                if (D) {
                    if (au == "会员价") {
                        aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span>")
                    } else {
                        if (au == "VIP") {
                            aA.push("<div class='vip-show-dashed g_borderSelected g_stress'>VIP</div>")
                        }
                    }
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='second_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price second_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue' " + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='second_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>")
        }
        if (u == 4 || u == 9) {
            if (d) {
                aE = "fk_fifth_mallBuy"
            } else {
                aE = "fk_fourth_mallBuy"
            }
            aA.push("<div style='width: 100%; display: inline-block;text-align:left; margin-left:10px; padding-top:6px;'>");
            aA.push("<div style='width:" + ((bb && D) ? "55%" : "100%") + ";display:inline-block;'>");
            if (bb && D) {
                aA.push("<div style='display:inline-block; width:auto;'>");
                if (au == "会员价") {
                    aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span>")
                } else {
                    if (au == "VIP") {
                        aA.push("<div class='vip-show-dashed g_borderSelected g_stress'>VIP</div>")
                    }
                }
                aA.push("</div>")
            }
            aA.push("<div class='g_stress fk_productSmallPicPiece fourth_Pricepanel' style='display:inline;'>");
            if (bb) {
                if (D) {
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='fourth_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price fourth_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue'" + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='fourth_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>");
            aA.push("</div>");
            if (ak == "true") {
                if (d) {
                    aA.push("<div style='position:absolute; display: inline-block; width: 30%; right:0;" + (L ? "bottom:6px;" : "bottom:12px;") + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>")
                } else {
                    aA.push("<div style='position:absolute; display: inline-block; width: 40%; bottom:6px; " + (a ? "right:2px;" : "right:0;overflow:hidden;") + " height:29px;line-height:29px;padding: 5px 0;" + al + ";text-overflow:ellipsis;white-space:nowrap;'>")
                }
                aA.push("<a hidefocus='true' class='" + aE + " " + K + " fk-" + x + "BtnStyle " + T + "' " + aX + " " + s + ">\n");
                aA.push("<span " + v + " class='" + p + "' >" + aD + "</span>\n");
                aA.push("</a>");
                aA.push("</div>")
            }
            aA.push("</div>")
        }
        if (u == 5) {
            if (d || !E) {
                aE = "fk_fifth_mallBuy"
            } else {
                aE = "fk_fourth_mallBuy"
            }
            aA.push("<div class='fk_mallbuy5' style='width: 100%; display: inline-block; position:relative; height:" + ((bb && D) ? "auto" : "60px") + ";'>");
            aA.push("<div style='width:" + ((bb && D && au == "会员价") ? "80%" : "100%") + ";text-align:left;padding-left:10px;display:inline-block;'>");
            if (bb && D && au == "会员价") {
                aA.push("<div style='width:auto;margin-bottom:3px;text-align:left;display:inline-block;'>");
                aA.push("<span class='fk-prop-name g_stress'>" + au + "：</span></div>")
            }
            aA.push("<div class='g_stress fk_productSmallPicPiece fifth_Pricepanel' style='display:inline;'>");
            if (bb) {
                if (D) {
                    aA.push("<span class='fk-prop-price-other'>" + aZ.slice(0, 1) + "</span>");
                    aA.push("<span class='fifth_Price fk-prop-price'>" + (aZ.slice(1)).split(".")[0] + "<span class='fk-prop-price-other priceDecimal'>." + (aZ.slice(1)).split(".")[1] + "</span></span>")
                } else {
                    aA.push("<span class='fk-prop-price fifth_Price' style='margin:0;'>价格：</span>\n");
                    aA.push("<span class='propValue'" + m + ">" + aZ + "</span>\n")
                }
            }
            if (aH) {
                if (o) {
                    aA.push("<span class='fifth_Marketprice fk-prop-marketprice'>" + aM.slice(0, 1) + "" + aM.slice(1) + "</span>")
                }
            }
            aA.push("</div>");
            aA.push("</div>");
            if (ak == "true") {
                if (d || !E) {
                    aA.push("<div style='position:absolute; display: inline-block; width: 30%; right:0;" + (L ? "bottom:2px;" : "bottom:8px;") + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>")
                } else {
                    aA.push("<div style='position:absolute; display: inline-block; width: 40%; bottom:6px; " + (a ? "right:2px;" : "right:0;overflow:hidden;") + " height:29px;line-height:29px;padding: 5px 0;" + al + ";text-overflow:ellipsis;white-space:nowrap;'>")
                }
                aA.push("<a hidefocus='true' class='" + aE + " " + K + " fk-" + x + "BtnStyle " + T + "' " + aX + " " + s + ">\n");
                aA.push("<span " + v + " class='" + p + "' >" + aD + "</span>\n");
                aA.push("</a>");
                aA.push("</div>")
            }
            aA.push("</div>")
        }
        if (ak == "true" && u != 4 && u != 5 && u != 9) {
            if (u == 3) {
                aE = "fk_third_mallBuy"
            }
            if (u == 1) {
                aA.push("<div style='margin-left:9px;height: auto;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
                aA.push("<a hidefocus='true' class='fk_first_mallBuy " + K + " " + x + "BtnStyle' " + aX + " " + s + ">\n");
                aA.push("<span " + v + ">" + aD + "</span>\n");
                aA.push("</a>")
            }
            if (u != 2 && u != 1) {
                aA.push("<div style='margin-left:9px;height:36px;line-height:36px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
                aA.push("<a hidefocus='true' class='" + aE + " " + +K + " " + x + "BtnStyle' " + aX + " " + s + ">");
                aA.push("<span " + v + ">" + aD + "</span>\n");
                aA.push("</a>")
            }
            aA.push("</div>")
        }
        if (ak == "true" && u == 2) {
            if (u == 2) {
                aE = "fk_second_mallBuy"
            }
            aA.push("<div style='display: inline-block; bottom: 0; position: absolute;'>");
            aA.push("<div style='margin-left:9px;height:36px;line-height:36px;padding: 5px 0;width:" + (az - 20) + "px;" + al + ";text-overflow:ellipsis;white-space:nowrap;overflow:hidden;'>");
            aA.push("<a hidefocus='true' class='" + aE + " " + +K + " " + x + "BtnStyle' " + aX + " " + s + ">");
            aA.push("<span " + v + ">" + aD + "</span>\n");
            aA.push("</a>");
            aA.push("</div>")
        }
        aA.push("</div>");
        aj.find(".containerRight").append(aA.join(""));
        var a5 = aj.find(".smallPrePicSelected").parent().index();
        M.removeClass("bigPic-control-prev-disabled");
        h.removeClass("bigPic-control-next-disabled");
        r.removeClass("smallPic-control-prev-disabled");
        R.removeClass("smallPic-control-next-disabled");
        var aR = aj.find(".smallPicDownForms").find(".smallPrePicContainer");
        var a7 = parseInt(aR.css("left").replace("px"));
        var aS = Math.abs(a7) / S;
        var aK = aS + q - 1 > aa - 1 ? aa - 1 : aS + q - 1;
        var ax = aj.find(".smallPicDownFormsMid").width();
        var aF, ay;
        if (a5 == 0) {
            M.addClass("bigPic-control-prev-disabled");
            if (a7 == 0) {
                r.addClass("smallPic-control-prev-disabled")
            }
        }
        if (a5 == (aa - 1)) {
            h.addClass("bigPic-control-next-disabled");
            aF = aS;
            ay = aa - 1;
            if ((ay - aF + 1) * S <= ax && a7 >= (aa - q - 1) * S) {
                R.addClass("smallPic-control-next-disabled")
            }
        }
        aj.data("positionLeft", a7);
        aj.find("div.containerLeft").attr("productId", aT).attr("productName", aq.attr("productname")).attr("topClassName", aq.attr("classname")).attr("topSwitch", aq.attr("topswitch")).attr("id", "containerLeft_ProdsmallPic" + aT);
        if (u == 5 || u == 4 || u == 9) {
            var ar = $(".fk_fifth_mallBuy");
            var aC = $(".fk_fifth_mallBuy").width();
            ar.css({"line-height": aC + "px", height: aC + "px"});
            var aO = $(".fk_paramNewStyle5");
            var aJ = $(".fk_mallbuy5").height();
            var af = $(".smallPicUpFormsMid").find(".containerRight").height();
            var aN = 0;
            var aL = 0;
            $.each(aO, function (bc) {
                aL += $(aO[bc]).outerHeight(true)
            });
            aN = af - aL - aJ;
            $(".fk_mallbuy5").css({"margin-top": aN + "px"})
        }
    });
    y.eq(0).click()
};
Run.fixProductMallPosition = function (g, e, d) {
    var e = e || "";
    var d = d || "";
    var f = $("#module" + g).find("." + e);
    var c = $("#module" + g).find(".productListForms");
    var a = c.length ? c.attr("_mallbuybtntype") : -1;
    var b = false;
    if (d == 4 || d == 9) {
        if (a > 6) {
            b = true
        }
    } else {
        if (d == 5) {
            if (a > 6 || a == 0) {
                b = true
            }
        }
    }
    f.each(function () {
        var j = $(this).height();
        var h = $(this).find(".propList").find(".propDiv");
        var k = $(this).width() / 2;
        var i = $(this).find(".propList").find(".fifth_ProductName a").width();
        if (d == 2 || d == 3 || d == 5 || d == 9 || b) {
            if ($(this).find(".propList").find(".paramNewStyle").length > 0) {
                $(this).find(".propList").find(".paramNewStyle").css({"margin-top": "40px"})
            }
            if ($(this).find(".imgDiv").length > 0) {
                if ($(".productPicListForm").attr("faiwidth") < k) {
                    $(this).find(".imgDiv").css({width: "50%"})
                }
                $(this).find(".imgDiv").find("td").css({"vertical-align": "middle"})
            }
            if ($(this).find(".propList").length > 0) {
                $(this).find(".propList").css({"vertical-align": "middle"})
            }
        }
    })
};
Run.removeProductSmallPicMask = function (a) {
    $("#module" + a).find(".loadingImg").remove()
};
Run.loadProductSmallPicItem = function (d) {
    if (!d.attr("src")) {
        d.attr("src", d.attr("lzurl"))
    }
    var e = parseInt(d.attr("sWidth")), b = parseInt(d.attr("sHeight"));
    var a = e > b ? e : b;
    var c = e > b ? "width" : "height";
    if (a > 71) {
        d.css(c, 71)
    } else {
        d.css("width", e).css("height", b)
    }
    d.show()
};
Run.smallPicModuleFix = function (w) {
    var e = $("#" + w), g = e.find("div.productSmallPicBox");
    var n = e.find(".productSmallPicForms").width();
    var f = e.find(".smallPic_control").outerWidth(true);
    var d = n - f * 2 - e.find(".containerLeft").width();
    var b = d > 150 ? d : 150;
    e.find(".containerRight").width(b);
    e.find(".smallPicUpForms").css("width", n + "px");
    e.find(".smallPicDownForms").css("width", n + "px");
    var p = e.find(".smallPrePic_control").outerWidth(true);
    e.find(".smallPicDownFormsMid").css("width", n - 2 * p - 20 + "px");
    var t = e.find(".containerLeft").width() + e.find(".containerRight").width();
    $(".smallPicUpFormsMid").width(t);
    var l = e.find(".smallPrePicContainer");
    var a = $(".smallPrePicOuter").outerWidth(true);
    var x = 0;
    if (Helper.isIE6()) {
        x = 2
    }
    l.width(a * g.length + x);
    var h = l.width();
    var c = e.find(".smallPicDownFormsMid").width();
    var u = g.length;
    var m = Math.floor(c / a) + 1;
    var v = u % m == 0 ? u / m : Math.floor(u / m) + 1;
    if (v == 1 && c < l.width()) {
        v = 2
    }
    var q = e.find(".smallPicDownForms .g_imgPrev"), r = e.find(".smallPicDownForms .g_imgNext"),
        i = e.find(".smallPicUpForms .g_control_prev"), k = e.find(".smallPicUpForms .g_control_next");
    if (v == 1) {
        q.addClass("smallPic-control-prev-disabled");
        r.addClass("smallPic-control-next-disabled")
    }
    var o = g.length < m ? g.length : m;
    for (var s = 0; s < o; s++) {
        var y = $(g[s]).find("img");
        if (!y.attr("src")) {
            Run.loadProductSmallPicItem(y)
        }
    }
    e.find(".smallPrePicSelected").click()
};
Run.productInfoSwitchClick = function (a, g) {
    var f = 1, e = 1, c, d;
    d = $("#pdInfoSwitchTable");
    d.find(".tabSwitch").removeClass("selected fk-mainBorderColor fk-mainFontColor");
    d.find(".tabSwitch div").removeClass("pdNoBottomBorder");
    d.find(".J_tabTitleWrap").removeClass("f-tabTitleWrap f-tabTitleWrap2");
    if (g) {
        f = 0;
        e = 0;
        $("#pdInfoSwitchTable .J_paramBorder").show()
    } else {
        $("#pdInfoSwitchTable .tabSwitch:last").css({"border-right-width": f + "px"});
        $("#pdInfoSwitchTable .tabSwitch").css({"border-left-width": e + "px"})
    }
    var b = 0;
    if (a == "comm") {
        c = $("#accComSwitch");
        $("#msgBoardCaptchaImg").attr({src: "validateCode.php?" + Math.random() * 1000});
        c.addClass("selected");
        $(".selected div").addClass("pdNoBottomBorder");
        if (g) {
            c.addClass("fk-mainBorderColor fk-mainFontColor")
        }
        $("#detailedDesc").hide();
        $("#saleRecordPanel").hide();
        $("#accumulativeComment").show();
        if (g) {
            c.prev(".J_paramBorder ").hide();
            c.next(".J_paramBorder ").hide();
            if (c.index(".tabSwitch") == 0) {
                c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
            } else {
                c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
            }
        } else {
            c.next().css({"border-left-width": "0"})
        }
        $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
            if ($(this).attr("id") == "accComSwitch") {
                b = h;
                return true
            }
        })
    } else {
        if (a == "detail") {
            c = $("#detDescSwitch");
            c.addClass("selected");
            $(".selected div").addClass("pdNoBottomBorder");
            if (g) {
                c.addClass("fk-mainBorderColor fk-mainFontColor")
            }
            $("#accumulativeComment").hide();
            $("#saleRecordPanel").hide();
            $("#detailedDesc").show();
            if (g) {
                c.prev(".J_paramBorder ").hide();
                c.next(".J_paramBorder ").hide();
                if (c.index(".tabSwitch") == 0) {
                    c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
                } else {
                    c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
                }
            } else {
                c.next().css({"border-left-width": "0"})
            }
            $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
                if ($(this).attr("id") == "detDescSwitch") {
                    b = h;
                    return true
                }
            })
        } else {
            if (a == "sale") {
                c = $("#saleRecordSwitch");
                c.addClass("selected");
                $(".selected div").addClass("pdNoBottomBorder");
                if (g) {
                    c.addClass("fk-mainBorderColor fk-mainFontColor")
                }
                $("#accumulativeComment").hide();
                $("#detailedDesc").hide();
                $("#saleRecordPanel").show();
                if (g) {
                    c.prev(".J_paramBorder ").hide();
                    c.next(".J_paramBorder ").hide();
                    if (c.index(".tabSwitch") == 0) {
                        c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap2")
                    } else {
                        c.find(".J_tabTitleWrap").addClass("f-tabTitleWrap")
                    }
                } else {
                    c.next().css({"border-left-width": "0"})
                }
                $("#pdInfoSwitchTable .tabSwitch").each(function (h) {
                    if ($(this).attr("id") == "saleRecordSwitch") {
                        b = h;
                        return true
                    }
                })
            }
        }
    }
    document.cookie = "tabSwitch=" + b;
    Helper.refreshClass($("body"))
};
Run.initModuleProductCommentItemManage = function (b, a) {
    Helper.top.$("#" + b).mouseover(function () {
        Run.addEditLayer(b, a, 1)
    }).mouseleave(function () {
        Run.removeEditLayer(b)
    })
};
Run.siteCommImgFileUpload = function (b, d, f, a, g) {
    if (!Helper.isIE()) {
        Run.siteCommImgFileUploadH5(b, d, f, a, g);
        return
    }
    var e = f.split(",");
    var c = {
        file_post_name: "Filedata",
        upload_url: "/ajax/commUpsiteimg_h.php",
        button_placeholder_id: d,
        file_size_limit: b + "MB",
        button_image_type: 3,
        file_queue_limit: a,
        button_width: "50px",
        button_height: "50px",
        button_cursor: SWFUpload.CURSOR.HAND,
        button_image_url: _resRoot + "/image/site/msgUpImg/upload1.jpg",
        requeue_on_error: false,
        post_params: {ctrl: "Filedata", app: 21, type: 0, fileUploadLimit: 5, isRunForm: true},
        file_types: e.join(";"),
        file_dialog_complete_handler: function (h) {
            this._allSuccess = false;
            this.startUpload()
        },
        file_queue_error_handler: function (i, h, j) {
            switch (h) {
                case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                    Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                    break;
                case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                    Helper.ing(LS.siteFormSubmitFileUploadNotAllow, true);
                    break;
                case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadOneTimeNum, a), true);
                    break;
                default:
                    Helper.ing(LS.siteFormSubmitFileUploadReSelect, true);
                    break
            }
        },
        upload_success_handler: function (i, h) {
            var j = jQuery.parseJSON(h);
            this._allSuccess = j.success;
            this._sysResult = j.msg;
            if (j.success) {
                Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(i.name)), true);
                onFileUploadEvent("upload", j)
            } else {
                Helper.ing(LS.siteFormSubmitFileUploadFile + i.name + "   " + j.msg)
            }
        },
        upload_error_handler: function (i, h, j) {
            if (h == -280) {
                Helper.ing(LS.siteFormSubmitFileUploadFileCancle, false)
            } else {
                if (h == -270) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadFileExist, Helper.encodeHtml(i.name)), true)
                } else {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_complete_handler: function (i) {
            if (i.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                if (a == null || typeof(a) == "undefined") {
                    a = 5
                }
                var j = $("#msgBoardAddImgTb").eq(0);
                var h = j.find("td").length;
                if (h >= (a + 1)) {
                    Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                    var k = j.find("td").eq(j.find("td").length - 1);
                    k.css("display", "none");
                    return
                }
                setTimeout(function () {
                    swfObj.startUpload()
                }, swfObj.upload_delay)
            } else {
                if (i.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSvrBusy, Helper.encodeHtml(i.name)))
                }
            }
        },
        upload_start_handler: function (h) {
            Helper.enablePopupWindowBtn(0, "save", false);
            Helper.ing(LS.siteFormSubmitFileUploadPrepare, false)
        },
        view_progress: function (h, k, j, i) {
            Helper.ing(LS.siteFormSubmitFileUploadIng + i + "%", false)
        }
    };
    if (g) {
        c.button_image_url = _resRoot + "/image/site/msgUpImg/add.png"
    }
    swfObj = SWFUploadCreator.create(c);
    onFileUploadEvent = function (p, m) {
        if (p == "upload") {
            var j = m.id;
            var o = m.name;
            var l = m.size;
            var k = m.path;
            var q = m.pathSmall;
            var i = m.fileId;
            var h = m.width;
            var n = m.height;
            Run.productCommImgTableCtrl(q, o, j, l, a, i, g)
        }
    }
};
Run.siteCommImgFileUploadH5 = function (b, d, g, a, h) {
    var e = g.split(",");
    var c = {
        siteFree: false,
        updateUrlViewRes: "",
        auto: true,
        fileTypeExts: e.join(";"),
        multi: false,
        fileSizeLimit: b * 1024 * 1024,
        breakPoints: true,
        saveInfoLocal: false,
        showUploadedPercent: false,
        showUploadedSize: false,
        removeTimeout: 9999999,
        post_params: {app: 21, type: 0, fileUploadLimit: b, isRunForm: true},
        isBurst: false,
        isDefinedButton: true,
        buttonText: "",
        uploader: "/ajax/commUpsiteimg_h.php?cmd=mobiUpload&_TOKEN=" + $("#_TOKEN").attr("value"),
        onUploadSuccess: function (i, k) {
            var j = jQuery.parseJSON(k);
            if (j.success) {
                onFileUploadEvent("upload", j);
                setTimeout(function () {
                    Helper.ing("文件上传成功", true)
                }, 2000)
            } else {
                Helper.ing("文件:" + i.name + "，" + j.msg)
            }
        },
        onUploadError: function (i, j) {
            $("#progressBody_ " + i.id).remove();
            $("#progressWrap_" + i.id).remove();
            Helper.ing("网络繁忙，文件:" + i.name + "上传失败，请稍后重试")
        },
        onSelect: function () {
            if (a == null || typeof(a) == "undefined") {
                a = 5
            }
            var j = $("#msgBoardAddImgTb").eq(0);
            var i = j.find("td").length;
            if (i >= (a + 1)) {
                Helper.ing(LS.siteFormSubmitFileUploadOfMax, true);
                var k = j.find("td").eq(j.find("td").length - 1);
                k.css("display", "none");
                return false
            }
            return true
        },
        onUploadStart: function (i) {
            $("#progressBody_ " + i.id).remove();
            $("#progressWrap_" + i.id).remove()
        }
    };
    var f = $("#" + d).uploadify(c);
    if (h) {
        $("#comm-img-swfu-placeholder .uploadify-button").css("background-image", "url(" + _resRoot + "/image/site/msgUpImg/add.png)")
    }
    onFileUploadEvent = function (q, n) {
        if (q == "upload") {
            var k = n.id;
            var p = n.name;
            var m = n.size;
            var l = n.path;
            var r = n.pathSmall;
            var j = n.fileId;
            var i = n.width;
            var o = n.height;
            Run.productCommImgTableCtrl(r, p, k, m, a, j, h)
        }
    }
};
Run.commUpAllImgList = null;
Run.setCommUpAllImgList = function (a) {
    Run.commUpAllImgList = Helper.fkEval("(" + a + ")");
    if (Helper.isIE6() || Helper.isIE7()) {
        $(".msgBoard_upImg_border").css({width: "50px", height: "50px"})
    }
    $(function () {
        setTimeout(function () {
            var c = $(".J_countRecSize");
            if (typeof(c) != "undefined" && c != null) {
                for (var e = 0; e < c.length; e++) {
                    var f = c[e];
                    var d = f.getBoundingClientRect().right;
                    var g = $(f).parent().parent().parent().parent().find(".msgBoard_msgUser_level");
                    if (typeof(g) != "undefined" && g != null && g.width() != null) {
                        var b = g[0].getBoundingClientRect().left;
                        var h = b - d - 5;
                        g.css("margin-left", "-" + h + "px")
                    }
                }
            }
        }, 200)
    })
};
Run.productCommImgTableCtrl = function (l, a, b, i, c, d, e) {
    var j = $("#msgBoardAddImgTb").eq(0);
    var k = j.find("td").length;
    var g = j.find("td").eq(k - 1), f = (k) + "/" + c;
    if (e) {
        f = "还可上传" + (c - k) + "张图片,每张不超过5M，支持格式jpg，jpeg，bmp，png，gif"
    }
    g.find(".msgBoard_showImgCount").html(f);
    var h = [];
    h.push("<td class='msgBoard_upImg_tb_td2'>");
    if (Helper.isIE6() || Helper.isIE7()) {
        h.push("<div class='msgBoard_upImg_border' style='width:50px !important;height:50px !important;'>")
    } else {
        h.push("<div class='msgBoard_upImg_border'>")
    }
    h.push("<span onclick='Run.productCommImgDelete(this)' class='msgBoard_upImgTop_set'/>");
    if (Helper.isIE6() || Helper.isIE7()) {
        h.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + l + "' _name='" + a + "' _id='" + b + "' _file_size='" + i + "' _file_id='" + d + "'></p></div>")
    } else {
        h.push("<div><p><img alt='' class='msgBoard_upImg_set' src='" + l + "' _name='" + a + "' _id='" + b + "' _file_size='" + i + "' _file_id='" + d + "' style='margin-left:-1px;'></p></div>")
    }
    h.push("</div>");
    h.push("</td>");
    g.before(h.join(""))
};
Run.productCommImgDelete = function (a) {
    var d = $("#msgBoardAddImgTb").eq(0);
    var b = d.find("td").length;
    for (var c = 0; c < b; c++) {
        if (d.find("td").eq(c).find(".msgBoard_upImgTop_set")[0] === a) {
            d.find("td").eq(c).remove();
            break
        }
    }
    b = d.find("td").length;
    var e = d.find("td").eq(b - 1);
    e.find(".msgBoard_showImgCount").html((b - 1) + "/" + e.attr("maxNum"));
    if (b <= e.attr("maxNum")) {
        if (Helper.isIE6() || Helper.isIE7()) {
            e.css({display: "block", "padding-top": "7px"})
        } else {
            if (Helper.isIE()) {
                e.css({display: "block", "padding-top": "8px"})
            } else {
                e.css({display: "block", "padding-top": "10px"})
            }
        }
    }
};
Run.showCommImgList = function (k, o, c, h, b, j) {
    var e = $("#" + c), g = (typeof j == "number" && j == 5);
    if (e != null && typeof(e) != "undefined") {
        e.remove()
    }
    var n = $("#" + k);
    var f = n.parent().parent().parent().parent().parent().parent().parent();
    f.attr("chooseTr", h);
    f.attr("chooseTd", b);
    var d = f.find("td");
    d.find(".show_msg_border_rect").remove();
    var m = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    d.eq(b).prepend(m);
    var a = [];
    a.push("<div id='" + c + "' class='show_msg_outer_div'>");
    a.push("<span onclick=Run.commShowPicClose('" + c + "','" + k + "'," + g + ") class='msg_close_show_img_icon'/>");
    if (Helper.isIE6() || Helper.isIE7()) {
        a.push("<div class='show_msg_bordered_div' style='width:298px !important;'></div>");
        a.push("<div class='show_msg_border_div' style='width:299px !important;'>")
    } else {
        a.push("<div class='show_msg_bordered_div' style='width:299px;'></div>");
        a.push("<div class='show_msg_border_div' style='margin-left:1px;'>")
    }
    a.push("<div><p><img alt='' class='msg_up_show_img_set' src='" + o + "'></p></div>");
    a.push("</div>");
    a.push("</div>");
    f.after(a.join(""));
    if (!g) {
        setTimeout(function () {
            $("#" + c).hover(function () {
                l()
            }, function () {
                var p = $("#" + c);
                if (Helper.isIE7()) {
                    setTimeout(function () {
                        p.find("#J_showCommPicMoveSign").remove()
                    }, 500)
                } else {
                    p.find("#J_showCommPicMoveSign").remove()
                }
            })
        }, 10)
    } else {
        f.hide();
        i()
    }
    function l() {
        var p = $("#" + c);
        if (p.find("#J_showCommPicMoveSign").attr("class") == null || typeof(p.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
            var q = [];
            q.push("<div id='J_showCommPicMoveSign'>");
            q.push("<img alt='' class='showCommPicMoveLeftClickArea' onclick=Run.showCommImgMove('" + k + "','" + c + "','left')>");
            q.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mLeft.png' onclick=Run.showCommImgMove('" + k + "','" + c + "','left') class='showCommPicMoveLeft'>");
            q.push("<img alt='' class='showCommPicMoveRightClickArea' onclick=Run.showCommImgMove('" + k + "','" + c + "','right')>");
            q.push("<img alt='' src='" + _resRoot + "/image/site/msgUpImg/mRight.png' onclick=Run.showCommImgMove('" + k + "','" + c + "','right') class='showCommPicMoveRight'>");
            q.push("</div>");
            p.prepend(q.join(""))
        }
    }

    function i() {
        var p = $("#" + c);
        if (p.find("#J_showCommPicMoveSign").attr("class") == null || typeof(p.find("#J_showCommPicMoveSign").attr("class")) == "undefined") {
            var q = [];
            q.push("<div id='J_showCommPicMoveSign' class='fk-commPicAreaPage'>");
            q.push("<div class='f-pageLeft' onclick=\"Run.showCommImgMove('" + k + "','" + c + "','left');\"></div>");
            q.push("<div class='f-pageRight' onclick=\"Run.showCommImgMove('" + k + "','" + c + "','right')\";></div>");
            q.push("</div>");
            p.prepend(q.join(""))
        }
    }
};
Run.showCommImgMove = function (g, a, f) {
    if (g == null || f == null) {
        return
    }
    var i = $("#" + g);
    var c = i.parent().parent().parent().parent().parent().parent().parent();
    currentChooseTr = c.attr("chooseTr");
    currentChooseTd = c.attr("chooseTd");
    if (currentChooseTr == null || currentChooseTd == null) {
        return
    }
    if (Run.commUpAllImgList == null) {
        return
    }
    var b = c.find("td");
    var e = parseInt(b.length);
    if (e <= 1) {
        return
    }
    var j = 0;
    if (f == "left") {
        if (currentChooseTd == "0" || currentChooseTd == 0) {
            j = e - 1
        } else {
            j = parseInt(currentChooseTd) - 1
        }
    } else {
        if (f == "right") {
            j = parseInt(currentChooseTd) + 1;
            if (j >= Run.commUpAllImgList[currentChooseTr].data.length) {
                j = 0
            }
        }
    }
    b.eq(currentChooseTd).find(".show_msg_border_rect").remove();
    var h = "<div class='show_msg_border_rect'><div class='show_msg_triangle_down'></div></div>";
    b.eq(j).prepend(h);
    c.attr("chooseTd", j);
    var d = $("#" + a).find(".msg_up_show_img_set").parent();
    $("#" + a).find(".msg_up_show_img_set").remove();
    d.append("<img alt='' class='msg_up_show_img_set' src='" + Run.commUpAllImgList[currentChooseTr].data[j].data + "'>")
};
Run.commShowPicClose = function (c, b, f) {
    var a = $("#" + c), e;
    if (a != null && typeof(a) != "undefined") {
        a.remove()
    }
    var d = $("#" + b);
    if (!f) {
        e = d.parent().parent().parent().parent().parent().parent().parent()
    } else {
        e = d.parentsUntil(".J_msgImgList").last(":table");
        e.show()
    }
    e.find("td").find(".show_msg_border_rect").remove()
};
Run.productCommentAddCom = function (l) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    if (_manageMode && typeof l == "string" && l == "5") {
        Helper.ing("当前为管理状态，您不能提交评论。");
        return
    }
    var k = $.trim($("#productCommentCreator").val());
    var p = $("#productCommentCreator").attr("minlength");
    var b = $("#productCommentInput").val();
    var h = $("#productCommentInput").attr("minlength");
    var f = $("#validateCodeInput").val();
    var q = $("#productCommentInput").attr("productId");
    var e = $("#submitTips").attr("isDefaultTips");
    if (typeof(e) == "string" && e == "true") {
        $("#submitTips").show();
        return
    }
    if (typeof(k) != "string") {
        $("#submitTips").text(LS.creatorTips).show();
        return
    }
    if (typeof(b) != "string" || "" == b) {
        $("#submitTips").text(LS.commentNotEmpty).show();
        return
    }
    if (b.length < h) {
        $("#submitTips").text(Helper.format(LS.commentLenTips, Helper.encodeHtml(h))).show();
        return
    }
    if (typeof(f) != "string" || "" == f) {
        $("#submitTips").text(LS.memberInputCaptcha).show();
        return
    }
    var n = $("#msgBoardAddImgTb");
    var g = [];
    if (n != null && typeof(n) != "undefined") {
        var a = n.eq(0);
        var d = a.find("td").length;
        if (d > 1) {
            for (var s = 0; s < (d - 1); s++) {
                var c = a.find("td").eq(s).find(".msgBoard_upImg_set");
                if (c != null && c != "undefined") {
                    var u = {};
                    var r = c.attr("_id");
                    var w = c.attr("_name");
                    var m = c.attr("_file_size");
                    var o = c.attr("_file_id");
                    u.imgId = r;
                    u.imgName = w;
                    u.imgSize = m;
                    u.tempFileId = o;
                    g.push(u)
                }
            }
        }
    }
    var v = $(".submitStarList").attr("star");
    if (!v) {
        v = 5
    }
    var j = {validateCode: f, productId: q, creator: k, commImgList: $.toJSON(g), comment: b, star: v};
    var t = "ajax/productComment_h.php?cmd=submitPC";
    $("#submitTips").text(LS.siteFormSubmitIng).show();
    $.ajax({
        type: "POST", url: t, data: j, error: function () {
            Helper.ing(LS.systemError);
            $("#msgBoardCaptchaImg").click()
        }, success: function (i) {
            var x = jQuery.parseJSON(i);
            if (!x || !x.success) {
                $("#msgBoardCaptchaImg").click()
            }
            Helper.removeBg();
            switch (x.msg) {
                case 1:
                    $("#submitTips").text(LS.captchaError).show();
                    break;
                case 2:
                    $("#submitTips").text(LS.creatorError).show();
                    break;
                case 3:
                    $("#submitTips").text(LS.commentError).show();
                    break;
                case 4:
                    Helper.top.location.reload();
                    $("#submitTips").text(LS.submitSuccess).show();
                    break;
                case 5:
                    $("#submitTips").text(LS.paramError).show();
                    break;
                case 6:
                    $("#submitTips").html(Helper.format(LS.commentOnlyMember, '<a href="login.php?url=' + Helper.encodeUrl(window.location.href) + '">' + Helper.encodeHtml(LS.login) + "</a>")).show();
                    break;
                case 7:
                    $("#submitTips").text(LS.commentClosed).show();
                    break;
                case 8:
                    $("#submitTips").text(LS.commentSubmitError).show();
                    break;
                case 9:
                    $("#submitTips").text(LS.commentCountLimit).show();
                    break;
                default:
            }
        }
    })
};
Run.showProductQRCode = function (c, a) {
    var b = ["<div id='productQRCodeDisplay' class='webRunQRCodeDisplay'>", "<img title='' src='/qrCode.php?cmd=mobiDetailQR&&id=", c, "&lcid=", a, "&t=2' >", "<span>", LS.productORCodeMsg, "</span>", "</div>"];
    Helper.top.$(b.join("")).appendTo("body");
    $("#productQrCode").mouseenter(function (d) {
        $("#productQRCodeDisplay").css("top", $(this).offset().top + "px");
        $("#productQRCodeDisplay").css("left", ($(this).offset().left + 24) + "px");
        $("#productQRCodeDisplay").show()
    }).mouseleave(function (d) {
        $("#productQRCodeDisplay").hide()
    })
};
Run.initRepPropValueOfURL = function () {
    var a = new RegExp("https?|ftp|file://");
    $(".pd_J .propValue").each(function (b, d) {
        var c = $(this).text();
        if (a.test(c)) {
            $(this).html(Helper.replaceContentOfURL(c))
        }
    })
};
Run.salePromotionDetail = {salePromotionParam: "", showType: "2", styleType: "1", saleCountTimeInterval: {}};
Run.initSalePromotion = function (b, a) {
    Run.salePromotionDetail.salePromotionParam = b;
    Run.salePromotionDetail.styleType = a
};
Run.onlyChangeSalePrice = function (b) {
    b = parseFloat(b);
    if (isNaN(b)) {
        return
    }
    var c = Run.salePromotionDetail.salePromotionParam;
    if (typeof(c) == "undefined" || c == null || c == "") {
        return
    }
    if (c.saleType == "1") {
        var a = parseFloat(c.other.ruleData.d[0].m);
        if (c.other.ruleData.s == "1") {
            b = b * (a / 10)
        } else {
            b = b - a
        }
        if (b < 0) {
            b = 0
        }
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            $(".J_realMallAmount").html(Helper.formatPriceEn(b))
        } else {
            $(".J_realMallAmount").html(b.toFixed(2))
        }
    }
};
Run.showSalePromotionDl = function (q, o) {
    if (Run.salePromotionDetail.showType != "2") {
        return
    }
    if (typeof(q) == "undefined" || q == null || q == "") {
        return
    }
    var g = $("#realMallAmount").css("color");
    if (typeof(g) == "undefined" || g == null || g == "") {
        g = "#FC4643"
    }
    var c = $(".J_saleFullReduce").find(".propName").attr("style") || "";
    var k = [];
    var p = "f-saleValue";
    if (q.saleType == "1") {
        var n = "";
        var f = parseFloat(q.other.ruleData.d[0].m);
        var b = $(".J_saleFullReduce").find(".propName").html();
        var m = $("#realMallAmount").html();
        m = m.replace(/\,/g, "");
        var j = m.indexOf("~");
        if (j > 0) {
            priceNumber = parseFloat(m.substring(0, j));
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                m = Helper.formatPriceEn(m.split("~")[0]) + "~" + Helper.formatPriceEn(m.split("~")[1])
            }
        } else {
            priceNumber = parseFloat(m);
            m = parseFloat(m).toFixed(2);
            if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                m = Helper.formatPriceEn(m)
            }
        }
        if (isNaN(priceNumber)) {
            priceNumber = 0
        }
        var a = 0;
        var l = $("#realMallAmount").attr("curval");
        if (q.other.ruleData.s == "1") {
            if (_lcid == 2052 || _lcid == 1028) {
                n = Helper.format(LS.salePromotionDisCount, f)
            } else {
                n = Helper.format(LS.salePromotionDisCount, Helper.formatPriceEn(10 * (10 - f), null, true))
            }
            a = priceNumber * (f / 10)
        } else {
            if (_lcid == 2052 || _lcid == 1028) {
                n = Helper.format(LS.salePromotionLapse, f)
            } else {
                n = Helper.format(LS.salePromotionLapse, Helper.formatPriceEn(f, null, true))
            }
            a = priceNumber - f
        }
        if (isNaN(a) || a < 0) {
            a = 0
        }
        if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
            $("#realMallAmount").html(Helper.formatPriceEn(a))
        } else {
            $("#realMallAmount").html(a.toFixed(2))
        }
        $("#realMallAmount").addClass("J_realMallAmount");
        $("#realMallAmount").removeAttr("id");
        $(".J_saleFullReduce").addClass("J_salePromotionRemove");
        var e = [];
        if (o == 4) {
            $(".J_saleFullReduce").find(".propName").html(LS.promotionPrice + "：");
            e.push("<tr>");
            e.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            e.push(b);
            e.push("</td>");
            e.push("<td valign='top' class='propValue g_minor mallMarketPrice realMallAmount'>");
            e.push("<span>");
            e.push(l);
            e.push("</span>");
            e.push("<span curval='" + l + "' id='realMallAmount' class='mallPrice'>");
            e.push(m);
            e.push("</span>");
            e.push("</td>");
            e.push("</tr>")
        } else {
            $(".J_saleFullReduce").find(".propName").html(LS.promotionPrice + LS.colon);
            e.push("<tr>");
            e.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            e.push(b);
            e.push("</td>");
            e.push("<td valign='top' class='propValue g_minor mallMarketPrice realMallAmount'>");
            e.push("<span>");
            e.push(l);
            e.push("</span>");
            e.push("<span curval='" + l + "' id='realMallAmount' class='mallPrice'>");
            e.push(m);
            e.push("</span>");
            e.push("</td>");
            e.push("</tr>")
        }
        $(".J_saleFullReduce").before(e.join(""));
        var d = "";
        if ((o == 1 || o == 2 || o == 3) && Helper.isIE6()) {
            d = "padding-bottom:10px; margin:0px; line-height:25px;"
        }
        k.push("<td class='saleHoverDefault showSaleReducePrice J_salePromotionRemove' style='" + d + "'>");
        k.push("<table border='0' cellspacing='0' cellpadding='0'><tr>");
        k.push("<td style='vertical-align: bottom;padding:0;margin:0;'>");
        k.push("<div  style='width: 0; height: 0; border-bottom: 5px solid " + g + "; border-left: 5px solid transparent;' class='J_changeSaleCrBb'>");
        k.push("</div>");
        k.push("</td>");
        k.push("<td style='vertical-align:bottom; padding:0; margin:0;width:auto;height:auto;'>");
        k.push("<div style='font-size:12px; background-color:" + g + "; padding:0px 3px; word-wrap: normal; height:20px; line-height:20px;'  class='J_changeSaleCrBd' title='" + q.name + "'>");
        k.push(n);
        k.push("</div>");
        k.push("</td>");
        k.push("</tr></table>");
        k.push("</td>");
        $(".J_realMallAmount").parent().after(k.join(""))
    } else {
        if (typeof(q.other.ruleData.d.length) == "undefined") {
            return
        }
        k.push("<tr class='J_salePromotionRemove fk-changeSaleCrW saleFullCutPding'>");
        if (o == 4) {
            k.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            k.push(LS.salePromotionName);
            k.push("：</td>")
        } else {
            k.push("<td valign='top' class='propName g_minor' style='" + c + "'>");
            k.push(LS.salePromotionName + LS.colon);
            k.push("</td>")
        }
        k.push("<td valign='top' class='saleHoverDefault propValue J_changeSaleCrW' colSpan=2 style='color:" + g + ";'  title='" + q.name + "' >");
        if (o != 5) {
            for (var h = 0; h < q.other.ruleData.d.length; h++) {
                if (h > 0) {
                    k.push("<div class='saleFullReMgTop'>")
                } else {
                    k.push("<div>")
                }
                k.push("<span class='saleFullReBg J_changeSaleCrBd' style='margin:0;background-color:" + g + ";'>");
                k.push(Helper.format(LS.salePromotionOnlyFullReduce));
                k.push("</span>");
                k.push("<span style='margin:0; margin-left:8px;'>");
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    k.push(Helper.format(LS.salePromotionFullReduce, Helper.formatPriceEn(q.other.ruleData.d[h].m, null, true), Helper.formatPriceEn(q.other.ruleData.d[h].n, null, true)))
                } else {
                    k.push(Helper.format(LS.salePromotionFullReduce, q.other.ruleData.d[h].m, q.other.ruleData.d[h].n))
                }
                k.push("</span>");
                k.push("</div>")
            }
        } else {
            k.push("<div>");
            for (var h = 0; h < q.other.ruleData.d.length; h++) {
                p = (h == 0) ? "" : "f-saleValue";
                k.push("<span class='saleFullReBg J_changeSaleCrBd fk-mainBgColor " + p + "'>");
                k.push(Helper.format(LS.salePromotionOnlyFull));
                k.push("</span>");
                k.push("<span class='f-saleDiscount'>");
                if (Helper.top._lcid != 2052 && Helper.top._lcid != 1028) {
                    k.push(Helper.format(LS.salePromotionFullReduce, Helper.formatPriceEn(q.other.ruleData.d[h].m, null, true), Helper.formatPriceEn(q.other.ruleData.d[h].n, null, true)))
                } else {
                    k.push(Helper.format(LS.salePromotionFullReduce, q.other.ruleData.d[h].m, q.other.ruleData.d[h].n))
                }
                k.push("</span>")
            }
            k.push("</div>")
        }
        k.push("</td>");
        k.push("</tr>");
        $(".J_saleFullReduce").after(k.join(""))
    }
};
Run.changeSaleColor = function () {
    var a = Run.getTopWindow().$(".J_realMallAmount").css("color");
    if (typeof(a) == "undefined" || a == null || a == "") {
        a = Run.getTopWindow().$("#realMallAmount").css("color");
        if (typeof(a) == "undefined" || a == null || a == "") {
            a = "#FC4643"
        }
    }
    Run.getTopWindow().$(".J_changeSaleCrBb").css("border-bottom-color", a);
    Run.getTopWindow().$(".J_changeSaleCrW").css("color", a);
    Run.getTopWindow().$(".J_changeSaleCrBd").css("background-color", a)
};
Run.saleCountTimeInterval = {};
Run.showSaleTimeCountDown = function (b, f, d, e) {
    var h = "";
    var c = LS.salePromotionBegin;
    var g = LS.salePromotionEnd;
    var a = 0;
    Run.salePromotionDetail.showType = d;
    if (d == 1) {
        h = c;
        a = b
    } else {
        h = g;
        a = f
    }
    clearInterval(Run.salePromotionDetail.saleCountTimeInterval);
    Run.salePromotionDetail.saleCountTimeInterval = setInterval(function () {
        var q = parseInt(a / (3600 * 24));
        var o = parseInt(a / 3600) - (q * 24);
        var m = parseInt(a / 60) - (q * 24 * 60) - (o * 60);
        var p = parseInt(a % 60);
        if (_lcid != 2052 && _lcid != 1028) {
            if (o < 10) {
                o = "0" + o
            }
            if (m < 10) {
                m = "0" + m
            }
            if (p < 10) {
                p = "0" + p
            }
        }
        a--;
        var j = Helper.format(h, q, o, m, p);
        if (e == 2 || e == 3) {
            var l = j.indexOf(":");
            if (l < 0) {
                l = j.indexOf("：")
            }
            if (l > 0) {
                var n = j.substring(0, l + 1);
                var k = j.substring(l + 1, j.length);
                $(".showSaleTimeNameClass").html(n);
                $(".showSaleTimeClass").html(k)
            } else {
                $(".showSaleTimeClass").html(Helper.format(h, q, o, m, p))
            }
        } else {
            $(".showSaleTimeClass").text(j)
        }
        if (a < 0) {
            if (d == 1) {
                a = f;
                h = g;
                d = 2;
                Run.salePromotionDetail.showType = 2;
                Run.showSalePromotionDl(Run.salePromotionDetail.salePromotionParam, Run.salePromotionDetail.styleType)
            } else {
                clearInterval(Run.salePromotionDetail.saleCountTimeInterval);
                Run.salePromotionDetail.showType = 1;
                var i = $(".J_realMallAmount").attr("style");
                $(".realMallAmount").removeClass("g_minor mallMarketPrice");
                $(".realMallAmount").addClass("g_stress mallPriceBig");
                $(".realMallAmount").attr("style", i);
                $(".J_salePromotionRemove").remove()
            }
        }
    }, 1000)
};
Run.initModuleProductMallGroups = function (a, d, g, e) {
    var b = $("#module" + a), h = b.find(".pd_mall_G_J .p_m_cotainer_J");
    var c = false;
    if (typeof b.find(".pd_mall_G_J").menuAim == "function") {
        k()
    }
    function k() {
        b.find(".pd_mall_G_J").menuAim({
            rowSelector: " .p_m_cotainer_J",
            activate: j,
            deactivate: i,
            exitActRow: function () {
                return true
            }
        })
    }

    function j(y) {
        var K = $(y);
        K.find(".p_m_cotainerR_J").removeClass("p_m_more");
        K.find(".p_m_value_J").addClass("g_stress");
        K.addClass("bold p_m_hover g_border");
        var C = K.attr("_id"), u = d[C];
        if (u == null || u.list.length === 0) {
            return true
        }
        var H = f(u);
        var r = {
            that: K,
            moduleId: a,
            clsStr: "pd_m_panel " + (g === 1 || g === 2 ? "pd_m_jd" : "pd_m_yhd"),
            idStr: "group" + C + "Panel",
            contentStr: H.join("")
        };
        panel = Run.moduleSubPanel(r);
        var m = b.find(".formBanner"), N = 0;
        if (m.length > 0 && m.is(":visible")) {
            N = m.outerHeight()
        }
        var z = b.find(".formMiddleRight").outerWidth();
        if (Helper.isIE8()) {
            z = 0
        }
        var o = b.find(".formMiddleCenter").width(), s = b.find(".pd_mall_G_J").width(), M = b.offset().top + N,
            q = b.offset().left + b.outerWidth() - ((o - s) / 2) - 2 - z;
        panel.css({top: M, left: q}).show();
        if (Helper.isIE6()) {
            var O = panel.find(".p_m_body_J").outerWidth();
            panel.width(O)
        }
        var x = 0, l = 0, I = K.outerHeight() - K.innerHeight();
        m_border = parseInt((b.outerHeight() - b.innerHeight()) / 2);
        oFormMiddle = b.find(".formMiddle"), m_content_innerPaddingTopStr = oFormMiddle.find(".formMiddleContent").css("margin-top"), m_content_innerPaddingTop = parseInt(m_content_innerPaddingTopStr.replace("px", ""));
        if (g === 2) {
            var w = 20, D = K.outerHeight(), p = panel.outerHeight(), B = $(window).height(),
                F = K.offset().top - $(window).scrollTop(), v = B - F, G = 0;
            if (v < p) {
                G = p - v + w
            }
            if (G > K.position().top) {
                G = K.position().top
            }
            if (D < p && G + D > p) {
                G = p - v
            }
            var A = oFormMiddle.height(), J = parseInt((oFormMiddle.outerHeight() - oFormMiddle.innerHeight()) / 2);
            M += K.position().top - G + m_border + J + m_content_innerPaddingTop;
            panel.css({top: M});
            l = G + I / 2;
            x = D > p ? p - 4 : K.outerHeight() - I
        } else {
            var L = b.find(".formMiddleContent").offset().top - b.find(".formMiddleCenter").offset().top,
                E = K.position().top + K.outerHeight() + L, n = panel.outerHeight();
            if (n - 5 < E) {
                var t = panel.find(".p_m_body_J");
                t.height(E)
            }
            l = K.position().top + I / 2 + m_border + m_content_innerPaddingTop;
            x = K.outerHeight() - I
        }
        $(panel).find(".p_m_cover_J").css({top: l, height: x})
    }

    function i(m) {
        var l = $(m);
        Helper.top.$(".g_m_s_J").each(function () {
            var n = $(this);
            if (n.length != 1) {
                return
            }
            n.remove()
        });
        l.removeClass("bold p_m_hover g_border");
        l.find(".p_m_value_J").removeClass("g_stress");
        if (l.attr("_chd") == 1) {
            l.find(".p_m_cotainerR_J").addClass("p_m_more")
        }
    }

    function f(l) {
        var n = [];
        n.push("<div class='p_m_cover p_m_cover_J'></div>");
        n.push("<div class='" + (l.hasGrand ? "p_m_body2" : "p_m_body") + " g_border p_m_body_J'>");
        var m = "";
        if (e === 1) {
            m = "target='_blank'"
        }
        if (l.hasGrand) {
            if (g === 1 || g === 2) {
                $.each(l.list, function (o, p) {
                    if (e !== 1 && _manageMode) {
                        m = "onclick=\"Run.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                    }
                    n.push("<dl>");
                    n.push("<dt><a class='g_stress' href='" + p._href + "' " + m + ">" + Helper.encodeHtml(p.name) + "</a></dt>");
                    n.push("<dd>");
                    $.each(p.children, function (q, r) {
                        if (e !== 1 && _manageMode) {
                            m = "onclick=\"Run.redirectUrl('" + r._href + "', '_self', event, 1, 0);return false;\""
                        }
                        n.push("<a href='" + r._href + "' " + m + " title='" + Helper.encodeHtml(r.name) + "'>" + Helper.encodeHtml(r.name) + "</a>")
                    });
                    n.push("</dd>");
                    n.push("</dl>");
                    n.push("<div class='p_m_sep'></div>")
                })
            } else {
                $.each(l.list, function (o, p) {
                    if (e !== 1 && _manageMode) {
                        m = "onclick=\"Run.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                    }
                    n.push("<dl>");
                    n.push("<dt><a class='g_stress' href='" + p._href + "' " + m + ">" + Helper.encodeHtml(p.name) + "</a></dt>");
                    $.each(p.children, function (q, r) {
                        if (e !== 1 && _manageMode) {
                            m = "onclick=\"Run.redirectUrl('" + r._href + "', '_self', event, 1, 0);return false;\""
                        }
                        n.push("<dd><a href='" + r._href + "' " + m + " title='" + Helper.encodeHtml(r.name) + "'>" + Helper.encodeHtml(r.name) + "</a></dd>")
                    });
                    n.push("</dl>");
                    if ((o + 1) % 3 == 0 || (o + 1) == l.list.length) {
                        n.push("<div class='p_m_sep'></div>")
                    }
                })
            }
        } else {
            $.each(l.list, function (o, p) {
                if (e !== 1 && _manageMode) {
                    m = "onclick=\"Run.redirectUrl('" + p._href + "', '_self', event, 1, 0);return false;\""
                }
                n.push("<a class='p_m_line g_stress' href='" + p._href + "' " + m + ">" + Helper.encodeHtml(p.name) + "</a>")
            })
        }
        n.push("</div>");
        return n
    }
};
Run.createImageEffectContent_product = function (h, n, i, c) {
    if (!c) {
        return
    }
    var k = {
        fwc: (n.wordType) ? n.fullmaskWordColor : "#fff",
        fwr: (n.wordType) ? n.fullmaskWordResize : 12,
        fws: (n.wordType) ? n.fullmaskWordStyle : "微软雅黑"
    };
    var f = $(h).find(".imageEffects");
    var l = $(h).attr("id");
    if (typeof l == "undefined") {
        var d = $(f).parents("." + i.targetParent).attr("productid");
        l = i.targetParent + d
    }
    var b = (n.effType == 5) ? ($(h).height() * 0.75) * 0.5 : ($(f).height() * 0.5);
    var e = $(f).width();
    var a = "";
    m();
    j();
    g();
    function m() {
        var r = [];
        var G = "";
        var u = "";
        var p = false;
        var o = 0;
        var D = "";
        var y = "";
        y += (n.effType == 5 ? "padding-top: 2.5%;" : "");
        y += (i.productTextCenter ? "text-align: center;" : "text-align: left;");
        var E = "<div class='props'><div class='propList g_specialClass' style='" + y + "'></div><div class='propBuy'></div></div>";
        $(f).append(E);
        if (i.targetParent == "productMarqueeForm") {
            l = l.replace("_clone", "")
        }
        for (var w in c) {
            if (c[w][l] != undefined) {
                r = jQuery.parseJSON(c[w][l]);
                u = c[w]["productName"];
                a = c[w]["productBuyBtnText"];
                p = c[w]["hasDiscount"];
                o = c[w]["tmpPropPrice"];
                D = c[w]["tmpPropName"];
                break
            }
        }
        var A = $(f).find(".props .propList");
        if (i.productNameShow) {
            $(A).append("<a href='javascript:;' onclick='return false;' class='fk_imgEffProductName imgEffPropName " + (i.productNameWordWrap ? "" : "noNameWrap") + "'>" + u + "</a>")
        }
        if (r.length > 0) {
            for (var w in r) {
                var q = r[w];
                var B = q.propName;
                var x = q.propValue;
                var s = q.type || -1;
                var t = q.allowed;
                var z = false;
                var C = "";
                if (s == 11 && p) {
                    B = D;
                    x = o;
                    z = true;
                    C = " g_stress"
                }
                if (!i.propNameShow && !z) {
                    B = ""
                } else {
                    B = "<span class='propName" + C + " fk-prop-name'>" + B + "：</span>"
                }
                if ($(A).height() < b) {
                    if ((s == 11 || s == 12) && t) {
                        if (s == 12) {
                            x = "<span class='effect_second_Marketprice fk-prop-marketprice'>" + Helper.top._choiceCurrencyVal + x + "</span>";
                            tempStr = B + x
                        } else {
                            x = "<span class='propValue  g_stress mallPrice fk-prop-price'>" + Helper.top._choiceCurrencyVal + x + "</span>";
                            tempStr = B + x
                        }
                    } else {
                        tempStr = B + x
                    }
                    $(A).append("<p class='prop'>" + tempStr + "</p>")
                } else {
                    var F = $(A).children().last();
                    if ($(F).width() < e) {
                        var v = $(A).children().last().html();
                        $(A).children().last().html(v + "...")
                    }
                    break
                }
            }
        }
        if (n.wordType) {
            $(f).find(".imgEffPropName").css({color: k.fwc, "font-size": k.fwr + "px", "font-family": k.fws})
        }
        $(f).find(".prop").css({color: k.fwc, "font-size": k.fwr + "px", "font-family": k.fws})
    }

    function j() {
        if (i.mallShowBuy) {
            var o = "<span>" + a + "</span>";
            $(f).find(".props .propBuy").append(o)
        } else {
            $(f).find(".props .propBuy").remove()
        }
    }

    function g() {
        $(f).find(".propBuy").bind("mouseenter", function () {
            $(this).addClass("propBuy_hover")
        }).bind("mouseleave", function () {
            $(this).removeClass("propBuy_hover")
        });
        if (Helper.isIE6() || Helper.isIE7()) {
            $(f).find(".propBuy").bind("click", function () {
                var o = $(this).attr("data-click");
                if (o.length > 0) {
                    Helper.fkEval(o)
                }
            })
        }
    }
};
Run.clearImageEffectContent_product = function (b, a) {
    $("#module" + b).find("." + a).remove();
    if ($("#module" + b).find(".mallPanel").length > 0) {
        $("#module" + b).find(".mallPanel").remove()
    }
};
Run.bindImageEffectCusEvent_product = function (c, a) {
    var b = $(c).find(".imageEffects");
    $(b).css("cursor", "pointer");
    $(b).bind("click", function () {
        var g = $(this).parents("." + a.targetParent).find("a");
        if (Helper.isNull(g)) {
            return
        }
        var e = $(g).attr("href");
        var d = $(g).attr("onclick");
        var f = $(g).attr("target");
        if (typeof d != "undefined") {
            Helper.fkEval(d)
        } else {
            if (e.length > 0) {
                window.open(e, f)
            }
        }
    })
};
Run.initModuleProductResultPropFilter = function (d) {
    var c = $("#module" + d), e = c.find(".fp_list_J"), f = e.find(".fp_block_J");
    if (Helper.isIE6() || Helper.isIE7() || Helper.isIE8()) {
        var a = e.find(".block_head_J").outerWidth();
        e.find(".block_body_J").width(e.width() - a)
    }
    $.each(f, function (j, k) {
        var k = $(k), h = k.find(".block_head_J"), g = k.find(".block_body_J"), l = h.outerHeight();
        blockBodyH = g.outerHeight();
        if (blockBodyH > l + 10) {
            g.attr("_h", blockBodyH);
            $(k).find(".block_tail_J .more_btn_J").text(LS.productResultMore);
            return
        }
        $(k).find(".block_tail_J").remove()
    });
    var b = c.find(".fp_list_J .block_tail_J");
    b.click(function () {
        var j = $(this), k = j.parent(), g = k.find(".block_body_J"), h = j.find(".more_btn_J"),
            i = j.find(".more_down");
        if (i.hasClass("more_up")) {
            k.removeAttr("style");
            h.text(LS.productResultMore);
            i.removeClass("more_up")
        } else {
            k.height(g.attr("_h"));
            h.text(LS.productResultColl);
            i.addClass("more_up")
        }
    });
    $("#conds_body_sel").change(function () {
        window.location.href = $(this).val()
    });
    if (Helper.top._manageMode) {
        $("#pf_tips").hover(function () {
            var g = $(this);
            tipImgW = g.width(), tipTop = g.offset().top, tipLeft = g.offset().left, str = "<div id='pf_tips_Msg' class='pf_tips_Msg g_tip'>" + g.attr("_tipVal") + "</div>";
            Helper.top.$(str).appendTo("body");
            var h = $("#pf_tips_Msg");
            h.offset({top: tipTop - h.outerHeight() - 10, left: tipLeft})
        }, function () {
            $("#pf_tips_Msg").remove()
        })
    }
};
Run.productResultPropFilterSearch = function (a) {
    $("#searchButton").click(function () {
        var b = $("#searchCondInput").val();
        b = Helper.encodeUrl($.trim(b));
        if (!b) {
            Helper.top.location.href = "pr.php?pfc=" + Helper.encodeUrl($.toJSON(a))
        }
        if (a) {
            Helper.top.location.href = "pr.php?keywordCond=" + b + "&pfc=" + Helper.encodeUrl($.toJSON(a))
        } else {
            Helper.top.location.href = "pr.php?keywordCond=" + b
        }
    });
    $("#searchCondInput").keydown(function (b) {
        if (b.keyCode == 13) {
            var c = $("#searchCondInput").val();
            c = Helper.encodeUrl($.trim(c));
            if (!c) {
                Helper.top.location.href = "pr.php?pfc=" + Helper.encodeUrl($.toJSON(a))
            }
            if (a) {
                Helper.top.location.href = "pr.php?keywordCond=" + c + "&pfc=" + Helper.encodeUrl($.toJSON(a))
            } else {
                Helper.top.location.href = "pr.php?keywordCond=" + c
            }
        }
    })
};
Run.productResultPriceCondFilter = function (b) {
    var a = false;
    $("#sort_priceMin").bind("focus", function () {
        $("#sort_priceMin").removeClass("sort_priceArea");
        $("#sort_priceMin").addClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_submit").show();
        $("#prSort_item2").addClass("sort_select2");
        a = true
    });
    $("#sort_priceMax").bind("focus", function () {
        $("#sort_priceMax").removeClass("sort_priceArea");
        $("#sort_priceMax").addClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_submit").show();
        $("#prSort_item2").addClass("sort_select2");
        a = true
    });
    $("#sort_submit").bind("click", function () {
        var k = $("#sort_priceMin").val();
        var l = $("#sort_priceMax").val();
        if (!(k || l)) {
            return
        }
        var h = parseInt(k);
        var e = parseInt(l);
        if (isNaN(h) && "" != k) {
            $("#sort_priceMin").removeClass("sort_priceArea");
            $("#sort_priceMin").addClass("sort_priceAreaCheck g_borderSelected");
            return
        }
        if (isNaN(e) && "" != l) {
            $("#sort_priceMax").removeClass("sort_priceArea");
            $("#sort_priceMax").addClass("sort_priceAreaCheck g_borderSelected");
            return
        }
        if (h > e) {
            var g = l;
            l = k;
            k = g;
            g = e;
            e = h;
            h = g
        }
        if (!b) {
            b = {}
        }
        if (!b.props) {
            var d = [];
            b.props = d
        }
        var i = b.props;
        var j = false;
        var f = "";
        if (k) {
            f += h
        } else {
            f += "0," + e
        }
        if (k && l) {
            f += "," + e
        }
        f = "[" + f + "]";
        $.each(i, function (m, o) {
            if (o.k == 11) {
                o.v = f;
                j = true
            }
        });
        if (!j) {
            var c = {};
            c.k = 11;
            c.v = f;
            i.push(c)
        }
        Helper.top.location.href = "pr.php?pfc=" + Helper.encodeUrl($.toJSON(b))
    });
    $("#sort_priceMin").bind("blur", function () {
        a = false;
        var c = $.trim($("#sort_priceMin").val());
        var d = parseInt(c);
        if ("" != c) {
            if (isNaN(d)) {
                $("#sort_priceMin").val("");
                return
            }
        }
        $("#sort_priceMin").removeClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_priceMin").addClass("sort_priceArea");
        setTimeout(function () {
            if (!a) {
                $("#sort_submit").hide();
                $("#prSort_item2").removeClass("sort_select2")
            }
        }, 250)
    });
    $("#sort_priceMax").bind("blur", function () {
        a = false;
        var d = $.trim($("#sort_priceMax").val());
        var c = parseInt(d);
        if ("" != d) {
            if (isNaN(c)) {
                $("#sort_priceMax").val("");
                return
            }
        }
        $("#sort_priceMax").removeClass("sort_priceAreaCheck g_borderSelected");
        $("#sort_priceMax").addClass("sort_priceArea");
        setTimeout(function () {
            if (!a) {
                $("#sort_submit").hide();
                $("#prSort_item2").removeClass("sort_select2")
            }
        }, 250)
    })
};
Run.initPdPagenation = function (a) {
    $("#pagenation" + a).on("click.product", ".pageNo", function () {
        var b = $(this);
        b.addClass("fk-select")
    })
};
Run.setProductStatify = function (a, b, k) {
    var j = $("#module" + a), h = j.find(".J_proSatifySum"), l, f, n, e;
    if (h.length < 1) {
        return
    }
    var m = Helper.isIE6() || Helper.isIE7(), d = "J_select", g = "J_noSelect fk-noSelect";
    if (m) {
        d = "lt_select_more";
        g = "lt_no_select"
    }
    l = j.find(".J_pdCommStarList");
    if (l.length > 0) {
        f = l.find(".J_proStar");
        b = Math.round(b);
        for (var c = 0; c < b; c++) {
            f.eq(c).addClass(d)
        }
        for (var c = b; c <= 5; c++) {
            f.eq(c).addClass(g)
        }
        l.attr("star", b)
    }
    e = j.find(".J_commNum");
    if (e.length > 0) {
        e.text(k)
    }
};
Run.initProDetailStyle = function (p, v, h, d) {
    var f = $("#module" + p), j = f.find(".formBanner" + p), a = f.find(".J_productDetail").width(),
        n = f.find(".pdTableLayout").width(), e = false, u, b, g, o, s, l, c, i, k, t, q, m, r;
    f.removeClass("fk-proDetaliModuleStyle");
    j.removeClass("fk-proDetailBannerStyle");
    if (d == 5) {
        f.addClass("fk-proDetaliModuleStyle");
        j.addClass("fk-proDetailBannerStyle");
        if (a < n) {
            g = f.find(".pdLayoutR_J");
            o = f.find(".pd_t_l_left_J");
            b = $("#imgGroup" + p);
            if (b.length > 0) {
                e = true
            }
            s = (a - 280) / 23;
            if (s < 20) {
                s = 20
            }
            u = f.find(".J_saleFullReduce");
            u.find("#realMallAmount").css({"font-size": s + "px", "line-height": s + "px"});
            u.find(".propName").css("line-height", u.find(".J_mallPrice").height() + "px");
            l = (a - 320) / 21;
            g.find(".J_pdDetailBorder").css("margin", "0 0 0 " + (l > 0 ? l : 0) + "px");
            if (e) {
                r = $("#imgDiv" + p).outerWidth(true);
                k = a / 46;
                b.css("margin-right", k + "px");
                m = b.outerWidth(true);
                o.find(".imgContainer_J").css({"margin-right": k + "px", width: (m + r)});
                i = o.find(".J_productOpera");
                t = parseInt(b.outerWidth(true));
                i.css("left", (t > 0 ? t : 0) + "px");
                o.find("#prevAndNextDiv").css("margin-left", (t > 0 ? t : 0) + "px")
            }
            q = a - o.outerWidth(true);
            if (q <= 0) {
                q = "100%"
            }
            f.find(".J_productTitle").width(q);
            g.find(".propValue:not('.J_mallPrice')").width(a - o.outerWidth(true) - g.find(".propName:last").outerWidth(true) - g.find(".propColon:last").outerWidth(true) - 3)
        }
    }
};
Run.initProDetailPage = function (b, d, a) {
    $("#singleProductpagenation" + b).find("a").hover(function () {
        $(this).addClass("g_hover")
    }, function () {
        $(this).removeClass("g_hover")
    });
    if (!d) {
        return
    }
    var c = false;
    if ($("#imgGroup" + b).length > 0) {
        c = true
    }
    if (c) {
        $("#prevAndNextDiv").addClass("fk-pd5PageStyle")
    }
    if (!a) {
        $("#prevAndNextDiv").width($("#imgDiv" + b).width())
    }
};
(function (f, a, h) {
    var d = false;
    a.initModuleMallGroup = function (i, s, q, y, w, o, l, v) {
        var k = $("#module" + i);
        var r = $(".styleMall" + i);
        var n = k.width();
        var m = k.height();
        var u;
        var p = f.top._manageMode;
        if (f.isIE6() || f.isIE7() || f.isIE8()) {
            if (e(l)) {
                l = c(l);
                if (q == 0) {
                    $(".mallGroupRight" + i).css("border", "1px solid " + l);
                    v = c(v);
                    k.find(".mallHeadYHD").css("background-color", v)
                } else {
                    if (q == 1) {
                        k.find(".mallHeadJD").css("background-color", l);
                        $(".mallGroupRight" + i).css("border", "1px solid " + l);
                        $(".styleMall" + i).find(".li-color").css({"background-color": l})
                    } else {
                        if (q == 2) {
                            k.find(".mallHeadTM").css("background-color", l);
                            $(".mallGroupRight" + i).css("border-color", l)
                        }
                    }
                }
            }
            if (q == 1) {
                $(".styleMall" + i).find(".li-color").css({
                    "border-bottom": "1px solid",
                    "border-top": "1px solid",
                    "border-color": l
                })
            }
        }
        x();
        a.cacheModuleFunc.init("mallGroupEventBind", {
            moduleId: i,
            useColorCode: l,
            mallStyle: q,
            groupDisplay: w,
            liSize: o
        });
        if (w == 1) {
            if (f.top._colId == 2) {
                t()
            } else {
                j()
            }
        } else {
            if (w == 2) {
                t()
            } else {
                j()
            }
        }
        function j() {
            k.find(".mallHead").die("mouseenter mouseleave").live("mouseenter", function () {
                $(".styleMall" + i).css({
                    left: k.position().left,
                    top: k.position().top + k.height(),
                    width: k.width()
                });
                $(".mallGroupRight" + i).css({left: k.width(), top: 0});
                if (f.isIE()) {
                    r.show()
                } else {
                    r.stop(true, true).slideDown(800, "easeOutExpo")
                }
            }).live("mouseleave", function () {
                if (event.relatedTarget == null) {
                    return
                }
                var z = event.relatedTarget.className;
                if (z.indexOf("li-color") < 0 && z.indexOf("mallLiName") < 0 && z.indexOf("displayRight") < 0 && z.indexOf("ui-resizable-bottomLine") < 0) {
                    if (f.isIE()) {
                        r.hide()
                    } else {
                        r.stop(true, true).slideUp(800, "easeOutExpo")
                    }
                }
            });
            r.die("mouseleave").live("mouseleave", function (B) {
                if (B.relatedTarget == null) {
                    return
                }
                var z = B.relatedTarget.className;
                if (q == 0) {
                    $(this).find(".li-color").find(".pdg_font_icon").removeAttr("style")
                }
                if (q == 0) {
                    $(this).find(".li-color").removeClass("li-color-" + s);
                    $(this).find(".li-color").find(".displayRight").removeClass("displayRight-hover")
                } else {
                    if (q == 1) {
                        $(this).find(".li-color").removeClass("JDli-hover-" + s)
                    } else {
                        if (q == 2) {
                            r.find("ul").removeClass("li-border-" + s);
                            $(this).find(".li-color").removeClass("TMli-hover-" + s)
                        }
                    }
                }
                if (f.isIE()) {
                    $(".mallGroupRight" + i + ":visible").hide()
                } else {
                    $(".mallGroupRight" + i).stop(true, true);
                    var A = $(".mallGroupRight" + i + ":visible").width();
                    $(".mallGroupRight" + i + ":visible").animate({
                        width: 0,
                        opacity: 0
                    }, 1000, "easeOutExpo", function () {
                        $(this).width(A);
                        $(this).css({opacity: 1, display: "none"})
                    })
                }
                d = true;
                if (z.indexOf("mallHead") >= 0) {
                    return
                }
                if (f.isIE()) {
                    r.hide()
                } else {
                    r.stop(true, true).slideUp(800, "easeOutExpo")
                }
            })
        }

        function t() {
            r.show();
            r.mouseleave(function (A) {
                if (q == 0) {
                    $(this).find(".li-color").find(".pdg_font_icon").removeAttr("style");
                    $(this).find(".li-color").css({"background-color": "#fff", color: "#4a4949"});
                    $(this).find(".li-color").find(".displayRight").removeClass("displayRight-hover")
                } else {
                    if (q == 1) {
                        $(this).find(".li-color").css("background-color", l)
                    } else {
                        if (q == 2) {
                            r.find("ul").css({"border-right": ""});
                            $(this).find(".li-color").removeClass("TMli-hover");
                            $(this).find(".li-color").css({"border-color": "", color: ""})
                        }
                    }
                }
                $(".mallGroupRight" + i).stop(true, true);
                var z = $(".mallGroupRight" + i + ":visible").width();
                if (f.isIE()) {
                    $(".mallGroupRight" + i + ":visible").hide()
                } else {
                    $(".mallGroupRight" + i + ":visible").animate({
                        width: 0,
                        opacity: 0
                    }, 1000, "easeOutExpo", function () {
                        $(this).width(z);
                        $(this).css({opacity: 1, display: "none"})
                    })
                }
                d = true;
                return
            })
        }

        function x() {
            k = $("#module" + i);
            if (!p) {
                k.find(".mallHead").css("cursor", "pointer")
            }
            k.after($(".styleMall" + i));
            r = $(".styleMall" + i);
            k = $("#module" + i);
            $(".styleMall" + i).css({
                left: k.position().left,
                top: k.position().top + k.height(),
                width: k.width(),
                "z-index": k.css("z-index")
            });
            r = $(".styleMall" + i);
            $(".formMiddleCenter" + i).css({height: "100%"});
            $(".formMiddleContent" + i).css({height: "100%"})
        }
    };
    a.mallGroupEventBind = function (j) {
        var m = j.moduleId, k = $("#module" + m), i = k.width();
        useColorCode = j.useColorCode, styleMall = $(".styleMall" + m), mallStyle = j.mallStyle, groupDisplay = j.groupDisplay, liSize = j.liSize, isNeedChangeWidth = true;
        n(useColorCode);
        function n(q) {
            p(q, mallStyle);
            $(".mallGroupRight" + m).css({left: i, top: 0});
            styleMall.find(".secGroupName").die("mouseenter mouseleave").live("mouseenter", function () {
                $(this).css("color", q)
            }).live("mouseleave", function () {
                $(this).removeAttr("style")
            });
            styleMall.find(".thdGroupBox").die("mouseenter mouseleave").live("mouseenter", function () {
                $(this).css("color", q)
            }).live("mouseleave", function () {
                $(this).removeAttr("style")
            });
            k.find(".mallHead").off("click").on("click", function () {
                styleMall = $(".styleMall" + m);
                if (styleMall.css("display") != "none") {
                    $(".styleMall" + m + " li").eq(0).trigger("mouseleave")
                }
                if ($(".styleMall" + m).parent().attr("id") != k.parent().attr("id")) {
                    k.after($(".styleMall" + m));
                    styleMall = $(".styleMall" + m);
                    k = $("#module" + m)
                }
                styleMall.toggle();
                styleMall.find(".mallGroupRight").hide();
                $(".styleMall" + m).css({
                    left: k.position().left,
                    top: k.position().top + k.height(),
                    width: k.width(),
                    height: "auto",
                    "z-index": k.css("z-index")
                });
                $(".mallGroupRight" + m).css({left: k.width(), top: 0})
            });
            var r;
            $.each(styleMall.find("li"), function (s, t) {
                r = styleMall.find("li:eq(" + s + ") .mallGroupRight");
                l(r, groupDisplay);
                o(r, groupDisplay);
                if (!(f.isIE6() || f.isIE7())) {
                    if (mallStyle == 0 && r.width() >= 750) {
                        r.mCustomScrollbar({
                            theme: "dark-3",
                            scrollSpeed: 10,
                            scrollButtons: {enable: true},
                            advanced: {updateOnContentResize: true},
                            axis: "y",
                            callbacks: {}
                        })
                    } else {
                        if (mallStyle != 0) {
                            r.mCustomScrollbar({
                                theme: "dark-3",
                                scrollSpeed: 10,
                                scrollButtons: {enable: true},
                                advanced: {updateOnContentResize: true},
                                axis: "y",
                                callbacks: {}
                            })
                        }
                    }
                }
            });
            if (mallStyle == 0) {
                styleMall.find("li").last().css("border-bottom", "0")
            }
            if (f.isIE6() || f.isIE7()) {
                if (mallStyle == 2) {
                    styleMall.find("ul").removeClass("ulMall").addClass("ulMall-ie6");
                    styleMall.find("ul li").removeClass("li-color").addClass("li-color-ie6");
                    styleMall.find(".mallGroupRight").css("border-left-width", "1px");
                    styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize * 2) + "px")
                } else {
                    if (mallStyle == 1) {
                        styleMall.find("ul li").css({"margin-bottom": "-2px", "margin-top": "0px"});
                        styleMall.css("top", (parseInt(styleMall.css("top")) - 1) + "px");
                        if (f.isIE6()) {
                            styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize) + "px")
                        }
                    } else {
                        if (mallStyle == 0) {
                            styleMall.find(".mallGroupRight").css("height", (styleMall.find(".mallGroupRight").height() + liSize * 2) + "px")
                        }
                    }
                }
            }
        }

        function p(r, q, s) {
            if (typeof styleMall.find("ul").menuAim == "function") {
                t()
            }
            function t() {
                styleMall = $(".styleMall" + m);
                styleMall.find("ul").menuAim({
                    rowSelector: ".li-color",
                    activate: w,
                    enter: v,
                    deactivate: u,
                    exitMenu: x
                });
                function w(z) {
                    styleMall = $(".styleMall" + m);
                    styleMall.stop(true, true);
                    $(z).stop(true, true);
                    temThis = z;
                    subMallRight = $(z).children(".mallGroupRight");
                    if (q == 0) {
                        $(z).find(".displayRight").addClass("displayRight-hover");
                        $(z).css({"background-color": r, color: "#fff"})
                    } else {
                        if (q == 1) {
                            $(z).css("background-color", g(r, 0));
                            $(z).removeClass("bg-transtion")
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({"border-right": "1px solid " + r});
                                $(z).addClass("TMli-hover");
                                $(z).css({"border-color": r, color: r})
                            }
                        }
                    }
                    if (q == 0) {
                        $(z).find(".pdg_font_icon").css("color", "#fff")
                    }
                    if (f.isIE()) {
                        subMallRight.show()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.width(0);
                        subMallRight.css({opacity: 0, display: "block"});
                        subMallRight.animate({width: y, opacity: "1"}, 800, "easeOutQuint")
                    }
                    d = false;
                    if ($(z).children(".mallGroupRight").length <= 0 && q == 2) {
                        $(".styleMall" + m).find("ul").css({"border-right": ""});
                        $(z).css("border-right-width", "1px")
                    }
                }

                function v(z) {
                    if (typeof event != "undefined" && typeof event.target != "undefined" && typeof event.target.className != "undefined" && (event.target.className.indexOf("mallGroupRight" + m) >= 0 || event.target.className.indexOf("secGroup") >= 0 || event.target.className.indexOf("thdGroup") >= 0)) {
                        return
                    }
                    styleMall = $(".styleMall" + m);
                    styleMall.stop(true, true);
                    temThis = z;
                    subMallRight = $(z).children(".mallGroupRight");
                    if (!d) {
                        return
                    }
                    if (q == 0) {
                        $(z).find(".displayRight").addClass("displayRight-hover");
                        $(z).css({"background-color": r, color: "#fff"})
                    } else {
                        if (q == 1) {
                            $(z).css("background-color", g(r, 0))
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({"border-right": "1px solid " + r});
                                $(z).addClass("TMli-hover");
                                $(z).css({"border-color": r, color: r})
                            }
                        }
                    }
                    if (q == 0) {
                        $(z).find(".pdg_font_icon").css("color", "#fff")
                    }
                    if (f.isIE()) {
                        subMallRight.show()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.width(0);
                        subMallRight.animate({width: y, opacity: "show"}, 800, "easeOutQuint")
                    }
                    d = false;
                    if ($(z).children(".mallGroupRight").length <= 0 && q == 2) {
                        $(".styleMall" + m).find("ul").css({"border-right": ""});
                        $(z).css("border-right-width", "1px")
                    }
                }

                function u(z) {
                    styleMall = $(".styleMall" + m);
                    subMallRight = $(z).children(".mallGroupRight");
                    if (q == 0) {
                        if (f.isIE() || e($(z).css("background-color"))) {
                            $(z).css({"background-color": "#fff", color: "#4a4949"})
                        } else {
                            $(z).animate({"background-color": "#fff", color: "#4a4949"}, 100, "linear")
                        }
                        $(z).find(".displayRight").removeClass("displayRight-hover")
                    } else {
                        if (q == 1) {
                            if (f.isIE() || e($(z).css("background-color"))) {
                                $(z).css("background-color", r)
                            } else {
                                $(z).addClass("bg-transtion").css("background-color", r)
                            }
                        } else {
                            if (q == 2) {
                                styleMall.find("ul").css({"border-right": ""});
                                $(z).removeClass("TMli-hover");
                                $(z).css({"border-color": "", color: ""})
                            }
                        }
                    }
                    if (f.isIE()) {
                        subMallRight.hide()
                    } else {
                        $(".mallGroupRight").stop(true, true);
                        var y = subMallRight.width();
                        subMallRight.animate({width: 0, opacity: 0}, 1000, "easeOutExpo", function () {
                            $(z).children(".mallGroupRight").width(y);
                            $(z).children(".mallGroupRight").css({opacity: 1, display: "none"})
                        })
                    }
                    if (q == 0) {
                        $(z).find(".pdg_font_icon").removeAttr("style")
                    }
                }

                function x(y) {
                    var z = $(y).children("li-color");
                    styleMall = $(".styleMall" + m);
                    if (q == 0) {
                        $(z).find(".pdg_font_icon").removeAttr("style")
                    }
                }
            }
        }

        function o(u, t) {
            var q = u.find(".secGroupBox");
            if (q.length == 0) {
                u.prev(".displayRight").hide();
                u.remove();
                return
            }
            if (mallStyle == 0) {
                return
            }
            u.show();
            var v = true;
            if (styleMall.css("display") == "none") {
                v = false;
                styleMall.show()
            }
            var s = 0;
            var r = u.find(".thdGroup");
            isNeedChangeWidth = true;
            $.each(r, function (w, x) {
                if (r.eq(w).html() == "" || r.eq(w).html() == null) {
                    r.eq(w).hide();
                    r.eq(w).prev(".point2").hide();
                    return
                }
                if (r.eq(w).height() > 30) {
                    isNeedChangeWidth = false
                }
                s = (s > r.eq(w).width() ? s : r.eq(w).width())
            });
            $.each(r, function (w, x) {
                r.eq(w).width(s)
            });
            if (isNeedChangeWidth) {
                if (!f.isIE()) {
                    u.css("opacity", 1)
                }
                u.width(s + 232)
            }
            u.hide();
            if (!v) {
                styleMall.hide()
            }
        }

        function l(D, C) {
            if (mallStyle != 0) {
                return
            }
            var q = true;
            if (styleMall.css("display") == "none") {
                q = false;
                styleMall.css({opacity: 0, display: "block"})
            }
            D.css({opacity: 0, display: "block"});
            var y = D.find(".groupCol1").selector;
            var v = D.find(".groupCol2").selector;
            var u = D.find(".groupCol3").selector;
            var E = D.find(".secGroupBox");
            var t = false;
            $.each(E, function (F, G) {
                if (t) {
                    F++
                }
                if ((F + 1) % 3 == 1) {
                    if (t) {
                        F--
                    }
                    if ($(y).height() - $(v).height() > 100) {
                        E.eq(F).appendTo(v).show();
                        t = true;
                        return
                    }
                    E.eq(F).appendTo(y).show()
                } else {
                    if ((F + 1) % 3 == 2) {
                        if (t) {
                            F--
                        }
                        if ($(v).height() - $(u).height() > 100) {
                            E.eq(F).appendTo(u).show();
                            t = true;
                            return
                        }
                        E.eq(F).appendTo(v).show()
                    } else {
                        if ((F + 1) % 3 == 0) {
                            if (t) {
                                F--
                            }
                            E.eq(F).appendTo(u).show()
                        }
                    }
                }
            });
            var A = $(y).height();
            var z = $(v).height();
            var x = $(u).height();
            var r = A > z ? (A > x ? A : x) : (z > x ? z : x);
            var s = D.height();
            var B = (r > s ? r : s);
            var w = 250 * 3;
            $(y).height(B);
            $(v).height(B);
            $(u).height(B);
            if ($(y).html() == "") {
                w -= 250
            }
            if ($(v).html() == "") {
                w -= 250
            }
            if ($(u).html() == "") {
                w -= 250
            }
            D.width(w);
            if (f.isIE6()) {
                if ($(y).width() > 249) {
                    $(y).width(249).css("overflow", "hidden")
                }
                if ($(v).width() > 249) {
                    $(v).width(249).css("overflow", "hidden")
                }
                if ($(u).width() > 249) {
                    $(u).width(249).css("overflow", "hidden")
                }
                D.find(".secGroupBox").css("margin-left", "15px")
            }
            if (!q) {
                styleMall.css({opacity: 1, display: "none"})
            }
            D.css({opacity: 1, display: "none"})
        }
    };
    function g(k, s) {
        if (k.indexOf("#") >= 0) {
            k = b(k)
        }
        var n, m, j;
        var o = k.split("(")[1].split(")")[0].split(",");
        var u = parseInt(o[0]);
        var l = parseInt(o[1]);
        var q = parseInt(o[2]);
        if (u >= l) {
            if (u >= q) {
                n = 25;
                if (l >= q) {
                    m = 23;
                    j = 20
                } else {
                    m = 20;
                    j = 23
                }
            } else {
                n = 23;
                if (l >= q) {
                    m = 25;
                    j = 20
                } else {
                    m = 20;
                    j = 25
                }
            }
        } else {
            if (u >= q) {
                n = 23;
                if (l >= q) {
                    m = 25;
                    j = 20
                } else {
                    m = 20;
                    j = 25
                }
            } else {
                n = 20;
                if (l >= q) {
                    m = 25;
                    j = 23
                } else {
                    m = 23;
                    j = 25
                }
            }
        }
        if (s == 0) {
            if (e(k)) {
                var i = parseInt(o[0]) - n <= 0 ? "0" : "" + (parseInt(o[0]) - n) + "";
                var p = parseInt(o[1]) - m <= 0 ? "0" : "" + (parseInt(o[1]) - m) + "";
                var t = parseInt(o[2]) - j <= 0 ? "0" : "" + (parseInt(o[2]) - j) + "";
                return "rgba(" + i + "," + p + "," + t + "," + o[3] + ")"
            } else {
                var i = parseInt(o[0]) - n <= 0 ? "0" : "" + (parseInt(o[0]) - n) + "";
                var p = parseInt(o[1]) - m <= 0 ? "0" : "" + (parseInt(o[1]) - m) + "";
                var t = parseInt(o[2]) - j <= 0 ? "0" : "" + (parseInt(o[2]) - j) + "";
                return "rgb(" + i + "," + p + "," + t + ")"
            }
        } else {
            if (e(k)) {
                var i = parseInt(o[0]) + n <= 0 ? "0" : "" + (parseInt(o[0]) + n) + "";
                var p = parseInt(o[1]) + m <= 0 ? "0" : "" + (parseInt(o[1]) + m) + "";
                var t = parseInt(o[2]) + j <= 0 ? "0" : "" + (parseInt(o[2]) + j) + "";
                return "rgba(" + i + "," + p + "," + t + "," + o[3] + ")"
            } else {
                var i = parseInt(o[0]) + n <= 0 ? "0" : "" + (parseInt(o[0]) + n) + "";
                var p = parseInt(o[1]) + m <= 0 ? "0" : "" + (parseInt(o[1]) + m) + "";
                var t = parseInt(o[2]) + j <= 0 ? "0" : "" + (parseInt(o[2]) + j) + "";
                return "rgb(" + i + "," + p + "," + t + ")"
            }
        }
    }

    function e(i) {
        return (i.indexOf("#") < 0 && (i.indexOf("rgba") >= 0 || i.indexOf("RGBA") >= 0))
    }

    function c(j) {
        if (!e(j)) {
            return
        }
        if (j.indexOf("transparent") >= 0) {
            return "rgb(255,255,255)"
        }
        var i = j.split("(")[1].split(")")[0].split(",");
        return "rgb(" + i[0] + "," + i[1] + "," + i[2] + ")"
    }

    function b(l) {
        var m = l.toLowerCase();
        if (m && m.indexOf("#") >= 0) {
            if (m.length === 4) {
                var n = "#";
                for (var k = 1; k < 4; k += 1) {
                    n += m.slice(k, k + 1).concat(m.slice(k, k + 1))
                }
                m = n
            }
            var j = [];
            for (var k = 1; k < 7; k += 2) {
                j.push(parseInt("0x" + m.slice(k, k + 2)))
            }
            return "RGB(" + j.join(",") + ")"
        } else {
            return m
        }
    }
})(Helper, Run, undefined);
Run.newsScroll = function (l) {
    var g = {pauseDuration: 2400, showDuration: 600, scrollMode: "up"}, c = $.extend({}, g, l),
        a = "scroll" + c.moduleId, d = $("#module" + c.moduleId), b = d.find(".newsList");
    b.stop(true, true);
    Helper.stopInterval(a);
    if (l.noScroll) {
        return
    }
    var h = b.parent(), k = b.find(".line"), j = b.find(".separatorLine");
    var f = c.leader || 0;
    d.on("mouseover.newsScroll", function () {
        b.stop();
        Helper.stopInterval(a);
        $(this).attr("scrollInterval", 0)
    }).on("mouseout.newsScroll", function () {
        if ($(this).attr("scrollInterval") == 0) {
            b.stop();
            Helper.stopInterval(a);
            Helper.startInterval(a);
            $(this).attr("scrollInterval", 1)
        }
    });
    (k, d).on("mouseover.newsScroll", function () {
        b.stop();
        Helper.stopInterval(a);
        $(this).attr("scrollInterval", 0)
    }).on("mouseout.newsScroll", function () {
        if ($(this).attr("scrollInterval") == 0) {
            b.stop();
            Helper.stopInterval(a);
            Helper.startInterval(a);
            $(this).attr("scrollInterval", 1)
        }
    });
    function i() {
        b.css({position: "relative"});
        h.css({overflow: "hidden", position: "relative"});
        b.height(b.height());
        h.height(b.height());
        function m() {
            if (c.scrollMode == "up") {
                var s = b.find(".line").eq(f);
                var o = b.find(".separatorLine").eq(f);
                var p = s.outerHeight();
                var q = o.is(":visible");
                var n = q ? o.outerHeight(true) : 0;
                if (f == 0) {
                    b.animate({top: "-=" + (p + n)}, c.showDuration * ((p + n) / 32), function () {
                        s.appendTo(b).end().hide().fadeIn(400);
                        o.appendTo(b).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                        s.insertAfter(b.find(".separatorLine:last")).end().hide().fadeIn(400);
                        o.insertAfter(b.find(".line:last")).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                        b.css({top: 0});
                        e()
                    })
                } else {
                    s.animate({opacity: 0}, 400).slideUp(600, function () {
                        s.css({opacity: 1}).appendTo(b).end().hide().fadeIn(400);
                        o.appendTo(b).end().hide();
                        if (q) {
                            o.fadeIn(400)
                        }
                    });
                    e()
                }
            } else {
                var t = b.find(".line:last");
                var v = b.find(".separatorLine:last");
                var q = v.is(":visible");
                var u = t.outerHeight();
                var r = q ? v.outerHeight(true) : 0;
                if (f == 0) {
                    b.animate({top: "+=" + (u + r)}, c.showDuration * ((u + r) / 32), function () {
                        v.insertBefore(b.find(".line").eq(f)).end().hide();
                        if (q) {
                            v.fadeIn(400)
                        }
                        t.insertBefore(b.find(".separatorLine").eq(f)).end().hide().fadeIn(400);
                        b.css({top: 0});
                        e()
                    })
                } else {
                    v.insertBefore(b.find(".line").eq(f)).end().hide();
                    if (q) {
                        v.slideDown().css({opacity: 0}).animate({opacity: 1})
                    }
                    t.insertBefore(b.find(".separatorLine").eq(f)).end().hide().slideDown().css({opacity: 0}).animate({opacity: 1});
                    e()
                }
            }
        }

        Helper.addTimeout(a, m, c.pauseDuration);
        Helper.startInterval(a)
    }

    function e() {
        i()
    }

    i()
};
Run.loadNewsList = function (h, g, c) {
    var d = $("#module" + h).find(".newsList");
    if (d.length == 0) {
        return
    }
    var a = {};
    d.find(".lineBody").each(function () {
        var p = $(this);
        var r = p.find(".newsType");
        if (r.length != 0) {
            var t = r.find(">a");
            var u = 0;
            $.each(t, function (w, v) {
                u += $(v).outerWidth() + Helper.getCssInt($(v), "margin-right")
            });
            var k = u + Helper.getCssInt(r, "padding-left") + Helper.getCssInt(r, "padding-right") + 5;
            if (typeof a.nt == "undefined" || a.nt < k) {
                if (k > 300) {
                    k = 300
                }
                a.nt = k
            }
        }
        var q = p.find(".newsTypePicList");
        if (q.length != 0) {
            var n = $(q).prevAll();
            var i = 0;
            $.each(n, function (v, w) {
                if (!$(w).hasClass("articlePhotoBox")) {
                    i += $(w).outerHeight()
                }
            });
            var l = p.outerWidth() - p.find(".articlePhotoBox").outerWidth();
            $(q).css("width", l + "px");
            var j = p.find(".articlePhotoBox img").outerHeight() - i - $(q).outerHeight();
            j = (j < 0 ? 0 : j);
            $(q).css("margin-top", j + "px")
        }
        var m = p.find(".newsCalendar");
        if (m.length != 0) {
            var o = m.find(">a").first().outerWidth();
            var s = o + Helper.getCssInt(m, "padding-left") + Helper.getCssInt(m, "padding-right") + 5;
            if (typeof a.nc == "undefined" || a.nc < s) {
                a.nc = s
            }
        }
    });
    var f = d.attr("newslisttype");
    d.find(".lineBody").each(function () {
        var l = $(this);
        if (!l.children().hasClass("J_noChangeStyle")) {
            if (c) {
                var i = l.width();
                var k, j;
                if (i <= 400) {
                    if (l.find(".newsType").length == 0) {
                        k = "100%";
                        j = "0%"
                    } else {
                        k = "60%";
                        j = "40%"
                    }
                } else {
                    if (l.find(".newsType").length == 0) {
                        k = "100%";
                        j = "0%"
                    } else {
                        k = "70%";
                        j = "30%"
                    }
                }
                l.find(".newsTitle").css("width", k);
                if (typeof a.nt != "undefined") {
                    l.find(".newsType").css("width", j).css("text-overflow", "ellipsis")
                }
            } else {
                if (f != 3) {
                    l.find(".newsTitle").css("width", "100%")
                }
                if (typeof a.nt != "undefined") {
                    l.find(".newsType").css("width", a.nt + "px").css("text-overflow", "ellipsis")
                }
            }
            if (typeof a.nc != "undefined" && f != 3) {
                l.find(".newsCalendar").css("width", a.nc + "px")
            }
            if (l.find(".newsCalendar").width() < l.find(".newsCalendar>a").width()) {
                l.find(".newsCalendar").width(l.find(".newsCalendar>a").width())
            }
        }
    });
    d.find(".word").css({display: "block", width: "100%"});
    if (Helper.isIE6() && (d.find(".wWLine").length > 0)) {
        d.find(".line").each(function () {
            $(this).height($(this).height())
        });
        if (d.find(".g_topFlag").length > 0) {
            d.find(".newsTitle a").each(function () {
                $(this).height($(this).height())
            })
        }
    }
    var b = d.find(".line").css("background-color");
    d.find(".line").find(".newsType, .J_newsTypePicList").find("a").hover(function (i) {
        i.stopPropagation();
        $(this).parents(".line").removeClass("g_hover");
        $(this).addClass("g_hover");
        $(this).css("background", b)
    }, function () {
        $(this).removeClass("g_hover");
        $(this).css("background", "")
    });
    d.find(".line").mouseover(function () {
        if (!$(this).hasClass("noHover")) {
            $(this).addClass("g_hover")
        }
    }).mouseleave(function () {
        if (!$(this).hasClass("noHover")) {
            $(this).removeClass("g_hover")
        }
    });
    var e = !!d.hasClass("pic-mixNewsList");
    if (e) {
        d.find(".mixNewsStyleTitleContainer").off("mouseover.stylePic").on("mouseover.stylePic", function (i) {
            $(this).addClass("g_hover");
            fixHoverNewsListPicTitleWidth(h, $(this))
        }).off("mouseleave.stylePic").on("mouseleave.stylePic", function (i) {
            $(this).removeClass("g_hover");
            fixHoverNewsListPicTitleWidth(h, $(this))
        })
    }
    d.find(".lineHeader").first().addClass("firstHeader");
    Run.initContentSplitLine(h, g)
};
function fixHoverNewsListPicTitleWidth(a, g) {
    var e = $("#module" + a), c = e.find(".newsList");
    var d = g.find(".mixNewsStyleTitle");
    if (d.attr("mix") == 1) {
        var b = c.find("td.newsTitle").width() || 0;
        var i = c.find(".articlePhotoBox img").width() || 0;
        var f = g.find(".mixNewsStyleDate").width() || 0;
        var h = parseInt(b) - parseInt(f) - parseInt(i) - 40;
        if (Helper.isIE6()) {
            h -= 20
        }
        d.css({width: h + "px"})
    }
}
Run.loadNewsNewStyle = function (n, b, q, m, f, h, i, p, r, s) {
    var c = $("#module" + n);
    var v = c.find(".newsList");
    var g = c.width();
    var j = Helper.top._isTemplateVersion2 ? "newsCircle_hover" : "g_block";
    if (v.length == 0) {
        return
    }
    if (b || q || h || i) {
        if (c.find("#pagenation" + n).length > 0) {
            c.find("#pagenation" + n).css({"text-align": "center"})
        }
        if (!i) {
            var l = v.find(".J_newsListLine");
            if (l.hasClass("top_with_line_icon")) {
                l.css("padding-left", "0")
            }
        }
        if (g <= 400) {
            if (!m) {
                $(v.find(".newsTitle").find("a")).each(function (w, x) {
                    $(this).css({height: "auto", "white-space": "normal", "word-break": "normal"});
                    if ($(this).html().length > 23) {
                        var y = $(this).html().substring(0, 20) + "...";
                        $(this).html(y)
                    }
                    if (h) {
                        $(this).parent().css({height: "auto"})
                    }
                })
            }
            if (!i) {
                v.find(".newsTitle").css({display: "inline"})
            }
            v.find(".newsTitle").find("a").css({display: "inline"})
        }
        v.find(".newsTypePicList_four").find(".newsTypePic").mouseover(function () {
            $(this).css({color: "#fff", background: "#bababa", "border-color": "#bababa"})
        }).mouseleave(function () {
            $(this).css({color: "#717171", background: "#fff", "border-color": "#dadada"})
        })
    }
    if (q || h || i) {
        v.find(".fk-newsListTitle").mouseenter(function () {
            if (h) {
                $(this).parent().parent().find(".newsCircle").addClass(j)
            }
            $(this).addClass("g_stress");
            $(this).addClass("g_hover")
        }).mouseleave(function () {
            if (h) {
                $(this).parent().parent().find(".newsCircle").removeClass(j)
            }
            $(this).removeClass("g_stress");
            $(this).removeClass("g_hover")
        })
    } else {
        if (b) {
            v.find(".J_titleLine").mouseenter(function () {
                var x = $(this).find(".fk-newsListTitle");
                var w = $(this).find(".fk-newsListDate");
                x.addClass("g_stress");
                x.addClass("g_hover");
                w.addClass("g_stress");
                w.addClass("g_hover")
            }).mouseleave(function () {
                var x = $(this).find(".fk-newsListTitle");
                var w = $(this).find(".fk-newsListDate");
                x.removeClass("g_stress");
                x.removeClass("g_hover");
                w.removeClass("g_stress");
                w.removeClass("g_hover")
            })
        }
    }
    if (b) {
        v.find(".newsCalendar").css({width: "23.5%"});
        if (g <= 400) {
            v.find(".newsTitle").css({width: "100%"});
            v.find(".newsCalendar").css({display: "block", "text-align": "left"})
        } else {
            v.find(".newsTitle").css({width: "75%"});
            if (Helper.isIE6() || Helper.isIE7()) {
                v.find(".newsTitle").css({"float": "left"});
                v.find(".newsCalendar").css({"float": "right"})
            }
        }
    }
    if (q) {
        var u = v.find(".J_newsListLine").width(), t;
        if (!!s) {
            if (r) {
                v.find(".lineBody").css({width: "100%"})
            } else {
                t = v.find(".J_newsListLine .J_newsCalendar").outerWidth(true);
                if (Helper.top._manageMode) {
                    v.find(".lineBody").css({
                        width: "-moz-calc(100% - " + t + "px)",
                        width: "-webkit-calc(100% - " + t + "px)",
                        width: "calc(100% - " + t + "px)"
                    })
                } else {
                    v.find(".lineBody").width(parseInt(u - t))
                }
            }
        } else {
            if (g <= 400) {
                if (!f) {
                    v.find(".newsCalendar").hide()
                }
                v.find(".lineBody").css({width: "100%"})
            } else {
                v.find(".newsCalendar").show();
                v.find(".lineBody").css({width: "84%"})
            }
        }
    }
    if (h) {
        if (g <= 400) {
            v.find(".newsCircleOuter").css({margin: "5px 8px 0px 0"});
            v.find(".lineBody").css({width: "100%"});
            v.find(".newsTitle").parent().css({width: "80%"});
            v.find(".J_timeLine").css({left: "9px"});
            v.find(".newsCalendar").css({"margin-left": "30px"})
        }
        var e = v.height();
        var d = v.find(".newsCircleOuter");
        var a = v.find(".newsCalendar").width();
        if (d.length == 0) {
            return
        }
        var k = d.position().left + parseInt(d.css("margin-left").replace("px", "")) + d.width() / 2;
        if (Helper.isIE6() || Helper.isIE7()) {
            v.find(".J_timeLine").css({
                height: e - 20 + "px",
                left: d.position().left + d.width() / 2 + parseInt(d.css("margin-left").replace("px", "")) + a + "px"
            })
        } else {
            v.find(".J_timeLine").css({height: e - 20 + "px", left: k + "px"})
        }
    }
    if (i) {
        if (g <= 400) {
            v.find(".line").css({"margin-left": "", width: "198px"});
            if (!p) {
                v.find(".J_articlePhotoBox").find(".cutImgPanel").each(function (x, z) {
                    var y = $(this).find("img").width() / $(this).find("img").height();
                    var w = (198 / y - 124) / 2;
                    $(this).parent().css({width: "198px", height: "124px"});
                    $(this).css({height: "124px", bottom: w + "px"});
                    $(this).find("img").css({width: "198px", height: (198 / y) + "px"})
                });
                v.find(".articlePhotoBox").find("img").each(function (w, x) {
                    if ($(this).attr("_defimg")) {
                        $(this).css({width: "198px", height: "124px"})
                    }
                    $(this).parent().css({width: "198px", height: "124px"})
                })
            }
        } else {
            var o = 0;
            $(v.find(".line")).each(function (w, x) {
                if ($(this).height() > o) {
                    o = $(this).height()
                }
                if (o > 550) {
                    o = 550
                }
            });
            v.find(".line").css({height: o + "px"})
        }
    }
};
Run.getNewsListStyleData = function (c) {
    var b = Helper.top.newsListStyleData, a;
    if (!b) {
        return
    }
    a = b["newsListStyle" + c] || {};
    return a
};
Run.setNewsListImgSize = function (l, p) {
    var e = $("#module" + l), t = Run.getModuleAttrPattern(l).newsList, u = e.find("#newsList" + l),
        f = e.find(".J_newsListLine"), o = f.find(".J_articlePicHref"), r = e.find(".J_articlePhotoBox"),
        n = o.find(".J_newsListPic"), c = Run.getNewsListStyleData(l), d = t.tw || false, m = t.ps.t || false,
        g = c.isNewModuleStyleFour || false, i = parseFloat(c.picPaddingRight), q = parseFloat(c.picPaddingBottom),
        j = c.pictureDefaultHeight || 107, k = c.pictureDefaultWidth || 152, b = e.width(), h, s, a;
    if (p) {
        h = t.ps.w;
        s = t.ps.h
    }
    if (n.length < 1 && o.length < 1) {
        return
    }
    if (p) {
        n.css({height: s, width: h});
        o.css({height: s, width: h});
        r.css({marginBottom: q, marginRight: i})
    } else {
        if (g) {
            f.width(k)
        }
        o.css({height: j, width: k});
        r.css({marginBottom: q, marginRight: i})
    }
    if (g) {
        if (b <= 400) {
            f.css({"margin-left": "", width: "198px", height: "auto"});
            if (!m) {
                Run.setNewsListDefaultPicSize(e)
            }
        } else {
            f.css({"margin-left": "30px", width: h});
            Run.setNewsListLineMaxHeight(f)
        }
    }
    Run.resetNewScroll(l, parseInt(t.ls.t))
};
Run.setNewsClassifyStyle = function (d, f) {
    var a, n, k, e, q, g, b, l, i, p, c, j, m, o, h;
    m = Run.getModuleAttrPattern(d);
    o = Helper.top.$("#module" + d);
    $newsModule = o.find("#newsList" + d);
    a = $newsModule.find(".J_lineBody");
    i = a.find(".J_articlePhotoBox");
    p = f ? "newsList" : "newsResult";
    c = ".J_" + p + "Pic";
    j = m[p];
    h = parseInt(j.tw);
    a.each(function (r, s) {
        _this = $(s);
        n = _this.find(".J_newsTypePicList");
        if (n.length != 0) {
            l = n.prevAll(":not('.J_articlePhotoBox')");
            b = 0;
            $.each(l, function (t, u) {
                b += $(u).outerHeight()
            });
            k = _this.outerWidth() - i.eq(r).outerWidth();
            n.css("width", k + "px");
            g = _this.find(c).outerHeight() - b - n.outerHeight();
            g = (g < 0 ? 0 : g);
            if (h == 1 || h == -1 || g < 0) {
                g = 0
            }
            n.css("margin-top", g + "px")
        }
    })
};
Run.refreshNewsListStyle = function (c, b) {
    var a;
    if (b) {
        a = Run.getModuleAttrPattern(c).newsList;
        Run.setNewsListImgSize(c, parseInt(a.ps.t));
        Run.refreshNewsTimeLine(c)
    }
    Run.setNewsClassifyStyle(c, b)
};
Run.refreshNewsTimeLine = function (l) {
    var e = Run.getNewsListStyleData(l), q = Run.getModuleAttrPattern(l).newsList, r, d, f, n, h, c, a, j, i, s, m, g,
        b, o, k, p;
    g = e.isNewModuleStyleOne;
    s = e.isNewModuleStyleTwo;
    m = e.isNewModuleStyleThree;
    b = e.isNewModuleStyleFour;
    p = e.smallWidthHideDate;
    if (!(s || m || g || b)) {
        return
    }
    r = $("#newsList" + l);
    n = r.find(".J_newsCalendar");
    i = r.find(".J_lineBody");
    d = r.width();
    o = r.find(".J_newsTitle");
    if (g) {
        n.css({width: "23.5%"});
        if (d <= 400) {
            o.css({width: "100%"});
            n.css({display: "block"})
        } else {
            n.css({display: "inline-block"});
            o.css({width: "75%"})
        }
    } else {
        if (s) {
            if (!p) {
                if (d <= 400) {
                    if (!e.newModuleStyleTwo_horizontal) {
                        n.hide()
                    }
                    i.css({width: "100%"})
                } else {
                    n.show();
                    i.css({width: "84%"})
                }
            }
        } else {
            if (m) {
                h = r.find(".J_timeLine");
                f = r.find(".newsCircleOuter");
                if (d <= 400) {
                    f.css({margin: "5px 8px 0px 0"});
                    i.css({width: "100%"});
                    o.parent().css({width: "80%"});
                    h.css({left: "9px"});
                    n.css({"margin-left": "30px"})
                }
                c = r.height();
                a = n.width();
                if (f.length == 0) {
                    return
                }
                j = f.position().left + parseInt(f.css("margin-left").replace("px", "")) + f.width() / 2;
                h.css({height: c - 20 + "px", left: j + "px"})
            }
        }
    }
};
Run.setNewsListDefaultPicSize = function (a) {
    $articlePhotoBox = a.find(".J_articlePhotoBox");
    $articlePhotoBox.find(".cutImgPanel").each(function (c, e) {
        var d = $(this).find("img").width() / $(this).find("img").height();
        var b = (198 / d - 124) / 2;
        $(e).parent().css({width: "198px", height: "124px"});
        $(e).css({height: "124px", bottom: b + "px"});
        $(e).find("img").css({width: "198px", height: (198 / d) + "px"})
    });
    $articlePhotoBox.find("img").each(function (b, c) {
        if ($(c).attr("_defimg")) {
            $(c).css({width: "198px", height: "124px"})
        }
        $(c).parent().css({width: "198px", height: "124px"})
    })
};
Run.resetNewScroll = function (a, h) {
    var i = $("#module" + a), k = Run.getModuleAttrPattern(a).newsList, b = "scroll" + a, c = i.find("#newsList" + a),
        d = "down", j = c.find(".J_newsListLine"), g, f, e;
    c.stop(true, true);
    Helper.top.Helper.stopInterval("scroll" + a);
    j.off("mouseover.newsScroll mouseout.newsScroll");
    i.off("mouseover.newsScroll mouseout.newsScroll");
    c.css({height: "", top: "", position: ""});
    c.parent().css({height: "", overflow: "", position: ""});
    if (h) {
        d = (parseInt(k.ls.d)) ? "up" : "down";
        g = Run.getNewsListStyleData(a);
        f = g.isPictureStyle;
        e = f ? 1 : 0;
        c.height("auto");
        c.parent().height("auto");
        Helper.top.Run.newsScroll({moduleId: a, scrollMode: d, leader: e, noScroll: false})
    }
};
Run.setNewsListLineMaxHeight = function (b) {
    var a = 0;
    if (b.length < 1) {
        return
    }
    b.css("height", "auto");
    b.each(function (c, d) {
        $elem = $(d);
        if ($elem.height() > a) {
            a = $elem.height()
        }
        if (a > 550) {
            a = 550
        }
    });
    b.css({height: a + "px"})
};
Run.afterAddNews = function (a) {
    if (typeof(a) != "undefined") {
        document.location.reload()
    }
};
Run.newsAddComment = function () {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行评论。");
        return
    }
    var b = $.trim($("#commentCreator").val());
    var g = $("#commentCreator").attr("minlength");
    var f = $("#commentInput").val();
    var h = $("#commentInput").attr("minlength");
    var i = $("#validateCodeInput").val();
    var a = $("#commentInput").attr("newsId");
    var c = $("#submitTips").attr("isDefaultTips");
    if (typeof(c) == "string" && c == "true") {
        $("#submitTips").show();
        return
    }
    if (typeof(b) != "string") {
        $("#submitTips").text(LS.creatorTips).show();
        return
    }
    if (typeof(f) != "string" || "" == f) {
        $("#submitTips").text(LS.commentNotEmpty).show();
        return
    }
    if (f.length < h) {
        $("#submitTips").text(Helper.format(LS.commentLenTips, Helper.encodeHtml(h))).show();
        return
    }
    if (!$(".J_newsCommentCaptcha").hasClass("captchaHide")) {
        if (typeof(i) != "string" || "" == i) {
            $("#submitTips").text(LS.memberInputCaptcha).show();
            return
        }
    }
    var d = {validateCode: i, newsId: a, creator: b, comment: f};
    var e = "ajax/newsComment_h.php?cmd=submitComment";
    $("#submitTips").text(LS.siteFormSubmitIng).show();
    $.ajax({
        type: "POST", url: e, data: d, error: function () {
            Helper.ing(LS.systemError, false);
            $("#msgBoardCaptchaImg").click()
        }, success: function (j) {
            var k = jQuery.parseJSON(j);
            if (!k || !k.success) {
                $("#msgBoardCaptchaImg").click()
            }
            Helper.removeBg();
            switch (k.msg) {
                case 1:
                    $("#submitTips").text(LS.captchaError).show();
                    break;
                case 2:
                    $("#submitTips").text(LS.creatorError).show();
                    break;
                case 3:
                    $("#submitTips").text(LS.commentError).show();
                    break;
                case 4:
                    Helper.top.location.reload();
                    $("#submitTips").text(LS.submitSuccess).show();
                    break;
                case 5:
                    $("#submitTips").text(LS.paramError).show();
                    break;
                case 6:
                    $("#submitTips").html(Helper.format(LS.commentOnlyMember, '<a href="login.php?url=' + Helper.encodeUrl(window.location.href) + '">' + Helper.encodeHtml(LS.login) + "</a>")).show();
                    break;
                case 7:
                    $("#submitTips").text(LS.commentClosed).show();
                    break;
                case 8:
                    $("#submitTips").text(LS.commentSubmitError).show();
                    break;
                case 9:
                    $("#submitTips").text(LS.commentCountLimit).show();
                    break;
                case 10:
                    $("#submitTips").text(LS.msgBoardInputValidateCode).show();
                    if (k.needCode) {
                        $(".J_newsCommentCaptcha").removeClass("captchaHide")
                    }
                    break;
                default:
            }
        }
    })
};
Run.showNewsQRCode = function (c, a) {
    var b = ["<div id='newsQRCodeDisplay' class='webRunQRCodeDisplay'>", "<img title='' src='/qrCode.php?cmd=mobiDetailQR&id=", c, "&lcid=", a, "&t=1' >", "<span>", LS.newsQRCodeMsg, "</span>", "</div>"];
    Helper.top.$(b.join("")).appendTo("body");
    $("#newsQrCode").mouseenter(function (d) {
        $("#newsQRCodeDisplay").css("top", $(this).offset().top + "px");
        $("#newsQRCodeDisplay").css("left", ($(this).offset().left + 24) + "px");
        $("#newsQRCodeDisplay").show()
    }).mouseleave(function (d) {
        $("#newsQRCodeDisplay").hide()
    })
};
Run.initMixNews = function (l) {
    var g = l.leader || 0;
    var e = $("#module" + l.moduleId), b = e.find(".newsList"), i = b.parent();
    var d = b.find(".mixNewsStyleTitle");
    if (d.attr("mix") == 1) {
        var a = b.find("td.newsTitle").width() || 0;
        var f = b.find(".mixNewsStyleDate").width() || 0;
        var k = b.find(".articlePhotoBox img").width() || 0;
        var h = parseInt(a) - parseInt(f) - parseInt(k) - 40;
        if (Helper.isIE6()) {
            h -= 20
        }
        d.css({width: h + "px"});
        if (h < 1) {
            d.addClass("mixNewsStyleTitle-hide")
        } else {
            d.removeClass("mixNewsStyleTitle-hide")
        }
    }
    if (Helper.isIE6() && g != 0) {
        var j = b.find("td.newsTitle").height();
        b.find(".line").eq(0).css({height: j + "px"})
    }
    var c = Helper.top.$("#module" + l.moduleId);
    c.on("Helper_onModuleLayoutChange", function () {
        var p = $(this).find(".newsList");
        var t = p.parent();
        var s = p.find(".mixNewsStyleTitle");
        p.css({height: "auto"});
        t.css({height: "auto"});
        if (Helper.isIE6() && g != 0) {
            var m = p.find("td.newsTitle").height();
            p.find(".line").eq(0).css({height: m + "px"})
        }
        if (p.find(".mixNewsStyleTitle").attr("mix") == 1) {
            var r = p.find("td.newsTitle").width() || 0;
            var o = p.find(".mixNewsStyleDate").width() || 0;
            var n = p.find(".articlePhotoBox img").width() || 0;
            var q = parseInt(r) - parseInt(o) - parseInt(n) - 40;
            if (Helper.isIE6()) {
                q -= 20
            }
            p.find(".mixNewsStyleTitle").css({width: q + "px"});
            if (q < 1) {
                s.addClass("mixNewsStyleTitle-hide")
            } else {
                s.removeClass("mixNewsStyleTitle-hide")
            }
        }
        if (Helper.isIE6() && g != 0) {
            var m = p.find("td.newsTitle").height();
            p.find(".line").eq(0).css({height: m + "px"})
        }
    })
};
Run.setNewsListStylePattern = function (c, b) {
    var a = Helper.top.newsListStyleData;
    if (!a) {
        Helper.top.newsListStyleData = {}
    }
    Helper.top.newsListStyleData["newsListStyle" + c] = b
};
Run.setNewsModuleAttrPattern = function (d, a, c) {
    var b = Run.getModuleAttrPattern(d);
    if (!!b[a]) {
        b[a] = c
    }
};
Run.siteFormAdd = function (b, q, o, g, a, e, d) {
    if (_siteDemo) {
        Helper.ing("当前为“模板网站”，请先“复制网站”再进行提交。");
        return
    }
    var i = [];
    var p = o;
    var c = true;
    var l = 100;
    var f = 1000;
    var n = g;
    var m = $("#M" + b + "F" + q + "siteFormValidateCode");
    var j = m.val();
    var k = [];
    if (p.length > 0) {
        $.each(p, function (F, C) {
            if (C.hide) {
                return true
            }
            var A = C.id;
            var L = C.name;
            var B = C.must;
            var w = C.type;
            var z = C.size;
            var H = {};
            H.id = A;
            H.type = w;
            if (w == 0) {
                var J = $.trim($("#M" + b + "F" + q + "siteFormInput" + A).val());
                if (B && J == "") {
                    Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                    c = false;
                    return false
                }
                if (J.length > l) {
                    Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputMaxLength, Helper.encodeHtml(L), l), q, b);
                    c = false;
                    return false
                }
                H.val = J
            } else {
                if (w == 1) {
                    var t = $.trim($("#M" + b + "F" + q + "siteFormTextArea" + A).val());
                    if (B && t == "") {
                        Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                        c = false;
                        return false
                    }
                    if (t.length > f) {
                        Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputMaxLength, Helper.encodeHtml(L), f), q, b);
                        c = false;
                        return false
                    }
                    H.val = t
                } else {
                    if (w == 2) {
                        if (B && $("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").length == 0) {
                            Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitCheckIsEmpty, Helper.encodeHtml(L)), q, b);
                            c = false;
                            return false
                        }
                        if ($("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").length > 0) {
                            H.val = $("input[name=M" + b + "F" + q + "siteFormRadioR" + A + "]:checked").first().val()
                        } else {
                            H.val = ""
                        }
                    } else {
                        if (w == 3) {
                            if (B && $("input[name=M" + b + "F" + q + "siteFormCheckboxR" + A + "]:checked").length == 0) {
                                Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitCheckIsEmpty, Helper.encodeHtml(L)), q, b);
                                c = false;
                                return false
                            }
                            var D = [];
                            $("input[name=M" + b + "F" + q + "siteFormCheckboxR" + A + "]:checked").each(function (M, N) {
                                D.push($(this).val())
                            });
                            H.val = D.join("\n")
                        } else {
                            if (w == 4) {
                                if (B && ($("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").length == 0 || $("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").val() == "none")) {
                                    Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitCheckIsEmpty, Helper.encodeHtml(L)), q, b);
                                    c = false;
                                    return false
                                }
                                var s = [];
                                $("#M" + b + "F" + q + "siteFormSelect" + A + " option:selected").each(function (M, N) {
                                    s.push($(this).val())
                                });
                                H.val = s.join("\n")
                            } else {
                                if (w == 5) {
                                    return true
                                } else {
                                    if (w == 6) {
                                        var J = $("#M" + b + "F" + q + "siteFormInput" + A).val();
                                        if (B && J == "") {
                                            Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitCheckIsEmpty, Helper.encodeHtml(L)), q, b);
                                            c = false;
                                            return false
                                        }
                                        H.val = J
                                    } else {
                                        if (w == 7) {
                                            var v = $("#module" + b).find("#siteForm" + b + "fileName" + A);
                                            var I = {};
                                            if (B && v.attr("_tmpFileId") == "") {
                                                Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitCheckHasFileUpload, Helper.encodeHtml(L)), q, b);
                                                c = false;
                                                return false
                                            }
                                            if (v.attr("_tmpFileId") == "") {
                                                H.val = ""
                                            } else {
                                                H.val = v.attr("_fileId");
                                                I.tmpFileName = v.attr("_tmpFileName");
                                                I.fileId = H.val;
                                                I.tmpFileId = v.attr("_tmpFileId");
                                                k.push(I)
                                            }
                                        } else {
                                            if (w == 8) {
                                                var u = $("#M" + b + "F" + q + "siteFormSelectPhoneCT" + A).val();
                                                var K = $("#M" + b + "F" + q + "siteFormPhoneInput" + A).val();
                                                if (B && K == "") {
                                                    Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                                                    c = false;
                                                    return false
                                                }
                                                if (!Helper.isNationMobile(K)) {
                                                    Run.siteFormShowMsg(Helper.format(LS.mobileNumRegular, Helper.encodeHtml(L)), q, b);
                                                    c = false;
                                                    return false
                                                }
                                                H.val = u + K
                                            } else {
                                                if (w == 9) {
                                                    var G = $("#M" + b + "F" + q + "siteFormMailInput" + A).val();
                                                    if (B && G == "") {
                                                        Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                                                        c = false;
                                                        return false
                                                    }
                                                    if (!Helper.isEmail(G)) {
                                                        Run.siteFormShowMsg(Helper.format(LS.memberSignupUserAddItemCorrect, Helper.encodeHtml(L)), q, b);
                                                        c = false;
                                                        return false
                                                    }
                                                    H.val = G
                                                } else {
                                                    if (w == 10) {
                                                        var y = $("#M" + b + "F" + q + "siteFormIdentityInput" + A).val();
                                                        if (B && y == "") {
                                                            Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                                                            c = false;
                                                            return false
                                                        }
                                                        if (!Helper.isCardNo(y)) {
                                                            Run.siteFormShowMsg(Helper.format(LS.memberSignupUserAddItemCorrect, Helper.encodeHtml(L)), q, b);
                                                            c = false;
                                                            return false
                                                        }
                                                        H.val = y
                                                    } else {
                                                        if (w == 11) {
                                                            var x = $("#M" + b + "F" + q + "siteFormSelectProvince" + A).find("option:selected").attr("_val");
                                                            var E = $("#M" + b + "F" + q + "siteFormSelectCity" + A).find("option:selected").attr("_val");
                                                            var r = $("#M" + b + "F" + q + "siteFormSelectCounty" + A).find("option:selected").attr("_val");
                                                            if (B && (x == "-1" || E == "-1")) {
                                                                Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, Helper.encodeHtml(L)), q, b);
                                                                c = false;
                                                                return false
                                                            }
                                                            H.val = x + E + r
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            i.push(H)
        })
    }
    if (!c) {
        return false
    }
    if (n && j == "") {
        Run.siteFormShowMsg(Helper.format(LS.siteFormSubmitInputIsEmpty, m.attr("msg")), q, b);
        c = false;
        return false
    }
    if (!e) {
        e = ""
    }
    var h = "&submitContentList=" + Helper.encodeUrl($.toJSON(i));
    Run.siteFormShowMsg(LS.siteFormSubmitIng, q, b);
    if ((typeof($("#module" + b).data("siteFormAdd_is_reCommit")) == "undefined") || $("#module" + b).data("siteFormAdd_is_reCommit") == false) {
        $("#module" + b).data("siteFormAdd_is_reCommit", true);
        $.ajax({
            type: "post",
            url: "ajax/siteForm_h.php",
            data: "cmd=addSubmit&formId=" + q + "&submitContentList=" + Helper.encodeUrl($.toJSON(i)) + "&vCodeId=" + b + q + "&validateCode=" + j + "&tmpFileList=" + Helper.encodeUrl($.toJSON(k)),
            error: function () {
                $("#module" + b).data("siteFormAdd_is_reCommit", false);
                var s = Run.getDialogContent(false, Helper.format(LS.siteFormSubmitError));
                var r = {htmlContent: s, width: 205, height: 78};
                Run.popupBox(r)
            },
            success: function (r) {
                $("#module" + b).data("siteFormAdd_is_reCommit", false);
                r = $.parseJSON(r);
                if (r.success) {
                    Helper.top.$("#siteFormMsgM" + b + "F" + q).hide();
                    var t = Run.getDialogContent(true, Helper.format(LS.siteFormSubmitOk));
                    var s = {htmlContent: t, width: 205, height: 78, autoClose: 3000};
                    Run.popupBox(s);
                    setTimeout(function () {
                        location.href = e
                    }, 300);
                    Run.siteFormValidation(q, b);
                    Helper.top.$("#module" + b + " .siteForm input[type=text]").val("");
                    Helper.top.$("#module" + b + " .siteForm textarea").val("");
                    Helper.top.$("#module" + b + " .siteForm input[type=radio]").each(function () {
                        $(this)[0].checked = false
                    });
                    Helper.top.$("#module" + b + " .siteForm input[type=checkbox]").each(function () {
                        $(this)[0].checked = false
                    });
                    if (Helper.top.$("#module" + b + " .siteForm select")[0] != undefined) {
                        Helper.top.$("#module" + b + " .siteForm select")[0].selectedIndex = 0
                    }
                    Helper.top.$("#module" + b).find(".siteFormFileName").html(LS.siteFormSubmitNotSeletcFile);
                    Helper.top.$("#module" + b).find(".siteFormFileName").removeAttr("_tmpFileId").removeAttr("_tmpFileName").removeAttr("title").removeAttr("_fileId")
                } else {
                    if (r.rt == -4) {
                        Run.siteFormShowMsg(LS.siteFormSubmitCountLimit, q, b)
                    } else {
                        if (r.rt == -7) {
                            Run.siteFormShowMsg(LS.siteImgFull, q, b)
                        } else {
                            if (r.rt == -20) {
                                Run.siteFormShowMsg(r.msg, q, b)
                            } else {
                                if (r.rt == -401) {
                                    Run.siteFormShowMsg(LS.siteFormSubmitValidateCodeErr, q, b);
                                    $("#M" + b + "F" + q + "siteFormValidateCode").val("");
                                    Run.siteFormValidation(q, b)
                                } else {
                                    Helper.top.$("#siteFormMsgM" + b + "F" + q).hide();
                                    var t = Run.getDialogContent(false, Helper.format(LS.siteFormSubmitError));
                                    var s = {htmlContent: t, width: 205, height: 78};
                                    Run.popupBox(s)
                                }
                            }
                        }
                    }
                    if (r.needCode) {
                        Run.siteFormShowMsg(r.msg, q, b);
                        $("#module" + b + " .J_formValidation").removeClass("siteFormValidationHide")
                    }
                }
            }
        })
    }
};
Run.fixLowIePlaceholder = function (c, b) {
    var a = false;
    if (Helper.isIE) {
        if (Helper.isIE6() || Helper.isIE7() || Helper.isIE8() || Helper.isIE9()) {
            a = true
        }
    }
    if (!a) {
        $(Helper.top.$("#module" + b + "").find(".resize:not(select)")).each(function () {
            var d = $(this).attr("_placeHolder");
            $(this).attr("placeHolder", d)
        })
    } else {
        remind = function (e, g) {
            var f = g, d = e.defaultValue;
            if (!d) {
                e.val(f).addClass("phcolor")
            }
            e.focus(function () {
                if (e.val() == f) {
                    $(this).val("")
                }
            });
            e.blur(function () {
                if (e.val() == "") {
                    $(this).val(f).addClass("phcolor")
                }
            });
            e.keydown(function () {
                $(this).removeClass("phcolor")
            })
        };
        $(Helper.top.$("#module" + b + "").find(".resize:not(select)")).each(function () {
            var d = $(this).attr("_placeHolder");
            remind($(this), d)
        })
    }
};
Run.siteFormNotLogin = function (d, c) {
    var b = Helper.encodeUrl(Helper.top.location.href);
    var a = LS.siteFormSubmitNotLogin + "<a href='login.php?url=" + b + "'>" + LS.login + "</a>" + LS.period;
    Run.siteFormShowMsg(a, d, c)
};
Run.siteFormShowMsg = function (c, b, a) {
    Helper.top.$("#siteFormMsgM" + a + "F" + b).show();
    Helper.top.$("#siteFormMsgM" + a + "F" + b).html(c)
};
Run.siteFormTimeBtn = function () {
    $(".siteFormTimer6").each(function (b, c) {
        var a = parseInt($.format.date(new Date(), "yyyy")) + 10;
        a = "1900:" + a;
        $(c).on("mousedown", function () {
            $(this).datepicker({
                dateFormat: "yy-mm-dd",
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                yearRange: a,
                onSelect: function () {
                    $(this).addClass("timeButtonInputChange")
                }
            })
        })
    })
};
Run.siteFormValidation = function (b, a) {
    $("#M" + a + "F" + b + "validateCodeImg").attr("src", "validateCode.php?" + parseInt(Math.random() * 1000) + "&vCodeId=" + a + b)
};
Run.fixRunFormStyle = function (f, a, b, d, i) {
    Helper.top.$(".siteFormItem_N_U").find(".F" + f + "siteFormItemShowVal").find("textarea").parent().css({height: "102px"});
    if (Helper.top.$("#module" + a + "").width() <= 400) {
        if (Helper.top.$("#module" + a + "").find(".siteFormItemTable_N_U").is("table")) {
            $(Helper.top.$("#module" + a + "").find(".siteFormItemTable_N_U")).css({padding: "0"});
            $(Helper.top.$("#module" + a + "").find(".siteForm")).css({padding: "0 25px"})
        }
        if ($(Helper.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".siteFormItemCheckItem_N_U_A")).length > 0) {
            $(Helper.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A")).css({"margin-right": "12px"});
            $(Helper.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A").find("input")).css({"float": "left"});
            $(Helper.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_A").find("label")).each(function () {
                $(this).wrapAll("<div style='float:left;width:100px;'></div>")
            })
        }
        if ($(Helper.top.$("#module" + a + "").find(".siteFormValidate_N_U")).length > 0) {
            if (!d) {
                $(Helper.top.$("#module" + a + "").find(".siteFormValidate_N_U").find(".siteFormValidate")).css({margin: "4px 0 0 0"});
                $(Helper.top.$("#module" + a + "").find(".siteFormValidate_N_U").find(".star")).css({"margin-top": "4px"})
            }
        }
        if ($(Helper.top.$("#module" + a + "").find(".siteFormValidate_N_U")).length > 0) {
            $(Helper.top.$("#module" + a + "").find(".siteFormValidate_N_U").find("input")).css({
                width: "92%",
                "max-width": "400px"
            })
        }
        if ($(Helper.top.$("#module" + a + "").find(".faiButton")).length > 0) {
            $(Helper.top.$("#module" + a + "").find(".faiButton")).css({width: "95%"})
        }
        if ($(Helper.top.$("#module" + a + "").find("#buttonStyle")).length > 0) {
            if (d) {
                if (Helper.top.$("#module" + a + "").width() <= 220) {
                    $(Helper.top.$("#module" + a + "").find("#buttonStyle").find(".s_ibutton")).css({width: "100%"})
                }
                $(Helper.top.$("#module" + a + "").find("#buttonStyle")).css({width: "100%"})
            } else {
                $(Helper.top.$("#module" + a + "").find("#buttonStyle")).css({width: "77%"})
            }
        }
        if ($(Helper.top.$("#module" + a + "").find(".address-resize")).length > 0) {
            $(Helper.top.$("#module" + a + "").find(".address-resize")).find(".three-resize").css({
                width: "94%",
                "margin-bottom": "10px"
            });
            $(Helper.top.$("#module" + a + "").find(".address-resize")).find(".three-resize").last().css({"margin-bottom": ""});
            var c = $(Helper.top.$("#module" + a + "").find(".address-resize").find("select").first()).width();
            $(Helper.top.$("#module" + a + "").find(".address-resize").parent().find(".star")).css({
                position: "absolute",
                left: c + 25 + "px"
            })
        }
        if ($(Helper.top.$("#module" + a + "").find(".phone-resize")).length > 0) {
            $(Helper.top.$("#module" + a + "").find(".phone-resize")).find(".two-resize").first().css({
                width: "94%",
                "margin-bottom": "10px"
            });
            $(Helper.top.$("#module" + a + "").find(".phone-resize")).find(".two-resize").last().css({
                width: "93%",
                "margin-bottom": ""
            });
            var c = $(Helper.top.$("#module" + a + "").find(".phone-resize").find("select")).width();
            $(Helper.top.$("#module" + a + "").find(".phone-resize").parent().find(".star")).css({
                position: "absolute",
                left: c + 25 + "px"
            })
        }
    }
    if (Helper.top.$("#module" + a + "").find(".siteFormAddButton").find("#buttonStyle").find(".middle").width() > 241) {
        Helper.top.$("#module" + a + "").find(".siteFormAddButton").find("#buttonStyle").find(".middle").css({width: "240px"})
    }
    $(Helper.top.$(".siteFormItem_N_U").find("select")).each(function () {
        if ($(this).attr("id").indexOf("siteFormSelectPhoneCT") == -1) {
            $($(this).find("option")[0]).hide()
        }
    });
    if ($(Helper.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".siteFormItemCheckItem_N_U_F")).length > 0) {
        var h = Helper.top.$("#module" + a + "").find(".siteFormItemCheckItem_N_U_F").width();
        var g = (h / b - 10) + "px";
        var e = ((h / b - 54) <= 36) ? 36 : (h / b - 54) + "px";
        Helper.top.$("#module" + a + "").find(".siteFormRadioFix").css({width: g});
        Helper.top.$("#module" + a + "").find(".siteFormRadioCententFix").css({width: e})
    }
    if (i && i.length > 0) {
        $(Helper.top.$("#module" + a + "").find(".siteFormItem_N_U").find(".resize")).each(function () {
            var k = $(this).attr("_id");
            var l = $(this).attr("_show");
            for (var j = 0; j < i.length; j++) {
                if (i[j].wo != l) {
                    break
                }
                if (i[j].i == k) {
                    $(this).css({width: i[j].w * 100 + "%"});
                    $(this).attr("_width", i[j].w)
                }
            }
        })
    }
};
Run.siteFormFileUpload = function (h) {
    var j = h.fileSize;
    var i = h.siteFormItemId;
    var f = h.siteFormId;
    var t = h.moduleId;
    var e = h.fileTypeList;
    var q = h.buttonValue;
    var d = h.isModuleButtonStyle;
    var o = h.showType;
    var l = h.srcjQueryUploadPath;
    var s;
    var v;
    var g = document.documentElement || document.body;
    var k = $("#siteForm" + t + "fileUpload" + i);
    var b = k.parent().width();
    var c = Helper.top.$("#module" + t + "").width();
    var a = b * 0.31;
    var u;
    if (d) {
        if (c <= 400) {
            if (o) {
                a = (c - 60) * 0.95
            } else {
                a = (c - 10) * 0.75 * 0.92
            }
            if (a > 161) {
                a = 161
            }
        } else {
            if (a < 111) {
                a = 111
            } else {
                if (a > 161) {
                    a = 161
                }
            }
        }
    }
    if (!Helper.isIE()) {
        var p = {
            auto: true,
            fileTypeExts: e.join(""),
            multi: true,
            fileSizeLimit: j * 1024 * 1024,
            breakPoints: true,
            isBurst: false,
            saveInfoLocal: false,
            showUploadedPercent: true,
            showUploadedSize: true,
            removeTimeout: 9999999,
            post_params: {app: 21, type: 0},
            getFileSizeUrl: "/ajax/advanceUpload.php?cmd=_getUploadSize",
            uploader: "/ajax/advanceUpload.php?cmd=_mobiupload",
            onUploadSuccess: function (x, z) {
                var y = $.parseJSON(z);
                if (y.success) {
                    var w = {status: "end", id: x.id, title: "上传成功。"};
                    Helper.ing("文件: " + x.name + " 上传成功", true);
                    n("upload", y, t, i)
                } else {
                    var w = {status: "end", id: x.id, title: y.msg};
                    Helper.ing("文件:" + x.name + "，" + y.msg)
                }
            },
            onUploadError: function (w, x) {
                $("#progressBody_" + w.id).remove();
                $("#progressWrap_" + w.id).remove();
                Helper.ing("网络繁忙，文件:" + w.name + "上传失败，请稍后重试")
            }
        };

        function r() {
            s = k.uploadify(p);
            k.css("width", a + 2);
            k.on("click", function () {
                k.find("a")[0].click()
            })
        }

        if (typeof k.uploadify == "function") {
            r()
        } else {
            v = document.createElement("script");
            v.src = l;
            v.type = "text/javascript";
            g.appendChild(v);
            v.onload = function () {
                r()
            }
        }
    } else {
        if (d) {
            u = 5
        } else {
            u = 3
        }
        if (navigator.userAgent.toLowerCase().indexOf("se 2.x") > -1) {
            u = 6
        }
        var m = {
            file_post_name: "Filedata",
            upload_url: "/ajax/upsiteimg_h.php",
            button_placeholder_id: "siteForm" + t + "fileUpload" + i,
            file_size_limit: j + "MB",
            button_image_type: u,
            file_queue_limit: 1,
            requeue_on_error: false,
            button_height: d ? "34" : "22",
            button_width: d ? (a - 2) : "71",
            button_text: d ? "<span class='fk_btText'>" + q + "</span>" : "",
            button_text_style: d ? ".fk_btText{text-align:center; font-family: 微软雅黑; color: #666666;}" : "",
            button_text_top_padding: d ? 8 : "",
            post_params: {ctrl: "Filedata", app: 21, type: 0, isRunForm: true},
            file_types: e.join(""),
            file_dialog_complete_handler: function (w) {
                this._allSuccess = false;
                this.startUpload()
            },
            file_queue_error_handler: function (x, w, y) {
                switch (w) {
                    case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
                        Helper.ing(LS.siteFormSubmitCheckFileSizeErr, true);
                        break;
                    case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
                        Helper.ing("不允许的文件类型", true);
                        break;
                    case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:
                        Helper.ing("一次只能上传一个文件", true);
                        break;
                    default:
                        Helper.ing("请重新选择文件上传。", true);
                        break
                }
            },
            upload_success_handler: function (x, w) {
                var y = jQuery.parseJSON(w);
                this._allSuccess = y.success;
                this._sysResult = y.msg;
                if (y.success) {
                    Helper.ing(Helper.format(LS.siteFormSubmitFileUploadSucess, Helper.encodeHtml(x.name)), true);
                    n("upload", y, t, i)
                } else {
                    Helper.ing("文件" + x.name + "，" + y.msg)
                }
            },
            upload_error_handler: function (x, w, y) {
                if (w == -280) {
                    Helper.ing("文件取消成功", false)
                } else {
                    if (w == -270) {
                        Helper.ing("已经存在名称为" + x.name + "的文件。", true)
                    } else {
                        Helper.ing("服务繁忙，文件" + x.name + "上传失败，请稍候重试。")
                    }
                }
            },
            upload_complete_handler: function (w) {
                if (w.filestatus == SWFUpload.FILE_STATUS.COMPLETE) {
                    setTimeout(function () {
                        s.startUpload()
                    }, s.upload_delay)
                } else {
                    if (w.filestatus == SWFUpload.FILE_STATUS.ERROR) {
                        Helper.ing("服务繁忙，文件" + w.name + "上传失败，请稍候重试。")
                    }
                }
            },
            upload_start_handler: function (w) {
                Helper.enablePopupWindowBtn(0, "save", false);
                Helper.ing("读取文件准备上传", false)
            },
            view_progress: function (w, z, y, x) {
                Helper.ing("正在上传" + x + "%", false)
            }
        };
        s = SWFUploadCreator.create(m)
    }
    function n(L, G, M, D) {
        if (L == "upload") {
            var A = G.id;
            var I = G.name;
            var y = G.type;
            var F = G.size;
            var E = G.path;
            var z = G.createTime;
            var w = G.groupId;
            var B = "";
            var x = 100;
            var H = 100;
            var C = G.fileId;
            var J = $("#module" + M);
            var K = J.find("#siteForm" + M + "fileName" + D);
            J.find("#siteForm" + M + "FUDesc" + D).hide();
            K.show();
            K.html(I);
            K.attr("_tmpFileId", A).attr("_tmpFileName", I).attr("title", I).attr("_fileId", C)
        }
    }
};
Run.siteFormInputResize = function (d, c) {
    var a = Helper.top.$("#module" + c + "").find(".siteFormItem_N_U").find(".resize");
    var b = false;
    if (a.length < 1) {
        return
    }
    if (Helper.top.$("#module" + c + "").width() <= 400) {
        b = true
    }
    a.each(function () {
        var n = $(this), g = Helper.isIE8() ? $(document) : $(window), o = $("#g_main"), l, h, m, f = $(this), j, i = {};
        if (n.hasClass("resize")) {
            if (n.is("textarea")) {
                n.before("<div class='u-inputResize-w' style='height:100px;' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:100px;border-left:1px dashed #2b73ba;'></div></div>");
                n.after("<div class='u-inputResize-e' style='height:100px;' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:100px;border-left:1px dashed #2b73ba;'></div></div>")
            } else {
                n.before("<div class='u-inputResize-w' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:34px;border-left:1px dashed #2b73ba;'></div></div>");
                n.after("<div class='u-inputResize-e' title='可拖动调节宽度'><div style='position:absolute;width:3px;height:34px;border-left:1px dashed #2b73ba;'></div></div>")
            }
        }
        l = $(n).prev();
        h = $(n).next();
        if (!l.hasClass("u-inputResize-w") || !h.hasClass("u-inputResize-e")) {
            return
        }
        l.off("mousedown.fi").on("mousedown.fi", e);
        h.off("mousedown.fi").on("mousedown.fi", e);
        function e(q) {
            q = q || window.event;
            i.x = q.pageX;
            g.css("cursor", "n-resize!important");
            if ($(this).hasClass("u-inputResize-w")) {
                i.dir = "w";
                i.ptb = parseInt(f.css("width"))
            } else {
                if ($(this).hasClass("u-inputResize-e")) {
                    i.dir = "e";
                    i.ptb = parseInt(f.css("width"))
                }
            }
            i.elem = $(this);
            $(this).addClass("u-inputResize-show");
            i.ieFirstChange = $("#saveButton").hasClass("buttonDisabled");
            j = $("#dockTip").show().css({left: "-1000px;", top: "-1000px"});
            g.off("mousemove.fi").on("mousemove.fi", k);
            g.off("mouseup.fi").on("mouseup.fi", p);
            q.preventDefault()
        }

        function k(t) {
            t = t || window.event;
            var u = {x: t.pageX}, r, w, q = n.parent().width() * 0.3, s = n.parent().width() * 0.93, v = "";
            if (n.hasClass("phone-resize") || n.hasClass("address-resize")) {
                s = n.parent().width()
            }
            if (i.dir == "w") {
                r = i.x - u.x;
                w = i.ptb + r;
                w = w > q ? w : q;
                w = w > s ? s : w;
                w = Math.round(w);
                v = "宽度:"
            } else {
                if (i.dir == "e") {
                    r = u.x - i.x;
                    w = i.ptb + r;
                    w = w > q ? w : q;
                    w = w > s ? s : w;
                    w = Math.round(w);
                    v = "宽度:"
                }
            }
            n.css({width: w + "px"});
            j.html(v + w).css({left: t.pageX - 28, top: t.pageY - 40});
            Run.siteFormInputResizeLine(n, d, c);
            t.preventDefault()
        }

        function p(s) {
            s = s || window.event;
            i.dir = "";
            g.css("cursor", "");
            g.off("mousemove.fi");
            g.off("mouseup.fi");
            j.hide();
            i.elem.removeClass("u-inputResize-show");
            Helper.top.$("body").find(".inputResizeLine").hide();
            var r = n.width() / (n.parent().width() - 2);
            n.attr("_width", Math.round(r * 1000) / 1000);
            var q = Run.getModuleAttr(c);
            q.data.changed = true;
            Run.styleChanged();
            i = {};
            s.preventDefault()
        }
    })
};
Run.siteFormInputResizeLine = function (d, h, b) {
    var j = Helper.top.$("#module" + b + "").find(".siteFormItem_N_U").find(".resize"), m = j.length,
        k = $(j[0]).offset().top - 15 + "px", c = d.offset().left + d.width() + "px",
        l = ($(j[m - 1]).offset().top - $(j[0]).offset().top + 60) + "px", a = false;
    if (Helper.isIE) {
        if (Helper.isIE6() || Helper.isIE7() || Helper.isIE8()) {
            a = true
        }
    }
    if (a) {
        var g = [];
        for (var e = 0; e < j.length; e++) {
            if (!$(d).is(j[e])) {
                g.push(j[e])
            }
        }
        $(g).each(function () {
            var i = d.width();
            var o = $(this).width();
            if (d.hasClass("phone-resize") || d.hasClass("address-resize")) {
                i = i * 0.93
            }
            if ($(this).hasClass("phone-resize") || $(this).hasClass("address-resize")) {
                o = o * 0.93
            }
            var n = $(this).offset().left + o + "px";
            if (Math.abs(i - o) < 3) {
                if (!Helper.top.$("body").find(".inputResizeLine").is("div")) {
                    Helper.top.$("body").append("<div class='inputResizeLine' style='display:none;height:" + l + ";width:1px;position:absolute;left:" + n + ";top:" + k + ";border-right:1px solid #2b73ba;'></div>")
                } else {
                    Helper.top.$("body").find(".inputResizeLine").css({left: n, top: k, height: l})
                }
                Helper.top.$("body").find(".inputResizeLine").show();
                return false
            } else {
                Helper.top.$("body").find(".inputResizeLine").hide()
            }
        })
    } else {
        function f(i) {
            return !$(i).is(d)
        }

        $($.makeArray(j).filter(f)).each(function () {
            var i = d.width();
            var o = $(this).width();
            if (d.hasClass("phone-resize") || d.hasClass("address-resize")) {
                i = i * 0.93
            }
            if ($(this).hasClass("phone-resize") || $(this).hasClass("address-resize")) {
                o = o * 0.93
            }
            var n = $(this).offset().left + o + "px";
            if (Math.abs(i - o) < 3) {
                if (!Helper.top.$("body").find(".inputResizeLine").is("div")) {
                    Helper.top.$("body").append("<div class='inputResizeLine' style='display:none;height:" + l + ";width:1px;position:absolute;left:" + n + ";top:" + k + ";border-right:1px solid #2b73ba;'></div>")
                } else {
                    Helper.top.$("body").find(".inputResizeLine").css({left: n, top: k, height: l})
                }
                Helper.top.$("body").find(".inputResizeLine").show();
                return false
            } else {
                Helper.top.$("body").find(".inputResizeLine").hide()
            }
        })
    }
};
Run.siteFormAddressInit = function (i, c, b, f, j) {
    var g = [];
    var h;
    var d;
    var a;
    var e;
    if (f == 2052 || f == 1028) {
        h = site_cityUtil.getProvince()
    } else {
        h = site_cityUtil.getProvinceEn()
    }
    $.each(h, function (k, l) {
        if (f == 2052 || f == 1028) {
            g.push("<option _val='" + l.name + "' value='" + l.id + "'>" + site_cityUtil.simpleCityNameStr(l.name) + "</option>")
        } else {
            g.push("<option _val='" + l.name + "' value='" + l.id + "'>" + site_cityUtil.simpleCityNameStrEn(l.name) + "</option>")
        }
    });
    $("#M" + b + "F" + c + "siteFormSelectProvince" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + g.join("")).change(function (k) {
        d = $("#M" + b + "F" + c + "siteFormSelectProvince" + i + "").val();
        if (isNaN(d) || d <= 0) {
            $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").html("").html("<option value='-1'>" + j + "</option>");
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option value='-1'>" + j + "</option>")
        }
        a = [];
        if (f == 2052 || f == 1028) {
            citylist = site_cityUtil.getCities(d)
        } else {
            citylist = site_cityUtil.getCitiesEn(d)
        }
        $.each(citylist, function (l, m) {
            a.push("<option _val='" + m.name + "' value='" + m.id + "' >" + m.name + "</option>")
        });
        $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").removeAttr("disabled");
        $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + a.join("")).unbind().bind("change", function (l) {
            cityId = $("#M" + b + "F" + c + "siteFormSelectCity" + i + "").val();
            if (isNaN(cityId) || cityId <= 0) {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>")
            }
            e = [];
            if (f == 2052 || f == 1028) {
                countylist = site_cityUtil.getCounty(cityId)
            } else {
                countylist = site_cityUtil.getCountyEn(cityId)
            }
            $.each(countylist, function (m, n) {
                e.push("<option _val='" + n.name + "' value='" + n.id + "' >" + n.name + "</option>")
            });
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").removeAttr("disabled");
            $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").html("").html("<option _val='-1' value='-1'>" + j + "</option>" + e.join("")).unbind().bind("change", function (m) {
            });
            if ($("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").find("option").length <= 1 && cityId != -1) {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").hide()
            } else {
                $("#M" + b + "F" + c + "siteFormSelectCounty" + i + "").show()
            }
        })
    })
};
Run.addFlashModuleFlash = function (a) {
    var c = "Opaque";
    if (a.transparent != 1) {
        c = "transparent"
    }
    var b = ['<embed id="' + a.moduleId + '" width="' + a.width + '" height="' + a.height + '" allowscriptaccess="' + a.allowScriptAccess + '" style="visibility: visible;" pluginspage="http://get.adobe.com/cn/flashplayer/" flashvars="playMovie=true&amp;auto=1" allowfullscreen="true" quality="hight" src="' + a.path + '" type="application/x-shockwave-flash" wmode="' + c + '"></embed>'];
    $("#flashModuleFlash" + a.moduleId).append(b.join(""))
};
Run.noticeMarquee = function (f, x) {
    var w = {direction: "up", speed: "normal", loop: "infinite", moveout: false, isScrolling: false};
    $.extend(w, f);
    if (w.speed == "normal") {
        $.extend(w, {speed: 28})
    } else {
        if (w.speed == "slow") {
            $.extend(w, {speed: 60})
        } else {
            $.extend(w, {speed: 13})
        }
    }
    $("#noticeMarquee" + w.id).data("options", f);
    var m = w.id, u = $("#noticeMarquee" + m), h = u.outerHeight(true), g = u.outerWidth(true),
        p = u.children().width(), c = $("#noticeContainer" + m), d = c.outerWidth(), l = (p > d) ? p : d;
    if (x != null) {
        var k = $("#noticeMarquee" + x).width();
        k = k ? k : 0;
        g = k;
        l = (g > d) ? g : d;
        Helper.stopInterval("rm" + x);
        $("#noticeMarqueeCopy" + x).remove();
        $(u).appendTo($("#noticeContainer" + x));
        $("#noticeMarqueeNewParent" + x).remove()
    }
    var B = w.direction, z = 0, j = "left", r = w.speed, A = (w.loop != "infinite" || w.loop <= 0) ? 1 : w.loop,
        n = w.moveout, C = w.isScrolling, v = w.noticeType, y = 20,
        t = $("<div id='noticeMarqueeCopy" + m + "' class='noticeMarquee' style='overflow:hidden;width:" + l + "px;' ></div>");
    var i = "<div id='noticeMarqueeNewParent" + m + "' style='position:relative;overflow:hidden;width:" + l * 2 + ";";
    if (v != 4) {
        i += "left:23px;'></div>"
    } else {
        i += "'></div>"
    }
    var o = $(i);

    function q() {
        o.appendTo(u.parent());
        u.appendTo(o);
        t.appendTo(o);
        if (!C && !n) {
        } else {
            $(u.html()).appendTo(t)
        }
        if (B == "left") {
            z = h;
            j = "left"
        } else {
            z = 0 - l;
            if (C && !n) {
                z = 0
            }
            if (C && n) {
                z = -l
            }
            j = "left"
        }
        if (n) {
            u.css(j, 0)
        } else {
            u.css(j, z)
        }
        if (B == "left" || B == "right") {
            u.css("top", 0)
        }
        $("#module" + m + " .noticeContainer").mouseover(function () {
            Helper.stopInterval("rm" + m)
        }).mouseout(function () {
            if (A == "infinite" || A > 0) {
                Helper.startInterval("rm" + m)
            }
        });
        e();
        a(B)
    }

    function b() {
        var D = u.find("img");
        if (D.length > 0) {
            var F = D[0].width;
            for (var E = 0; E < D.length; E++) {
                if (F < D[E].width) {
                    F = D[E].width
                }
            }
            return F
        }
        return 0
    }

    function e() {
        var D = u.find("img");
        $(D).load(function () {
            var E = u.height();
            if (h != E) {
                h = E;
                a(B)
            }
        })
    }

    function a(D) {
        if (D == "left" || D == "right") {
            o.css("position", "relative");
            o.css("width", l);
            t.css("top", 0);
            if (D == "left") {
                t.css("margin-left", y);
                if (C && !n) {
                    u.css("left", l);
                    t.css("left", l * 2)
                }
                if (C && n) {
                    t.css("left", l)
                }
                if (!C && !n) {
                    u.css("left", g);
                    t.css("left", l + g)
                }
                if (!C && n) {
                    t.css("left", l + g)
                }
            } else {
                t.css("left", 0);
                u.css("margin-left", y);
                u.css("width", (l) + "px");
                if (C && !n) {
                    u.css("padding-left", l);
                    u.css("padding-right", l);
                    o.scrollLeft(l * 2 + y)
                }
                if (C && n) {
                    u.css("padding-left", l);
                    o.scrollLeft(l * 2)
                }
                if (!C && !n) {
                    u.css("padding-right", l + g);
                    u.css("padding-left", l + g);
                    o.scrollLeft(l + g + y)
                }
                if (!C && n) {
                    u.css("padding-right", l + g);
                    u.css("padding-left", l + g);
                    o.scrollLeft(l + g + y)
                }
            }
        }
    }

    function s() {
        if (B == "left") {
            var D = o.scrollLeft();
            D++;
            if (C && !n) {
                if (D == l * 2 + y) {
                    o.scrollLeft(l)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (C && n) {
                if (D == l + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (!C && !n) {
                if (D == (l + g) + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
            if (!C && n) {
                if (D == l + g + y) {
                    o.scrollLeft(0)
                } else {
                    o.scrollLeft(D)
                }
            }
        } else {
            if (B == "right") {
                var D = o.scrollLeft();
                D--;
                if (C && !n) {
                    if (D == -1) {
                        o.scrollLeft(l + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (C && n) {
                    if (D == -1) {
                        o.scrollLeft(l + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (!C && !n) {
                    if (D == -1) {
                        o.scrollLeft(l + g + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
                if (!C && n) {
                    if (D == -1) {
                        o.scrollLeft(l + g + y)
                    } else {
                        o.scrollLeft(D)
                    }
                }
            }
        }
    }

    if (f != null) {
        q();
        Helper.addInterval("rm" + m, s, r);
        Helper.startInterval("rm" + m)
    }
};
Run.saveNoticeMarqueeProps = function (a) {
    if (a != null) {
        $("#noticeMarquee" + a.id).data("options", a)
    }
    $("#module" + a.id).on("Helper_onModuleSizeChange", function () {
        Run.noticeMarquee($("#noticeMarquee" + a.id).data("options"), a.id)
    });
    $("#module" + a.id).on("Helper_onModulePositionChange", function () {
        Run.noticeMarquee($("#noticeMarquee" + a.id).data("options"), a.id)
    })
};
Run.revertIcon = function (d) {
    var c = $("#module" + d);
    var b = false;
    var a = c.find(".noticeContainer").height();
    if (c.find(".noticeFontIcon").length != 0) {
        b = true
    }
    if (b) {
        c.find(".noticeFontIcon").css("line-height", a + "px")
    } else {
        c.find(".noticeImg").css("margin-top", (a - 21) / 2 + "px")
    }
};
Run.noticeMarqueeUpDown = function (c) {
    var b = {direction: "top", speed: "normal", stopTime: 1000};
    $.extend(b, c);
    if ("fast" === b.speed) {
        $.extend(b, {speed: 500})
    } else {
        if ("slow" === b.speed) {
            $.extend(b, {speed: 1100})
        } else {
            $.extend(b, {speed: 850})
        }
    }
    var g = $("#noticeScrollbar" + b.id + " li");
    if (g.length == 1) {
        var f = $(g.get(0));
        var a = "<li class='scrollbarLi'>" + f.html() + "</li>";
        $(a).insertAfter(f)
    }
    $("#noticeScrollbar" + b.id).marquee({
        yScroll: b.direction,
        showSpeed: b.speed,
        pauseSpeed: b.stopTime,
        hoverChange: false
    });
    var e = $("#module" + b.id + " .formMiddleContent");
    e.css("overflow", "hidden");
    e.css("width", "98%");
    var d = $("#module" + b.id + " .formMiddleCenter");
    d.css("overflow", "hidden")
};
Run.noticeUpDownSizeChange = function (d) {
    var b = $("#noticeMarquee" + d), a = b.height(), c = b.children().children();
    $.each(c, function (e, f) {
        $(f).css("top", -(a + 2) + "px")
    });
    $("#noticeScrollbar" + d).removeData("_innerHeight")
};
Run.setSerTextOverflow = function (d) {
    var c = $("#serOnline-container" + d);
    var e = c.find(".serOnline-service").children(".serOnline-list-h");
    var a = c.find(".serOnline-contact").children(".serOnline-list-h");
    var b = c.outerWidth(), f = c.outerHeight();
    Run.setSerListCSS(e, b);
    Run.setSerListCSS(a, b)
};
Run.setSerListCSS = function (a, d) {
    var c, f, e, b;
    $.each(a, function (h, g) {
        c = $(g).outerWidth();
        if (c > d - 3) {
            if (f != null && f < d - 3) {
                $('<div style="clear:both;"></div>').insertAfter($(g).prev())
            }
            b = $(g).outerWidth();
            $(g).css("white-space", "normal");
            $(g).css("word-break", "break-all");
            e = true
        }
        f = e ? b : $(g).outerWidth();
        e = false
    })
};
Run.initCustomIframe = function (d) {
    var g = Helper.top.$("#iframe" + d);
    var b = g.attr("width");
    var c = g.attr("height");
    var a = g.attr("src");
    var e = "<iframe id='iframe" + d + "' frameborder='0' height='" + c + "' width='" + b + "'></iframe>";
    var f = $(e);
    g.replaceWith(f);
    f.attr("src", g.attr("src"))
};
Run.initModuleWeiboShow = function (b, e, a, d) {
    var h = Helper.top.$("#wbShowFrame" + e);
    var g = h.attr("width");
    var f = h.attr("height");
    var i = "<iframe id='wbShowFrame" + e + "' name='wbShowFrame' frameborder='0' scrolling='no' height='" + f + "' width='" + g + "' src='about:blank'></iframe>";
    h.replaceWith(i);
    var c = Helper.top.$("#wbShowFrame" + e).parent().width();
    var j = a + c + "&ran=" + Math.random();
    Run.initIframeLoading(b, e, j, d);
    $("#refreshChlid" + e).css("padding-top", "40%")
};
Run.initLocaler = function (b, a) {
    if (typeof Helper.top._localerJsonTmp == "undefined") {
        Helper.top._localerJsonTmp = b
    }
    if (a) {
        Run.initLocalerManage(b)
    } else {
        Run.initLocalerRun()
    }
    Run.checkLocalerItemWidthForIE();
    Run.bindLocalerItemEvent()
};
Run.initLocaleStyle = function (b) {
    var a = $("#webTop").width();
    if (b > a) {
        $("#localer").css("left", "auto");
        $("#localer").css("right", a - b - $("#localer").width() + "px")
    } else {
        $("#localer").css("left", b);
        $("#localer").css("right", "auto")
    }
};
Run.initLocalerRun = function () {
    $("#localer").bind("mouseenter", function () {
        Run.openLocalerList()
    }).bind("mouseleave", function () {
        Run.closeLocalerList(this)
    })
};
Run.openLocalerList = function () {
    var b = parseInt($("#localer").attr("_moduleStyle"));
    if (b >= 1 && b <= 3) {
        return
    }
    var a = $("#localer").find(".J_localerList").height();
    if (Helper.isIE()) {
        $("#localer").find(".J_localerPanel").stop().animate({height: a}, {duration: 200})
    } else {
        $("#localer").find(".J_localerPanel").css("height", a + "px")
    }
    $("#localer").find(".J_localerPanel .J_localerList .first .arrow").addClass("arrow_hover")
};
Run.closeLocalerList = function (c) {
    var b = parseInt($("#localer").attr("_moduleStyle"));
    if (b >= 1 && b <= 3) {
        return
    }
    var a = $("#localer").find(".J_localerPanel .J_localerList .first").height();
    if (Helper.isIE()) {
        $("#localer").find(".J_localerPanel").stop().animate({height: a}, {duration: 200})
    } else {
        $("#localer").find(".J_localerPanel").css("height", a + "px")
    }
    $("#localer").find(".J_localerPanel .J_localerList .first .arrow").removeClass("arrow_hover")
};
Run.bindLocalerItemEvent = function () {
    $("#localer").find(".J_localerPanel .J_localerList .localerItemContent").bind("mouseenter", function () {
        if ($(this).hasClass("first")) {
            return
        }
        $(this).addClass("localerItemContent_hover")
    }).bind("mouseleave", function () {
        if ($(this).hasClass("first")) {
            return
        }
        $(this).removeClass("localerItemContent_hover")
    })
};
Run.checkLocalerItemWidthForIE = function () {
    Helper.top.$("#localer").find(".localerItemContent").removeAttr("style");
    var b = parseInt(Helper.top.$("#localer").attr("_moduleStyle"));
    if ((Helper.isIE6() || Helper.isIE7()) && (b >= 4 && b <= 9)) {
        var c = Helper.top.$("#localer").find(".J_localerPanel").width();
        Helper.top.$("#localer").find(".localerItemContent").css("width", c + "px")
    }
    if ((Helper.isIE6()) && (b >= 1 && b <= 3)) {
        var a = Helper.top.$("#localer").find(".J_localerPanel").height();
        Helper.top.$("#localer").find(".J_localerPanel").css("line-height", a + "px")
    }
};
Run.initFloatImg = function (a) {
    Run.hoverChangeImage()
};
Run.floatImgInContainerForms = function (a) {
    if (!$("#webContainerTable").length) {
        return false
    }
    if ($("#webContainerTable").find("#module" + a).length) {
        if (!(Run.checkNestModule($("#module" + a)).parentId > 0)) {
            return true
        } else {
            return false
        }
    } else {
        return false
    }
};
Run.bindImageEffectCusEvent_floatImg = function (g, c) {
    var f = Helper.top.$(g).find(".imageEffects"), a = true, e = Helper.top.$(g).find("a"), d = $(e).attr("href"),
        b = (typeof d == "undefined" || d.length == 0 || d.indexOf("javascirpt") > 0 || d.indexOf("return") > 0 || e.length == 0) ? false : true;
    if (!b) {
        a = false
    }
    if (a) {
        $(f).css("cursor", "pointer")
    } else {
        $(f).css("cursor", "default")
    }
    $(f).off("click.imgEft").on("click.imgEft", function () {
        var l = $(this).parents("." + c.targetParent).find("a");
        if (Helper.isNull(l)) {
            return
        }
        var i = $(l).attr("href"), h = $(l).attr("onclick"), j = $(l).attr("target");
        if (typeof j == "undefined") {
            j = "_self"
        }
        var k = (typeof i == "undefined" || i.length == 0 || i.indexOf("javascirpt") > 0 || i.indexOf("return") > 0 || e.length == 0) ? false : true;
        if (typeof h != "undefined") {
            $(l).click()
        } else {
            if (k) {
                window.open(i, j)
            }
        }
    })
};
Run.mallCoupon = function (a) {
    this.moduleId = a;
    this.module = Helper.top.$("#module" + a);
    this.couponList = this.module.find("#couponList" + a)
};
(function (c, a, b) {
    var d = a.prototype, h = {};
    d.init = function (k) {
        h["moduleId" + k] = this;
        i(k);
        if (window.localStorage) {
            var l = window.localStorage.getItem("receTime");
            if (l && Helper.top._TOKEN) {
                if (new Date().getTime() - Number(l) > 120000) {
                    localStorage.removeItem("receTime");
                    return
                }
                var j = window.localStorage.getItem("cpId");
                c("div.receiveCoupon[coupon_id=" + j + "]").click();
                window.localStorage.removeItem("receTime");
                window.localStorage.removeItem("cpId")
            }
        }
    };
    function i(j) {
        h["moduleId" + j].module.on("click", ".receiveCoupon", function () {
            if (_manageMode) {
                if (!Helper.top._couponOpen) {
                    return
                }
                var l = {};
                l.height = 75;
                l.width = 280;
                l.htmlContent = '<div class="resultHelperlIcon addItemTextTips" style="font-size:14px; color:#636363 ;margin-left: 39px; padding-left: 35px;">';
                l.htmlContent += "当前为管理状态，领取失败</div>";
                l.autoClose = 2000;
                var k = Run.popupBox(l)
            } else {
                var m = c(this).attr("coupon_id");
                var n = c(this).attr("bg_id");
                f(m, n)
            }
        })
    }

    function f(j, k) {
        c.ajax({
            url: "ajax/mallCoupon_h.php?cmd=receiveCoupon",
            data: "bgId=" + k + "&cid=" + j + "&t=" + new Date().getTime(),
            dataType: "json",
            success: function (m) {
                var p = {};
                if (m.success) {
                    var o = m.coupon;
                    p.height = 229;
                    p.width = 379;
                    var q = [];
                    q.push('<div class="coupon-popup-box">');
                    q.push('<div class="coupon-receive-success">');
                    q.push(LS.CongratulatSuccess);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.coupon + LS.name + "：" + o.couponName);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.denomination + '：<span class="savePrice">' + o.savePrice + "</span>");
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.useConditionOrderOver + Helper.top.choiceCurrencyVal + o.orderMinPrice);
                    q.push("</div>");
                    q.push('<div class="coupon-line">');
                    q.push(LS.vilidaty + "：" + o.validity);
                    q.push("</div>");
                    q.push('<div class="coupon-opera">');
                    q.push('<div class="goto-coupon-btn">');
                    q.push(LS.view + LS.coupon);
                    q.push("</div>");
                    q.push('<div class="back-page">');
                    q.push(LS.returnPage);
                    q.push("</div>");
                    q.push("</div>");
                    q.push("</div>");
                    p.htmlContent = q.join("");
                    var l = Run.popupBox(p);
                    g(l, m.success);
                    e(l)
                } else {
                    var n = m.rt;
                    if (n == -23) {
                        if (window.localStorage) {
                            var r = window.localStorage.getItem("receTime");
                            if (r) {
                                window.localStorage.removeItem("receTime");
                                window.localStorage.removeItem("cpId")
                            }
                            localStorage.setItem("cpId", j);
                            localStorage.setItem("receTime", new Date().getTime())
                        }
                        document.location.href = "login.php?url=" + document.location.href
                    } else {
                        if (n == -4) {
                            p.height = 155;
                            p.width = 312;
                            var q = [];
                            q.push('<div class="coupon-popup-box">');
                            q.push('<div class="coupon-receive-fail">');
                            q.push(LS.receiveHelperl);
                            q.push("</div>");
                            q.push('<div class="coupon-msg">');
                            q.push(LS.receiveOverLimit);
                            q.push("</div>");
                            q.push('<div style="white-space: nowrap;">');
                            q.push('<div class="goto-coupon-btn">');
                            q.push(LS.view + LS.coupon);
                            q.push("</div>");
                            q.push('<div class="back-page">');
                            q.push(LS.returnPage);
                            q.push("</div>");
                            q.push("</div>");
                            q.push("</div>");
                            p.htmlContent = q.join("");
                            var l = Run.popupBox(p);
                            l.css("width", "");
                            l.find(".popupCnBg").css("width", "");
                            g(l);
                            e(l)
                        } else {
                            p.height = 110;
                            p.width = 270;
                            var q = [];
                            q.push('<div class="coupon-popup-box">');
                            q.push('<div class="coupon-receive-fail">');
                            q.push(LS.receiveHelperl);
                            q.push("</div>");
                            q.push('<div class="coupon-msg">');
                            if (m.msg == "receiveOverLimit") {
                                q.push(LS.receiveOverLimit)
                            } else {
                                if (m.msg == "couponCountZero") {
                                    q.push(LS.couponCountZero)
                                } else {
                                    if (m.msg == "couponExpired") {
                                        p.height = 110;
                                        p.width = 210;
                                        q.push(LS.couponExpired)
                                    }
                                }
                            }
                            q.push("</div>");
                            q.push("</div>");
                            p.htmlContent = q.join("");
                            var l = Run.popupBox(p);
                            l.css("width", "");
                            l.find(".popupCnBg").css("width", "")
                        }
                    }
                }
            },
            error: function () {
                Helper.ing(LS.systemError, true)
            }
        })
    }

    function g(k, j) {
        k.find(".back-page").on("click", function () {
            k.find(".popupBClose").click();
            if (j) {
                location.reload(true)
            }
        })
    }

    function e(j) {
        j.find(".goto-coupon-btn").on("click", function () {
            document.location.href = "mCenter.php?item=memberCoupon"
        })
    }

    d.showPage = function () {
        return function (k, j) {
            c.ajax({
                url: "../ajax/mallCoupon_h.php?cmd=getPageData",
                data: "moduleId=" + k + "&pageNo=" + j,
                dataType: "json",
                success: function (l) {
                    if (l.success) {
                        var m = [];
                        c.each(l.list, function (o, n) {
                            if (n.id == 0) {
                                return false
                            }
                            m.push("<div class='coupon' id='coupon" + n.id + "' couponId='" + n.id + "' couponName='" + n.couponName + "'>");
                            m.push("<div class='couponWatermark '>券</div>");
                            if (n.state) {
                                m.push("<div class='coupon-left coupon-" + l.bg + "-left'></div>");
                                m.push("<div class='coupon-content coupon-color-" + l.bg + "'>")
                            } else {
                                m.push("<div class='coupon-left coupon-invalid-left'></div>");
                                m.push("<div class='coupon-content coupon-color-invalid'>")
                            }
                            m.push("<div class='couponSavePrice'><span class='priceSign'>" + Helper.top.choiceCurrencyVal + "</span><span class='couponPrice'>" + n.savePrice + "</span></div>");
                            if (n.state) {
                                m.push("<div class='couponUseCondition'><span>" + LS.full + n.orderMinPrice + LS.money + "</span><br><span>" + LS.canUse + "</span><br><span class='coupon-name coupon-name-" + l.bg + "'>" + n.couponName + "</span></div>")
                            } else {
                                m.push("<div class='couponUseCondition'><span>" + LS.full + n.orderMinPrice + LS.money + "</span><br><span>" + LS.canUse + "</span><br><span class='coupon-name coupon-name-invalid'>" + n.couponName + "</span></div>")
                            }
                            var q = LS.immediatelyReceive;
                            var p = l.bg;
                            if (!n.state) {
                                q = LS.expired;
                                p = "gray"
                            } else {
                                if (n.couponLeaveAmount == 0 && !n.autoInc) {
                                    q = LS.receivedOver;
                                    p = "gray"
                                } else {
                                    if (n.currentMemberReceived) {
                                        q = LS.alreadyReceived;
                                        p = "gray"
                                    }
                                }
                            }
                            m.push("<div class='receiveCoupon font-color-" + p + "' coupon_id='" + n.id + "'>" + q + "</div>");
                            m.push("<div class='validTime'>" + LS.vilidaty + "：" + n.validity + "</div>");
                            m.push("</div>");
                            if (n.state) {
                                m.push("<div class='coupon-right coupon-" + l.bg + "-right'></div>")
                            } else {
                                m.push("<div class='coupon-right coupon-invalid-right'></div>")
                            }
                            m.push("</div>")
                        });
                        h["moduleId" + k].couponList.html(m.join(""));
                        Helper.Cookie.set("pageNo" + k, j);
                        if (_manageMode && Helper.top._couponOpen) {
                            Run.initModuleCouponListItemManage({
                                couponParent: "couponList" + k,
                                coupon: "coupon",
                                moduleId: k
                            })
                        }
                    }
                },
                error: function () {
                    Helper.ing(LS.systemError, true)
                }
            });
            if (_manageMode) {
                Run.initModuleCouponListItemManage({couponParent: "couponList" + k, coupon: "coupon", moduleId: k})
            }
        }
    }
})(jQuery, Run.mallCoupon);
Run.initMallCoupon = function (a) {
    Helper.top.mallCoupon = Helper.top.mallCoupon || {};
    Helper.top.mallCoupon["couponList" + a] = new Run.mallCoupon(a);
    Helper.top.mallCoupon["couponList" + a].init(a)
};
Run.videoCompatible = function (p) {
    var a = Helper.top.navigator.userAgent, j = /^https?.+\.(mp4)$/i, i = p.flvPagePath, d = false;
    if (j.test(i)) {
        d = true
    }
    if (!(d && /(iPhone|iPad|iPod|iOS|Android)/i.test(a))) {
        return
    }
    var b = !!(document.createElement("video").canPlayType), k = "mediaplayerObj" + p.moduleId,
        m = "mediaplayer" + p.moduleId, h = [], g = [], l, f, c, o;
    if (!b && p.mediaJsUrl.length > 0) {
        if (Helper.top.$("#jz-Html5VideoJs").length < 1) {
            var n = document.createElement("script"), e = document.head || document.body;
            n.id = "jz-Html5VideoJs";
            n.type = "text/javascript";
            n.src = p.mediaJsUrl;
            e.appendChild(n)
        }
    }
    if (p.videoType == 1) {
        k = p.moduleId;
        m = "onLineFlv" + p.moduleId
    }
    c = Helper.top.$("#" + m);
    o = Helper.top.$("#" + k);
    h.push('id="' + k + '"');
    if (p.flvImgUrl.length > 0) {
        h.push('poster="' + p.flvImgUrl + '"')
    }
    h.push('width="' + p.flvWidth + '"');
    h.push('height="' + p.flvHeight + '"');
    h.push("controls");
    l = h.join(" ");
    g.push("<video " + l + ">");
    g.push('<source src="' + i + '">');
    g.push("抱歉，你的浏览器不能查看该视频。");
    g.push("</video>");
    f = g.join("");
    if (o.length > 0) {
        o.remove();
        c.append(f)
    }
};
Run.videoNetUrlDeal = function (i) {
    var b = "";
    if (i) {
        var h = $("#onLineFlv" + i);
        $onLineVideo = h.find("#" + i);
        b = $onLineVideo.attr("src");
        try {
            if (b) {
                b = Helper.decodeHtml(b);
                b = b.replace(/&nbsp;/gi, " ").replace(/&lt;/gi, "<").replace(/&gt;/g, ">").replace(/&#92;/gi, "\\").replace(/&#39;/gi, "'").replace(/&quot;/gi, '"').replace(/\<br\/\>/gi, "\n").replace(/&amp;/gi, "&");
                var a = $(b);
                var d = a.get(0).tagName.toLowerCase();
                var k = "";
                k = a.attr("src");
                var m = k.split("/");
                var f = m[2];
                if (d == "iframe" && f.indexOf("youku.com") != -1) {
                    k = "http://player.youku.com/player.php/sid/" + m[4] + "/v.swf";
                    $onLineVideo.attr("src", k);
                    var g = $onLineVideo.prop("outerHTML");
                    $onLineVideo.remove();
                    h.append(g)
                } else {
                    if (k) {
                        k = Helper.decodeHtml(k);
                        if (d == "embed") {
                            $onLineVideo.attr("src", k);
                            var g = $onLineVideo.prop("outerHTML");
                            $onLineVideo.remove();
                            h.append(g)
                        } else {
                            if (d == "iframe") {
                                var c = $onLineVideo.width();
                                var l = $onLineVideo.height();
                                $onLineVideo.remove();
                                h.append('<iframe frameborder="0" width="' + c + '" height="' + l + '" src="' + k + '" allowfullscreen="true"></iframe>')
                            }
                        }
                    }
                }
            }
        } catch (j) {
        }
    }
};
Run.optimizeFooterAlign = function () {
    var d = $("#footerNav"), b = true, g;
    if (d.length < 1) {
        return
    }
    var a = d.find(".J_footerItemListContainer"), h = a.children(".J_footerItemSection");
    if (h.length < 1) {
        return
    }
    var f = a.children(".J_footerItemSpacing_end"), k = h.first(), i = h.last(), j = i.find(".J_footerItemContainer"),
        c, e;
    if (Helper.top._designAuth) {
        g = Run.getFooterStyleData();
        if (g.fa != 2) {
            b = false
        }
        if (g.fis == 2) {
            b = false
        }
    }
    if (k.offset().top < i.offset().top) {
        b = false
    }
    if (!b) {
        i.removeClass("fixWidth");
        return
    }
    if (Helper.top._designAuth) {
        i.removeClass("fixWidth")
    }
    e = i.width();
    c = j.width();
    Helper.top.Helper.setCtrlStyleCss("stylefooter", "webFooterTable", ".footerItemSpacing_end", "display", "none");
    if (e < c) {
        i.removeClass("fixWidth")
    } else {
        i.addClass("fixWidth");
        Helper.top.Helper.setCtrlStyleCss("stylefooter", "webFooterTable", ".footerItemListContainer .fixWidth", "width", c + "px")
    }
};
Run.changeTheLogoSize = function () {
    if ($("#footerSupport")) {
        var b = $("#footerSupport").css("font-size");
        var a = parseInt(b.substring(0, b.length - 2)) + 3;
        $("#faisco-icons-logo").css("font-size", a + "px")
    }
};
Run.initCorpTitleContent = function (c, j, a) {
    var e = $("#" + c), i = $("#corpTitle"), k, l, m, f, d, h, g, b;
    if (i.length <= 0) {
        return
    }
    if (!j) {
        a = ""
    }
    d = i.clone();
    d.html(j);
    if (c == "primaryTitle") {
        g = !!(d.find("#primaryTitle").length);
        b = !!(d.find(".newPrimaryTitle").length);
        if (!g && !b && j != "请输入网站标题") {
            l = $("<div id='primaryTitle' style='" + a + "'></div>");
            i.append(l);
            l.html(j.replace(/\s/g, "&nbsp;"))
        } else {
            i.append(j)
        }
    }
    if (c == "subTitle") {
        if (d.find("#subTitle").length <= 0) {
            f = $("<div id='subTitle' style='" + a + "'></div>");
            i.append(f);
            f.html(j.replace(/\s/g, "&nbsp;"))
        } else {
            i.append(j)
        }
    }
};
Run.initForms = function () {
    $(".form").each(function () {
        var a = $(this), b = a.attr("_moduleid") || 0;
        if (b > 0) {
            if (a.attr("_autoHeight") != "1") {
                Run.setModuleHeight2(b, a.height())
            } else {
                if (a.hasClass("formStyle29")) {
                    Run.setModuleHeight2(b, a.height())
                }
            }
        }
    })
};
Run.setModuleHeight2 = function (m, l) {
    var b = Helper.top.$("#module" + m);
    b.css("height", l + "px");
    if (b.hasClass("formStyle80") || b.hasClass("formStyle87")) {
        return
    }
    var g = b.find(".formTop" + m);
    var k = b.find(".formBanner" + m);
    var j = b.find(".formMiddle" + m);
    var r = b.find(".formBottom" + m);
    var a = g.is(":visible") ? g.outerHeight(true) : 0;
    var f = k.is(":visible") ? k.outerHeight(true) : 0;
    var s = r.is(":visible") ? r.outerHeight(true) : 0;
    var n = j.find(".formMiddleCenter" + m);
    var o = j.find(".formMiddleContent" + m);
    var t = l - a - f - s - Helper.getFrameHeight(j);
    j.css("height", t + "px");
    t = t - Helper.getFrameHeight(n);
    t = t - Helper.getFrameHeight(o);
    if (!b.hasClass("formStyle81") && !b.hasClass("formStyle82") && !b.hasClass("formStyle85") && !b.hasClass("formStyle98")) {
        if (t > 0) {
            o.css("height", t + "px");
            o.css("overflow-y", "hidden")
        }
    }
    if (b.hasClass("formStyle29")) {
        var p = b.find(".titleTable"), i = b.find(".formTabButtonList");
        if (p.length == 1) {
            var h = p.outerHeight(true);
            if (b.find(".formTabDirectionY").length > 0) {
                h = i.outerHeight(true)
            }
            var c = b.find(".formTabContent" + m);
            var e = t - h - Helper.getCssInt(c, "border-top-width") - Helper.getCssInt(c, "border-bottom-width");
            if (Helper.isIE6()) {
                e += 1
            }
            c.css("height", e + "px");
            var d = b.find(".formTabCntId");
            d.css("height", e + "px")
        }
    } else {
        if (b.hasClass("formStyle79")) {
            var q = b.attr("id").replace("module", "");
            if (!Run.floatImgInContainerForms(q)) {
                b.find("#float_img_" + m).css("height", t + "px")
            }
        }
    }
};
Run.refreshForms = function () {
    Run.refreshFormIndexClass();
    Run.displayAddModule();
    Helper.top.Helper.delayLoadImg(20)
};
Run.displayAddModule = function () {
    if (!Helper.top._designAuth) {
        return
    }
    Run.addAddModuleButton(1);
    Run.addAddModuleButton(2);
    Run.addAddModuleButton(3);
    Run.addAddModuleButton(4);
    Run.addAddModuleButton(5);
    Run.addAddModuleButton(6);
    Run.addAddModuleButton(7);
    Run.addAddModuleButton(8);
    Run.addAddModuleButton(10);
    Run.addAddModuleButton(11);
    Run.addAddModuleButton(12);
    Run.addAddModuleButton(13);
    Run.addAddModuleButton(20);
    Run.addAddModuleButton(22);
    Run.addAddModuleButton(23);
    Run.addAddModuleButton(24);
    Run.addAddModuleButton(25);
    Run.addAddModuleButton(26);
    Run.addAddModuleButton(27);
    Run.addAddModuleButton(28)
};
Run.checkModuleInZone = function (a) {
    return a.parent().hasClass("J_moduleZone")
};
Run.checkFloatModulePosition = function (b) {
    if (!b.length) {
        return
    }
    var g = b.parent().attr("id");
    var d = b.offset().top, l = b[0].getBoundingClientRect().top;
    moduleTop = d - Helper.top.$("body").scrollTop();
    var c = b.offset().left;
    var h = b.height();
    var k = moduleTop + h;
    var j = 0;
    var e = Helper.top.Helper.getBrowserHeight() - j;
    var a = Run.getModuleStatus(b.attr("id").replace("module", ""));
    if (g == "floatLeftBottomForms" || g == "floatRightBottomForms") {
        var i = Helper.top.$("#web").offset().top;
        if (k > e) {
            var f = e - h;
            if (a != 3) {
                b.offset({left: c, top: i + Helper.top.Helper.getBrowserHeight() / 2})
            }
        }
        if (k < i) {
            b.offset({top: i + Helper.top.Helper.getBrowserHeight() / 2})
        }
        if (moduleTop < i) {
            if (a != 3) {
                b.offset({top: i + Helper.top.Helper.getBrowserHeight() / 2})
            }
        }
    } else {
        if (g == "floatLeftTopForms" || g == "floatRightTopForms") {
            var i = Helper.top.$("#web").offset().top;
            if (i < 0) {
                i = 0
            }
            if (moduleTop > (i + Helper.top.Helper.getBrowserHeight())) {
                b.offset({top: i + Helper.top.Helper.getBrowserHeight() / 2 - h})
            }
            if (k < i) {
                b.offset({top: i})
            }
            if (moduleTop < i) {
                b.offset({top: i})
            }
        }
    }
};
Run.closeAd = function (a) {
    $("#" + a).data("top", $("#" + a).position().top);
    $("#" + a).data("left", $("#" + a).position().left);
    $("#" + a).hide()
};
Run.checkSideModule = function (a) {
    Run.reSetSidePosition(a)
};
Run.reSetSidePosition = function (b, r) {
    var k = b.attr("id");
    var v = b.offset().top;
    var o = Helper.top.Helper.getBrowserWidth();
    var a = Helper.top.Helper.getBrowserHeight();
    var n = b.outerWidth();
    var x = b.height();
    var z = Helper.getCssInt(b, "border-left-width");
    var s = b.parent().attr("id");
    var c = b.attr("_side");
    var h = 0;
    var j = [];
    var t = Helper.top.$("#" + k + "SideBtn");
    t.remove();
    var w = k.replace("module", "");
    var m = b.find(".mainTitle" + w).first().text();
    var g = 0;
    var d = false;
    var i = parseInt(b.attr("_modulestyle"));
    if (i == 79 || i == 81 || i == 86) {
        if (b.find(".mainTitle").length < 1) {
            m = b.attr("bannertitle")
        }
    }
    if (c == 1) {
        if (s == "floatLeftTopForms" || s == "floatLeftBottomForms") {
            b.offset({top: v, left: 0});
            h = 1;
            j = ["<div id='" + k + "SideBtn' class='g_sideBtn fk-sideLeft'><div class='g_sideBtn_t g_sB_lt'></div><div class='g_sideBtn_c g_sB_lc'><span class='g_sideBtn_tl'>" + m + "</span></div><div class='g_sideBtn_b g_sB_lb'></div><div class='g_sideBtn_extend g_sB_le'></div></div>"];
            b.animate({left: -n}, {queue: false, duration: 0});
            b.off("mouseenter.sideModule").on("mouseenter.sideModule", Run.bindSideIn1);
            b.off("mouseleave.sideModule").on("mouseleave.sideModule", Run.bindSideOut1)
        } else {
            if (s == "floatRightTopForms" || s == "floatRightBottomForms") {
                if (Helper.top._webRightBar) {
                    g = Helper.getScrollWidth() + $(".fk-rbar").width();
                    if (b.width() > 10) {
                        b.data("_selfWidth", b.width())
                    }
                    if (b.attr("_moduleStyle") == 7) {
                        b.find(".formWrap").css({
                            "word-break": "keep-all",
                            "white-space": "nowrap",
                            overflow: "hidden",
                            "text-overflow": "ellipsis"
                        })
                    }
                    d = b.data("notInitState") || d
                }
                b.offset({top: v, left: o - n - g});
                h = 0;
                j = ["<div id='" + k + "SideBtn' class='g_sideBtn fk-sideRight'><div class='g_sideBtn_t g_sB_rt'></div><div class='g_sideBtn_c g_sB_rc'><span class='g_sideBtn_tl'>" + m + "</span></div><div class='g_sideBtn_b g_sB_rb'></div><div class='g_sideBtn_extend g_sB_re'></div></div>"];
                if (Helper.top._webRightBar) {
                    if (!d) {
                        b.animate({left: 0}, {queue: false, duration: 0})
                    }
                    if (Helper.top._manageMode && !r) {
                        b.css("overflow", "visible");
                        b.animate({left: -g + "px", width: 0}, {queue: false, duration: 300})
                    } else {
                        if (Helper.top._manageMode && r) {
                            b.animate({left: -g + "px"}, {queue: false, duration: 0})
                        } else {
                            b.animate({left: -$(".fk-rbar").width() + "px"}, {queue: false, duration: 500})
                        }
                    }
                } else {
                    b.animate({left: 0}, {queue: false, duration: 0})
                }
                b.off("mouseenter.sideModule").on("mouseenter.sideModule", Run.bindSideIn2);
                b.off("mouseleave.sideModule").on("mouseleave.sideModule", Run.bindSideOut2)
            } else {
                b.attr("_side", 0)
            }
        }
        b.css("overflow", "visible")
    }
    b.append(j.join(""));
    b.addClass("jz-moduleSide");
    if (!!b.find(".formMiddle").length) {
        b.find(".formMiddle").addClass("jz-moduleSide-content")
    }
    var l = Helper.top.$("#" + k + "SideBtn");
    if (l.length > 0) {
        var u = l.width();
        var e = l.height();
        var q = parseInt((x - e) / 2);
        if (h == 0) {
            l.css({top: q, left: -u - z})
        } else {
            l.css({top: q, left: n - z})
        }
        var p = l.position().top;
        var y = l.position().top + e;
        if (c == 1) {
            if (s == "floatLeftTopForms" || s == "floatRightTopForms") {
                if (y <= 0) {
                    l.css({top: x - e})
                }
            } else {
                if (s == "floatLeftBottomForms" || s == "floatRightBottomForms") {
                    if ((p - a) >= 0) {
                        l.css({top: 0})
                    }
                }
            }
            var f = l[0].getBoundingClientRect();
            if (f.top > a || f.bottom < 0) {
                l.css({top: 0})
            }
        }
    }
};
Run.checkFlutterModule = function (b) {
    var a = b.attr("_side");
    if (a == 2) {
        Run.flutterStart(b)
    }
};
var flutterCount = 1000;
Run.flutterInternel = function (d) {
    var i = d.attr("_flutterSwitch");
    if (i == "true") {
        Run.stopFlutterInterval(d)
    }
    var m = 1;
    var b = document.body.scrollTop;
    var g = document.body.scrollLeft;
    if (Helper.isIE8() || Helper.isIE7() || Helper.isIE10() || Helper.isIE9() || Helper.isIE11()) {
        b = document.documentElement.scrollTop
    }
    var a = $("#g_main").offset().top + b;
    var e = 0 + g;
    var c = document.documentElement.clientWidth - d.width() + g;
    var h = document.documentElement.clientHeight - d.height() + b;
    if (Helper.isIE6()) {
        c = document.body.clientWidth - d.width()
    }
    var l = d.data("flutterXPos");
    var f = d.data("flutterYPos");
    d.offset({left: l, top: f});
    var k = d.data("flutterXPos") + m * (d.data("flutterXon") ? 1 : -1);
    d.data("flutterXPos", k);
    if (d.data("flutterXPos") <= e) {
        d.data("flutterXon", true);
        d.data("flutterXPos", e)
    }
    if (d.data("flutterXPos") >= c) {
        d.data("flutterXon", false);
        d.data("flutterXPos", c)
    }
    var j = d.data("flutterYPos") + m * (d.data("flutterYon") ? 1 : -1);
    d.data("flutterYPos", j);
    if (d.data("flutterYPos") <= a) {
        d.data("flutterYon", true);
        d.data("flutterYPos", a)
    }
    if (d.data("flutterYPos") >= h) {
        d.data("flutterYon", false);
        d.data("flutterYPos", h)
    }
};
Run.stopFlutterInterval = function (a) {
    Helper.stopInterval("flutter" + a.attr("id"))
};
Run.startFlutterInterval = function (b) {
    var a = b.attr("_side");
    if (a != 2) {
        return
    }
    if (b.attr("_edit") == "true") {
        return
    }
    Run.stopFlutterInterval(b);
    var d = function () {
        var f = b.attr("_side");
        var g = b.attr("_flutterSwitch");
        if (f == 2) {
            Run.flutterInternel(b)
        } else {
            Run.stopFlutterInterval(b)
        }
    };
    var e = 10;
    var c = "flutter" + b.attr("id");
    Helper.addInterval(c, d, e);
    Helper.startInterval(c)
};
Run.flutterStart = function (b, a) {
    b.addClass("fk-flutterForm");
    var g = 0;
    var f = document.body.scrollLeft;
    if (Helper.isIE6()) {
        rightBoundary = document.body.clientWidth - b.width()
    } else {
        rightBoundary = document.documentElement.clientWidth - b.width() + f
    }
    if (b.offset().left > rightBoundary) {
        b.offset({left: rightBoundary - b.outerWidth()})
    }
    var h = b.position().left;
    var c = b.position().top;
    var i = b.data("toFlutterFlag");
    var k = b.attr("_flutterSwitch");
    if (!i) {
        b.data("startFlutterXPos", h);
        b.data("startFlutterYPos", c)
    } else {
        var j = b.data("startFlutterXPos");
        var d = b.data("startFlutterYPos");
        if (!j && !d) {
            b.data("startFlutterXPos", h);
            b.data("startFlutterYPos", c)
        }
    }
    var l = b.data("startFlutterParentId");
    if (!l) {
        b.data("startFlutterParentId", b.parent().attr("id"))
    }
    b.data("flutterXPos", b.offset().left);
    b.data("flutterYPos", b.offset().top);
    b.data("flutterXon", true);
    b.data("flutterYon", true);
    var e = b.attr("_side");
    if (_manageMode == true && e == 2 && !a) {
        b.attr("_flutterSwitch", true)
    }
    var k = b.attr("_flutterSwitch");
    if (k == "false" || !k) {
        Run.startFlutterInterval(b)
    }
    b.on("mouseenter", function () {
        Run.stopFlutterInterval($(this))
    });
    b.on("mouseleave", function () {
        var m = $(this).attr("_flutterSwitch");
        if (m == "false" || !m) {
            Run.startFlutterInterval($(this))
        }
    })
};
Run.bindSideIn1 = function (b) {
    var b = $(this);
    var c = b.attr("_side");
    var a = b.outerWidth();
    var d = b.parent().attr("id");
    if (Helper.top._manageMode) {
        Run.disableEditLayer();
        if (-a == b.offset().left) {
            jzUtils.run({name: "moduleAnimation.canRunAgain", base: Run})
        }
        b.animate({left: 0}, {
            queue: false, duration: 500, complete: function () {
                Run.enableEditLayer();
                if (c == 1) {
                    b.unbind("mouseenter.sideModule", Run.bindSideIn1).unbind("mouseleave.sideModule", Run.bindSideOut1).unbind("mouseenter.sideModule", Run.bindSideIn2).unbind("mouseleave.sideModule", Run.bindSideOut2)
                }
                jzUtils.run({name: "moduleAnimation.publish", base: Run});
                jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Run})
            }
        })
    } else {
        if (-a == b.offset().left) {
            jzUtils.run({name: "moduleAnimation.canRunAgain", base: Run})
        }
        b.animate({left: 0}, {
            queue: false, duration: 500, complete: function () {
                jzUtils.run({name: "moduleAnimation.publish", base: Run});
                jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Run})
            }
        })
    }
    $(b).find("img").trigger("appear")
};
Run.bindSideIn2 = function (e) {
    var e = $(this);
    var d = e.attr("_side");
    var g = e.outerWidth();
    var i = e.parent().attr("id");
    var m = Helper.top.Helper.getBrowserWidth();
    var j = 0;
    var l = Helper.top.$("#" + e.attr("id") + "SideBtn");
    var k = l.width();
    var b = Helper.getCssInt(e, "border-left-width");
    var f = 0;
    var c = {left: -g};
    var h = 0;
    var a = 500;
    if (Helper.top._webRightBar) {
        f = $(".fk-rbar").width();
        j = Helper.getScrollWidth() + f;
        g = e.data("_selfWidth");
        if (e.attr("_moduleStyle") == 7) {
            e.find(".formWrap").css({
                "word-break": "keep-all",
                "white-space": "nowrap",
                overflow: "hidden",
                "text-overflow": "ellipsis"
            })
        }
        e.data("notInitState", true);
        c = {left: -g - j, width: g};
        h = Helper.getScrollWidth();
        if (Helper.top._isTemplateVersion2 && Helper.top._manageMode) {
            a = 0
        }
    }
    e.find("img").trigger("appear");
    if (Helper.top._manageMode) {
        Run.disableEditLayer();
        if (m == (e.offset().left + f + h)) {
            jzUtils.run({name: "moduleAnimation.canRunAgain", base: Run})
        }
        e.animate(c, {
            queue: false, duration: a, complete: function () {
                Run.enableEditLayer();
                if (d == 1) {
                    e.unbind("mouseenter.sideModule", Run.bindSideIn1).unbind("mouseleave.sideModule", Run.bindSideOut1).unbind("mouseenter.sideModule", Run.bindSideIn2).unbind("mouseleave.sideModule", Run.bindSideOut2)
                }
                jzUtils.run({name: "moduleAnimation.publish", base: Run});
                jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Run})
            }
        })
    } else {
        if (m == e.offset().left) {
            jzUtils.run({name: "moduleAnimation.canRunAgain", base: Run})
        }
        e.animate({left: -g - f}, {
            queue: false, duration: 500, complete: function () {
                jzUtils.run({name: "moduleAnimation.publish", base: Run});
                jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Run})
            }
        })
    }
};
Run.bindSideOut1 = function (b) {
    var b = $(this);
    var c = b.attr("_side");
    var a = b.outerWidth();
    var d = b.parent().attr("id");
    b.animate({left: -a}, {queue: false, duration: 500})
};
Run.bindSideOut2 = function (d) {
    var d = $(this);
    var e = d.attr("_side");
    var b = d.outerWidth();
    var f = d.parent().attr("id");
    var a = 0;
    var c = 0;
    if (Helper.top._webRightBar) {
        a = Helper.getScrollWidth() + $(".fk-rbar").width();
        if (d.attr("_moduleStyle") == 7) {
            d.find(".formWrap").css({"word-break": "keep-all", "white-space": "nowrap"})
        }
        c = $(".fk-rbar").width()
    }
    if (Helper.top._manageMode) {
        d.animate({left: 0 - a}, {queue: false, duration: 500})
    } else {
        d.animate({left: -c}, {queue: false, duration: 500})
    }
};
Run.setAbsFormsHolder2 = function (h) {
    var a = 0, f = 0, j = 0, g = Helper.top.$("#containerPlaceholder"), b = Helper.top.$("#g_main"), d = Helper.isIE6(),
        c = Helper.isIE7(), i = false, k, e;
    k = function (l) {
        if (!Helper.top._manageMode && !d && !c) {
            return l
        }
        var m = b.scrollTop();
        if (m <= 0) {
            return l
        }
        return l + m
    };
    Helper.top.$("#absForms >.form").each(function () {
        var l = $(this).offset().top + $(this).outerHeight();
        l = k(l);
        if (l > a) {
            a = l
        }
    });
    Helper.top.$("#absTopForms >.form").each(function () {
        var l = $(this).offset().top + $(this).outerHeight();
        l = k(l);
        if (l > a) {
            a = l
        }
    });
    f = Helper.top.$("#fullmeasureBottomForms").outerHeight();
    if (f > 0) {
        a = a - f;
        if (a < 0) {
            a = 0
        }
        i = true
    }
    j = k(g.offset().top);
    if (i) {
        if (a > j) {
            e = a - j;
            if (e !== parseInt(g.height())) {
                if (!Helper.top._manageMode && Helper.top._colOtherStyleData.y > e) {
                } else {
                    g.css("height", e + "px");
                    if (!h) {
                        Helper.top._colOtherStyleData.y = parseInt(e)
                    }
                }
            }
        } else {
            if (a != 0 && (a - j) !== 0) {
                g.css("height", "0");
                if (!h) {
                    Helper.top._colOtherStyleData.y = 0
                }
            } else {
                if (Helper.top._colOtherStyleData.y > 0 && a < j) {
                    g.css("height", "0");
                    Helper.top._colOtherStyleData.y = 0
                }
            }
        }
    } else {
        if (a > j) {
            var e = a - j;
            if (e !== parseInt(g.height())) {
                g.css("height", e + "px");
                Helper.top._colOtherStyleData.y = parseInt(e)
            }
        } else {
            if (a != 0 && (a - j) !== 0) {
                g.css("height", "0px");
                Helper.top._colOtherStyleData.y = 0
            }
        }
    }
};
Run.checkAbsModulePosition = function (c, a) {
    var h = c.parent().attr("id");
    var f = c.offset().left;
    var d = c.offset().top;
    var e = c.height();
    var g = c.offset().top + e;
    if (h == "absTopForms") {
        var b = Helper.top.$("#web").offset().top;
        if (d < b) {
            d = b;
            c.offset({top: d, left: f})
        }
        Run.setAbsFormsHolder2(a)
    } else {
        if (h == "absBottomForms") {
            var b = Helper.top.$("#webFooter").offset().top;
            if (d < b) {
                d = b
            }
            if (Helper.top._siteVer < 30) {
                var b = Run.getFooterBottom();
                if (d + e > b) {
                    d = b - e;
                    c.offset({top: d, left: f})
                }
            } else {
                var b = Run.getFooterBottom(true);
                if (d + e > b) {
                    d = b - e;
                    c.offset({top: d, left: f})
                }
            }
            c.offset({top: d, left: f})
        } else {
            if (h == "absForms") {
                Run.setAbsFormsHolder2(a)
            }
        }
    }
};
Run.demoStyleDesignLoading = function (a, c) {
    var b = $('<div class="forWaiting ajaxLoading2" style="position:absolute;background-color:#d6d9e0;width:100%;height:205px;top:0;left:0;"></div>');
    b.appendTo("#" + a);
    $("#" + c).load(function () {
        $(".forWaiting").remove()
    })
};
Run._webToggleClass = function (a) {
    if (a == "show") {
        $("html").removeClass("g_html").addClass("g_htmlManage");
        $("body").removeClass("g_body").addClass("g_bodyManage");
        $("#g_main").addClass("g_mainManage");
        $("#web").addClass("g_webManage")
    }
};
Run._demoTemplate = function () {
    var a = $("#siteTipsDemoTemplate");
    if (a.is(":visible")) {
        document.location.reload()
    } else {
        a.show();
        Run._webToggleClass("show");
        if ($("#topBarArea").length > 0) {
            $("#topBarArea").hide();
            $("#topBar").hide()
        }
        Run.demoStyleDesignLoading("siteTipsDemoTemplate", "siteTipsDemoTemplateFrame");
        $("#siteTipsDemoTemplateFrame").attr("src", "manage/styleTemplate.php?demoTemplate=true&ram" + Math.random());
        Run.resetGmainPos()
    }
};
Run.adjustFlBtnPos = function (b) {
    var a = Helper.top.$("#module" + b);
    a.css({border: "10px solid transparent", "margin-top": "-10px", "margin-left": "-10px"});
    if (Helper.isIE6()) {
        var c = a.attr("style");
        a.attr("style", c + "; _border-color:tomato; _filter:chroma(color=tomato)")
    }
};
Run.initFlBtnStyle = function (i) {
    var b = i.moduleId, f = i.btnNumSystem, g = i.btnStyle, a = "module" + b, c = Helper.top.$("#" + a);
    if (Helper.top._designAuth) {
        Run.initManageFlBtnStyle(b, f, g)
    } else {
        var h = g.sh;
        var d = Helper.top.$(".mulMColContent");
        var e = c.find(".floatBtn");
        if (c.css("position") != "absolute") {
            Run.setFlBtnBoxPadding(a, h, true)
        }
    }
};
Run.setFlBtnParentColHide = function () {
    var a = Helper.top.$(".mulMColContent");
    if (a.length > 0) {
        a.each(function () {
            if ($(this).find(".formStyle81").length > 0) {
                var b = $(this).attr("id");
                Helper.top.Helper.setCtrlStyleCss("stylemodule", b, ".mulMColList", "overflow", "hidden")
            }
        })
    }
};
Run.setFlBtnBoxPadding = function (a, g, d) {
    if (g.t == 0) {
        return
    }
    var f = (g.f / 2 - g.dy);
    var h = (g.f / 2 + g.dx);
    var c = (g.f / 2 + g.dy);
    var e = (g.f / 2 - g.dx);
    var i = [];
    var b = [];
    if (f > 0) {
        i.push({cls: ".floatBtnBox", key: "padding-top", value: f + "px"});
        b.push({cls: ".floatBtnBox", key: "padding-top"})
    }
    if (h > 0) {
        i.push({cls: ".floatBtnBox", key: "padding-right", value: h + "px"});
        b.push({cls: ".floatBtnBox", key: "padding-right"})
    }
    if (c > 0) {
        i.push({cls: ".floatBtnBox", key: "padding-bottom", value: c + "px"});
        b.push({cls: ".floatBtnBox", key: "padding-bottom"})
    }
    if (e > 0) {
        i.push({cls: ".floatBtnBox", key: "padding-left", value: e + "px"});
        b.push({cls: ".floatBtnBox", key: "padding-left"})
    }
    if (d) {
        Helper.top.Helper.setCtrlStyleCssList("stylemodule", a, i)
    } else {
        Helper.top.Helper.removeCtrlStyleCssList("stylemodule", a, b)
    }
};
Run.initPhotoCard = function (b) {
    var a = Helper.top.$("#module" + b);
    Run.resizePhotoCardHeight(a);
    Run.setPhotoCardHeight(a);
    Run.adjustPhotoCardImgSize(a);
    jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Helper.top["photoCard" + b])
};
Run.setPhotoCardHeight = function (a) {
    var b = a.find(".cardTd");
    b.each(function () {
        var e = $(this).height(), d = $(this).find(".photoCard"), c = d.height();
        if (c < e) {
            d.css("height", e + "px")
        }
    })
};
Run.adjustPhotoCardImgSize = function (b) {
    var c = b.attr("id").replace("module", ""), a = b.find(".photoCard"), d = b.find(".cardDivEffect .cardImg");
    Run.setPhotoCardHeight(b);
    a.each(function () {
        var o = $(this).find(".cardImgView"), l = $(this).find(".cardDivEffect"), m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(), g = o.height(), e = $(this).width(), i, n, f = k, j = g, h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this), m = p.parents(".cardDiv"), j = p.parents(".photoCard"), n = j.height();
        var l = p.width(), f = p.height(), e = j.width(), k, o, i, h = l / f, g = m.attr("tmpPic");
        if (e / n <= h) {
            p.css("width", "");
            p.css("height", n + "px");
            k = j.width();
            o = p.width();
            i = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", i + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = j.height();
            o = p.height();
            i = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", i + "px")
        }
        jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Helper.top["photoCard" + c])
    })
};
Run.resizePhotoCardHeight = function (c) {
    var k = c.find(".photoCardTable"), l = c.find(".formMiddleContent"), a = c.find(".photoCardOuter"),
        b = c.find(".photoCardInner"), h = k.find("tr"), e = c.find(".cardTd"), d = a.attr("cusHeight"), f = h.length,
        i = c.height(), j = parseInt(l.css("marginTop").replace("px", ""));
    formMiddleContentMB = parseInt(l.css("marginBottom").replace("px", ""));
    photoCardInnerMT = parseInt(b.css("marginTop").replace("px", ""));
    photoCardInnerMB = parseInt(b.css("marginBottom").replace("px", ""));
    cellspacing = parseInt(k.attr("cellspacing"));
    if (d) {
        i = a.height();
        j = 0;
        formMiddleContentMB = 0
    }
    var g = i - j - formMiddleContentMB - photoCardInnerMT - photoCardInnerMB - (2 * cellspacing);
    e.each(function () {
        var n = $(this).find(".photoCard"), o = parseInt($(this).attr("rowspan")),
            m = (g - (f - 1) * cellspacing) / f || "";
        switch (o) {
            case 1:
                n.css("height", m + "px");
                break;
            case 2:
                n.css("height", (m * 2 + cellspacing) + "px");
                break;
            default:
                n.css("height", m + "px")
        }
    })
};
Run.adjustPhotoCard = function (b) {
    if (Helper.isNumber(b)) {
        var a = Helper.top.$("#module" + b);
        if (a.hasClass("formStyle83") && !a.find(".photoCardOuter").attr("cusHeight")) {
            Run.initPhotoCard(b);
            a.attr("_autoheight", 0)
        }
    } else {
        if (typeof b == "object") {
            var d = b;
            var c = d.find(".formStyle83");
            if (c.length > 0) {
                e(c)
            }
        } else {
            if (b == undefined) {
                var c = Helper.top.$(".formStyle83");
                if (c.length > 0) {
                    e(c)
                }
            }
        }
    }
    function e(f) {
        c.each(function () {
            var h = $(this).attr("id").replace("module", ""), g = $(this).find(".photoCardOuter"),
                i = g.attr("cusHeight");
            if (i) {
                return true
            }
            Run.initPhotoCard(h);
            $(this).attr("_autoheight", 0)
        })
    }
};
Run.addPhotoCardModuleHeight = function (b) {
    var g = Helper.top.$("#module" + b), a = g.find(".photoCardOuter"), f = g.find(".photoCard"), c = g.width(),
        i = g.height(), h = c / 960, j = a.attr("cusHeight"), e = a.height(), d = i * h;
    if (j) {
        d = e
    }
    g.css("height", d + "px");
    Run.initPhotoCard(b);
    Run.scrollToModuleDiv(g);
    Run.getModuleAttrPattern(b).changed = true;
    g.attr("_autoheight", 0)
};
Run.initPhotoNewCard = function (b) {
    var a = Helper.top.$("#module" + b);
    Run.resizePhotoNewCardHeight(a);
    Run.setPhotoNewCardHeight(a);
    Run.adjustPhotoNewCardImgSize(a);
    jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Helper.top["photoNewCard" + b])
};
Run.setPhotoNewCardHeight = function (a) {
    var b = a.find(".cardTd");
    b.each(function () {
        var c = $(this).height(), e = $(this).find(".photoNewCard"), d = e.height();
        if (d < c) {
            e.css("height", c + "px")
        }
    })
};
Run.adjustPhotoNewCardImgSize = function (a) {
    var c = a.attr("id").replace("module", ""), b = a.find(".photoNewCard"), d = a.find(".cardDivEffect .cardImg");
    Run.setPhotoNewCardHeight(a);
    b.each(function () {
        var o = $(this).find(".cardImgView"), l = $(this).find(".cardDivEffect"), m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(), g = o.height(), e = $(this).width(), i, n, f = k, j = g, h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this), m = p.parents(".cardDiv"), g = p.parents(".photoNewCard"), n = g.height();
        var l = p.width(), f = p.height(), e = g.width(), k, o, j, i = l / f, h = m.attr("tmpPic");
        if (e / n <= i) {
            p.css("width", "");
            p.css("height", n + "px");
            k = g.width();
            o = p.width();
            j = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", j + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = g.height();
            o = p.height();
            j = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", j + "px")
        }
        jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Helper.top["photoNewCard" + c])
    })
};
Run.resizePhotoNewCardHeight = function (a) {
    var k = a.find(".photoNewCardTable"), l = a.find(".formMiddleContent"), e = a.find(".photoNewCardOuter"),
        f = a.find(".photoNewCardInner"), h = k.find(".newCardDrag"), c = a.find(".cardTd"), b = e.attr("cusHeight"),
        d = h.length, i = a.height(), j = parseInt(l.css("marginTop").replace("px", ""));
    formMiddleContentMB = parseInt(l.css("marginBottom").replace("px", ""));
    photoNewCardInnerMT = parseInt(f.css("marginTop").replace("px", ""));
    photoNewCardInnerMB = parseInt(f.css("marginBottom").replace("px", ""));
    cellspacing = parseInt(k.attr("cellspacing"));
    if (b) {
        i = e.height();
        j = 0;
        formMiddleContentMB = 0
    }
    var g = i - j - formMiddleContentMB - photoNewCardInnerMT - photoNewCardInnerMB - (2 * cellspacing);
    c.each(function () {
        var o = $(this).find(".photoNewCard"), n = parseInt($(this).attr("rowspan")),
            m = (g - (d - 1) * cellspacing) / d || "";
        switch (n) {
            case 1:
                o.css("height", m - 1 + "px");
                break;
            case 2:
                o.css("height", (m * 2 + cellspacing) - 1 + "px");
                break;
            default:
                o.css("height", m - 1 + "px")
        }
    })
};
Run.adjustPhotoNewCard = function (b) {
    if (Helper.isNumber(b)) {
        var a = Helper.top.$("#module" + b);
        if (a.hasClass("formStyle85") && !a.find(".photoNewCardOuter").attr("cusHeight")) {
            Run.initPhotoNewCard(b);
            a.attr("_autoheight", 0)
        }
    } else {
        if (typeof b == "object") {
            var d = b;
            var e = d.find(".formStyle85");
            if (e.length > 0) {
                c(e)
            }
        } else {
            if (b == undefined) {
                var e = Helper.top.$(".formStyle85");
                if (e.length > 0) {
                    c(e)
                }
            }
        }
    }
    function c(f) {
        e.each(function () {
            var h = $(this).attr("id").replace("module", ""), g = $(this).find(".photoNewCardOuter"),
                i = g.attr("cusHeight");
            if (i) {
                return true
            }
            Run.initPhotoNewCard(h);
            $(this).attr("_autoheight", 1)
        })
    }
};
Run.addPhotoNewCardModuleHeight = function (a) {
    var d = Helper.top.$("#module" + a), h = d.find(".formBanner").height(), e = d.find(".photoNewCardOuter"),
        c = d.find(".photoNewCard"), l = d.width(), g = d.height(), j = l / 960, k = e.attr("cusHeight"),
        i = e.height(), b = g * j;
    if (k) {
        b = i
    }
    var f = (d.find(".newCardDrag").length) / 2;
    d.css("height", b * f + "px");
    Run.initPhotoNewCard(a);
    Run.scrollToModuleDiv(d);
    Run.getModuleAttrPattern(a).changed = true;
    d.attr("_autoheight", 0)
};
Run.hideDrag = function (a) {
    $("#module" + a).find(".photoNewCardTable").find(".drag").each(function () {
        $(this).css("display", "none")
    })
};
Run.initPhotoMoreCard = function (b, c) {
    var a = Helper.top.$("#module" + b);
    Run.resizePhotoMoreCardHeight(a, c);
    Run.setPhotoMoreCardHeight(a);
    Run.adjustPhotoMoreCardImgSize(a);
    jzUtils.run({name: "ImageEffect.FUNC.BASIC.Init", callMethod: true}, Helper.top["photoMoreCard" + b])
};
Run.setPhotoMoreCardHeight = function (d) {
    var f = d.find(".moreCardTd");
    var b = d.find(".formBanner");
    var e = d.find(".moreCardDrag:last").attr("tr");
    var g = 1 + parseInt(e);
    if (b.css("display") == "none") {
        var c = 0
    } else {
        var c = b.height()
    }
    f.each(function () {
        var a = $(this).height(), h = $(this).find(".photoMoreCard"), i = h.height();
        if (i <= a) {
            $(this).css("height", a - c / g + "px");
            h.css("height", a - c / g + "px")
        }
    })
};
Run.adjustPhotoMoreCardImgSize = function (a) {
    var c = a.attr("id").replace("module", ""), b = a.find(".photoMoreCard"), d = a.find(".cardDivEffect .cardImg");
    b.each(function () {
        var o = $(this).find(".cardImgView"), l = $(this).find(".cardDivEffect"), m = $(this).height();
        if (o.length < 1) {
            return true
        }
        var k = o.width(), g = o.height(), e = $(this).width(), i, n, f = k, j = g, h = l.attr("tmpPic");
        imgOrProp = f / j;
        if (e / m <= imgOrProp) {
            o.css("width", "");
            o.css("height", m + "px");
            i = $(this).width();
            n = o.width();
            l.css("marginTop", "");
            l.css("marginLeft", ((i - n) / 2) + "px")
        } else {
            o.css("height", "");
            o.css("width", e + "px");
            i = $(this).height();
            n = o.height();
            l.css("marginLeft", "");
            l.css("marginTop", ((i - n) / 2) + "px")
        }
        o.removeClass("cardImgViewHide")
    });
    d.load(function () {
        var p = $(this), m = p.parents(".cardDiv"), h = p.parents(".photoMoreCard"), n = h.height();
        var l = p.width(), f = p.height(), e = h.width(), k, o, j, i = l / f, g = m.attr("tmpPic");
        if (e / n <= i) {
            p.css("width", "");
            p.css("height", n + "px");
            k = h.width();
            o = p.width();
            j = (k - o) / 2;
            m.css("marginTop", "");
            m.css("marginLeft", j + "px")
        } else {
            p.css("height", "");
            p.css("width", e + "px");
            k = h.height();
            o = p.height();
            j = (k - o) / 2;
            m.css("marginLeft", "");
            m.css("marginTop", j + "px")
        }
    })
};
Run.resizePhotoMoreCardHeight = function (b, d) {
    var p = b.find(".photoMoreCardTable"), q = b.find(".formMiddleContent"), c = b.find(".photoMoreCardOuter"),
        e = b.find(".photoMoreCardInner"), m = p.find(".moreCardDrag"), i = b.find(".moreCardTd"), k = 1, h = 1,
        j = false, f = c.attr("cusHeight"), g = m.length, a = b.width(), n = b.height(),
        o = parseInt((q.css("marginTop") || "0").replace("px", ""));
    formMiddleContentMB = parseInt((q.css("marginBottom") || "0").replace("px", ""));
    photoMoreCardInnerMT = parseInt((e.css("marginTop") || "0").replace("px", ""));
    photoMoreCardInnerMB = parseInt((e.css("marginBottom") || "0").replace("px", ""));
    cellspacing = parseInt(p.attr("cellspacing"));
    if (f) {
        n = c.height();
        o = 0;
        formMiddleContentMB = 0
    }
    var l = n - o - formMiddleContentMB - photoMoreCardInnerMT - photoMoreCardInnerMB - (2 * cellspacing);
    if (d != null) {
        b.find(".moreCardDrag").each(function (s, t) {
            var r = parseInt($(this).attr("num"));
            if (s == 0) {
                k = (a - ((2 + r) * cellspacing)) / (d - ((2 + r) * cellspacing))
            } else {
                h = (a - ((2 + r) * cellspacing)) / (d - ((2 + r) * cellspacing));
                return false
            }
        });
        j = true
    }
    i.each(function () {
        var t = $(this).find(".photoMoreCard"), s = parseInt($(this).attr("rowspan")), u = $(this).width(),
            r = Math.floor((l - (g - 1) * cellspacing) / g) || "";
        $(this).css("padding-top", cellspacing + "px");
        $(this).css("padding-left", cellspacing + "px");
        $(this).css("height", r + "px");
        if (j) {
            if ($(this).parents(".moreCardDrag").attr("tr") == 0) {
                $(this).css("width", u * k + "px");
                t.css("width", u * k + "px")
            } else {
                $(this).css("width", u * h + "px");
                t.css("width", u * h + "px")
            }
        }
    });
    Run.resizePhotoMoreCartShape(b)
};
Run.resizePhotoMoreCartShape = function (c) {
    var q = c.find(".photoMoreCardTable"), i = c.find(".photoMoreCardOuter"), n = c.find(".moreCardDrag"),
        l = c.find(".moreCardTd"), b = parseInt(q.attr("cellspacing")),
        t = parseInt(c.find(".photoMoreCardInner").attr("cardstyle")) || 0;
    var n = c.find(".moreCardDrag"), s = n.length, o = s / 2, d = c.height() - (s + 1) * b, a = d / (o), h, m, r, g, e,
        l;
    var k = 0;
    n.each(function (v, w) {
        var u = $(this).find(".noPhoto");
        var x = u.length > 0;
        if (x) {
            j($(this), u)
        }
        k += $(this).find(".moreCardTd").last().height()
    });
    function j(w, u) {
        var v = u.first().prev();
        if (v.length > 0 && v.attr("rowspan") != "2") {
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", v.height());
            return
        }
        if (v.length > 0 && v.attr("rowspan") == "2") {
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", (v.height() - t) / 2);
            return
        }
        if (v.length == 0) {
            var x = w.prev().find(".moreCardTd").last().height();
            w.find(".noPhoto, .noPhoto .photoMoreCard").css("height", a - x)
        }
    }

    var p = [];
    c.find(".moreCardTd").each(function () {
        var u = $(this).height();
        if ($(this).attr("rowspan") == "2") {
            p.push($(this))
        } else {
            $(this).css("height", Math.floor(d * u / k));
            $(this).find(".photoMoreCard").css("height", Math.floor(d * u / k))
        }
    });
    $.each(p, function (v, x) {
        if (x.attr("rowspan") == "2") {
            var w = x.next().height();
            var u = x.parent().next().find(".moreCardTd").first().height();
            x.css("height", Math.floor(w + u + b - 1));
            x.find(".photoMoreCard").css("height", Math.floor(w + u + b - 1))
        }
    });
    f();
    function f() {
        n.each(function () {
            var v = $(this).find(".noPhoto");
            if (v.length < 1) {
                return true
            }
            var u = $(this).children(), w = u.first();
            if (!w.hasClass("noPhoto") && w.attr("rowspan") != "2") {
                u.css("height", w.height())
            }
        })
    }
};
Run.adjustPhotoMoreCard = function (d) {
    if (Helper.isNumber(d)) {
        var b = Helper.top.$("#module" + d);
        if (b.hasClass("formStyle98") && !b.find(".photoMoreCardOuter").attr("cusHeight")) {
            Run.initPhotoMoreCard(d);
            b.attr("_autoheight", 0)
        }
    } else {
        if (typeof d == "object") {
            var e = d;
            var c = e.find(".formStyle98");
            if (c.length > 0) {
                a(c)
            }
        } else {
            if (d == undefined) {
                var c = Helper.top.$(".formStyle98");
                if (c.length > 0) {
                    a(c)
                }
            }
        }
    }
    function a(f) {
        c.each(function () {
            var h = $(this).attr("id").replace("module", ""), g = $(this).find(".photoMoreCardOuter"),
                j = g.attr("cusHeight"), i = parseInt($(this).data("contentWidth")) || undefined;
            if (j) {
                return true
            }
            Run.initPhotoMoreCard(h, i);
            $(this).attr("_autoheight", 1)
        })
    }
};
Run.photoMoreCardHideDrag = function (a) {
    $("#module" + a).find(".photoMoreCardTable").find(".drag").each(function () {
        $(this).css("display", "none")
    })
};
Run.initPhotoMoreCardTdLength = function (d, b) {
    var a = $("#module" + d), c = a.find(".photoMoreCardTable"), e = parseInt(c.attr("cellspacing"));
    a.data("photoStyleId", b);
    if (b == 0) {
        a.find(".moreCardDrag").each(function (g, h) {
            var f = $(this).attr("num");
            if (f == 0) {
                $(this).attr("num", 1)
            } else {
                $(this).attr("num", 2)
            }
        })
    } else {
        if (b == 1) {
            a.find(".moreCardDrag").each(function (g, h) {
                var f = $(this).attr("num");
                if (f == 0) {
                    $(this).attr("num", 2)
                } else {
                    $(this).attr("num", 1)
                }
            })
        } else {
            if (b == 2) {
                a.find(".moreCardDrag").each(function (g, h) {
                    var f = $(this).attr("num");
                    if (f == 0) {
                        $(this).attr("num", 2)
                    } else {
                        $(this).attr("num", 2)
                    }
                })
            } else {
                if (b == 3) {
                    a.find(".moreCardDrag").each(function (g, h) {
                        var f = $(this).attr("num");
                        if (f == 0) {
                            $(this).attr("num", 1)
                        } else {
                            $(this).attr("num", 2)
                        }
                    })
                } else {
                    if (b == 4) {
                        a.find(".moreCardDrag").each(function (g, h) {
                            var f = $(this).attr("num");
                            if (f == 0) {
                                $(this).attr("num", 1)
                            } else {
                                $(this).attr("num", 2)
                            }
                        })
                    } else {
                        if (b == 5) {
                            a.find(".moreCardDrag").each(function (g, h) {
                                var f = $(this).attr("num");
                                if (f == 0) {
                                    $(this).attr("num", 2)
                                } else {
                                    $(this).attr("num", 1)
                                }
                            })
                        } else {
                            if (b == 6) {
                                a.find(".moreCardDrag").each(function (g, h) {
                                    var f = $(this).attr("num");
                                    if (f == 0) {
                                        $(this).attr("num", 3)
                                    } else {
                                        $(this).attr("num", 2)
                                    }
                                })
                            } else {
                                if (b == 7) {
                                    a.find(".moreCardDrag").each(function (g, h) {
                                        var f = $(this).attr("num");
                                        if (f == 0) {
                                            $(this).attr("num", 2)
                                        } else {
                                            $(this).attr("num", 1)
                                        }
                                    })
                                } else {
                                    if (b == 8) {
                                        a.find(".moreCardDrag").each(function (g, h) {
                                            var f = $(this).attr("num");
                                            if (f == 0) {
                                                $(this).attr("num", 1)
                                            } else {
                                                $(this).attr("num", 2)
                                            }
                                        })
                                    } else {
                                        if (b == 9) {
                                            a.find(".moreCardDrag").each(function (g, h) {
                                                var f = $(this).attr("num");
                                                if (f == 0) {
                                                    $(this).attr("num", 1)
                                                } else {
                                                    $(this).attr("num", 0)
                                                }
                                            })
                                        } else {
                                            if (b == 10) {
                                                a.find(".moreCardDrag").each(function (g, h) {
                                                    var f = $(this).attr("num");
                                                    if (f == 0) {
                                                        $(this).attr("num", 0)
                                                    } else {
                                                        $(this).attr("num", 1)
                                                    }
                                                })
                                            } else {
                                                if (b == 11) {
                                                    a.find(".moreCardDrag").each(function (g, h) {
                                                        var f = $(this).attr("num");
                                                        if (f == 0) {
                                                            $(this).attr("num", 1)
                                                        } else {
                                                            $(this).attr("num", 1)
                                                        }
                                                    })
                                                } else {
                                                    if (b == 12) {
                                                        a.find(".moreCardDrag").each(function (g, h) {
                                                            var f = $(this).attr("num");
                                                            if (f == 0) {
                                                                $(this).attr("num", 2)
                                                            } else {
                                                                $(this).attr("num", 2)
                                                            }
                                                        })
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
Run.firstPhotoMoreCardInit = function (b, o) {
    var c = $("#module" + b), p = c.find(".photoMoreCardTable"), g = parseInt(p.attr("cellspacing")), n = c.width(),
        j = c.height(), f;
    c.data("photoStyleId", o);
    if (o == 0) {
        var f = Math.ceil(c.find(".moreCardTd").length / 4), l = (n - 3 * g) * 0.35, k = (n - 3 * g) * 0.65,
            e = (n - 4 * g - l) * 0.5, m = e, a = (j - (f + 1) * g) / f, i = (a - g) / 2, h = i, d = h;
        c.find(".moreCardTd").each(function (q, r) {
            q = q % 4;
            if (q == 0) {
                $(this).css("width", l + "px");
                $(this).css("height", a + "px")
            } else {
                if (q == 1) {
                    $(this).css("width", k + "px");
                    $(this).css("height", i + "px")
                } else {
                    if (q == 2) {
                        $(this).css("width", e + "px");
                        $(this).css("height", h + "px")
                    } else {
                        if (q == 3) {
                            $(this).css("width", m + "px");
                            $(this).css("height", d + "px")
                        }
                    }
                }
            }
        })
    } else {
        if (o == 1) {
            var f = Math.ceil(c.find(".moreCardTd").length / 4);
            l = (n - 3 * g) * 0.35, k = (n - 4 * g - l) * 0.5, e = k, m = (n - 3 * g) * 0.65, a = (j - (f + 1) * g) / f, i = (a - g) / 2, h = i, d = h;
            c.find(".moreCardTd").each(function (q, r) {
                q = q % 4;
                if (q == 0) {
                    $(this).css("width", l + "px");
                    $(this).css("height", a + "px")
                } else {
                    if (q == 1) {
                        $(this).css("width", k + "px");
                        $(this).css("height", i + "px")
                    } else {
                        if (q == 2) {
                            $(this).css("width", e + "px");
                            $(this).css("height", h + "px")
                        } else {
                            if (q == 3) {
                                $(this).css("width", m + "px");
                                $(this).css("height", d + "px")
                            }
                        }
                    }
                }
            })
        } else {
            if (o == 2) {
                var f = Math.ceil(c.find(".moreCardTd").length / 5);
                l = (n - 4 * g) * 0.35, k = (n - 4 * g - l) * 0.5, e = k, m = e, fifthWidth = m, a = (j - (f + 1) * g) / f, i = (a - g) / 2, h = i, d = h, fifthHeight = d;
                c.find(".moreCardTd").each(function (q, r) {
                    q = q % 5;
                    if (q == 0) {
                        $(this).css("width", l + "px");
                        $(this).css("height", a + "px")
                    } else {
                        if (q == 1) {
                            $(this).css("width", k + "px");
                            $(this).css("height", i + "px")
                        } else {
                            if (q == 2) {
                                $(this).css("width", e + "px");
                                $(this).css("height", h + "px")
                            } else {
                                if (q == 3) {
                                    $(this).css("width", m + "px");
                                    $(this).css("height", d + "px")
                                } else {
                                    if (q == 4) {
                                        $(this).css("width", fifthWidth + "px");
                                        $(this).css("height", fifthHeight + "px")
                                    }
                                }
                            }
                        }
                    }
                })
            } else {
                if (o == 3) {
                    var f = Math.ceil(c.find(".moreCardTd").length / 5);
                    l = (n - 3 * g) * 0.35, k = (n - 3 * g) * 0.65, e = l, m = (n - 4 * g - l) * 0.5, fifthWidth = m, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                    c.find(".moreCardTd").each(function (q, r) {
                        q = q % 5;
                        if (q == 0) {
                            $(this).css("width", l + "px");
                            $(this).css("height", a + "px")
                        } else {
                            if (q == 1) {
                                $(this).css("width", k + "px");
                                $(this).css("height", i + "px")
                            } else {
                                if (q == 2) {
                                    $(this).css("width", e + "px");
                                    $(this).css("height", h + "px")
                                } else {
                                    if (q == 3) {
                                        $(this).css("width", m + "px");
                                        $(this).css("height", d + "px")
                                    } else {
                                        if (q == 4) {
                                            $(this).css("width", fifthWidth + "px");
                                            $(this).css("height", fifthHeight + "px")
                                        }
                                    }
                                }
                            }
                        }
                    })
                } else {
                    if (o == 4) {
                        var f = Math.ceil(c.find(".moreCardTd").length / 5);
                        l = (n - 3 * g) * 0.65, k = (n - 3 * g) * 0.35, e = (n - 4 * g - k) * 0.5, m = e, fifthWidth = k, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                        c.find(".moreCardTd").each(function (q, r) {
                            q = q % 5;
                            if (q == 0) {
                                $(this).css("width", l + "px");
                                $(this).css("height", a + "px")
                            } else {
                                if (q == 1) {
                                    $(this).css("width", k + "px");
                                    $(this).css("height", i + "px")
                                } else {
                                    if (q == 2) {
                                        $(this).css("width", e + "px");
                                        $(this).css("height", h + "px")
                                    } else {
                                        if (q == 3) {
                                            $(this).css("width", m + "px");
                                            $(this).css("height", d + "px")
                                        } else {
                                            if (q == 4) {
                                                $(this).css("width", fifthWidth + "px");
                                                $(this).css("height", fifthHeight + "px")
                                            }
                                        }
                                    }
                                }
                            }
                        })
                    } else {
                        if (o == 5) {
                            var f = Math.ceil(c.find(".moreCardTd").length / 5);
                            m = (n - 3 * g) * 0.65, fifthWidth = (n - 3 * g) * 0.35, l = (n - 4 * g - fifthWidth) * 0.5, k = l, e = (n - 4 * g) * 0.35, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                            c.find(".moreCardTd").each(function (q, r) {
                                q = q % 5;
                                if (q == 0) {
                                    $(this).css("width", l + "px");
                                    $(this).css("height", a + "px")
                                } else {
                                    if (q == 1) {
                                        $(this).css("width", k + "px");
                                        $(this).css("height", i + "px")
                                    } else {
                                        if (q == 2) {
                                            $(this).css("width", e + "px");
                                            $(this).css("height", h + "px")
                                        } else {
                                            if (q == 3) {
                                                $(this).css("width", m + "px");
                                                $(this).css("height", d + "px")
                                            } else {
                                                if (q == 4) {
                                                    $(this).css("width", fifthWidth + "px");
                                                    $(this).css("height", fifthHeight + "px")
                                                }
                                            }
                                        }
                                    }
                                }
                            })
                        } else {
                            if (o == 6) {
                                var f = Math.ceil(c.find(".moreCardTd").length / 7);
                                l = (n - 5 * g) * 0.25, k = l, e = k, m = e, fifthWidth = l * 2 + g, sixthWidth = m, seventhWidth = sixthWidth, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                sixthHeight = fifthHeight, seventhHeight = sixthHeight;
                                c.find(".moreCardTd").each(function (q, r) {
                                    q = q % 7;
                                    if (q == 0) {
                                        $(this).css("width", l + "px");
                                        $(this).css("height", a + "px")
                                    } else {
                                        if (q == 1) {
                                            $(this).css("width", k + "px");
                                            $(this).css("height", i + "px")
                                        } else {
                                            if (q == 2) {
                                                $(this).css("width", e + "px");
                                                $(this).css("height", h + "px")
                                            } else {
                                                if (q == 3) {
                                                    $(this).css("width", m + "px");
                                                    $(this).css("height", d + "px")
                                                } else {
                                                    if (q == 4) {
                                                        $(this).css("width", fifthWidth + "px");
                                                        $(this).css("height", fifthHeight + "px")
                                                    } else {
                                                        if (q == 5) {
                                                            $(this).css("width", sixthWidth + "px");
                                                            $(this).css("height", sixthHeight + "px")
                                                        } else {
                                                            if (q == 6) {
                                                                $(this).css("width", seventhWidth + "px");
                                                                $(this).css("height", seventhHeight + "px")
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                })
                            } else {
                                if (o == 7) {
                                    var f = Math.ceil(c.find(".moreCardTd").length / 5);
                                    l = (n - 4 * g) * 0.33, k = (n - 4 * g) * 0.34, e = l, m = (n - 3 * g) * 0.5, fifthWidth = m, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                    c.find(".moreCardTd").each(function (q, r) {
                                        q = q % 5;
                                        if (q == 0) {
                                            $(this).css("width", l + "px");
                                            $(this).css("height", a + "px")
                                        } else {
                                            if (q == 1) {
                                                $(this).css("width", k + "px");
                                                $(this).css("height", i + "px")
                                            } else {
                                                if (q == 2) {
                                                    $(this).css("width", e + "px");
                                                    $(this).css("height", h + "px")
                                                } else {
                                                    if (q == 3) {
                                                        $(this).css("width", m + "px");
                                                        $(this).css("height", d + "px")
                                                    } else {
                                                        if (q == 4) {
                                                            $(this).css("width", fifthWidth + "px");
                                                            $(this).css("height", fifthHeight + "px")
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    })
                                } else {
                                    if (o == 8) {
                                        var f = Math.ceil(c.find(".moreCardTd").length / 5);
                                        l = (n - 3 * g) * 0.5, k = l, e = (n - 4 * g) * 0.33, m = (n - 4 * g) * 0.34, fifthWidth = e, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                        c.find(".moreCardTd").each(function (q, r) {
                                            q = q % 5;
                                            if (q == 0) {
                                                $(this).css("width", l + "px");
                                                $(this).css("height", a + "px")
                                            } else {
                                                if (q == 1) {
                                                    $(this).css("width", k + "px");
                                                    $(this).css("height", i + "px")
                                                } else {
                                                    if (q == 2) {
                                                        $(this).css("width", e + "px");
                                                        $(this).css("height", h + "px")
                                                    } else {
                                                        if (q == 3) {
                                                            $(this).css("width", m + "px");
                                                            $(this).css("height", d + "px")
                                                        } else {
                                                            if (q == 4) {
                                                                $(this).css("width", fifthWidth + "px");
                                                                $(this).css("height", fifthHeight + "px")
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        })
                                    } else {
                                        if (o == 9) {
                                            var f = Math.ceil(c.find(".moreCardTd").length / 3);
                                            l = (n - 3 * g) * 0.5, k = l, e = (n - 2 * g) * 1, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i;
                                            c.find(".moreCardTd").each(function (q, r) {
                                                q = q % 3;
                                                if (q == 0) {
                                                    $(this).css("width", l + "px");
                                                    $(this).css("height", a + "px")
                                                } else {
                                                    if (q == 1) {
                                                        $(this).css("width", k + "px");
                                                        $(this).css("height", i + "px")
                                                    } else {
                                                        if (q == 2) {
                                                            $(this).css("width", e + "px");
                                                            $(this).css("height", h + "px")
                                                        }
                                                    }
                                                }
                                            })
                                        } else {
                                            if (o == 10) {
                                                var f = Math.ceil(c.find(".moreCardTd").length / 3);
                                                l = (n - 2 * g) * 1, k = (n - 3 * g) * 0.5, e = k, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i;
                                                c.find(".moreCardTd").each(function (q, r) {
                                                    q = q % 3;
                                                    if (q == 0) {
                                                        $(this).css("width", l + "px");
                                                        $(this).css("height", a + "px")
                                                    } else {
                                                        if (q == 1) {
                                                            $(this).css("width", k + "px");
                                                            $(this).css("height", i + "px")
                                                        } else {
                                                            if (q == 2) {
                                                                $(this).css("width", e + "px");
                                                                $(this).css("height", h + "px")
                                                            }
                                                        }
                                                    }
                                                })
                                            } else {
                                                if (o == 11) {
                                                    var f = Math.ceil(c.find(".moreCardTd").length / 4);
                                                    l = (n - 3 * g) * 0.65, k = (n - 3 * g) * 0.35, e = k, m = l, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h;
                                                    c.find(".moreCardTd").each(function (q, r) {
                                                        q = q % 4;
                                                        if (q == 0) {
                                                            $(this).css("width", l + "px");
                                                            $(this).css("height", a + "px")
                                                        } else {
                                                            if (q == 1) {
                                                                $(this).css("width", k + "px");
                                                                $(this).css("height", i + "px")
                                                            } else {
                                                                if (q == 2) {
                                                                    $(this).css("width", e + "px");
                                                                    $(this).css("height", h + "px")
                                                                } else {
                                                                    if (q == 3) {
                                                                        $(this).css("width", m + "px");
                                                                        $(this).css("height", d + "px")
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    })
                                                } else {
                                                    if (o == 12) {
                                                        var f = Math.ceil(c.find(".moreCardTd").length / 6);
                                                        l = (n - 4 * g) * 0.43, k = (n - 4 * g) * 0.34, e = (n - 4 * g) * 0.23, m = e, fifthWidth = k, sixthWidth = l, a = ((j - (f + 1) * g) / f - g) / 2, i = a, h = i, d = h, fifthHeight = d;
                                                        sixthHeight = fifthHeight;
                                                        c.find(".moreCardTd").each(function (q, r) {
                                                            q = q % 6;
                                                            if (q == 0) {
                                                                $(this).css("width", l + "px");
                                                                $(this).css("height", a + "px")
                                                            } else {
                                                                if (q == 1) {
                                                                    $(this).css("width", k + "px");
                                                                    $(this).css("height", i + "px")
                                                                } else {
                                                                    if (q == 2) {
                                                                        $(this).css("width", e + "px");
                                                                        $(this).css("height", h + "px")
                                                                    } else {
                                                                        if (q == 3) {
                                                                            $(this).css("width", m + "px");
                                                                            $(this).css("height", d + "px")
                                                                        } else {
                                                                            if (q == 4) {
                                                                                $(this).css("width", fifthWidth + "px");
                                                                                $(this).css("height", fifthHeight + "px")
                                                                            } else {
                                                                                if (q == 5) {
                                                                                    $(this).css("width", sixthWidth + "px");
                                                                                    $(this).css("height", sixthHeight + "px")
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        })
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    Run.adjustPhotoMoreCardImgSize(c)
};
Run.nophotoMoreCardInit = function (a, l) {
    var b = $("#module" + a), m = b.find(".photoMoreCardTable"), e = parseInt(m.attr("cellspacing")), k = b.width(),
        f = b.height(), c;
    if (l == 0) {
        var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
        if (i == 1) {
            j = b.find(".moreCardTd").eq(d - 1).width();
            h = b.find(".moreCardTd").eq(d - 2).width() - j - e;
            b.find(".noPhoto").eq(0).css("width", h + "px")
        } else {
            if (i == 2) {
                j = b.find(".moreCardTd").eq(d - 1).width();
                h = (j - e) / 2;
                g = h;
                b.find(".noPhoto").eq(0).css("width", h + "px");
                b.find(".noPhoto").eq(1).css("width", g + "px")
            } else {
                if (i == 3) {
                    j = b.find(".moreCardTd").eq(d - 1).width();
                    h = k - j - 3 * e;
                    g = (k - j - 4 * e) / 2;
                    b.find(".noPhoto").eq(0).css("width", h + "px");
                    b.find(".noPhoto").eq(1).css("width", g + "px");
                    b.find(".noPhoto").eq(2).css("width", g + "px")
                }
            }
        }
    } else {
        if (l == 1) {
            var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
            if (i == 1) {
                j = b.find(".moreCardTd").eq(d - 1).width();
                h = b.find(".moreCardTd").eq(d - 2).width() + j + e;
                b.find(".noPhoto").eq(0).css("width", h + "px")
            } else {
                if (i == 2) {
                    j = b.find(".moreCardTd").eq(d - 2).width();
                    h = k - 3 * e - j;
                    g = h - b.find(".moreCardTd").eq(d - 1).width() - e;
                    b.find(".noPhoto").eq(0).css("width", g + "px");
                    b.find(".noPhoto").eq(1).css("width", h + "px")
                } else {
                    if (i == 3) {
                        j = b.find(".moreCardTd").eq(d - 1).width();
                        h = k - j - 3 * e;
                        g = (k - j - 4 * e) / 2;
                        b.find(".noPhoto").eq(0).css("width", g + "px");
                        b.find(".noPhoto").eq(1).css("width", g + "px");
                        b.find(".noPhoto").eq(2).css("width", h + "px")
                    }
                }
            }
        } else {
            if (l == 2) {
                var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
                if (i == 1) {
                    j = b.find(".moreCardTd").eq(d - 4).width();
                    h = k - b.find(".moreCardTd").eq(d - 1).width() - j - 4 * e;
                    b.find(".noPhoto").eq(0).css("width", h + "px")
                } else {
                    if (i == 2) {
                        j = b.find(".moreCardTd").eq(d - 3).width();
                        h = (k - 4 * e - j) / 2;
                        b.find(".noPhoto").eq(0).css("width", h + "px");
                        b.find(".noPhoto").eq(1).css("width", h + "px")
                    } else {
                        if (i == 3) {
                            j = b.find(".moreCardTd").eq(d - 2).width();
                            h = k - b.find(".moreCardTd").eq(d - 1).width() - j - 4 * e;
                            g = (k - j - 4 * e) / 2;
                            b.find(".noPhoto").eq(0).css("width", h + "px");
                            b.find(".noPhoto").eq(1).css("width", g + "px");
                            b.find(".noPhoto").eq(2).css("width", g + "px")
                        } else {
                            if (i == 4) {
                                j = b.find(".moreCardTd").eq(d - 1).width();
                                h = (k - 4 * e - j) / 2;
                                b.find(".noPhoto").eq(0).css("width", h + "px");
                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                b.find(".noPhoto").eq(2).css("width", h + "px");
                                b.find(".noPhoto").eq(3).css("width", h + "px")
                            }
                        }
                    }
                }
            } else {
                if (l == 3) {
                    var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
                    if (i == 1) {
                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                        b.find(".noPhoto").eq(0).css("width", j + "px")
                    } else {
                        if (i == 2) {
                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                            b.find(".noPhoto").eq(0).css("width", j + "px");
                            b.find(".noPhoto").eq(1).css("width", j + "px")
                        } else {
                            if (i == 3) {
                                j = (k - 4 * e) / 3;
                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                b.find(".noPhoto").eq(1).css("width", j + "px");
                                b.find(".noPhoto").eq(2).css("width", j + "px")
                            } else {
                                if (i == 4) {
                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                    h = (k - 4 * e) / 3;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", h + "px");
                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                    b.find(".noPhoto").eq(3).css("width", h + "px")
                                }
                            }
                        }
                    }
                } else {
                    if (l == 4) {
                        var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
                        if (i == 1) {
                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                            b.find(".noPhoto").eq(0).css("width", j + "px")
                        } else {
                            if (i == 2) {
                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                b.find(".noPhoto").eq(1).css("width", j + "px")
                            } else {
                                if (i == 3) {
                                    j = (k - 4 * e) / 3;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                } else {
                                    if (i == 4) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                        h = (k - 4 * e) / 3;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                    }
                                }
                            }
                        }
                    } else {
                        if (l == 5) {
                            var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
                            if (i == 1) {
                                j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                b.find(".noPhoto").eq(0).css("width", j + "px")
                            } else {
                                if (i == 2) {
                                    j = (k - 3 * e) / 2;
                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                    b.find(".noPhoto").eq(1).css("width", j + "px")
                                } else {
                                    if (i == 3) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                        h = (k - 3 * e) / 2;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                        b.find(".noPhoto").eq(2).css("width", h + "px")
                                    } else {
                                        if (i == 4) {
                                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                            h = (k - 3 * e) / 2;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                            b.find(".noPhoto").eq(2).css("width", h + "px");
                                            b.find(".noPhoto").eq(3).css("width", h + "px")
                                        }
                                    }
                                }
                            }
                        } else {
                            if (l == 6) {
                                var j, h, g, i = b.find(".noPhoto").length, d = b.find(".noPhoto").eq(0).attr("number");
                                if (i == 1) {
                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                    b.find(".noPhoto").eq(0).css("width", j + "px")
                                } else {
                                    if (i == 2) {
                                        j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                        b.find(".noPhoto").eq(1).css("width", j + "px")
                                    } else {
                                        if (i == 3) {
                                            j = (k - 4 * e) / 3;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                            b.find(".noPhoto").eq(2).css("width", j + "px")
                                        } else {
                                            if (i == 4) {
                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - b.find(".moreCardTd").eq(d - 3).width() - 5 * e;
                                                h = (k - 4 * e) / 3;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                b.find(".noPhoto").eq(2).css("width", h + "px");
                                                b.find(".noPhoto").eq(3).css("width", h + "px")
                                            } else {
                                                if (i == 5) {
                                                    j = (k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 5 * e) / 2;
                                                    h = (k - 4 * e) / 3;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                                    b.find(".noPhoto").eq(3).css("width", h + "px");
                                                    b.find(".noPhoto").eq(4).css("width", h + "px")
                                                } else {
                                                    if (i == 6) {
                                                        j = (k - b.find(".moreCardTd").eq(d - 1).width() - 5 * e) / 3;
                                                        h = (k - 4 * e) / 3;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", j + "px");
                                                        b.find(".noPhoto").eq(2).css("width", j + "px");
                                                        b.find(".noPhoto").eq(3).css("width", h + "px");
                                                        b.find(".noPhoto").eq(4).css("width", h + "px");
                                                        b.find(".noPhoto").eq(5).css("width", h + "px")
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            } else {
                                if (l == 7) {
                                    var j, h, g, i = b.find(".noPhoto").length,
                                        d = b.find(".noPhoto").eq(0).attr("number");
                                    if (i == 1) {
                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                        b.find(".noPhoto").eq(0).css("width", j + "px")
                                    } else {
                                        if (i == 2) {
                                            j = (k - 3 * e) / 2;
                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                            b.find(".noPhoto").eq(1).css("width", j + "px")
                                        } else {
                                            if (i == 3) {
                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                h = (k - 3 * e) / 2;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                b.find(".noPhoto").eq(2).css("width", h + "px")
                                            } else {
                                                if (i == 4) {
                                                    j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                    h = (k - 3 * e) / 2;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", h + "px");
                                                    b.find(".noPhoto").eq(3).css("width", h + "px")
                                                }
                                            }
                                        }
                                    }
                                } else {
                                    if (l == 8) {
                                        var j, h, g, i = b.find(".noPhoto").length,
                                            d = b.find(".noPhoto").eq(0).attr("number");
                                        if (i == 1) {
                                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                            b.find(".noPhoto").eq(0).css("width", j + "px")
                                        } else {
                                            if (i == 2) {
                                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                b.find(".noPhoto").eq(1).css("width", j + "px")
                                            } else {
                                                if (i == 3) {
                                                    j = (k - 4 * e) / 3;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                                } else {
                                                    if (i == 4) {
                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                        h = (k - 4 * e) / 3;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                                    }
                                                }
                                            }
                                        }
                                    } else {
                                        if (l == 9) {
                                            var j, h, g, i = b.find(".noPhoto").length,
                                                d = b.find(".noPhoto").eq(0).attr("number");
                                            if (i == 1) {
                                                j = k - 2 * e;
                                                b.find(".noPhoto").eq(0).css("width", j + "px")
                                            } else {
                                                if (i == 2) {
                                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                    h = k - 2 * e;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                    b.find(".noPhoto").eq(1).css("width", h + "px")
                                                }
                                            }
                                        } else {
                                            if (l == 10) {
                                                var j, h, g, i = b.find(".noPhoto").length,
                                                    d = b.find(".noPhoto").eq(0).attr("number");
                                                if (i == 1) {
                                                    j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                    b.find(".noPhoto").eq(0).css("width", j + "px")
                                                } else {
                                                    if (i == 2) {
                                                        j = (k - 3 * e) / 2;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                        b.find(".noPhoto").eq(1).css("width", j + "px")
                                                    }
                                                }
                                            } else {
                                                if (l == 11) {
                                                    var j, h, g, i = b.find(".noPhoto").length,
                                                        d = b.find(".noPhoto").eq(0).attr("number");
                                                    if (i == 1) {
                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                        b.find(".noPhoto").eq(0).css("width", j + "px")
                                                    } else {
                                                        if (i == 2) {
                                                            j = (k - 3 * e) / 2;
                                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                                            b.find(".noPhoto").eq(1).css("width", j + "px")
                                                        } else {
                                                            if (i == 3) {
                                                                j = k - b.find(".moreCardTd").eq(d - 1).width() - 3 * e;
                                                                h = (k - 3 * e) / 2;
                                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                b.find(".noPhoto").eq(1).css("width", h + "px");
                                                                b.find(".noPhoto").eq(2).css("width", h + "px")
                                                            }
                                                        }
                                                    }
                                                } else {
                                                    if (l == 12) {
                                                        var j, h, g, i = b.find(".noPhoto").length,
                                                            d = b.find(".noPhoto").eq(0).attr("number");
                                                        if (i == 1) {
                                                            j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                            b.find(".noPhoto").eq(0).css("width", j + "px")
                                                        } else {
                                                            if (i == 2) {
                                                                j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                                b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                b.find(".noPhoto").eq(1).css("width", j + "px")
                                                            } else {
                                                                if (i == 3) {
                                                                    j = (k - 4 * e) / 3;
                                                                    b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                    b.find(".noPhoto").eq(1).css("width", j + "px");
                                                                    b.find(".noPhoto").eq(2).css("width", j + "px")
                                                                } else {
                                                                    if (i == 4) {
                                                                        j = k - b.find(".moreCardTd").eq(d - 1).width() - b.find(".moreCardTd").eq(d - 2).width() - 4 * e;
                                                                        h = (k - 4 * e) / 3;
                                                                        b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                        b.find(".noPhoto").eq(1).css("width", h + "px");
                                                                        b.find(".noPhoto").eq(2).css("width", h + "px");
                                                                        b.find(".noPhoto").eq(3).css("width", h + "px")
                                                                    } else {
                                                                        if (i == 5) {
                                                                            j = (k - b.find(".moreCardTd").eq(d - 1).width() - 4 * e) / 2;
                                                                            h = (k - 4 * e) / 3;
                                                                            b.find(".noPhoto").eq(0).css("width", j + "px");
                                                                            b.find(".noPhoto").eq(1).css("width", j + "px");
                                                                            b.find(".noPhoto").eq(2).css("width", h + "px");
                                                                            b.find(".noPhoto").eq(3).css("width", h + "px");
                                                                            b.find(".noPhoto").eq(4).css("width", h + "px")
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    Run.adjustPhotoMoreCardImgSize(b)
};
(function (h, e, f) {
    var b = {}, l = "fullmeasureOuterContentPage", g = false, k = false, c = false, j = false, a = 0, i = 0;
    var d = [];
    h(function () {
        var o = h(".formStyle80");
        setTimeout(function () {
            k = true;
            if (d.length > 0 || Helper.top._manageMode) {
                h("body").off("mousemove.fmGmainMousemove").on("mousemove.fmGmainMousemove", function (p) {
                    if (Helper.top._manageMode) {
                        if (h(".popupBg").length > 0) {
                            if (!j) {
                                j = true;
                                a = 0;
                                var w = h(".formStyle80");
                                if (w.length > 0) {
                                    w.each(function (y, A) {
                                        var z = h(A).attr("id");
                                        if (typeof(z) != f) {
                                            h("#module" + z.replace("module", "")).data("mouseenter", false)
                                        }
                                    })
                                }
                            }
                        } else {
                            j = false
                        }
                    }
                    if (d.length > 0) {
                        if (c) {
                            return
                        }
                        c = true;
                        a = 0;
                        var u = p || window.event;
                        var v = u.clientY;
                        var s = false;
                        for (var t = 0; t < d.length; t++) {
                            var r = h("#module" + d[t]);
                            var x = r.height();
                            var q = h("#module" + d[t])[0].getBoundingClientRect().top;
                            if (v >= q && v <= (x + q)) {
                                a = d[t];
                                s = true;
                                break
                            }
                        }
                        if (!s) {
                            a = 0
                        }
                        c = false
                    }
                })
            }
            if (Helper.top._manageMode) {
                h("body").off("click.fmGmainClick").on("click.fmGmainClick", function () {
                    if (i == 0) {
                        return
                    }
                    if (i != a) {
                        if (h("#faiFloatPanel").css("display") != "block") {
                            i = 0
                        }
                    }
                })
            }
        }, 1500);
        if (o.length > 0 || Helper.top._manageMode) {
            o.each(function (p, q) {
                var r = h(q).attr("id");
                if (typeof(r) != f) {
                    e.refFillRelativeDivHeight(r.replace("module", ""), true)
                }
            });
            if (Helper.top._colId == 8) {
                setTimeout(function () {
                    o.each(function (p, q) {
                        var r = h(q).attr("id");
                        if (typeof(r) != f) {
                            e.refFillRelativeDivHeight(r.replace("module", ""), true)
                        }
                    })
                }, 2500)
            }
            setTimeout(function () {
                g = true;
                o.each(function (p, r) {
                    var q = h(r).attr("id");
                    if (typeof(q) != f) {
                        q = q.replace("module", "");
                        e.refFillRelativeDivHeight(q, true);
                        e.dynamicSetArrowDom(q)
                    }
                })
            }, 1000);
            h(window).resize(function () {
                var p = h(".formStyle80");
                p.each(function (q, t) {
                    var s = h(t).attr("fmslidestyle");
                    var r = h(t).attr("id");
                    if (typeof r != f) {
                        r = r.replace("module", "");
                        e.buildFmSlideStyleDom(r, s)
                    }
                })
            })
        }
    });
    e.fmAddModuleStopCarousel = function (q) {
        if (typeof(q) == f) {
            return
        }
        if (Helper.top._manageMode) {
            var o = h("#module" + q);
            if (!o.hasClass("formStyle80")) {
                var p = Run.checkNestModule(o);
                if (p.inFullmeasure) {
                    q = p.parentId
                }
            }
        }
        setTimeout(function () {
            i = q
        }, 500)
    };
    e.setFmCarouselIdList = function (r, q) {
        var o = false;
        for (var p = (d.length - 1); p >= 0; p--) {
            if (d[p] == r) {
                if (q != 1) {
                    d.splice(p, 1)
                }
                o = true;
                break
            }
        }
        if (!o) {
            if (q == 1) {
                d[d.length] = r
            }
        }
    };
    function n(r, p, o, q) {
        e.setModuleFmSlideStyleAndPage(r, p, o, q);
        e.clearAnimate(r);
        e.bindModuleEvent(r);
        e.refFillRelativeDivHeight(r)
    }

    e.setModuleFmSlideStyleAndPage = function (r, p, o, q) {
        if (typeof(r) == f || typeof(p) == f || typeof(o) == f) {
            return
        }
        h("#module" + r).attr("fmSlideStyle", p);
        h("#module" + r).attr("fmPage", o);
        h("#module" + r).attr("isCarousel", q.c);
        h("#module" + r).attr("displayTime", q.d);
        h("#module" + r).attr("carouselSpeed", q.s);
        e.buildFmSlideStyleDom(r, p);
        e.setFmCarouselIdList(r, q.c);
        m(r)
    };
    e.clearAnimate = function (p) {
        if (p in b) {
            var o = b[p];
            if ("animateCt" in o) {
                clearInterval(o.animateCt)
            }
            if ("animateSlide" in o) {
                clearInterval(o.animateSlide)
            }
        }
    };
    e.bindModuleEvent = function (p) {
        var o = h("#module" + p);
        o.off("mouseenter.fullmeasureAnimate").on("mouseenter.fullmeasureAnimate", function () {
            h(this).data("mouseenter", true)
        });
        o.off("mouseleave.fullmeasureAnimate").on("mouseleave.fullmeasureAnimate", function () {
            h(this).data("mouseenter", false)
        })
    };
    e.refFillRelativeDivHeight = function (o, u) {
        if (typeof(o) == f) {
            return
        }
        var q = h("#module" + o);
        var x = 0, p = 0;
        if (q.find(".fullmeasureContent").length > 0) {
            var r = q.find(".J_fullmeasurePageShow .fullmeasureOuterContent").clone();
            var s = false;
            q.prepend("<div class='J_fullmeasureGetMaxHeight' style='display:none; position:relative; height:auto;'></div>");
            if (typeof(r) != f && r != null) {
                r.each(function (z, A) {
                    h(A).find("input").removeAttr("name");
                    q.find(".J_fullmeasureGetMaxHeight").html(h(A));
                    if (q.find(".J_fullmeasureGetMaxHeight").find(".fullmeasureContent").children(".form").length <= 0) {
                        var B = q.find(".J_fullmeasureGetMaxHeight").innerHeight();
                        var y = q.find(".J_fullmeasureGetMaxHeight").height();
                        if (y > 0) {
                            s = true
                        }
                        if (B > p) {
                            p = B
                        }
                        return true
                    }
                    var y = q.find(".J_fullmeasureGetMaxHeight").height();
                    if (y > x) {
                        x = y
                    }
                })
            }
            q.find(".J_fullmeasureGetMaxHeight").remove();
            var w = q.find(".J_fullmeasurePageShow").find(".fullmeasureOuterContentBg");
            w.each(function (y, A) {
                var z = h(A).css("background");
                if (typeof(z) != f && z.indexOf("url") > 0) {
                    s = true;
                    return false
                }
            });
            if (s == true && q.find(".fullmeasureContent").find(".form").length <= 0) {
                x = p
            }
            r = null;
            if (x <= 0) {
                if (Helper.top._manageMode || s == true) {
                    x = 165
                }
            }
            q.find(".fillContentRelative").css({height: x, position: "relative"})
        }
        if (u == true) {
            var v = q.find(".fullmeasureOuterContentPage");
            for (var t = 0; t < v.length; t++) {
                if (v.eq(t).css("display") != "block") {
                    v.eq(t).addClass("hideFmOuterContentPage").css("display", "block")
                }
            }
            setTimeout(function () {
                q.find(".formTabButtonHover").click();
                setTimeout(function () {
                    q.find(".hideFmOuterContentPage").removeClass("hideFmOuterContentPage").css("display", "none")
                }, 100)
            }, 1000)
        }
        e.dynamicSetArrowDom(o)
    };
    e.refreshSlideArrowPositon = function (p) {
        var o = h("#module" + p).attr("fmslidestyle");
        e.buildFmSlideStyleDom(p, o)
    };
    e.slide = function (q, E, u, s) {
        if (!k) {
            return
        }
        var A = b[q];
        var p = h("#module" + q);
        if (s != 0) {
            if (Helper.top._manageMode) {
                if (h("body").children(".popupBg").length || h(".moduleMaskContainer").length > 0) {
                    return
                }
                if (h("#faiFloatPanel").css("display") == "block" && q == i) {
                    return
                }
            }
            if (p.data("stopCarousel") == true) {
                return
            }
            if (a == q) {
                return
            }
        }
        var o = parseInt(p.attr("isCarousel"));
        if (isNaN(o)) {
            o = 0
        }
        var F = o;
        if (typeof(s) != f) {
            o = s
        }
        var G = parseFloat(p.attr("carouselSpeed"));
        if (isNaN(G)) {
            G = 1
        }
        if (o == 1) {
            if (p.data("mouseenter") == true) {
                return
            }
        }
        if (p.data("animateSlide") == true) {
            return
        }
        p.data("animateSlide", true);
        var v = p.find(".J_fullmeasurePageShow");
        if ("animateSlide" in A) {
            clearInterval(A.animateSlide)
        }
        if (v.length <= 1) {
            p.data("animateSlide", false);
            return
        }
        var y, D, C, r = true;
        if (o == 1) {
            for (var B = 0; B < v.length; B++) {
                var z = v.eq(B);
                if (z.css("display") == "block") {
                    D = z;
                    C = B;
                    if (B < (v.length - 1)) {
                        E = (parseInt(B) + 1);
                        y = v.eq(E)
                    } else {
                        E = 0;
                        y = v.eq(0)
                    }
                    break
                }
            }
        } else {
            for (var B = 0; B < v.length; B++) {
                var z = v.eq(B);
                if (z.css("display") == "block" && B != E) {
                    D = z;
                    C = B;
                    break
                }
            }
            y = v.eq(E)
        }
        if (typeof(y) == f || y == null || y.length <= 0) {
            p.data("animateSlide", false);
            return
        }
        if (typeof(D) == f || D == null || D.length <= 0) {
            p.data("animateSlide", false);
            return
        }
        if (C > E) {
            r = false
        }
        if (u == true && E == 0) {
            r = true
        }
        if (o == 1) {
            r = true
        }
        var x = p.width(), t = 0, w = parseInt(x / parseInt(G * 1000 / 40));
        if (F != 1) {
            w = 150
        }
        p.find(".fmSlideStyleShow").removeClass("fmSlideStyleShow");
        p.find(".fmSlideStyle").eq(E).addClass("fmSlideStyleShow");
        if (r) {
            y.css({left: x, display: "block"})
        } else {
            y.css({left: ("-" + x + "px"), display: "block"})
        }
        if ("animateSlide" in A) {
            clearInterval(A.animateSlide)
        }
        A.animateSlide = setInterval(function () {
            if (r) {
                if (y.css("left").replace("px", "") <= 0) {
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({name: "moduleAnimation.publish", base: Helper.top.Run});
                        jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Helper.top.Run})
                    }
                    y.css({display: "block", left: "0"});
                    D.css({display: "none", left: "0"});
                    p.data("animateSlide", false);
                    return
                }
                if (t >= x) {
                    y.css({display: "block", left: "0"});
                    D.css({display: "none", left: "0"});
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({name: "moduleAnimation.publish", base: Helper.top.Run});
                        jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Helper.top.Run})
                    }
                    p.data("animateSlide", false);
                    return
                }
                D.css("left", "-" + t + "px");
                y.css("left", (parseInt(x) - parseInt(t)) + "px");
                t = t + w
            } else {
                if (y.css("left").replace("px", "") >= 0) {
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({name: "moduleAnimation.publish", base: Helper.top.Run});
                        jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Helper.top.Run})
                    }
                    y.css({display: "block", left: "0"});
                    D.css({display: "none", left: "0"});
                    p.data("animateSlide", false);
                    return
                }
                if (t >= x) {
                    y.css({display: "block", left: "0"});
                    D.css({display: "none", left: "0"});
                    if ("animateSlide" in A) {
                        clearInterval(A.animateSlide);
                        jzUtils.run({name: "moduleAnimation.publish", base: Helper.top.Run});
                        jzUtils.run({name: "moduleAnimation.contentAnimationPublish", base: Helper.top.Run})
                    }
                    p.data("animateSlide", false);
                    return
                }
                D.css("left", t + "px");
                y.css("left", (parseInt("-" + x) + parseInt(t)) + "px");
                t = t + w
            }
        }, 40)
    };
    function m(o) {
        if (typeof(b[o]) != f) {
            if ("animateCt" in b[o]) {
                clearInterval(b[o]["animateCt"])
            }
        }
        var p = {};
        b[o] = p;
        var q = h("#module" + o);
        var v = q.find(".fullmeasureOuterContentPage");
        var u = v.eq(0);
        if (q.find(".fillContentRelative").length > 0) {
            var t = u.height();
            q.find(".formWrap").css({position: "relative"});
            v.css({position: "absolute"})
        }
        if (v.length <= 1) {
            if (!Helper.top._manageMode && v.length == 1) {
                v.css({position: "static"})
            }
            return
        }
        v.each(function (z, A) {
            var y = h(A);
            var B = h(A).attr("page");
            if (typeof(B) == f) {
                B = 1000;
                y.attr("1000")
            }
        });
        var s = parseInt(q.attr("isCarousel"));
        if (isNaN(s)) {
            s = 0
        }
        if (s == 1) {
            var x = parseFloat(q.attr("displayTime"));
            if (isNaN(x)) {
                x = 4
            }
            var r = parseFloat(q.attr("carouselSpeed"));
            if (isNaN(r)) {
                r = 1
            }
            var w = (r + x) * 1000;
            p.animateCt = setInterval("Run.inFullmeasueAnimation.slide('" + o + "');", w)
        }
    }

    e.animateFm = function (r, p, o, q) {
        var r = r + "";
        n(r, p, o, q);
        m(r)
    };
    e.slideArrow = function (u, s) {
        var u = u + "";
        var q = h("#module" + u);
        var o = q.find(".J_fullmeasurePageShow");
        var r = o.length;
        if (r <= 1) {
            return
        }
        var p = 0;
        o.each(function (v, w) {
            if (h(w).css("display") == "block") {
                p = v;
                return false
            }
        });
        if (s == 1) {
            p--
        } else {
            if (s == 2) {
                p++
            } else {
                return
            }
        }
        if (p < -1) {
            r = parseInt(r) - 1
        } else {
            if (p >= r) {
                r = 0
            } else {
                r = p
            }
        }
        var t = s == 2 ? true : false;
        e.slide(u, r, t, 0)
    };
    e.dynamicSetArrowDom = function (s) {
        var s = s + "";
        var p = h("#module" + s);
        var o = p.find(".fmSlideStyleArrowBase");
        if (o.length > 0) {
            if (o.css("display") == "none") {
                setTimeout(function () {
                    var u = p.height();
                    if (u < 80) {
                        o.css({display: "none"})
                    } else {
                        var t = parseInt((parseInt(u) - 80) / 2);
                        o.css({top: t + "px", display: "block"})
                    }
                }, 500)
            } else {
                var r = p.height();
                if (r < 80) {
                    o.css({display: "none"})
                } else {
                    var q = parseInt((parseInt(r) - 80) / 2);
                    o.css({top: q + "px", display: "block"})
                }
            }
        } else {
            if (g) {
                if (p.find(".J_fmSlideStyle").length > 0) {
                    var r = p.height();
                    if (r < 40) {
                        p.find(".J_fmSlideStyle").css("display", "none")
                    } else {
                        p.find(".J_fmSlideStyle").css("display", "block")
                    }
                }
            }
        }
    };
    e.buildFmSlideStyleDom = function (r, C) {
        var r = r + "";
        var s = h("#module" + r);
        s.find(".J_fmSlideStyle").remove();
        var B = s.find(".J_fullmeasurePageShow");
        var A = B.length;
        if (A <= 1) {
            return
        }
        var q = 0;
        B.each(function (F, G) {
            if (h(G).css("display") == "block") {
                q = F;
                return false
            }
        });
        var x = [];
        if (C == 3) {
            var y = B.find(".fullmeasureContent").width();
            var z = h(document.body).width();
            var p = 0;
            if ((z - y) > 184) {
                p = parseInt(((parseInt(z) - parseInt(y)) / 2 - 92));
                if (Helper.top._manageMode) {
                    p = p - 10
                }
            } else {
                p = 20
            }
            p = p + "px";
            var o = "style='display:none;left:" + p + ";'", E = "style='display:none;right:" + p + ";''";
            var w = "", u = "", D = "";
            w = "J_fmSlideStyle fmSlideStyleArrowBase fmSlideStyleArrowLast fmSlideStyle" + C;
            u = "J_fmSlideStyle fmSlideStyleArrowBaseBg fmSlideStyleArrowBase fmSlideStyleArrowLast";
            x.push("<div " + o + " class='" + u + "'></div><div " + o + " class='" + w + "' onclick='Run.inFullmeasueAnimation.slideArrow(" + r + ", 1)'></div>");
            w = "J_fmSlideStyle fmSlideStyleArrowBase fmSlideStyleArrowNext fmSlideStyle" + C;
            u = "J_fmSlideStyle fmSlideStyleArrowBaseBg  fmSlideStyleArrowBase fmSlideStyleArrowNext";
            D = "Run.inFullmeasueAnimation.slideArrow(" + r + ", 'next')";
            x.push("<div " + E + "  class='" + u + "'></div><div " + E + " class='" + w + "' onclick='Run.inFullmeasueAnimation.slideArrow(" + r + ", 2)'></div>")
        } else {
            var t = "";
            if (!g) {
                t = "style='display:none;'"
            }
            x.push("<div " + t + " class='fmSlideStyleWrap J_fmSlideStyle'>");
            var w = "", D = "";
            for (var v = 0; v < A; v++) {
                w = "fmSlideStyle fmSlideStyle" + C;
                D = "Run.inFullmeasueAnimation.slide(" + r + "," + v + ", false, 0)";
                if (v == q) {
                    w = w + " fmSlideStyleShow"
                }
                x.push("<div class='" + w + "' onclick='" + D + "'></div>")
            }
            x.push("</div>")
        }
        s.append(x.join(""));
        e.dynamicSetArrowDom(r)
    }
})(jQuery, Run.inFullmeasueAnimation || (Run.inFullmeasueAnimation = {}), "undefined");
(function (f, b, c) {
    var d = !!window.localStorage;
    var e = {bit: {}, tens: {}, array: {}};
    b.setBitMemory = function (h, m) {
        var l = e.bit[h];
        if (typeof l != "number") {
            throw new Error("参数错误！！未配置dic字典");
            return
        }
        var j = parseInt(l / 31), k = l % 31, i = g("JBM" + j);
        if (i == null) {
            i = 0
        } else {
            i = parseInt(i)
        }
        if (Boolean(m)) {
            i |= (1 << k)
        } else {
            i &= ~(1 << k)
        }
        a("JBM" + j, i)
    };
    b.getBitMemory = function (h) {
        var l = e.bit[h];
        if (typeof l != "number") {
            throw new Error("参数错误！！");
            return
        }
        var j = parseInt(l / 31), k = l % 31, i = g("JBM" + j);
        if (i == null) {
            return c
        } else {
            i = parseInt(i)
        }
        return ((i & (1 << k)) != 0) ? true : false
    };
    b.setTensMemory = function (k, o) {
        var h = e.tens[k];
        if (typeof h != "number" || o > 9 || o < 0) {
            throw new Error("参数错误！！");
            return
        }
        var n = parseInt(h), m = g("JTM") || "", l = 0;
        if (m == "") {
            l = n
        } else {
            l = n - m.length
        }
        for (var j = l; j > 0; j--) {
            m += "0"
        }
        m = m.split("");
        m[n] = o;
        m = m.join("");
        a("JTM", m)
    };
    b.getTensMemory = function (j) {
        var i = e.tens[j];
        if (typeof i != "number") {
            throw new Error("参数错误！！");
            return
        }
        var l = i, k = g("JTM") || [], h;
        k = k.split("");
        h = Number(k[l]);
        return isNaN(h) ? c : h
    };
    b.setArrayMemory = function (j, k) {
        var l = e.array[j];
        if (typeof l != "number") {
            throw new Error("参数错误！！");
            return
        }
        var h = unescape(g("JAM") || ""), i = h.split(",") || [];
        i[l] = k;
        h = i.join(",");
        a("JAM", escape(h))
    };
    b.getArrayMemory = function (j) {
        var k = e.array[j];
        if (typeof k != "number") {
            throw new Error("参数错误！！");
            return
        }
        var h = unescape(g("JAM")), i = h.split(",") || [];
        return i[k] || c
    };
    function a(h, i) {
        if (d) {
            b.getTopWindow().localStorage.setItem(h, i)
        } else {
            f.cookie(h, i, {expires: 1800, path: "/"})
        }
    }

    function g(h) {
        if (d) {
            return b.getTopWindow().localStorage.getItem(h)
        } else {
            return f.cookie(h, {path: "/"})
        }
    }
})(jQuery, Run);
$.ajaxSettings.errorCall.push(function (c, a, d) {
    var b = Run.getTopWindow()._faiAjax;
    if (b) {
        b.ajax({
            type: "post",
            url: "ajax/logAjaxErr_h.php?cmd=ajaxErr&error=" + d + "&status=" + a,
            data: "msg=" + Helper.encodeHtml("ajaxUrl=" + Helper.encodeUrl(c.url) + ";refer=" + Helper.encodeUrl(top.location.href))
        })
    }
});
Run.initPage = function () {
    var d = 0, h = 0;
    var c = setInterval(function () {
        $.each(Helper.top.$("body>iframe"), function (k, l) {
            var j = $.trim($(l).attr("src"));
            var n = j;
            var m = j.indexOf("http://");
            if (m >= 0) {
                n = j.substring(m + 7)
            } else {
                return
            }
            m = n.indexOf("/");
            if (m > 0) {
                n = n.substring(0, m)
            }
            m = n.indexOf(":");
            if (m > 0) {
                n = n.substring(0, m)
            }
            if (Helper.isIp(n)) {
                $(l).remove();
                Run.logMsg("body be iframe. iframeSrc=" + j + "; ")
            }
        });
        d++;
        if (d >= 30) {
            clearInterval(c)
        }
    }, 300);
    if (Helper.isIE6()) {
        try {
            document.execCommand("BackgroundImageCache", false, true)
        } catch (g) {
        }
    }
    Run.resetGmainPos();
    if (Helper.isIE7() || Helper.isIE6()) {
        $(window).resize(function () {
            Run.resetGmainPos()
        })
    }
    Run.initForms();
    Run.refreshForms();
    $("#footer").show();
    Run.initPageBindAmousedown();
    Run.setAbsFormsHolder2(true);
    Helper.top.setAbsFormsHolder2_interval = setInterval(function () {
        Run.setAbsFormsHolder2(true)
    }, 1000);
    Run.fixRunWidth(Helper.top._manageMode);
    var f = $("#web").find("iframe");
    if (f.size() > 0) {
        for (var b = 0; b < f.length - 1; b++) {
            $(f[b]).bind("load", function () {
                Run.fixWebFooterHeight()
            })
        }
    } else {
        Run.fixWebFooterHeight()
    }
    Run.refreshDefaultBannerEdge();
    if (Helper.top._manageMode && Helper.top.toolBoxShowView && !(Helper.top._uiMode && Helper.top._isTemplateVersion2)) {
        Run.showHelpererTool()
    }
    if (Helper.top._uiMode) {
        Helper.top.$("#nav .navCenter .item").eq(0).mouseover()
    }
    Run.initPagenationEvent();
    function a(k) {
        var e = k.width(), j = $(window).width() - Helper.getScrollWidth(), i = (e - j) / 2;
        return i
    }

    if (!Helper.top._manageMode) {
        h = a($("#g_main"));
        $(window).scrollLeft(h)
    } else {
        h = a($("#web"));
        $("#g_main").scrollLeft(h)
    }
    Run.checkVisitEnv()
};
Run.initPagenationEvent = function () {
    var b = $(".pagenation a");
    b.live("mouseover", function () {
        $(this).addClass("g_hover")
    });
    b.live("mouseout", function () {
        $(this).removeClass("g_hover")
    });
    var c = $(".pagenation_N").find(".pageNo a, .prevShow_model, .nextShow_model, .jumpPageDiv .bottomSearch");
    c.live("mouseover", function () {
        $(this).addClass("p_hover")
    });
    c.live("mouseout", function () {
        $(this).removeClass("p_hover")
    });
    $(".pagenation, .pagenation_N").each(function (d, e) {
        if (!$(e).attr("id")) {
            return true
        }
        var f = $(e).attr("id").replace("pagenation", "");
        var i = f;
        var g = false;
        $elem = $("#module" + f);
        while (!g) {
            var h = Run.checkNestModule($elem).parentId;
            if (h > 0 && $("#module" + h).attr("_modulestyle") != 80) {
                i = h;
                $elem = $("#module" + i);
                continue
            } else {
                g = true
            }
        }
        a(e, i)
    });
    function a(e, d) {
        $(e).find("a").each(function (h, k) {
            var f = $(k).attr("href");
            if (f) {
                var l = f.lastIndexOf("#module");
                var g = f.substring(l, f.length);
                f = f.replace(g, "#module" + d);
                $(k).attr("href", f)
            }
        })
    }
};
Run.showHelpererTool = function () {
    var k = Run.getTopWindow().location.href;
    var a = /\?/;
    k += (a.test(k) ? "&" : "?") + "_safeMode=true";
    var g = ["dear", "boss", "theone", "cyb", "max", "mgz", "qnt", "kiki", "emma"];
    var j = function (o, n) {
        return parseInt(Math.random() * (n - o) + o)
    };
    var d = j(0, g.length);
    var h = 0;
    while (d === 0) {
        if ((h++) > 1) {
            break
        }
        d = j(0, g.length)
    }
    if (d === 1) {
        d = j(1, g.length)
    }
    if (d === 2) {
        d = j(2, g.length)
    }
    $("#_faiMenuBtn").remove();
    $("#fai_spinach").remove();
    if ($("#fai_webVersionList")) {
        $("#fai_webVersionList").remove()
    }
    var m = "http://hs.aaadns.com/image/faisco_onepice/" + g[d] + ".jpg";
    var i = "<div id='_faiMenuBtn' style='width:50px;height:50px;position:absolute;bottom:100px;left:0px;background:#a90;z-index:9032;'><div style='width:50px;height:50px;background:url(" + m + ") center no-repeat;'><span id='_faiMenuClose' style='display:none;width:15px;height:14px;line-height:14px;text-align:center;position:absolute;top:0px;right:0px;background:url(http://0.ss.faidns.com/image/bg02.png) -1503px -123px no-repeat;cursor:pointer;color:#fff;'></div></div></div>";
    var f = "<div id='fai_spinach' style='padding:5px 0px 5px 5px;line-height:20px;position:absolute;bottom:100px;left:50px;background:#ff8400;z-index:9032;display:none;border:1px solid #000'><table>";
    if (Helper.top.toolBoxShowView) {
        var b = Run.getABVersion();
        f = f + "<tr><td><a href='" + k + "' style='color:#fff;font-size:12px;'>安全模式</a></td></tr><tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.checkManageEnv();return false;'>检测横向滚动条</a></td></tr><tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.getCloneAid();return false;'>自动克隆当前网站</a></td></tr><tr id='J_cloneWebVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.cloneWebVersion()'>克隆企业网站</a></td></tr><tr id='J_changeABVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.changeABVersion(" + b + ")'>切换到" + (b ? "A" : "B") + "类网站</a></td></tr>"
    }
    if (Helper.top.toolBoxShowSet) {
        f = f + "<tr id='J_changeTrialMallTime'><td><a href='javascript:;' style='color:#fff;font-size:12px;padding-right:5px;'>设置商城试用时间</a></td></tr><tr id='J_changeWebVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;'>切换网站版本</a></td></tr>"
    }
    if (Helper.top._debug || Helper.top._isPre) {
        f = f + "<tr id='J_cloneWebVersion'><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.updateVersionTwoStyle()'>更新样式2.0版本号</a></td></tr>"
    }
    f = f + "</table></div>";
    $("body").append(i).append(f);
    var c = "<div id='fai_trialEndTime' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>";
    c += "<table>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.setMallTrialTime(0)'>已过期</a></td></tr>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.setMallTrialTime(1)'>未过期</a></td></tr>";
    c += "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.setMallTrialTime(2)'>自定义时间</a></td></tr>";
    c += "</table>";
    c += "</div>";
    $("body").append(c);
    $("#J_changeTrialMallTime").mouseenter(function () {
        $("#fai_trialEndTime").show()
    }).mouseleave(function () {
        $("#fai_trialEndTime").hide()
    });
    $("#fai_trialEndTime").mouseenter(function () {
        $("#fai_trialEndTime").show();
        $("#fai_spinach").show()
    }).mouseleave(function () {
        $("#fai_trialEndTime").hide();
        $("#_faiMenuClose").hide()
    });
    if (Helper.top.toolBoxShowView) {
        if (!Helper.top._oem) {
            var l = ["<div id='fai_webVersionList' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>", "<table>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(10)'>免费版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(30)'>标准版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(40)'>专业版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(50)'>商城版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(51)'>旗舰版</a></td></tr>", "</table>", "</div>"]
        } else {
            var l = ["<div id='fai_webVersionList' style='padding:5px;line-height:20px;position:absolute;bottom:100px;left:160px;background:#ff8400;z-index:9032;display:none;border:1px solid #000;'>", "<table>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(120)'>初级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(110)'>试用版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(130)'>中级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(140)'>高级版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(150)'>尊贵版</a></td></tr>", "<tr><td><a href='javascript:;' style='color:#fff;font-size:12px;' onclick='Run.chageTheWebVersion(160)'>至尊版</a></td></tr>", "</table>", "</div>"]
        }
        $("body").append(l.join(""));
        $("#J_changeWebVersion").mouseenter(function () {
            $("#fai_webVersionList").show()
        }).mouseleave(function () {
            $("#fai_webVersionList").hide()
        });
        $("#fai_webVersionList").mouseenter(function () {
            $("#fai_webVersionList").show();
            $("#fai_spinach").show()
        }).mouseleave(function () {
            $("#fai_webVersionList").hide();
            $("#_faiMenuClose").hide()
        })
    }
    var e = false;
    $("#_faiMenuBtn").mouseenter(function (n) {
        $("#fai_spinach").show();
        $("#_faiMenuClose").show()
    }).mouseleave(function (n) {
        window.setTimeout(function () {
            if (!e) {
                $("#fai_spinach").hide()
            }
        }, 200);
        $("#_faiMenuClose").hide()
    });
    $("#fai_spinach").mouseenter(function (n) {
        e = true
    }).mouseleave(function (n) {
        e = false;
        $("#fai_spinach").hide()
    });
    $("#_faiMenuClose").click(function (n) {
        $("#_faiMenuBtn").hide();
        $("#fai_spinach").hide()
    })
};
Run.colLayout45Width = function () {
    var a = Helper.top._colOtherStyleData.layout4Width;
    var e = Helper.top._colOtherStyleData.layout5Width;
    var b = $(".containerFormsCenterMiddle").width();
    var d = Math.floor(b * 0.02);
    if (Helper.top._manageMode) {
        $("#middleLeftForms").css("padding-right", d + "px");
        if ((a + e + d) > b) {
            $("#middleLeftForms").css("width", (b - (e + d)) + "px")
        }
    }
    if (a > 0 && e == 0) {
        var c = $("#middleLeftForms").css("padding-right").replace("px", "");
        $("#middleLeftForms").css("width", a);
        $("#middleRightForms").css("width", b - c - a);
        Helper.top._colOtherStyleData.layout5Width = $("#middleRightForms").width()
    }
};
Run.initPage2 = function () {
    Run.manageHelperscoAd();
    Helper.top.$(".absForms >.form").each(function () {
        Run.checkAbsModulePosition($(this), true)
    });
    Helper.top.$(".floatForms >.form").each(function () {
        Run.checkFloatModulePosition($(this));
        Run.checkSideModule($(this));
        Run.checkFlutterModule($(this))
    });
    if (Helper.top.$("#faiBgMusicPlayer").length > 0) {
        Run.callMusicPlayButton("bgplayerButton", "faiBgMusicPlayer", "bgplayerTime", "bgplayerPause");
        var a = Helper.top.$("#faiBgMusicPlayer").attr("bgpause");
        if (a === "false") {
            $.cookie("bgplayerPause", "false");
            $("#bgplayerButton").attr("bgMusicStatus", "false")
        }
        if (a === "true") {
            $("#bgplayerButton").addClass("bgplayerButtonP");
            $("#bgplayerButton").attr("title", "点击播放音乐");
            $("#bgplayerButton").attr("bgMusicStatus", "true");
            $.cookie("bgplayerPause", "true")
        }
    }
    if (Helper.top.$(".footerSupport").find(":visible").length == 0) {
        Helper.top.$(".footerSupport").hide()
    }
    Run.setAbsFormsHolder2(true);
    $.each($("img"), function (c, b) {
        if ($.trim($(b).attr("data-original")).length > 0) {
            $(b).addClass("loadingPlaceholderBackground")
        }
    });
    if (Helper.isIE6() || Helper.isIE7()) {
        $("img").lazyload({threshold: 400, lazyRemoveclass: "loadingPlaceholderBackground", container: $("#g_main")})
    } else {
        $("img").lazyload({threshold: 400, lazyRemoveclass: "loadingPlaceholderBackground"})
    }
    Run.bindGobalEvent("site_moduleTabSwitch", function (b, d) {
        var c = $("#formTabCntId" + d).find("img");
        $.each(c, function (f, e) {
            var g = $.trim($(e).attr("data-original"));
            if (g.length > 0) {
                $(e).attr("src", g).removeClass("loadingPlaceholderBackground")
            }
        })
    });
    $(".g_ibutton").livequery(function () {
        $(this).faiButton()
    })
};
Run.initModuleItemHover = function (a) {
    $(a).mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    })
};
Run.initModuleItemCover = function (a, c, d) {
    $(a).mouseover(function () {
        $(this).addClass("g_hover")
    }).mouseleave(function () {
        $(this).removeClass("g_hover")
    });
    var b = a.replace("#module", "");
    Run.initContentSplitLine(b, d)
};
Run.initBackToTopTool = function (k, j, f, h, a) {
    var d = '<div id="BackToTopborder" style="display:none;"><div id="BackToTopborder-left" style="position:fixed;border-left:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-top" style="position:fixed;border-top:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-bottom" style="position:fixed;border-bottom:1px dashed #2b73ba;z-index:9030;"></div><div id="BackToTopborder-right" style="position:fixed;border-right:1px dashed #2b73ba;z-index:9030;"></div></div>';
    var g = '<div id="borderLayer" class="borderLayer" style="position:absolute;width:70px;display:none;"><div id="item"><a class="tool backToTopEdit" href="javascript:;" style="cursor:pointer;" title="设置样式">编辑</a></div><div class="itemHr"></div><div id="item"><a class="tool backToTopClose" style="cursor:pointer;" title="您可以在网站设计-网站设置-高级设置中重新开启" title="设置样式">隐藏</a></div></div>';
    var l = "";
    if (a == "small_box" || a == "null") {
        a = "";
        l = $('<div id="siteBackToTop_small_box" class="fk_siteBackToTop" title="' + h + '" _style="' + a + '"></div>');
        Helper.top.Helper.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {cls: ".fk_siteBackToTop", key: "width", value: "41px"}, {
            cls: ".fk_siteBackToTop",
            key: "height",
            value: "38px"
        }, {cls: ".fk_siteBackToTop", key: "cursor", value: "pointer"}, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {cls: ".fk_siteBackToTop", key: "z-index", value: "9030"}, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {cls: ".fk_siteBackToTop", key: "bottom", value: "50px"}, {
            cls: ".fk_siteBackToTop",
            key: "background",
            value: "url(" + _resRoot + "/image/site/backtotop.png?v=201411241810) no-repeat"
        }])
    } else {
        l = $('<div id="siteBackToTop_small_box" class="fk_siteBackToTop" title="' + h + '" _style="' + a + '"></div>');
        Helper.top.Helper.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {cls: ".fk_siteBackToTop", key: "cursor", value: "pointer"}, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {cls: ".fk_siteBackToTop", key: "z-index", value: "9030"}, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {cls: ".fk_siteBackToTop", key: "bottom", value: "50px"}]);
        getBackToTopStyleCss(a, false)
    }
    $("#g_main").before(l);
    if (j) {
        $("#g_main").before(d);
        $("#g_main").before(g)
    }
    $(".backToTopEdit").bind("click", function () {
        Run.popupWindow({
            title: "编辑返回顶部图标",
            frameSrcUrl: "manage/backToTopEdit.php?ram=" + Math.random(),
            width: "600",
            height: "350",
            frameScrolling: "no",
            saveBeforePopup: false,
            closeFunc: Run.closeCss
        })
    });
    $(".backToTopClose").bind("click", function () {
        e.hide();
        $("#BackToTopborder").hide();
        $("#borderLayer").hide();
        Helper.top._advanceSettingData.backToTopOpen = false;
        Helper.top._backToTop = false;
        Run.styleChanged();
        Run.styleSetting("open", "webSettingTab", false, "advanceFuncShow");
        Helper.ing("您可以在网站设计-网站设置-高级设置中重新开启。", true);
        c.scrollTop(0)
    });
    function b() {
        $("#BackToTopborder-left").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            height: $("#siteBackToTop_small_box").height() + 2 + "px"
        });
        $("#BackToTopborder-top").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            width: $("#siteBackToTop_small_box").width() + 2 + "px"
        });
        $("#BackToTopborder-bottom").css({
            left: ($("#siteBackToTop_small_box").offset().left - 2) + "px",
            top: ($("#siteBackToTop_small_box").offset().top + $("#siteBackToTop_small_box").height() + 1) + "px",
            width: $("#siteBackToTop_small_box").width() + 2 + "px"
        });
        $("#BackToTopborder-right").css({
            left: ($("#siteBackToTop_small_box").offset().left + $("#siteBackToTop_small_box").width() + 1) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 2) + "px",
            height: $("#siteBackToTop_small_box").height() + 2 + "px"
        });
        $("#borderLayer").css({
            left: ($("#siteBackToTop_small_box").offset().left + $("#siteBackToTop_small_box").width() - 70) + "px",
            top: ($("#siteBackToTop_small_box").offset().top - 26) + "px"
        })
    }

    var e = $("#siteBackToTop_small_box");
    var c = Helper.top.$("#g_main");
    if (!k && !Helper.isIE6()) {
        c = $(window);
        e.css("right", 40 + "px");
        e.css("bottom", 50 + "px")
    }
    if (Helper.top._manageMode) {
        e.css("right", 40 + Helper.getScrollWidth() + "px");
        e.css("bottom", 50 + "px")
    }
    if (!k && Helper.isIE6()) {
        e.css("bottom", 50 + "px")
    }
    i();
    c.scroll(function () {
        i()
    });
    e.click(function () {
        c.scrollTop(0)
    });
    function i() {
        if (!Helper.top._backToTop) {
            e.hide();
            return
        }
        if (c.scrollTop() > 0) {
            if (e.css("display") == "none") {
                if (Helper.isIE6()) {
                    e.css("position", "absolute")
                }
                if (Helper.isIE8() && Helper.top._manageMode) {
                    e.show()
                } else {
                    e.slideDown("slow")
                }
            }
        } else {
            if (Helper.isIE8() && Helper.top._manageMode) {
                e.hide()
            } else {
                e.slideUp("slow")
            }
        }
    }

    $("#siteBackToTop_small_box").hover(function () {
        var n = $(this), m = n.attr("_style");
        n.animate({opacity: 0.2}, "slow", function () {
            $("#siteBackToTop_small_box").css("height", "")
        });
        if (m != "" && m != "small_box") {
            getBackToTopStyleCss(m, true)
        }
        b();
        $("#BackToTopborder").show();
        $("#borderLayer").show();
        n.attr("_realmousein", "1")
    }, function () {
        var n = $(this), m = n.attr("_style");
        n.animate({opacity: 1}, "slow", function () {
            $("#siteBackToTop_small_box").css("height", "")
        });
        if (m != "" && m != "small_box") {
            getBackToTopStyleCss(m, false)
        }
        return setTimeout(function () {
            n.attr("_realmousein", "0");
            if (n.attr("_mousein") == 1) {
                $("#BackToTopborder").show();
                $("#borderLayer").show()
            } else {
                $("#BackToTopborder").hide();
                $("#borderLayer").hide()
            }
        }, 50)
    });
    $("#borderLayer").hover(function () {
        $("#BackToTopborder").show();
        $("#borderLayer").show();
        $("#siteBackToTop_small_box").attr("_mousein", "1")
    }, function () {
        return setTimeout(function () {
            $("#siteBackToTop_small_box").attr("_mousein", "0");
            if ($("#siteBackToTop_small_box").attr("_realmousein") == 1) {
                $("#BackToTopborder").show();
                $("#borderLayer").show()
            } else {
                $("#BackToTopborder").hide();
                $("#borderLayer").hide()
            }
        }, 50)
    })
};
function getBackToTopStyleCss(a, e) {
    var g = a.split("_"), c = g[0], b = g[1], d = [], f = "";
    if (e) {
        f = "_hover"
    }
    if (a != "small_box") {
        switch (c) {
            case"firstStyle":
                d.push({cls: ".fk_siteBackToTop", key: "position", value: "fixed"});
                d.push({cls: ".fk_siteBackToTop", key: "width", value: "42px"});
                d.push({cls: ".fk_siteBackToTop", key: "height", value: "42px"});
                d.push({cls: ".fk_siteBackToTop", key: "margin", value: "5px"});
                if (e) {
                    d.push({
                        cls: ".fk_siteBackToTop:hover",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/firstStyle/" + b + f + ".png?v=201505251717)"
                    })
                } else {
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/firstStyle/" + b + f + ".png?v=201505251717)"
                    })
                }
                break;
            case"secondStyle":
                d.push({cls: ".fk_siteBackToTop", key: "position", value: "fixed"});
                d.push({cls: ".fk_siteBackToTop", key: "width", value: "50px"});
                d.push({cls: ".fk_siteBackToTop", key: "height", value: "50px"});
                d.push({cls: ".fk_siteBackToTop", key: "margin", value: "1px"});
                if (b == "01" || b == "05") {
                    if (e) {
                        d.push({
                            cls: ".fk_siteBackToTop:hover",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + f + ".png?v=201505261406)"
                        })
                    } else {
                        d.push({
                            cls: ".fk_siteBackToTop",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + ".png?v=201505251717)"
                        })
                    }
                } else {
                    if (e) {
                        d.push({
                            cls: ".fk_siteBackToTop:hover",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + f + ".png?201505251717)"
                        })
                    } else {
                        d.push({
                            cls: ".fk_siteBackToTop",
                            key: "background-image",
                            value: "url(" + _resRoot + "/image/backToTop/secondStyle/" + b + ".png?v=201505251717)"
                        })
                    }
                }
                break;
            case"special":
                d.push({cls: ".fk_siteBackToTop", key: "position", value: "fixed"});
                if (e) {
                    d.push({
                        cls: ".fk_siteBackToTop:hover",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/" + b + f + ".png?v=201505251717)"
                    })
                } else {
                    d.push({
                        cls: ".fk_siteBackToTop",
                        key: "background-image",
                        value: "url(" + _resRoot + "/image/backToTop/" + b + ".png?v=201505251717)"
                    })
                }
                break
        }
        if (c == "special") {
            switch (b) {
                case"01":
                    d.push({cls: ".fk_siteBackToTop", key: "width", value: "32px"});
                    d.push({cls: ".fk_siteBackToTop", key: "height", value: "32px"});
                    d.push({cls: ".fk_siteBackToTop", key: "margin", value: "10px 10px"});
                    break;
                case"02":
                    d.push({cls: ".fk_siteBackToTop", key: "width", value: "26px"});
                    d.push({cls: ".fk_siteBackToTop", key: "height", value: "48px"});
                    d.push({cls: ".fk_siteBackToTop", key: "margin", value: "2px 13px"});
                    break;
                case"03":
                    d.push({cls: ".fk_siteBackToTop", key: "width", value: "42px"});
                    d.push({cls: ".fk_siteBackToTop", key: "height", value: "42px"});
                    d.push({cls: ".fk_siteBackToTop", key: "margin", value: "5px"});
                    break;
                case"04":
                    d.push({cls: ".fk_siteBackToTop", key: "width", value: "45px"});
                    d.push({cls: ".fk_siteBackToTop", key: "height", value: "50px"});
                    d.push({cls: ".fk_siteBackToTop", key: "margin", value: "1px 3px"});
                    break
            }
        }
    } else {
        Helper.top.Helper.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "display",
            value: "none"
        }, {cls: ".fk_siteBackToTop", key: "width", value: "41px"}, {
            cls: ".fk_siteBackToTop",
            key: "height",
            value: "38px"
        }, {cls: ".fk_siteBackToTop", key: "cursor", value: "pointer"}, {
            cls: ".fk_siteBackToTop",
            key: "position",
            value: "fixed"
        }, {cls: ".fk_siteBackToTop", key: "z-index", value: "9030"}, {
            cls: ".fk_siteBackToTop",
            key: "right",
            value: "40px"
        }, {cls: ".fk_siteBackToTop", key: "bottom", value: "50px"}, {
            cls: ".fk_siteBackToTop",
            key: "background",
            value: "url(" + _resRoot + "/image/site/backtotop.png?v=201411241810) no-repeat"
        },]);
        if (e) {
            Helper.top.Helper.removeCtrlStyleCssList("stylebacktotop", "", [{
                cls: ".fk_siteBackToTop:hover",
                key: "background"
            },])
        }
    }
    if (!!d.length) {
        Helper.top.Helper.setCtrlStyleCssList("stylebacktotop", "", d)
    }
}
Run.closeCss = function () {
    if (Helper.top._advanceSettingData.btts == "small_box") {
        Helper.top.$("#siteBackToTop_small_box").attr("style", "display:block");
        Helper.top.Helper.removeCtrlStyleCssList("stylebacktotop", "", [{cls: ".fk_siteBackToTop:hover", key: "background"},])
    } else {
        Helper.top.Helper.setCtrlStyleCssList("stylebacktotop", "", [{
            cls: ".fk_siteBackToTop",
            key: "cursor",
            value: "pointer"
        }, {cls: ".fk_siteBackToTop", key: "position", value: "fixed"}, {
            cls: ".fk_siteBackToTop",
            key: "z-index",
            value: "9030"
        }, {cls: ".fk_siteBackToTop", key: "right", value: "40px"}, {
            cls: ".fk_siteBackToTop",
            key: "bottom",
            value: "50px"
        },])
    }
    Helper.top.$("#siteBackToTop_small_box").attr("_style", Helper.top._advanceSettingData.btts);
    getBackToTopStyleCss(Helper.top._advanceSettingData.btts, false)
};
Run.fixRunWidth = function (c) {
    b(c);
    var a;
    Helper.top.$(window).off("resize.fixRunWidth");
    Helper.top.$(window).on("resize.fixRunWidth", function () {
        if (typeof a == "number") {
            return
        }
        a = setTimeout(function () {
            b(c);
            Run.fixWebFooterHeight();
            Run.refreshDefaultBannerEdge();
            a = null
        }, 300)
    });
    function b(f) {
        var s = Helper.top.$("#webContainer").outerWidth(true), o = s, q = s,
            n = document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth,
            j = document.documentElement ? document.documentElement.scrollWidth : document.body.scrollWidth,
            k = Helper.top.$("#web"), m = Helper.top.$("#g_main"), l = 0, i = 960,
            h = (f || (Helper.isIE6() || Helper.isIE7())) ? m.scrollLeft() : $(document).scrollLeft(),
            e = k[0].getBoundingClientRect().right + h, r = 0, p, g;
        if (f || Helper.isIE6()) {
            n = n - Helper.getScrollWidth()
        }
        Helper.top.$(".fullmeasureForms").find(".fullmeasureContent").each(function (t, u) {
            if ($(u).is(":visible") && o < $(u).width()) {
                o = $(u).width()
            }
        });
        q = o;
        n = n > q ? n : q;
        i = n > i ? n : i;
        p = Helper.top.$("#nav");
        p = p.add(k.find("div.absForms").children(".form"));
        p = p.add(Helper.top.$("#corpTitle"));
        p = p.add(Helper.top.$("#logo"));
        r = d(p) + h;
        g = (r - e) * 2 + e;
        if (g > i) {
            i = g;
            l = (i - m[0].scrollWidth) + h
        }
        if (f) {
            if (!Helper.top._cusResponsive) {
                k.css({width: i + "px"})
            }
            if (l > 0) {
                m.scrollLeft(l)
            }
        } else {
            if (Helper.isIE6() || Helper.isIE7()) {
                if (!Helper.top._cusResponsive) {
                    k.css({width: i + "px"})
                }
                if (l > 0) {
                    m.scrollLeft(l)
                }
            } else {
                if (!Helper.top._cusResponsive) {
                    m.css({width: i + "px"})
                }
                if (l > 0) {
                    $(document).scrollLeft(l)
                }
            }
        }
    }

    function d(h) {
        var f = h.length, e = 0, g, i;
        while (f) {
            f -= 1;
            i = h.eq(f);
            if (i.is(":hidden") || i.css("position") == "fixed") {
                continue
            }
            g = i[0].getBoundingClientRect().right;
            if (g > e) {
                e = g
            }
        }
        return e
    }
};
Run.fixWebFooterHeight = function () {
    var h = Helper.top.$("#web"), a = Helper.top.$("body").height(), c = Helper.top.$("#webFooterTable"),
        b = c.css({height: ""}) && c.height(), f = h.offset().top, d = h.height();
    if (Helper.top._manageMode || Helper.isIE6()) {
        var g = 0;
        h.children().each(function () {
            g += $(this).height()
        });
        if (a > (g + f)) {
            c.css("height", (a - g + b - f) + "px")
        }
    } else {
        var e = d + f;
        if (a > e) {
            var i = a - e;
            b = c.outerHeight();
            c.css("height", i + b + "px")
        }
    }
};
Run.initPageBindAmousedown = function () {
    function a(f) {
        if (Helper.isIE8() && f.button == 1) {
            return true
        } else {
            if (Helper.isIE6() && f.button == 1) {
                return true
            } else {
                if (Helper.isIE7() && f.button == 1) {
                    return true
                } else {
                    if (f.button == 0) {
                        return true
                    }
                }
            }
        }
        return false
    }

    if (!Helper.top._designAuth) {
        return
    }
    var d = Run.getTopWindow().$(Run.getTopWindow().document).find("#g_main");
    var c = Run.getTopWindow().$(Run.getTopWindow().document).find("#memberBarArea");
    var b = /^javascript/g;
    d.delegate("a", "click.initSaveChange", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            if (!Run.redirectUrl(e, g, f, 0, 0)) {
                return false
            }
        }
    });
    c.delegate("a", "mousedown", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            Run.redirectUrl(e, g, f, 0, 0)
        }
        return false
    });
    Run.getTopWindow().$(Run.getTopWindow().document).find("#tabs a.cancelBtn").mousedown(function (e) {
        if (!a(e)) {
            return
        }
        Run.redirectUrl("javascript:;", "cancelBtn", e, 0, 1);
        return false
    });
    Run.getTopWindow().$(Run.getTopWindow().document).delegate("div.navSubMenu a", "mousedown", function (f) {
        if (!a(f)) {
            return
        }
        var e = $(this).attr("href");
        if (e && e.match(b) == null && !$(this).hasClass("stopPropagation")) {
            var g = $(this).attr("target") || "_self";
            Run.redirectUrl(e, g, f, 1, 0)
        }
        return false
    })
};
Run.refreshFooterItemSpacing = function () {
    var b = Helper.top.$("#footerNav");
    if (b.length < 1) {
        return
    }
    var j = b.find(".footerItemSpacing");
    var h = b.find(".footerItemSection");
    if (h.length < 1) {
        return
    }
    var a = 9;
    var f = 5;
    if (b.attr("cusHeight") == "1") {
        if (Helper.top._manageMode) {
            var e = Run.getFooterStyleData() || {};
            Helper.top.Helper.removeCtrlStyleCssList("stylefooter", "webFooterTable", [{
                cls: "li.footerItemSpacing",
                key: "padding-top"
            }]);
            if (b.hasClass("footerPattern1")) {
                Helper.top.Helper.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
                    cls: "li.footerItemSection",
                    key: "height",
                    value: e.fih + "px"
                }, {
                    cls: "li.footerItemSpacing",
                    key: "height",
                    value: (e.fih - a) + "px"
                }, {cls: "li.footerItemSpacing", key: "padding-top", value: f + "px"}])
            } else {
                Helper.top.Helper.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
                    cls: "li.footerItemSection",
                    key: "height",
                    value: e.fih + "px"
                }, {cls: "li.footerItemSpacing", key: "height", value: e.fih + "px"}])
            }
        }
        return
    }
    Helper.top.Helper.removeCtrlStyleCssList("stylefooter", "webFooterTable", [{
        cls: "li.footerItemSpacing",
        key: "padding-top"
    }]);
    Helper.top.Helper.setCtrlStyleCssList("tmpStylefooter", "webFooterTable", [{
        cls: "li.footerItemSection",
        key: "height",
        value: "auto !important"
    }, {cls: "li.footerItemSpacing", key: "height", value: "auto !important"}]);
    var g = h.eq(0).height();
    var d = 0;
    for (var c = 1; c < h.length; c++) {
        d = h.eq(c).height();
        if (d > g) {
            g = d
        }
    }
    if (b.hasClass("footerPattern1")) {
        Helper.top.Helper.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
            cls: "li.footerItemSection",
            key: "height",
            value: g + "px"
        }, {cls: "li.footerItemSpacing", key: "height", value: (g - a) + "px"}, {
            cls: "li.footerItemSpacing",
            key: "padding-top",
            value: f + "px"
        }])
    } else {
        Helper.top.Helper.setCtrlStyleCssList("stylefooter", "webFooterTable", [{
            cls: "li.footerItemSection",
            key: "height",
            value: g + "px"
        }, {cls: "li.footerItemSpacing", key: "height", value: g + "px"}])
    }
    Helper.top.Helper.removeCtrlStyleCssList("tmpStylefooter", "webFooterTable", [{
        cls: "li.footerItemSection",
        key: "height"
    }, {cls: "li.footerItemSpacing", key: "height"}]);
    Helper.top.$("#tmpStylefooter").remove()
};
Run.pageOnload = function () {
    Run.userReadyOperateRun();
    Run.mobiPlatform();
    Run.fixWebFooterHeight();
    if (Helper.top.$("#banner").length > 0) {
        Run.refreshBanner(0)
    }
    Run.adjustBannerWidth();
    Run.addStellarEvent();
    Run.excuteMallBuy2();
    Run.checkHelperAnchor()
};
Run.onTitlePositionFixTop = function (a) {
    if (Helper.top._manageMode && a) {
        Run.onTitlePositionFixTop()
    } else {
    }
};
Run.excuteMallBuy2 = function () {
    var f = $.cookie("isNeedAddCartItem");
    if (typeof f == "undefined" || f == null || f == "") {
        return
    }
    var e = $.parseJSON(f);
    var b = e.pid;
    var d = e.mid;
    var c = e.url;
    var a = e.doWhat;
    if (a == "add") {
        Run.mallBuy2(b, d, c)
    } else {
        if (a == "buy") {
            Run.mallImmeBuy(b, d)
        }
    }
    setTimeout(function () {
        $.cookie("isNeedAddCartItem", null)
    }, 1000)
};
Run.beforeUnloadFunc = function () {
    var a = Helper.top.onbeforeunload;
    Helper.top.onbeforeunload = function () {
        if (typeof a == "function") {
            a.apply(this, arguments)
        }
        Run.siteStatVisitTime()
    }
};
Run.bindBeforeUnloadEvent = function (b, c, a) {
    Helper.top.$(document).ready(function () {
        Helper.top.$(window).bind("beforeunload", function (d) {
            if (c) {
                Run.bgmFlushContinue()
            } else {
                if (Helper.top.bgmCloseToOpen) {
                    Run.bgmFlushContinue()
                }
            }
            if (b) {
                if (_changeStyleNum > 0) {
                    return "您的网站设计正处于编辑状态，离开该页面将会失去您对网站所做的修改。"
                }
            }
            if (a) {
                Run.jumpToMobiDesign(1)
            }
        })
    })
};
Run.closeRightClickTool = function () {
    $(document).bind("contextmenu copy cut", function (a) {
        if ($(a.target).is("input, textarea")) {
            return;
            alert(1)
        } else {
            return false
        }
    });
    if (Helper.isIE6() || Helper.isIE7() || Helper.isIE8()) {
        $(document).bind("selectstart", function (a) {
            if ($(a.target).is("input, textarea")) {
                return
            } else {
                return false
            }
        })
    }
};
Run.triggerGobalEvent = function (a, b) {
    Helper.top.$(Helper.top.document).trigger(a, b)
};
Run.bindGobalEvent = function (a, b) {
    if (a == "site_articlePictureChange" && Helper.isIE()) {
        Helper.top.$(Helper.top.document).off(a)
    }
    Helper.top.$(Helper.top.document).on(a, b)
};
Run.refreshFormIndexClass = function () {
    Run.refreshFormIndexClass2({id: "topForms"});
    Run.refreshFormIndexClass2({id: "leftForms"});
    Run.refreshFormIndexClass2({id: "centerTopForms"});
    Run.refreshFormIndexClass2({id: "middleLeftForms"});
    Run.refreshFormIndexClass2({id: "middleRightForms"});
    Run.refreshFormIndexClass2({id: "centerBottomForms"});
    Run.refreshFormIndexClass2({id: "rightForms"});
    Run.refreshFormIndexClass2({id: "bottomForms"});
    Run.refreshFormIndexClass2({id: "fullmeasureTopForms"});
    Run.refreshFormIndexClass2({id: "fullmeasureBottomForms"});
    Run.refreshFormIndexClass2({id: "absTopForms"});
    Run.refreshFormIndexClass2({id: "absForms"});
    Run.refreshFormIndexClass2({id: "absBottomForms"});
    Run.refreshFormIndexClass2({id: "floatLeftTopForms"});
    Run.refreshFormIndexClass2({id: "floatRightTopForms"});
    Run.refreshFormIndexClass2({id: "floatLeftBottomForms"});
    Run.refreshFormIndexClass2({id: "floatRightBottomForms"});
    Run.refreshFormIndexClass2({id: "fk-webHeaderZone"});
    Run.refreshFormIndexClass2({id: "fk-webBannerZone"});
    Run.refreshFormIndexClass2({id: "fk-webFooterZone"})
};
Run.refreshFormIndexClass2 = function (c) {
    var g = c.id;
    var d = c.inFullmeasure || 0;
    var a, f, b, e;
    Helper.top.$("#" + g).children(".form").each(function (h, j) {
        b = $(j);
        e = Run.checkNestModule(b);
        b.attr("_inmulmcol", 0);
        b.attr("_intab", 0);
        b.attr("_infullmeasure", 0);
        b.attr("_inpack", 0);
        if (e.isCol) {
            Run.refreshFormIndexClassInCol(b)
        } else {
            if (e.isTab) {
                Run.refreshFormIndexClassInTab(b)
            } else {
                if (e.isPack) {
                    Run.refreshFormIndexClassInPack(b)
                } else {
                    if (e.isFullmeasure) {
                        Run.refreshFormIndexClassInFullmeasure(b)
                    }
                }
            }
        }
        a = b.attr("_indexClass");
        f = "formIndex" + (h + 1);
        if (Helper.isNull(a)) {
            b.addClass(f);
            b.attr("_indexClass", f);
            Helper.refreshClass(b)
        } else {
            if (a != f) {
                b.removeClass(a);
                b.addClass(f);
                b.attr("_indexClass", f);
                Helper.refreshClass(b)
            }
        }
    })
};
Run.refreshFormIndexClassInCol = function (b) {
    var d = b.attr("id").replace("module", "") || 0, a, c;
    b.find(".mulMColList").children(".form").each(function (e, f) {
        a = $(f);
        a.attr("_inmulmcol", d);
        a.attr("_intab", 0);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", 0);
        a.removeAttr("_indexclass ");
        c = Run.checkNestModule(a);
        if (c.isTab) {
            Run.refreshFormIndexClassInTab(a)
        } else {
            if (c.isPack) {
                Run.refreshFormIndexClassInPack(a)
            }
        }
    })
};
Run.refreshFormIndexClassInTab = function (b) {
    var c = b.attr("id").replace("module", "") || 0, a;
    b.find(".formTabCntId").children(".form").each(function (d, e) {
        a = $(e);
        a.attr("_inmulmcol", 0);
        a.attr("_intab", c);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", 0);
        a.removeAttr("_indexclass ");
        if (Run.checkNestModule(a).isPack) {
            Run.refreshFormIndexClassInPack(a)
        }
    })
};
Run.refreshFormIndexClassInFullmeasure = function (c) {
    var f = c.attr("id").replace("module", "") || 0, a, e, b, d;
    c.find(".fullmeasureContent").children(".form").each(function (g, h) {
        b = $(h);
        b.attr("_inmulmcol", 0);
        b.attr("_intab", 0);
        b.attr("_infullmeasure", f);
        b.attr("_inpack", 0);
        d = Run.checkNestModule(b);
        if (d.isTab) {
            Run.refreshFormIndexClassInTab(b)
        } else {
            if (d.isCol) {
                Run.refreshFormIndexClassInCol(b)
            } else {
                if (d.isPack) {
                    Run.refreshFormIndexClassInPack(b)
                }
            }
        }
        a = b.attr("_indexClass");
        e = "formIndex" + (g + 1);
        if (Helper.isNull(a)) {
            b.addClass(e);
            b.attr("_indexClass", e);
            Helper.refreshClass(b)
        } else {
            if (a != e) {
                b.removeClass(a);
                b.addClass(e);
                b.attr("_indexClass", e);
                Helper.refreshClass(b)
            }
        }
    })
};
Run.refreshFormIndexClassInPack = function (b) {
    var d = b.attr("id").replace("module", "") || 0, a, c;
    b.find(".J_packContent").children(".form").each(function (e, f) {
        a = $(f);
        a.attr("_inmulmcol", 0);
        a.attr("_intab", 0);
        a.attr("_infullmeasure", 0);
        a.attr("_inpack", d);
        a.removeAttr("_indexclass ");
        c = Run.checkNestModule(a);
        if (c.isTab) {
            Run.refreshFormIndexClassInTab(a)
        } else {
            if (c.isCol) {
                Run.refreshFormIndexClassInCol(a)
            }
        }
    })
};
Run.checkNestModule = function (e) {
    var a = {
            nest: false,
            isTab: false,
            isCol: false,
            isFullmeasure: false,
            isPack: false,
            parentId: 0,
            inTab: false,
            inCol: false,
            inFullmeasure: false,
            inPack: false
        }, d = parseInt(e.attr("_intab")) || 0, b = parseInt(e.attr("_inmulmcol")) || 0,
        c = parseInt(e.attr("_infullmeasure")) || 0, f = parseInt(e.attr("_inpack")) || 0;
    if (e.hasClass("formStyle35")) {
        a.nest = true;
        a.isCol = true
    } else {
        if (e.hasClass("formStyle29")) {
            a.nest = true;
            a.isTab = true
        } else {
            if (e.hasClass("formStyle80")) {
                a.nest = true;
                a.isFullmeasure = true
            } else {
                if (e.hasClass("formStyle87")) {
                    a.nest = true;
                    a.isPack = true
                }
            }
        }
    }
    if (d > 0) {
        a.parentId = d;
        a.inTab = true
    } else {
        if (b > 0) {
            a.parentId = b;
            a.inCol = true
        } else {
            if (c > 0) {
                a.parentId = c;
                a.inFullmeasure = true
            } else {
                if (f > 0) {
                    a.parentId = f;
                    a.inPack = true
                }
            }
        }
    }
    return a
};
Run.createMemberBar = function (e, c, g, d, a) {
    if (Helper.top.$("#memberBarArea").length > 0) {
        return
    }
    var b = new Array();
    b.push("<div id='memberBarArea' class='memberBarArea g_editPanel' >");
    b.push("<div id='memberBar' class='memberBar'>");
    b.push("         <div class='right'>");
    b.push("			<div style='float:right;'>");
    if (e || c || g) {
        if (g) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_wxLgn'>");
            b.push("				<span class='l_Ico wxLgn'></span>");
            b.push("			</a>")
        }
        if (c) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_wbLgn'>");
            b.push("				<span class='l_Ico wbLgn'></span>");
            b.push("			</a>")
        }
        if (e) {
            b.push("			<a href='javascript:;' class='l_Btn' id='t_qqLgn'>");
            b.push("				<span class='l_Ico qqLgn'></span>");
            b.push("			</a>")
        }
        b.push("				<span style='float: right;'>" + LS.otherAccountLogin + "：</span>")
    }
    b.push("					<a class='memberOption memberReg' href='/signup.php' style='margin-right:10px;'>" + LS.memberReg + "</a>");
    b.push("					<a class='memberOption memberLogin' href='/login.php' >" + LS.memberLogin + "</a>");
    b.push("			</div>");
    b.push("		</div>");
    b.push('		<div class="left">');
    if (!d) {
        Helper.top._memberTopBar_myOrder = false
    }
    if (Helper.top._memberTopBar_addBookMark) {
        b.push('				<div style="float:left;margin-left: 8px;">');
        b.push('					<a id="topBarMember_addBookMark" hidefocus="true" href="javascript:;"" style="text-decoration:none;display:;" onclick="">' + LS.favorite + "</a>");
        b.push("				</div>")
    } else {
        b.push('				<div style="float:left;margin-left: 8px;">');
        b.push('					<a id="topBarMember_addBookMark" hidefocus="true" href="javascript:;"" style="text-decoration:none;display:none;" onclick="">' + LS.favorite + "</a>");
        b.push("				</div>	")
    }
    if (Helper.top._memberTopBar_addBookMark && (Helper.top._memberTopBar_myOrder || Helper.top._memberTopBar_myProfile)) {
        b.push('				<div id="line1" class="line" style="float:left;display:;"></div>')
    } else {
        b.push('				<div id="line1" class="line" style="float:left;display:none;"></div>')
    }
    if (Helper.top._memberTopBar_myProfile) {
        b.push('				<div style="float:left;">');
        b.push('					<a  id="topBarMember_myProfile" hidefocus="true" style="text-decoration:none;display:;"  href="mCenter.php">' + LS.member_center_profile + "</a>");
        b.push("				</div>	")
    } else {
        b.push('				<div style="float:left;">');
        b.push('					<a  id="topBarMember_myProfile" hidefocus="true" style="text-decoration:none;display:none;"  href="mCenter.php">' + LS.member_center_profile + "</a>");
        b.push("				</div>")
    }
    if (Helper.top._memberTopBar_myProfile && Helper.top._memberTopBar_myOrder) {
        b.push('				<div id="line2" class="line" style="float:left;display:;"></div>')
    } else {
        b.push('				<div id="line2" class="line" style="float:left;display:none;"></div>')
    }
    if (Helper.top._memberTopBar_myOrder) {
        b.push('				<div style="float:left;">');
        b.push('					<a id="topBarMember_myOrder" hidefocus="true" style="text-decoration:none;display:;" href="mCenter.php?item=memberOrder">' + LS.member_center_order + "</a>");
        b.push("				</div>")
    } else {
        b.push('				<div style="float:left;">');
        b.push('					<a id="topBarMember_myOrder" hidefocus="true" style="text-decoration:none;display:none;" href="mCenter.php?item=memberOrder">' + LS.member_center_order + "</a>");
        b.push("				</div>")
    }
    if (d) {
        var f = "";
        if (Helper.top._memberTopBar_mallCart) {
            f = "display:none;"
        }
        if (Helper.top._memberTopBar_addBookMark || Helper.top._memberTopBar_myOrder || Helper.top._memberTopBar_myProfile) {
            b.push('		<div id="mallCartLine" class="line" style="' + f + 'margin-right: 0px;"></div>')
        } else {
            b.push('		<div id="mallCartLine" class="line" style="display:none;margin-right: 0px;"></div>')
        }
        b.push('		<div style="float:left;  margin-left: 15px;">');
        b.push('			<div id="mallCart_js" class="mallCart" style="' + f + '">');
        b.push('				<div class="mallCartItem">');
        b.push('					<span class="mallCart_icon">&nbsp;</span>');
        b.push('					<span class="mallCart_name">' + LS.memberMallCart + "</span>");
        b.push('					<span class="mallCart_proNum">(0)</span>');
        b.push('					<span class="mallCart_down">&nbsp;</span>');
        b.push("				</div>");
        b.push("			</div>");
        b.push('			<div class="mallCartPanel">');
        b.push('				<div id="mallCartList_js" class="mallCartList">');
        b.push('					<div class="mcProductList">' + LS.memberMallCartNoProduct + "</div>");
        b.push('					<div class="checkMallCartBtn" <%=(isRU || isLo) ? "style=\'width: 178px;\'" : "" %> >' + LS.memberMallCartCheckBtn + "</div>");
        b.push("				</div>");
        b.push("			</div>");
        b.push("		</div>")
    }
    if (Helper.top._memberTopBar_mobiWeb && Helper.top.openMRun) {
        if (Helper.top._memberTopBar_myOrder || Helper.top._memberTopBar_myProfile || d) {
            b.push('				<div id="mobiWeb_line" class="line" style="margin-right: 0px; display:;"></div>')
        }
        b.push('				<div style="float:left;  margin-left: 15px;">');
        b.push('					<div id="mobiWeb_js" class="mobiWeb">');
        b.push('						<div class="mobiWebItem">');
        b.push('							<span class="mobiWeb_icon">&nbsp;</span>');
        b.push('							<span class="mobi_down">&nbsp;</span>');
        b.push("						</div>");
        b.push("					</div>");
        b.push('					<div class="mobiWebPanel">');
        b.push('						<div id="mobiWebQRCode_js" class="mobiWebQRCode">');
        b.push('							<div style="text-align:center;padding-top:10px;"><img src="/qrCode.php?cmd=mobiQR&_s=80&lanCode==lanCode"></div>');
        b.push('							<div style="text-align:center;padding-top:2px;font-size:12px;color:#555555;">' + LS.showMobiWeb + "</div>");
        b.push("						</div>");
        b.push("					</div>");
        b.push("				</div>")
    } else {
        if (Helper.top._memberTopBar_myOrder || Helper.top._memberTopBar_myProfile || d) {
            b.push('				<div id="mobiWeb_line" class="line" style="margin-right: 0px; display:none;"></div>')
        }
        b.push('				<div style="float:left;  margin-left: 15px;">');
        b.push('					<div id="mobiWeb_js" class="mobiWeb" style="display:none;">');
        b.push('						<div class="mobiWebItem">');
        b.push('							<span class="mobiWeb_icon">&nbsp;</span>');
        b.push('							<span class="mobi_down">&nbsp;</span>');
        b.push("						</div>");
        b.push("					</div>");
        b.push('					<div class="mobiWebPanel" style="display:none;">');
        b.push('						<div id="mobiWebQRCode_js" class="mobiWebQRCode">');
        b.push('							<div style="text-align:center;padding-top:10px;"><img src="/qrCode.php?cmd=mobiQR&_s=80"></div>');
        b.push('							<div style="text-align:center;padding-top:2px;">' + LS.showMobiWeb + "</div>");
        b.push("						</div>");
        b.push("					</div>");
        b.push("				</div>	 ")
    }
    b.push("		</div>");
    b.push("	</div>");
    b.push("</div>");
    Helper.top.$("body").prepend(b.join(""));
    Run.resetMemberBarPos();
    if (d) {
        Run.mallCartInit(Helper.top._colId)
    }
    if (Helper.top._memberTopBar_mobiWeb) {
        Run.mobiWebInit()
    }
};
Run.resetGmainPos = function () {
    var d = 0;
    d = Run.getTopHeight();
    var b = Helper.top.$("#g_main");
    if (Helper.isIE6() || Helper.isIE7()) {
        var a = Helper.top.document.documentElement.clientHeight - d;
        if (b.height() != a) {
            b.css("height", a + "px")
        }
        var c = Helper.top.document.documentElement.clientWidth;
        if (b.width() != c) {
            b.css("width", c + "px")
        }
    }
    if ($("#topBar").css("display") === "block") {
        d = d - 6
    }
    if ($("#memberBarArea").length !== 0) {
        d = d - 2
    }
    if (b.css("top") != (d + "px")) {
        b.css("top", d + "px")
    }
    Run.resetMemberBarPos();
    Helper.top.$(".floatLeftTop").css("top", d + "px");
    Helper.top.$(".floatRightTop").css("top", d + "px")
};
Run.resetMemberBarPos = function () {
    var b = Run.getTopHeight() - 37;
    if ($("#topBar").css("display") === "block") {
        b = b - 6
    }
    var a = Helper.top.$("#memberBarArea");
    if (a.css("top") != (b + "px")) {
        a.css("top", b + "px")
    }
};
Run.getTopHeight = function () {
    var f = 0;
    var e = 0;
    var a = 0;
    var d = 0;
    var g = 0;
    var c = 0;
    var b = 0;
    if ((Helper.top.$("#sitetips").length > 0) && (Helper.top.$("#sitetips").css("display") != "none")) {
        g = Helper.top.$("#sitetips").outerHeight(true)
    }
    if ((Helper.top.$("#arrears").length > 0) && (Helper.top.$("#arrears").css("display") != "none")) {
        e = Helper.top.$("#arrears").outerHeight(true)
    }
    if ((Helper.top.$("#topBar").length > 0) && (Helper.top.$("#topBar").css("display") != "none")) {
        a = Helper.top.$("#topBarArea").outerHeight(true)
    }
    if ((Helper.top.$("#styleDesign").length > 0) && (Helper.top.$("#styleDesign").css("display") != "none")) {
        d = Helper.top.$("#styleDesign").outerHeight(true)
    }
    if ((Helper.top.$("#siteTipsDemoTemplate").length > 0) && (Helper.top.$("#siteTipsDemoTemplate").css("display") != "none")) {
        c = Helper.top.$("#siteTipsDemoTemplate").outerHeight(true)
    }
    if ((Helper.top.$("#memberBar").length > 0) && (Helper.top.$("#memberBar").css("display") != "none")) {
        b = Helper.top.$("#memberBar").outerHeight(true)
    }
    if (d > 0) {
        g = 0
    }
    f = e + a + d + g + c + b;
    return f
};
Run.scrollToDiv = function (a) {
    if (Helper.top.$("#g_main").hasClass("g_mainManage")) {
        Helper.top.$("#g_main").scrollTop(0);
        Helper.top.$("#g_main").scrollTop(a.offset().top - Helper.top.$(".g_main").offset().top - 10)
    } else {
        Helper.top.$("body").scrollTop(0);
        Helper.top.$("body").scrollTop(a.offset().top - 10)
    }
};
Run.checkSaveBar = function (a) {
    if (Helper.top._changeStyleNum > 0) {
        Run.popupStyleChangeBodyWindow({
            msg: "您的网站设计已经更改，是否立即保存？",
            isCancelBtn: false,
            runCallback: false,
            saveBtnStr: "确定",
            cancelBtnStr: "取消",
            otherOptions: a
        });
        return true
    }
    return false
};
Run.logClick = function (c, b) {
    return;
    var a = "cmd=click&app=" + c;
    if (typeof b != "undefined") {
        a += "&value=" + b
    }
    $.ajax({
        type: "post", url: Run.genAjaxUrl("log_h.php"), data: a, error: function () {
        }, success: function () {
        }
    })
};
Run.popupLogin = function (a, c) {
    try {
        if (!Run.getTopWindow().location.href) {
            alert('您好，目前无法打开登录框，可能是以下原因：\n1、当前网页未完全加载，请稍后重试或刷新再试。\n2、不支持"域名转发"时登录。\n3、不支持"被其他网站嵌入"时登录。');
            return
        }
    } catch (b) {
        alert('您好，目前无法打开登录框，可能是以下原因：\n1、当前网页未完全加载，请稍后重试或刷新再试。\n2、不支持"域名转发"时登录。\n3、不支持"被其他网站嵌入"时登录。');
        return
    }
    a = a + "/loginForm.php?cid=" + c + "&f=" + Helper.encodeUrl(window.location.href) + "&rqDomain=" + Helper.encodeUrl(Helper.top.document.domain);
    Helper.popupWindow({
        title: "登录",
        frameSrcUrl: a + "&track=2&ram=" + Math.random(),
        width: "380",
        height: "175",
        frameScrolling: "no"
    })
};
Run.getFooterBottom = function (a) {
    if (!a) {
        if (Helper.top.$(".footerSupport").css("display") != "none") {
            return Helper.top.$(".footerSupport").offset().top
        } else {
            return Helper.top.$("#webFooter").offset().top + Helper.top.$("#webFooter").height()
        }
    } else {
        return Helper.top.$("#webFooter").offset().top + Helper.top.$("#webFooter").height()
    }
};
Run.navAppendToParent = function (a, b) {
    if (!b) {
        if (a == 0) {
            Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"));
            Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"))
        } else {
            if (a == 1) {
                Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"));
                Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webHeader .headerNav"))
            } else {
                if (a == 2) {
                    Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#containerMiddleLeft"));
                    Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webHeader .headerNav"))
                } else {
                    if (a == 3 || a == 5) {
                        Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#containerMiddleLeft"));
                        Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#containerMiddleLeft"))
                    } else {
                        if (a == 4 || a == 6) {
                            Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#containerMiddleCenterTop"));
                            Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#containerMiddleLeft"))
                        } else {
                            if (a == 7) {
                                Run.getTopWindow().$("#banner").prependTo(Run.getTopWindow().$("#containerFormsCenter"));
                                Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webHeader .headerNav"))
                            } else {
                                if (a == 8) {
                                    Run.getTopWindow().$("#banner").prependTo(Run.getTopWindow().$("#centerTopForms"));
                                    Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webHeader .headerNav"))
                                } else {
                                    if (a == 9) {
                                        Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"));
                                        Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"))
                                    } else {
                                        if (a == 10) {
                                            Run.getTopWindow().$("#nav").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"));
                                            Run.getTopWindow().$("#banner").appendTo(Run.getTopWindow().$("#webBanner .bannerCenter"))
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
};
Run.initTemplateLayout = function (c, d, b) {
    var a = Helper.top.$("#webBanner");
    Run.navAppendToParent(c, d);
    if (c == 0) {
        a.show();
        Run.showNavSubMenu(0);
        setTimeout(function () {
            Run.showNavItemContainer()
        }, 200)
    } else {
        if (c == 1) {
            a.show();
            Run.showNavSubMenu(0);
            setTimeout(function () {
                Run.showNavItemContainer()
            }, 200)
        } else {
            if (c == 2) {
                a.hide();
                Run.showNavSubMenu(0);
                setTimeout(function () {
                    Run.showNavItemContainer()
                }, 200)
            } else {
                if (c == 3) {
                    a.hide();
                    Run.showNavSubMenu(1);
                    setTimeout(function () {
                        Run.showNavItemContainer()
                    }, 200);
                    Run.hideNavItemContainer()
                } else {
                    if (c == 4) {
                        a.hide();
                        Run.showNavSubMenu(1);
                        setTimeout(function () {
                            Run.showNavItemContainer()
                        }, 200);
                        Run.hideNavItemContainer()
                    } else {
                        if (c == 5) {
                            a.hide();
                            Run.showNavSubMenu(1);
                            setTimeout(function () {
                                Run.showNavItemContainer()
                            }, 200);
                            Run.hideNavItemContainer()
                        } else {
                            if (c == 6) {
                                a.hide();
                                Run.showNavSubMenu(100);
                                setTimeout(function () {
                                    Run.showNavItemContainer()
                                }, 200);
                                Run.hideNavItemContainer()
                            } else {
                                if (c == 7) {
                                    a.hide();
                                    Run.showNavSubMenu(0);
                                    setTimeout(function () {
                                        Run.showNavItemContainer()
                                    }, 200)
                                } else {
                                    if (c == 8) {
                                        a.hide();
                                        Run.showNavSubMenu(0);
                                        setTimeout(function () {
                                            Run.showNavItemContainer()
                                        }, 200)
                                    } else {
                                        if (c == 9 || c == 10) {
                                            a.show();
                                            Run.showNavSubMenu(0);
                                            setTimeout(function () {
                                                Run.showNavItemContainer()
                                            }, 200)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    if (Helper.top._manageMode) {
        setTimeout(function () {
            Run.absoluteNavDraggableAndResize(c, b)
        }, 300)
    }
};
Run.checkHelperAnchor = function () {
    var c = window.location.hash;
    var b = c.substring(1).split("_");
    if (b[0] != "fai") {
        return
    }
    var d = b[1], a = b[2];
    if (!!d) {
        if (typeof a == "undefined") {
            a = "top"
        }
        Run.jumpToModulePosition(d, a)
    }
    return
};
Run.logout = function (a) {
    Helper.ing("正在退出系统...", false);
    $.ajax({
        type: "post", url: "ajax/login_h.php?cmd=logout", error: function () {
            Helper.ing("系统繁忙，请稍后重试。", false)
        }, success: function (b) {
            Helper.successHandle(b, "", "系统繁忙，请稍后重试。", a, 1, 1)
        }
    })
};
Run.manageHelperscoAd = function () {
    if (_manageMode) {
        $(".siteAdvertisement_box").mouseover(function () {
            $(".siteAdvertisement_boxTip").css("display", "block")
        }).mouseleave(function () {
            $(".siteAdvertisement_boxTip").css("display", "none")
        })
    }
    $(".reportUrl").mouseover(function () {
        $(this).text("举报此网站").css("text-decoration", "underline")
    }).mouseleave(function () {
        $(this).text("举报").css("text-decoration", "none")
    });
    $(".closeImg").click(function () {
        if (_manageMode) {
            if (Helper.isDbg()) {
                $.cookie("faiscoAd", false, {expires: 1, path: "/", domain: "aaa.cn"})
            } else {
                $.cookie("faiscoAd", false, {expires: 1, path: "/", domain: "faisco.cn"})
            }
            var a = $.cookie("faiscoAdLoopCount");
            if (a == "1") {
                Run.logDog(200004, 22)
            } else {
                if (a == "2") {
                    Run.logDog(200004, 23)
                } else {
                    if (a == "3") {
                        Run.logDog(200004, 24)
                    } else {
                        if (a == "4") {
                            Run.logDog(200004, 21)
                        }
                    }
                }
            }
        }
        $(".siteAdvertisement_box").css("display", "none")
    })
};
Run.initMulColModuleInIE = function (a) {
    if (Helper.isIE10()) {
        $(a).find(".mulModuleColStyleLine").css("height", $(a).height() - 25 + "px")
    }
};
Run.initCorpTitleJump = function () {
    $("#corpTitle").click(function () {
        var b = $(this).attr("_href");
        if (b == "" || b == null) {
            return false
        }
        if ($(this).attr("contenteditable") == "true") {
            return false
        }
        var a = parseInt($(this).attr("_linktype"));
        if (Helper.top._titleData != null && Helper.top._titleData != "") {
            if (Helper.top._titleData.jm.ot === 1) {
                window.open(b)
            } else {
                Helper.top.location.href = b
            }
        } else {
            if (a === 1) {
                window.open(b)
            } else {
                Helper.top.location.href = b
            }
        }
    })
};
Run.onTitleRunFixTop = function () {
    var f, h = false, a = false, r = Helper.isIE6(), q = Helper.isIE7(), z = Helper.top.$("#corpTitle"), u = Helper.top.$(window),
        n = Helper.top.$("#g_main"), d = Helper.top.$("#web"), k = Helper.top.$("body"), w = Helper.top.$(".webTopTable"),
        g = Helper.top.$(".floatLeftTop"), e = z.parent(), m = Helper.top.$("#sitetips"), l,
        v = parseInt(z.css("top").replace("px", "")), s = z.offset().top - n.offset().top, j = z.position().left,
        p = m.height() || 0, c = s, b = g.css("top").replace("px", "") || 0, o = Helper.top.$(window), y = o;
    if (r || q) {
        a = true;
        y = n
    }
    var x = z.offset().left - e.offset().left;
    var t, i;
    y.off("scroll.title");
    y.on("scroll.title", function () {
        var B = y.scrollTop(), A = parseInt(g.css("top").replace("px", "")) - 1;
        b = A || 0;
        f = Run.getNavInClientPosition(z).left;
        if (w.find("#corpTitle").length > 0) {
            l = w;
            l.css({zIndex: "60", position: "relative"})
        }
        if (!h && c < B) {
            if (r) {
                t = z.parent();
                i = z.offset().left - t.offset().left;
                k.prepend(z);
                z.css({position: "absolute", left: f + "px", top: b + "px"})
            } else {
                z.addClass("titlefixtop");
                z.css({left: f + "px", top: b + "px", position: "fixed"})
            }
            h = true
        }
        if (h && c > B) {
            if (r) {
                e.append(z);
                z.css({position: "absolute", left: j, top: s, zIndex: ""})
            } else {
                z.removeClass("titlefixtop");
                z.css({position: "absolute", left: j, top: s})
            }
            h = false
        }
    });
    Helper.top.$(window).on("resize.title", function () {
        if (r && z.offset().top == 0) {
            z.css("left", t.offset().left + i)
        } else {
            if (z.hasClass("titlefixtop")) {
                setTimeout(function () {
                    z.css("left", e.offset().left + x)
                }, 0)
            }
        }
    })
};
Run.onLogoRunFixTop = function () {
    var f, j = false, a = false, s = Helper.isIE6(), q = Helper.isIE7(), g = Helper.top.$("#logo"), w = Helper.top.$(window),
        n = Helper.top.$("#g_main"), e = Helper.top.$("#web"), k = Helper.top.$("body"), x = Helper.top.$(".webTopTable"),
        i = Helper.top.$(".floatLeftTop"), h = g.parent(), m = Helper.top.$("#sitetips"), l,
        v = parseInt(g.css("top").replace("px", "")), y = g.offset().top - n.offset().top, r = g.position().left,
        p = m.height() || 0, d = y, c = i.css("top").replace("px", "") || 0, o = Helper.top.$(window), z = o;
    if (s || q) {
        a = true;
        z = n
    }
    var u = g.offset().left - h.offset().left;
    var t, b;
    z.off("scroll.logo");
    z.on("scroll.logo", function () {
        var B = z.scrollTop(), A = parseInt(i.css("top").replace("px", "")) - 1;
        c = A || 0;
        f = Run.getNavInClientPosition(g).left;
        if (x.find("#logo").length > 0) {
            l = x;
            l.css({zIndex: "60", position: "relative"})
        }
        if (!j && d < B) {
            if (s) {
                t = g.parent();
                b = g.offset().left - t.offset().left;
                k.prepend(g);
                g.css({position: "absolute", left: f + "px", top: c + "px", zIndex: 60})
            } else {
                g.addClass("logofixtop");
                g.css({left: f + "px", top: c + "px", position: "fixed"})
            }
            j = true
        }
        if (j && d > B) {
            if (s) {
                h.append(g);
                g.css({position: "absolute", left: r, top: y, zIndex: ""})
            } else {
                g.removeClass("logofixtop");
                g.css({position: "absolute", left: r, top: y})
            }
            j = false
        }
    });
    Helper.top.$(window).on("resize.logo", function () {
        if (s && g.offset().top == 0) {
            g.css("left", t.offset().left + b)
        } else {
            if (g.hasClass("logofixtop")) {
                setTimeout(function () {
                    g.css("left", h.offset().left + u)
                }, 0)
            }
        }
    })
};
Run.voidFun = function () {
};
Run.codeInsertButtom = function (d) {
    var b = /document.write/g;
    d = d.replace(b, "Run.voidFun");
    var a = document.createElement("script");
    a.type = "text/javascript";
    try {
        a.appendChild(document.createTextNode(d))
    } catch (c) {
        a.text = d
    }
    document.body.appendChild(a)
};
Run.computeTabsWidthHideMore = function (e) {
    var d = Helper.top.$("#module" + e).find(".formTabButtonTopCenter");
    var c = parseInt(d.css("width")) + 4;
    var b = 0;
    var a = d.find(".formTabButton");
    $.each(a, function (f, h) {
        var g = parseInt($(h).css("width"));
        b += g + 5
    });
    b += 40;
    if (b > c) {
        d.find(".formTabButtonMore").hide()
    } else {
        d.find(".formTabButtonMore").show()
    }
};
Run.wxShareAlter = function (a) {
    var c = new Array();
    c.push("<div class='wxShare'>");
    c.push("<div class='wxShareContent'>");
    c.push("<div class='wxShareDesc'>");
    c.push("<span>" + LS.weChatShare + "</span>");
    c.push("</div>");
    c.push("<div class='wxShareQrcode'><img alt='' src='" + a + "' /></div>");
    c.push("</div>");
    c.push("</div>");
    var b = Run.getTopWindow().Helper.popupWindow({
        width: 480,
        height: 420,
        frameScrolling: "no",
        bannerDisplay: false,
        bgClose: true,
        closeBtnClass: "wxSharehideCloseBtn",
        divContent: c.join("")
    });
    if (Helper.isIE6() && Helper.top.$("#fixSelectIframe" + b).length > 0) {
        Helper.top.$("#fixSelectIframe" + b).remove()
    }
};
Run.hoverChangeImage = function () {
    var m = $("img[_defImg][_hovImg], img[_defFont][_hovFont], div[_defFont][_hovFont], div[_defImg][_hovImg]");
    var f = $(".J_hoverImage");
    var q = false;
    var n = this.body ? this.body : (this.editor ? this.editor.body : false);
    if (n) {
        m = $(n).find("img[_defImg][_hovImg], img[_defFont][_hovFont], div[_defFont][_hovFont], div[_defImg][_hovImg]")
    }
    if (n) {
        f = $(n).find(".J_hoverImage")
    }
    if (m.length == 0) {
        return
    }
    f.remove();
    for (var r = 0; r < m.length; r++) {
        var u = m[r];
        var o = $(u).parent();
        var e = $(u).position().top;
        var c = $(u).position().left;
        var s = $(u).width();
        var p = $(u).height();
        var d = $(u).attr("title") || "";
        var l = $(u).attr("_defFont");
        var h = "";
        var g = $(u).attr("_hovImg");
        var v = "position: absolute; opacity:0;";
        var k = $(u).attr("_hovFont");
        var j = $(u).attr("_hovColor");
        q = ($(u).parents(".richContent").length > 0 || n) && $(o).is("p, span, td");
        if (q) {
            if (!(o[0].nodeName.toLowerCase() === "span" && $(o).hasClass("J_hoverImageParent"))) {
                var a = "display: inline-block; width: " + s + "px; height: " + p + "px; _display: block; _zoom: 1;";
                $(u).after("<span class='J_hoverImageParent' style='" + a + "'></span>");
                o = $(u).next("span");
                $(o).append($(u))
            }
        }
        var h = $(o).find(".J_hoverImage");
        if (h.length == 0) {
            v += "top: 0px; left: 0px; width:" + s + "px; height:" + p + "px;";
            if (!!k) {
                font_size = s > p ? p : s;
                v += "font-size:" + font_size + "px; text-align : center; line-height:" + p + "px;";
                h = "<div class='J_hoverImage " + k + "' style='" + v + "color: " + j + "' ></div>"
            } else {
                h = "<img class='J_hoverImage' src='" + g + "' style='" + v + (g ? "" : "visibility:hidden;") + "' title='" + d + "' alt='" + d + "' >"
            }
            $(u).after(h)
        }
        $(u).css("opacity", "")
    }
    var t = $(m).parent();
    $.each(t, function (x, y) {
        var z = $(this).find("img[_defImg], div[_defFont]")[0];
        if (typeof($(z).attr("_hovImg")) == "undefined" && typeof($(z).attr("_hovFont")) == "undefined") {
            return
        }
        if (typeof($(z).attr("_hovImg")) != "undefined" && $(z).attr("_hovImg").length == 0) {
            return
        }
        var w = $(y).parents(".form");
        if (Helper.isChrome() && !$(w).hasClass("formStyle31")) {
            $(y).css("position", "relative")
        }
        $(y).off(".hoverImage");
        $(y).on("mouseenter.hoverImage", function () {
            var i = $(this).find("img[_defImg], div[_defFont]")[0];
            var A = $(this).find(".J_hoverImage");
            b(i, A);
            $(i).stop(false, true).animate({opacity: 0}, 500);
            $(A).stop(false, true).animate({opacity: 1}, 500)
        }).on("mouseleave.hoverImage", function () {
            var i = $(this).find("img[_defImg], div[_defFont]")[0];
            var A = $(this).find(".J_hoverImage");
            b(i, A);
            $(A).stop(false, true).animate({opacity: 0}, 500);
            $(i).stop(false, true).animate({opacity: 1}, 500)
        })
    });
    function b(z, C) {
        var x = $(z).width();
        var w = $(z).height();
        var y = $(z).position().top;
        var i = $(z).position().left;
        var B = $(z).css("margin-left");
        var A = $(z).css("margin-top");
        if (!!B) {
            B = parseInt(B.replace("px", ""));
            i += B
        }
        if (!!A) {
            A = parseInt(A.replace("px", ""));
            y += A
        }
        if ($(z).context.tagName == "DIV") {
            $(z).parent().css("display", "block")
        }
        $(C).css({top: y + "px", left: i + "px", width: x + "px", height: w + "px"})
    }
};
Run.hoverStyle = function () {
    var k = $("a[aStyle_h]");
    var l = this.body ? this.body : (this.editor ? this.editor.body : false);
    var g;
    var d;
    var e;
    var h = true;
    var j;
    var b;
    if (l) {
        k = $(l).find("a[aStyle_h]")
    }
    if (k.length == 0) {
        return
    }
    for (var f = 0; f < k.length; f++) {
        var c = k[f];
        $(c).off("mouseenter.hoverStyle");
        $(c).on("mouseenter.hoverStyle", function () {
            var n = $.parseJSON($(this).attr("stylehover"));
            var i = $.parseJSON($(this).attr("wbackColor_h"));
            if (n == null && i == null) {
                return
            } else {
                if (n != null && i == null) {
                    for (var m = 0; j = this.childNodes.length, m < j; m++) {
                        var o = this.childNodes[m];
                        a(o, 1, n, null, false)
                    }
                    e = this.style.textDecoration;
                    d = this.style.color;
                    $(this).css({
                        "text-decoration": (n.u ? "underline" : "none"),
                        color: n.c,
                        display: "inline-block",
                        "text-indent": 0
                    });
                    if (!n.u) {
                        h = false
                    }
                } else {
                    if (i != null && n == null) {
                        for (var m = 0; j = this.childNodes.length, m < j; m++) {
                            var o = this.childNodes[m];
                            a(o, 2, null, i, false)
                        }
                    } else {
                        e = this.style.textDecoration;
                        d = this.style.color;
                        for (var m = 0; j = this.childNodes.length, m < j; m++) {
                            var o = this.childNodes[m];
                            a(o, 3, n, i, false)
                        }
                        $(this).css({"text-decoration": (n.u ? "underline" : "none"), color: n.c});
                        if (!n.u) {
                            h = false
                        }
                    }
                }
            }
        }).on("mouseleave.hoverStyle", function () {
            var n = $.parseJSON($(this).attr("stylehover"));
            var i = $.parseJSON($(this).attr("wbackColor_h"));
            if (n == null && i == null) {
                return
            }
            $(this).css("display", "");
            for (var m = 0; b = this.childNodes.length, m < b; m++) {
                var o = this.childNodes[m];
                a(o, 3, n, i, true)
            }
            if (!h) {
                $(this).css({"text-decoration": "none"});
                h = true
            }
            if ($(this).attr("astyle_h") == 1) {
                $(this).css({color: "" + d + ""});
                $(this).css({"text-decoration": "" + e + ""})
            } else {
                if ($(this).attr("astyle_h") == 2) {
                    $(this).css({color: ""});
                    $(this).css({"text-decoration": ""})
                }
            }
            e = null;
            d = null;
            g = null
        })
    }
    function a(r, o, q, i, p) {
        var o = o || 0;
        var n = r.childNodes.length;
        if (r.nodeType == 1 && n > 0) {
            for (var m = 0; m < n; m++) {
                a(r.childNodes[m], o, q, i, p)
            }
        }
        if (r.nodeType == 3) {
            if (p) {
                r.parentNode.style.cssText = g
            } else {
                g = r.parentNode.style.cssText;
                if (o == 1) {
                    $(r.parentNode).css({
                        "font-size": q.fs,
                        "font-weight": q.b ? "bold" : "normal",
                        "font-family": q.ff,
                        color: q.c
                    })
                } else {
                    if (o == 2) {
                        $(r.parentNode).css({"background-color": i.bc})
                    } else {
                        if (o == 3) {
                            $(r.parentNode).css({
                                "font-size": q.fs,
                                "font-weight": q.b ? "bold" : "normal",
                                "font-family": q.ff,
                                color: q.c,
                                "background-color": i.bc
                            })
                        }
                    }
                }
            }
        }
    }
};
Run.setFullMeasureBgHightInIe6 = function (b) {
    if (Helper.isIE6()) {
        var a = Helper.top.$("#module" + b), c = a.height();
        a.find(".fullmeasureOuterContentBg" + b).css("height", c + "px");
        a.find(".fullmeasureContentBg" + b).css("height", c + "px")
    }
};
Run.addStellarEvent = function () {
    var a = Helper.top.$(".fullmeasureOuterContentBg"), b = false;
    if (a.length > 0) {
        a.each(function () {
            if (!!$(this).attr("data-stellar-background-ratio")) {
                b = true;
                return
            }
        })
    }
    if (b) {
        if (Helper.top._manageMode) {
            Helper.top.$("#g_main").stellar("destroy");
            Helper.top.$("#g_main").stellar({horizontalScrolling: false, responsive: false})
        } else {
            $(Helper.top).stellar("destroy");
            $(Helper.top).stellar({horizontalScrolling: false, responsive: false})
        }
    }
};
Run.popupPwdTips = function (b, a, c) {
    Run.getTopWindow().$.cookie("hasLoginRun", "true", {expires: 1, path: "/"});
    Run.getTopWindow().$(".formDialog .formX").trigger("click");
    Helper.ing2("<span style='font-size: 20px; color: #AFB2B5;'>请先修改您的密码</span><br><hr style='margin: 5px auto; color: #ccc;'><div style='font-size: 12px;'>您的密码过于简单，为避免盗号造成损失，请先修改密码。</div><div style='float: right;'><a class='tipsButton cancelBtn' href='javaScript:void(0);' onclick=\"Run.tipsClose('" + a + "','" + c + "')\">暂不修改</a><a class='tipsButton' href='" + b + "/portal.php#appId=setPwd' onclick='Run.logDog(100068,9);'>修改密码</a></div>", false);
    Run.getTopWindow().$(".msg2").css({"text-align": "left", margin: "15px", width: "auto"});
    Run.getTopWindow().$(".tips2").css({height: "205px", display: "none"}).slideDown();
    Run.getTopWindow().$("#ing2").css({width: "452px", "margin-top": "105px"});
    Run.getTopWindow().$("#ing2").css({transition: "opacity 0s ease", position: "fixed", top: "0"});
    Helper.bg(0, 0.02);
    Run.getTopWindow().$("body").css("overflow", "hidden");
    Run.getTopWindow().$("#popupBg0").click(function () {
        Run.tipsClose(a, c)
    });
    Run.getTopWindow().$("#ing2 .close").bind("click", function () {
        Run.tipsClose(a, c)
    })
};
Run.tipsClose = function (a, b) {
    Run.getTopWindow().Helper.removeIng2();
    Run.getTopWindow().Helper.removeBg();
    Run.getTopWindow().$("body").css("overflow", "scroll");
    $.cookie("hasLoginRun", "false", {expires: 1, path: "/"});
    window.location.href = "http://" + a + "." + b + ""
};
Run.changeAdmHref = function (a, b) {
    window.location.href = "http://" + a + "." + b + ""
};
Run.getDialogContent = function (b, a) {
    var d = b ? "suc-ico" : "resultHelperlIcon";
    var c = ["<table style='width:100%;height:100%;'>", "<tr>", "<td style='width:100px;'></td>", "<td style='width:180px;'>", "<div class='" + d + " addItemTextTips' style='max-width:160px;font-size:14px; color:#636363; overflow: hidden;word-wrap:normal; white-space: nowrap; text-overflow: ellipsis;' >" + a + "</div>", "</td>", "<td style='width:100px;'></td>", "</tr>", "</table>"];
    return c.join("")
};
/*!
 * Clamp.js 0.5.1
 *
 * Copyright 2011-2013, Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 *
 * 第三方 多行省略代码
 */
(function (a, c) {
    function b(i, k) {
        k = k || {};
        var u = this, l = window, g = {
                clamp: k.clamp || 2,
                useNativeClamp: typeof(k.useNativeClamp) != "undefined" ? k.useNativeClamp : true,
                splitOnChars: k.splitOnChars || [".", "-", "–", "—", " "],
                animate: k.animate || false,
                truncationChar: k.truncationChar || "…",
                truncationHTML: k.truncationHTML
            }, s = i.style, A = i.innerHTML, w = typeof(i.style.webkitLineClamp) != "undefined", f = g.clamp,
            n = f.indexOf && (f.indexOf("px") > -1 || f.indexOf("em") > -1), p;
        if (g.truncationHTML) {
            p = document.createElement("span");
            p.innerHTML = g.truncationHTML
        }
        var e = g.splitOnChars.slice(0), x = e[0], r, z;
        if (f == "auto") {
            f = j()
        } else {
            if (n) {
                f = j(parseInt(f))
            }
        }
        var q;
        if (w && g.useNativeClamp) {
            s.overflow = "hidden";
            s.textOverflow = "ellipsis";
            s.webkitBoxOrient = "vertical";
            s.display = "-webkit-box";
            s.webkitLineClamp = f;
            if (n) {
                s.height = g.clamp + "px"
            }
        } else {
            var v = y(f);
            if (v <= i.clientHeight) {
                q = h(d(i), v)
            }
        }
        return {original: A, clamped: q};
        function t(B, C) {
            if (!l.getComputedStyle) {
                l.getComputedStyle = function (D, E) {
                    this.el = D;
                    this.getPropertyValue = function (G) {
                        var F = /(\-([a-z]){1})/g;
                        if (G == "float") {
                            G = "styleFloat"
                        }
                        if (F.test(G)) {
                            G = G.replace(F, function () {
                                return arguments[2].toUpperCase()
                            })
                        }
                        return D.currentStyle && D.currentStyle[G] ? D.currentStyle[G] : null
                    };
                    return this
                }
            }
            return l.getComputedStyle(B, null).getPropertyValue(C)
        }

        function j(B) {
            var C = B || i.clientHeight, D = o(i);
            return Math.max(Math.floor(C / D), 0)
        }

        function y(B) {
            var C = o(i);
            return C * B
        }

        function o(C) {
            var B = t(C, "line-height");
            if (B == "normal") {
                B = parseInt(t(C, "font-size")) * 1.2
            }
            return parseInt(B)
        }

        function d(B) {
            if (B.lastChild.children && B.lastChild.children.length > 0) {
                return d(Array.prototype.slice.call(B.children).pop())
            } else {
                if (!B.lastChild || !B.lastChild.nodeValue || B.lastChild.nodeValue == "" || B.lastChild.nodeValue == g.truncationChar) {
                    B.lastChild.parentNode.removeChild(B.lastChild);
                    return d(i)
                } else {
                    return B.lastChild
                }
            }
        }

        function h(E, D) {
            if (!D) {
                return
            }
            function C() {
                e = g.splitOnChars.slice(0);
                x = e[0];
                r = null;
                z = null
            }

            var B = E.nodeValue.replace(g.truncationChar, "");
            if (!r) {
                if (e.length > 0) {
                    x = e.shift()
                } else {
                    x = ""
                }
                r = B.split(x)
            }
            if (r.length > 1) {
                z = r.pop();
                m(E, r.join(x))
            } else {
                r = null
            }
            if (p) {
                E.nodeValue = E.nodeValue.replace(g.truncationChar, "");
                i.innerHTML = E.nodeValue + " " + p.innerHTML + g.truncationChar
            }
            if (r) {
                if (i.clientHeight <= D) {
                    if (e.length >= 0 && x != "") {
                        m(E, r.join(x) + x + z);
                        r = null
                    } else {
                        return i.innerHTML
                    }
                }
            } else {
                if (x == "") {
                    m(E, "");
                    E = d(i);
                    C()
                }
            }
            if (g.animate) {
                setTimeout(function () {
                    h(E, D)
                }, g.animate === true ? 10 : g.animate)
            } else {
                return h(E, D)
            }
        }

        function m(B, C) {
            B.nodeValue = C + g.truncationChar
        }
    }

    a.clamp = b
})(Run);
Run.userReadyOperateRun = function () {
    Run.mallCartInit(_colId);
    Run.mobiWebInit();
    if (!Helper.top._oem) {
        Run.changeTheLogoSize()
    }
    Run.refreshFooterItemSpacing();
    Run.bindInTabSwitch()
};
(function () {
    if (Helper.top != window) {
        return
    }
    var f = Helper.top.window.location.hash, b, c, a;
    if (!f) {
        return
    }
    try {
        b = $(f)
    } catch (d) {
        return
    }
    if (b.length < 1) {
        return
    }
    c = Helper.top._manageMode ? "#g_main" : Helper.top.window;
    a = b.parents(":not(#g_main)");
    $(c).one("scroll", function () {
        a.each(function () {
            if ($(this).css("overflow") == "hidden") {
                $(this).scrollTop(0);
                $(this).scroll(function () {
                    if ($(this).scrollTop() != 0) {
                        $(this).scrollTop(0)
                    }
                })
            }
        })
    })
})();
Run.loginRunInit = function (b, a, d, e) {
    var c = $.cookie("hasLoginRun");
    if (c == "true" && c != null) {
        $.cookie("hasLoginRun", "false", {expires: 1, path: "/"});
        Run.changeAdmHref(b, a)
    }
    if (d) {
        Helper.ing(e, true)
    }
};
(function (h, m, n, d) {
    var e = "mCustomScrollbar", a = "mCS", l = ".mCustomScrollbar", f = {
        setWidth: false,
        setHeight: false,
        setTop: 0,
        setLeft: 0,
        axis: "y",
        scrollbarPosition: "inside",
        scrollInertia: 950,
        autoDraggerLength: true,
        autoHideScrollbar: false,
        autoExpandScrollbar: false,
        alwaysShowScrollbar: 0,
        snapAmount: null,
        snapOffset: 0,
        mouseWheel: {
            enable: true,
            scrollAmount: "auto",
            axis: "y",
            preventDefault: false,
            deltaFactor: "auto",
            normalizeDelta: false,
            invert: false,
            disableOver: ["select", "option", "keygen", "datalist", "textarea"]
        },
        scrollButtons: {enable: false, scrollType: "stepless", scrollAmount: "auto"},
        keyboard: {enable: true, scrollType: "stepless", scrollAmount: "auto"},
        contentTouchScroll: 25,
        advanced: {
            autoExpandHorizontalScroll: false,
            autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
            updateOnContentResize: true,
            updateOnImageLoad: true,
            updateOnSelectorChange: false
        },
        theme: "light",
        callbacks: {
            onScrollStart: false,
            onScroll: false,
            onTotalScroll: false,
            onTotalScrollBack: false,
            whileScrolling: false,
            onTotalScrollOffset: 0,
            onTotalScrollBackOffset: 0,
            alwaysTriggerOffsets: true
        },
        live: false,
        liveSelector: null
    }, k = 0, p = {}, c = function (q) {
        if (p[q]) {
            clearTimeout(p[q]);
            g._delete.call(null, p[q])
        }
    }, j = (m.attachEvent && !m.addEventListener) ? 1 : 0, o = false, b = {
        init: function (r) {
            var r = h.extend(true, {}, f, r), q = g._selector.call(this);
            if (r.live) {
                var t = r.liveSelector || this.selector || l, s = h(t);
                if (r.live === "off") {
                    c(t);
                    return
                }
                p[t] = setTimeout(function () {
                    s.mCustomScrollbar(r);
                    if (r.live === "once" && s.length) {
                        c(t)
                    }
                }, 500)
            } else {
                c(t)
            }
            r.setWidth = (r.set_width) ? r.set_width : r.setWidth;
            r.setHeight = (r.set_height) ? r.set_height : r.setHeight;
            r.axis = (r.horizontalScroll) ? "x" : g._findAxis.call(null, r.axis);
            r.scrollInertia = r.scrollInertia < 17 ? 17 : r.scrollInertia;
            if (typeof r.mouseWheel !== "object" && r.mouseWheel == true) {
                r.mouseWheel = {
                    enable: true,
                    scrollAmount: "auto",
                    axis: "y",
                    preventDefault: false,
                    deltaFactor: "auto",
                    normalizeDelta: false,
                    invert: false
                }
            }
            r.mouseWheel.scrollAmount = !r.mouseWheelPixels ? r.mouseWheel.scrollAmount : r.mouseWheelPixels;
            r.mouseWheel.normalizeDelta = !r.advanced.normalizeMouseWheelDelta ? r.mouseWheel.normalizeDelta : r.advanced.normalizeMouseWheelDelta;
            r.scrollButtons.scrollType = g._findScrollButtonsType.call(null, r.scrollButtons.scrollType);
            g._theme.call(null, r);
            return h(q).each(function () {
                var v = h(this);
                if (!v.data(a)) {
                    v.data(a, {
                        idx: ++k,
                        opt: r,
                        scrollRatio: {y: null, x: null},
                        overflowed: null,
                        bindEvents: false,
                        tweenRunning: false,
                        sequential: {},
                        langDir: v.css("direction"),
                        cbOffsets: null,
                        trigger: null
                    });
                    var x = v.data(a).opt, w = v.data("mcs-axis"), u = v.data("mcs-scrollbar-position"),
                        y = v.data("mcs-theme");
                    if (w) {
                        x.axis = w
                    }
                    if (u) {
                        x.scrollbarPosition = u
                    }
                    if (y) {
                        x.theme = y;
                        g._theme.call(null, x)
                    }
                    g._pluginMarkup.call(this);
                    b.update.call(null, v)
                }
            })
        }, update: function (r) {
            var q = r || g._selector.call(this);
            return h(q).each(function () {
                var u = h(this);
                if (u.data(a)) {
                    var w = u.data(a), v = w.opt, s = h("#mCSB_" + w.idx + "_container"),
                        t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")];
                    if (!s.length) {
                        return
                    }
                    if (w.tweenRunning) {
                        g._stop.call(null, u)
                    }
                    if (u.hasClass("mCS_disabled")) {
                        u.removeClass("mCS_disabled")
                    }
                    if (u.hasClass("mCS_destroyed")) {
                        u.removeClass("mCS_destroyed")
                    }
                    g._maxHeight.call(this);
                    g._expandContentHorizontally.call(this);
                    if (v.axis !== "y" && !v.advanced.autoExpandHorizontalScroll) {
                        s.css("width", g._contentWidth(s.children()))
                    }
                    w.overflowed = g._overflowed.call(this);
                    g._scrollbarVisibility.call(this);
                    if (v.autoDraggerLength) {
                        g._setDraggerLength.call(this)
                    }
                    g._scrollRatio.call(this);
                    g._bindEvents.call(this);
                    var x = [Math.abs(s[0].offsetTop), Math.abs(s[0].offsetLeft)];
                    if (v.axis !== "x") {
                        if (!w.overflowed[0]) {
                            g._resetContentPosition.call(this);
                            if (v.axis === "y") {
                                g._unbindEvents.call(this)
                            } else {
                                if (v.axis === "yx" && w.overflowed[1]) {
                                    g._scrollTo.call(this, u, x[1].toString(), {dir: "x", dur: 0, overwrite: "none"})
                                }
                            }
                        } else {
                            if (t[0].height() > t[0].parent().height()) {
                                g._resetContentPosition.call(this)
                            } else {
                                g._scrollTo.call(this, u, x[0].toString(), {dir: "y", dur: 0, overwrite: "none"})
                            }
                        }
                    }
                    if (v.axis !== "y") {
                        if (!w.overflowed[1]) {
                            g._resetContentPosition.call(this);
                            if (v.axis === "x") {
                                g._unbindEvents.call(this)
                            } else {
                                if (v.axis === "yx" && w.overflowed[0]) {
                                    g._scrollTo.call(this, u, x[0].toString(), {dir: "y", dur: 0, overwrite: "none"})
                                }
                            }
                        } else {
                            if (t[1].width() > t[1].parent().width()) {
                                g._resetContentPosition.call(this)
                            } else {
                                g._scrollTo.call(this, u, x[1].toString(), {dir: "x", dur: 0, overwrite: "none"})
                            }
                        }
                    }
                    g._autoUpdate.call(this)
                }
            })
        }, scrollTo: function (s, r) {
            if (typeof s == "undefined" || s == null) {
                return
            }
            var q = g._selector.call(this);
            return h(q).each(function () {
                var v = h(this);
                if (v.data(a)) {
                    var y = v.data(a), x = y.opt, w = {
                            trigger: "external",
                            scrollInertia: x.scrollInertia,
                            scrollEasing: "mcsEaseInOut",
                            moveDragger: false,
                            callbacks: true,
                            onStart: true,
                            onUpdate: true,
                            onComplete: true
                        }, t = h.extend(true, {}, w, r), z = g._arr.call(this, s),
                        u = t.scrollInertia < 17 ? 17 : t.scrollInertia;
                    z[0] = g._to.call(this, z[0], "y");
                    z[1] = g._to.call(this, z[1], "x");
                    if (t.moveDragger) {
                        z[0] *= y.scrollRatio.y;
                        z[1] *= y.scrollRatio.x
                    }
                    t.dur = u;
                    setTimeout(function () {
                        if (z[0] !== null && typeof z[0] !== "undefined" && x.axis !== "x" && y.overflowed[0]) {
                            t.dir = "y";
                            t.overwrite = "all";
                            g._scrollTo.call(this, v, z[0].toString(), t)
                        }
                        if (z[1] !== null && typeof z[1] !== "undefined" && x.axis !== "y" && y.overflowed[1]) {
                            t.dir = "x";
                            t.overwrite = "none";
                            g._scrollTo.call(this, v, z[1].toString(), t)
                        }
                    }, 60)
                }
            })
        }, stop: function () {
            var q = g._selector.call(this);
            return h(q).each(function () {
                var r = h(this);
                if (r.data(a)) {
                    g._stop.call(null, r)
                }
            })
        }, disable: function (s) {
            var q = g._selector.call(this);
            return h(q).each(function () {
                var r = h(this);
                if (r.data(a)) {
                    var u = r.data(a), t = u.opt;
                    g._autoUpdate.call(this, "remove");
                    g._unbindEvents.call(this);
                    if (s) {
                        g._resetContentPosition.call(this)
                    }
                    g._scrollbarVisibility.call(this, true);
                    r.addClass("mCS_disabled")
                }
            })
        }, destroy: function () {
            var q = g._selector.call(this);
            return h(q).each(function () {
                var t = h(this);
                if (t.data(a)) {
                    var v = t.data(a), u = v.opt, r = h("#mCSB_" + v.idx), s = h("#mCSB_" + v.idx + "_container"),
                        w = h(".mCSB_" + v.idx + "_scrollbar");
                    if (u.live) {
                        c(q)
                    }
                    g._autoUpdate.call(this, "remove");
                    g._unbindEvents.call(this);
                    g._resetContentPosition.call(this);
                    t.removeData(a);
                    g._delete.call(null, this.mcs);
                    w.remove();
                    r.replaceWith(s.contents());
                    t.removeClass(e + " _" + a + "_" + v.idx + " mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")
                }
            })
        }
    }, g = {
        _selector: function () {
            return (typeof h(this) !== "object" || h(this).length < 1) ? l : this
        }, _theme: function (t) {
            var s = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"],
                r = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"],
                q = ["minimal", "minimal-dark"], v = ["minimal", "minimal-dark"], u = ["minimal", "minimal-dark"];
            t.autoDraggerLength = h.inArray(t.theme, s) > -1 ? false : t.autoDraggerLength;
            t.autoExpandScrollbar = h.inArray(t.theme, r) > -1 ? false : t.autoExpandScrollbar;
            t.scrollButtons.enable = h.inArray(t.theme, q) > -1 ? false : t.scrollButtons.enable;
            t.autoHideScrollbar = h.inArray(t.theme, v) > -1 ? true : t.autoHideScrollbar;
            t.scrollbarPosition = h.inArray(t.theme, u) > -1 ? "outside" : t.scrollbarPosition
        }, _findAxis: function (q) {
            return (q === "yx" || q === "xy" || q === "auto") ? "yx" : (q === "x" || q === "horizontal") ? "x" : "y"
        }, _findScrollButtonsType: function (q) {
            return (q === "stepped" || q === "pixels" || q === "step" || q === "click") ? "stepped" : "stepless"
        }, _pluginMarkup: function () {
            var z = h(this), y = z.data(a), s = y.opt,
                u = s.autoExpandScrollbar ? " mCSB_scrollTools_onDrag_expand" : "",
                C = ["<div id='mCSB_" + y.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + y.idx + "_scrollbar mCS-" + s.theme + " mCSB_scrollTools_vertical" + u + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + y.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + y.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + y.idx + "_scrollbar mCS-" + s.theme + " mCSB_scrollTools_horizontal" + u + "'><div class='mCSB_draggerContainer'><div id='mCSB_" + y.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
                v = s.axis === "yx" ? "mCSB_vertical_horizontal" : s.axis === "x" ? "mCSB_horizontal" : "mCSB_vertical",
                x = s.axis === "yx" ? C[0] + C[1] : s.axis === "x" ? C[1] : C[0],
                w = s.axis === "yx" ? "<div id='mCSB_" + y.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "",
                t = s.autoHideScrollbar ? " mCS-autoHide" : "",
                q = (s.axis !== "x" && y.langDir === "rtl") ? " mCS-dir-rtl" : "";
            if (s.setWidth) {
                z.css("width", s.setWidth)
            }
            if (s.setHeight) {
                z.css("height", s.setHeight)
            }
            s.setLeft = (s.axis !== "y" && y.langDir === "rtl") ? "989999px" : s.setLeft;
            z.addClass(e + " _" + a + "_" + y.idx + t + q).wrapInner("<div id='mCSB_" + y.idx + "' class='mCustomScrollBox mCS-" + s.theme + " " + v + "'><div id='mCSB_" + y.idx + "_container' class='mCSB_container' style='position:relative; top:" + s.setTop + "; left:" + s.setLeft + ";' dir=" + y.langDir + " /></div>");
            var r = h("#mCSB_" + y.idx), A = h("#mCSB_" + y.idx + "_container");
            if (s.axis !== "y" && !s.advanced.autoExpandHorizontalScroll) {
                A.css("width", g._contentWidth(A.children()))
            }
            if (s.scrollbarPosition === "outside") {
                if (z.css("position") === "static") {
                    z.css("position", "relative")
                }
                z.css("overflow", "visible");
                r.addClass("mCSB_outside").after(x)
            } else {
                r.addClass("mCSB_inside").append(x);
                A.wrap(w)
            }
            g._scrollButtons.call(this);
            var B = [h("#mCSB_" + y.idx + "_dragger_vertical"), h("#mCSB_" + y.idx + "_dragger_horizontal")];
            B[0].css("min-height", B[0].height());
            B[1].css("min-width", B[1].width())
        }, _contentWidth: function (q) {
            return Math.max.apply(Math, q.map(function () {
                return h(this).outerWidth(true)
            }).get())
        }, _expandContentHorizontally: function () {
            var r = h(this), t = r.data(a), s = t.opt, q = h("#mCSB_" + t.idx + "_container");
            if (s.advanced.autoExpandHorizontalScroll && s.axis !== "y") {
                q.css({
                    position: "absolute",
                    width: "auto"
                }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                    width: (Math.ceil(q[0].getBoundingClientRect().right + 0.4) - Math.floor(q[0].getBoundingClientRect().left)),
                    position: "relative"
                }).unwrap()
            }
        }, _scrollButtons: function () {
            var t = h(this), v = t.data(a), u = v.opt, r = h(".mCSB_" + v.idx + "_scrollbar:first"),
                s = ["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />", "<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],
                q = [(u.axis === "x" ? s[2] : s[0]), (u.axis === "x" ? s[3] : s[1]), s[2], s[3]];
            if (u.scrollButtons.enable) {
                r.prepend(q[0]).append(q[1]).next(".mCSB_scrollTools").prepend(q[2]).append(q[3])
            }
        }, _maxHeight: function () {
            var u = h(this), x = u.data(a), w = x.opt, s = h("#mCSB_" + x.idx), r = u.css("max-height"),
                t = r.indexOf("%") !== -1, q = u.css("box-sizing");
            if (r !== "none") {
                var v = t ? u.parent().height() * parseInt(r) / 100 : parseInt(r);
                if (q === "border-box") {
                    v -= ((u.innerHeight() - u.height()) + (u.outerHeight() - u.innerHeight()))
                }
                s.css("max-height", Math.round(v))
            }
        }, _setDraggerLength: function () {
            var v = h(this), t = v.data(a), q = h("#mCSB_" + t.idx), x = h("#mCSB_" + t.idx + "_container"),
                z = [h("#mCSB_" + t.idx + "_dragger_vertical"), h("#mCSB_" + t.idx + "_dragger_horizontal")],
                u = [q.height() / x.outerHeight(false), q.width() / x.outerWidth(false)],
                r = [parseInt(z[0].css("min-height")), Math.round(u[0] * z[0].parent().height()), parseInt(z[1].css("min-width")), Math.round(u[1] * z[1].parent().width())],
                s = j && (r[1] < r[0]) ? r[0] : r[1], y = j && (r[3] < r[2]) ? r[2] : r[3];
            z[0].css({
                height: s,
                "max-height": (z[0].parent().height() - 10)
            }).find(".mCSB_dragger_bar").css({"line-height": r[0] + "px"});
            z[1].css({width: y, "max-width": (z[1].parent().width() - 10)})
        }, _scrollRatio: function () {
            var u = h(this), w = u.data(a), r = h("#mCSB_" + w.idx), s = h("#mCSB_" + w.idx + "_container"),
                t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")],
                v = [s.outerHeight(false) - r.height(), s.outerWidth(false) - r.width()],
                q = [v[0] / (t[0].parent().height() - t[0].height()), v[1] / (t[1].parent().width() - t[1].width())];
            w.scrollRatio = {y: q[0], x: q[1]}
        }, _onDragClasses: function (s, u, r) {
            var t = r ? "mCSB_dragger_onDrag_expanded" : "", q = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag"],
                v = s.closest(".mCSB_scrollTools");
            if (u === "active") {
                s.toggleClass(q[0] + " " + t);
                v.toggleClass(q[1]);
                s[0]._draggable = s[0]._draggable ? 0 : 1
            } else {
                if (!s[0]._draggable) {
                    if (u === "hide") {
                        s.removeClass(q[0]);
                        v.removeClass(q[1])
                    } else {
                        s.addClass(q[0]);
                        v.addClass(q[1])
                    }
                }
            }
        }, _overflowed: function () {
            var u = h(this), v = u.data(a), r = h("#mCSB_" + v.idx), t = h("#mCSB_" + v.idx + "_container"),
                s = v.overflowed == null ? t.height() : t.outerHeight(false),
                q = v.overflowed == null ? t.width() : t.outerWidth(false);
            return [s > r.height(), q > r.width()]
        }, _resetContentPosition: function () {
            var u = h(this), w = u.data(a), v = w.opt, r = h("#mCSB_" + w.idx), s = h("#mCSB_" + w.idx + "_container"),
                t = [h("#mCSB_" + w.idx + "_dragger_vertical"), h("#mCSB_" + w.idx + "_dragger_horizontal")];
            g._stop(u);
            if ((v.axis !== "x" && !w.overflowed[0]) || (v.axis === "y" && w.overflowed[0])) {
                t[0].add(s).css("top", 0)
            }
            if ((v.axis !== "y" && !w.overflowed[1]) || (v.axis === "x" && w.overflowed[1])) {
                var q = dx = 0;
                if (w.langDir === "rtl") {
                    q = r.width() - s.outerWidth(false);
                    dx = Math.abs(q / w.scrollRatio.x)
                }
                s.css("left", q);
                t[1].css("left", dx)
            }
        }, _bindEvents: function () {
            var s = h(this), u = s.data(a), t = u.opt;
            if (!u.bindEvents) {
                g._draggable.call(this);
                if (t.contentTouchScroll) {
                    g._contentDraggable.call(this)
                }
                if (t.mouseWheel.enable) {
                    function r() {
                        q = setTimeout(function () {
                            if (!h.event.special.mousewheel) {
                                r()
                            } else {
                                clearTimeout(q);
                                g._mousewheel.call(s[0])
                            }
                        }, 1000)
                    }

                    var q;
                    r()
                }
                g._draggerRail.call(this);
                g._wrapperScroll.call(this);
                if (t.advanced.autoScrollOnFocus) {
                    g._focus.call(this)
                }
                if (t.scrollButtons.enable) {
                    g._buttons.call(this)
                }
                if (t.keyboard.enable) {
                    g._keyboard.call(this)
                }
                u.bindEvents = true
            }
        }, _unbindEvents: function () {
            var t = h(this), u = t.data(a), q = a + "_" + u.idx, v = ".mCSB_" + u.idx + "_scrollbar",
                s = h("#mCSB_" + u.idx + ",#mCSB_" + u.idx + "_container,#mCSB_" + u.idx + "_container_wrapper," + v + " .mCSB_draggerContainer,#mCSB_" + u.idx + "_dragger_vertical,#mCSB_" + u.idx + "_dragger_horizontal," + v + ">a"),
                r = h("#mCSB_" + u.idx + "_container");
            if (u.bindEvents) {
                h(n).unbind("." + q);
                s.each(function () {
                    h(this).unbind("." + q)
                });
                clearTimeout(t[0]._focusTimeout);
                g._delete.call(null, t[0]._focusTimeout);
                clearTimeout(u.sequential.step);
                g._delete.call(null, u.sequential.step);
                clearTimeout(r[0].onCompleteTimeout);
                g._delete.call(null, r[0].onCompleteTimeout);
                u.bindEvents = false
            }
        }, _scrollbarVisibility: function (r) {
            var u = h(this), w = u.data(a), v = w.opt, q = h("#mCSB_" + w.idx + "_container_wrapper"),
                s = q.length ? q : h("#mCSB_" + w.idx + "_container"),
                x = [h("#mCSB_" + w.idx + "_scrollbar_vertical"), h("#mCSB_" + w.idx + "_scrollbar_horizontal")],
                t = [x[0].find(".mCSB_dragger"), x[1].find(".mCSB_dragger")];
            if (v.axis !== "x") {
                if (w.overflowed[0] && !r) {
                    x[0].add(t[0]).add(x[0].children("a")).css("display", "block");
                    s.removeClass("mCS_no_scrollbar_y mCS_y_hidden")
                } else {
                    if (v.alwaysShowScrollbar) {
                        if (v.alwaysShowScrollbar !== 2) {
                            t[0].add(x[0].children("a")).css("display", "none")
                        }
                        s.removeClass("mCS_y_hidden")
                    } else {
                        x[0].css("display", "none");
                        s.addClass("mCS_y_hidden")
                    }
                    s.addClass("mCS_no_scrollbar_y")
                }
            }
            if (v.axis !== "y") {
                if (w.overflowed[1] && !r) {
                    x[1].add(t[1]).add(x[1].children("a")).css("display", "block");
                    s.removeClass("mCS_no_scrollbar_x mCS_x_hidden")
                } else {
                    if (v.alwaysShowScrollbar) {
                        if (v.alwaysShowScrollbar !== 2) {
                            t[1].add(x[1].children("a")).css("display", "none")
                        }
                        s.removeClass("mCS_x_hidden")
                    } else {
                        x[1].css("display", "none");
                        s.addClass("mCS_x_hidden")
                    }
                    s.addClass("mCS_no_scrollbar_x")
                }
            }
            if (!w.overflowed[0] && !w.overflowed[1]) {
                u.addClass("mCS_no_scrollbar")
            } else {
                u.removeClass("mCS_no_scrollbar")
            }
        }, _coordinates: function (r) {
            var q = r.type;
            switch (q) {
                case"pointerdown":
                case"MSPointerDown":
                case"pointermove":
                case"MSPointerMove":
                case"pointerup":
                case"MSPointerUp":
                    return [r.originalEvent.pageY, r.originalEvent.pageX];
                    break;
                case"touchstart":
                case"touchmove":
                case"touchend":
                    var s = r.originalEvent.touches[0] || r.originalEvent.changedTouches[0];
                    return [s.pageY, s.pageX];
                    break;
                default:
                    return [r.pageY, r.pageX]
            }
        }, _draggable: function () {
            var v = h(this), t = v.data(a), q = t.opt, s = a + "_" + t.idx,
                u = ["mCSB_" + t.idx + "_dragger_vertical", "mCSB_" + t.idx + "_dragger_horizontal"],
                w = h("#mCSB_" + t.idx + "_container"), x = h("#" + u[0] + ",#" + u[1]), B, z, A;
            x.bind("mousedown." + s + " touchstart." + s + " pointerdown." + s + " MSPointerDown." + s, function (F) {
                F.stopImmediatePropagation();
                F.preventDefault();
                if (!g._mouseBtnLeft(F)) {
                    return
                }
                o = true;
                if (j) {
                    n.onselectstart = function () {
                        return false
                    }
                }
                y(false);
                g._stop(v);
                B = h(this);
                var G = B.offset(), H = g._coordinates(F)[0] - G.top, C = g._coordinates(F)[1] - G.left,
                    E = B.height() + G.top, D = B.width() + G.left;
                if (H < E && H > 0 && C < D && C > 0) {
                    z = H;
                    A = C
                }
                g._onDragClasses(B, "active", q.autoExpandScrollbar)
            }).bind("touchmove." + s, function (D) {
                D.stopImmediatePropagation();
                D.preventDefault();
                var E = B.offset(), F = g._coordinates(D)[0] - E.top, C = g._coordinates(D)[1] - E.left;
                r(z, A, F, C)
            });
            h(n).bind("mousemove." + s + " pointermove." + s + " MSPointerMove." + s, function (D) {
                if (B) {
                    var E = B.offset(), F = g._coordinates(D)[0] - E.top, C = g._coordinates(D)[1] - E.left;
                    if (z === F) {
                        return
                    }
                    r(z, A, F, C)
                }
            }).add(x).bind("mouseup." + s + " touchend." + s + " pointerup." + s + " MSPointerUp." + s, function (C) {
                if (B) {
                    g._onDragClasses(B, "active", q.autoExpandScrollbar);
                    B = null
                }
                o = false;
                if (j) {
                    n.onselectstart = null
                }
                y(true)
            });
            function y(C) {
                var D = w.find("iframe");
                if (!D.length) {
                    return
                }
                var E = !C ? "none" : "auto";
                D.css("pointer-events", E)
            }

            function r(E, F, H, C) {
                w[0].idleTimer = q.scrollInertia < 233 ? 250 : 0;
                if (B.attr("id") === u[1]) {
                    var D = "x", G = ((B[0].offsetLeft - F) + C) * t.scrollRatio.x
                } else {
                    var D = "y", G = ((B[0].offsetTop - E) + H) * t.scrollRatio.y
                }
                g._scrollTo(v, G.toString(), {dir: D, drag: true})
            }
        }, _contentDraggable: function () {
            var z = h(this), L = z.data(a), J = L.opt, G = a + "_" + L.idx, w = h("#mCSB_" + L.idx),
                A = h("#mCSB_" + L.idx + "_container"),
                x = [h("#mCSB_" + L.idx + "_dragger_vertical"), h("#mCSB_" + L.idx + "_dragger_horizontal")], F, H, M,
                N, D = [], E = [], I, B, v, u, K, y, s = 0, r, t = J.axis === "yx" ? "none" : "all";
            A.bind("touchstart." + G + " pointerdown." + G + " MSPointerDown." + G, function (O) {
                if (!g._pointerTouch(O) || o) {
                    return
                }
                var P = A.offset();
                F = g._coordinates(O)[0] - P.top;
                H = g._coordinates(O)[1] - P.left
            }).bind("touchmove." + G + " pointermove." + G + " MSPointerMove." + G, function (R) {
                if (!g._pointerTouch(R) || o) {
                    return
                }
                R.stopImmediatePropagation();
                B = g._getTime();
                var Q = w.offset(), T = g._coordinates(R)[0] - Q.top, V = g._coordinates(R)[1] - Q.left,
                    S = "mcsLinearOut";
                D.push(T);
                E.push(V);
                if (L.overflowed[0]) {
                    var P = x[0].parent().height() - x[0].height(),
                        U = ((F - T) > 0 && (T - F) > -(P * L.scrollRatio.y))
                }
                if (L.overflowed[1]) {
                    var O = x[1].parent().width() - x[1].width(), W = ((H - V) > 0 && (V - H) > -(O * L.scrollRatio.x))
                }
                if (U || W) {
                    R.preventDefault()
                }
                y = J.axis === "yx" ? [(F - T), (H - V)] : J.axis === "x" ? [null, (H - V)] : [(F - T), null];
                A[0].idleTimer = 250;
                if (L.overflowed[0]) {
                    C(y[0], s, S, "y", "all", true)
                }
                if (L.overflowed[1]) {
                    C(y[1], s, S, "x", t, true)
                }
            });
            w.bind("touchstart." + G + " pointerdown." + G + " MSPointerDown." + G, function (O) {
                if (!g._pointerTouch(O) || o) {
                    return
                }
                O.stopImmediatePropagation();
                g._stop(z);
                I = g._getTime();
                var P = w.offset();
                M = g._coordinates(O)[0] - P.top;
                N = g._coordinates(O)[1] - P.left;
                D = [];
                E = []
            }).bind("touchend." + G + " pointerup." + G + " MSPointerUp." + G, function (Q) {
                if (!g._pointerTouch(Q) || o) {
                    return
                }
                Q.stopImmediatePropagation();
                v = g._getTime();
                var O = w.offset(), U = g._coordinates(Q)[0] - O.top, W = g._coordinates(Q)[1] - O.left;
                if ((v - B) > 30) {
                    return
                }
                K = 1000 / (v - I);
                var R = "mcsEaseOut", S = K < 2.5, X = S ? [D[D.length - 2], E[E.length - 2]] : [0, 0];
                u = S ? [(U - X[0]), (W - X[1])] : [U - M, W - N];
                var P = [Math.abs(u[0]), Math.abs(u[1])];
                K = S ? [Math.abs(u[0] / 4), Math.abs(u[1] / 4)] : [K, K];
                var V = [Math.abs(A[0].offsetTop) - (u[0] * q((P[0] / K[0]), K[0])), Math.abs(A[0].offsetLeft) - (u[1] * q((P[1] / K[1]), K[1]))];
                y = J.axis === "yx" ? [V[0], V[1]] : J.axis === "x" ? [null, V[1]] : [V[0], null];
                r = [(P[0] * 4) + J.scrollInertia, (P[1] * 4) + J.scrollInertia];
                var T = parseInt(J.contentTouchScroll) || 0;
                y[0] = P[0] > T ? y[0] : 0;
                y[1] = P[1] > T ? y[1] : 0;
                if (L.overflowed[0]) {
                    C(y[0], r[0], R, "y", t, false)
                }
                if (L.overflowed[1]) {
                    C(y[1], r[1], R, "x", t, false)
                }
            });
            function q(Q, O) {
                var P = [O * 1.5, O * 2, O / 1.5, O / 2];
                if (Q > 90) {
                    return O > 4 ? P[0] : P[3]
                } else {
                    if (Q > 60) {
                        return O > 3 ? P[3] : P[2]
                    } else {
                        if (Q > 30) {
                            return O > 8 ? P[1] : O > 6 ? P[0] : O > 4 ? O : P[2]
                        } else {
                            return O > 8 ? O : P[3]
                        }
                    }
                }
            }

            function C(Q, S, T, P, O, R) {
                if (!Q) {
                    return
                }
                g._scrollTo(z, Q.toString(), {dur: S, scrollEasing: T, dir: P, overwrite: O, drag: R})
            }
        }, _mousewheel: function () {
            var t = h(this), v = t.data(a), u = v.opt, r = a + "_" + v.idx, q = h("#mCSB_" + v.idx),
                s = [h("#mCSB_" + v.idx + "_dragger_vertical"), h("#mCSB_" + v.idx + "_dragger_horizontal")];
            q.bind("mousewheel." + r, function (A, E) {
                g._stop(t);
                if (g._disableMousewheel(t, A.target)) {
                    return
                }
                var C = u.mouseWheel.deltaFactor !== "auto" ? parseInt(u.mouseWheel.deltaFactor) : (j && A.deltaFactor < 100) ? 100 : A.deltaFactor < 40 ? 40 : A.deltaFactor || 100;
                if (u.axis === "x" || u.mouseWheel.axis === "x") {
                    var x = "x", D = [Math.round(C * v.scrollRatio.x), parseInt(u.mouseWheel.scrollAmount)],
                        z = u.mouseWheel.scrollAmount !== "auto" ? D[1] : D[0] >= q.width() ? q.width() * 0.9 : D[0],
                        F = Math.abs(h("#mCSB_" + v.idx + "_container")[0].offsetLeft), B = s[1][0].offsetLeft,
                        y = s[1].parent().width() - s[1].width(), w = A.deltaX || A.deltaY || E
                } else {
                    var x = "y", D = [Math.round(C * v.scrollRatio.y), parseInt(u.mouseWheel.scrollAmount)],
                        z = u.mouseWheel.scrollAmount !== "auto" ? D[1] : D[0] >= q.height() ? q.height() * 0.9 : D[0],
                        F = Math.abs(h("#mCSB_" + v.idx + "_container")[0].offsetTop), B = s[0][0].offsetTop,
                        y = s[0].parent().height() - s[0].height(), w = A.deltaY || E
                }
                if ((x === "y" && !v.overflowed[0]) || (x === "x" && !v.overflowed[1])) {
                    return
                }
                if (u.mouseWheel.invert) {
                    w = -w
                }
                if (u.mouseWheel.normalizeDelta) {
                    w = w < 0 ? -1 : 1
                }
                if ((w > 0 && B !== 0) || (w < 0 && B !== y) || u.mouseWheel.preventDefault) {
                    A.stopImmediatePropagation();
                    A.preventDefault()
                }
                g._scrollTo(t, (F - (w * z)).toString(), {dir: x})
            })
        }, _disableMousewheel: function (s, u) {
            var q = u.nodeName.toLowerCase(), r = s.data(a).opt.mouseWheel.disableOver, t = ["select", "textarea"];
            return h.inArray(q, r) > -1 && !(h.inArray(q, t) > -1 && !h(u).is(":focus"))
        }, _draggerRail: function () {
            var t = h(this), u = t.data(a), r = a + "_" + u.idx, s = h("#mCSB_" + u.idx + "_container"), v = s.parent(),
                q = h(".mCSB_" + u.idx + "_scrollbar .mCSB_draggerContainer");
            q.bind("touchstart." + r + " pointerdown." + r + " MSPointerDown." + r, function (w) {
                o = true
            }).bind("touchend." + r + " pointerup." + r + " MSPointerUp." + r, function (w) {
                o = false
            }).bind("click." + r, function (A) {
                if (h(A.target).hasClass("mCSB_draggerContainer") || h(A.target).hasClass("mCSB_draggerRail")) {
                    g._stop(t);
                    var x = h(this), z = x.find(".mCSB_dragger");
                    if (x.parent(".mCSB_scrollTools_horizontal").length > 0) {
                        if (!u.overflowed[1]) {
                            return
                        }
                        var w = "x", y = A.pageX > z.offset().left ? -1 : 1,
                            B = Math.abs(s[0].offsetLeft) - (y * (v.width() * 0.9))
                    } else {
                        if (!u.overflowed[0]) {
                            return
                        }
                        var w = "y", y = A.pageY > z.offset().top ? -1 : 1,
                            B = Math.abs(s[0].offsetTop) - (y * (v.height() * 0.9))
                    }
                    g._scrollTo(t, B.toString(), {dir: w, scrollEasing: "mcsEaseInOut"})
                }
            })
        }, _focus: function () {
            var s = h(this), u = s.data(a), t = u.opt, q = a + "_" + u.idx, r = h("#mCSB_" + u.idx + "_container"),
                v = r.parent();
            r.bind("focusin." + q, function (y) {
                var x = h(n.activeElement), z = r.find(".mCustomScrollBox").length, w = 0;
                if (!x.is(t.advanced.autoScrollOnFocus)) {
                    return
                }
                g._stop(s);
                clearTimeout(s[0]._focusTimeout);
                s[0]._focusTimer = z ? (w + 17) * z : 0;
                s[0]._focusTimeout = setTimeout(function () {
                    var D = [x.offset().top - r.offset().top, x.offset().left - r.offset().left],
                        C = [r[0].offsetTop, r[0].offsetLeft],
                        A = [(C[0] + D[0] >= 0 && C[0] + D[0] < v.height() - x.outerHeight(false)), (C[1] + D[1] >= 0 && C[0] + D[1] < v.width() - x.outerWidth(false))],
                        B = (t.axis === "yx" && !A[0] && !A[1]) ? "none" : "all";
                    if (t.axis !== "x" && !A[0]) {
                        g._scrollTo(s, D[0].toString(), {dir: "y", scrollEasing: "mcsEaseInOut", overwrite: B, dur: w})
                    }
                    if (t.axis !== "y" && !A[1]) {
                        g._scrollTo(s, D[1].toString(), {dir: "x", scrollEasing: "mcsEaseInOut", overwrite: B, dur: w})
                    }
                }, s[0]._focusTimer)
            })
        }, _wrapperScroll: function () {
            var r = h(this), s = r.data(a), q = a + "_" + s.idx, t = h("#mCSB_" + s.idx + "_container").parent();
            t.bind("scroll." + q, function (u) {
                t.scrollTop(0).scrollLeft(0)
            })
        }, _buttons: function () {
            var v = h(this), x = v.data(a), w = x.opt, q = x.sequential, s = a + "_" + x.idx,
                u = h("#mCSB_" + x.idx + "_container"), t = ".mCSB_" + x.idx + "_scrollbar", r = h(t + ">a");
            r.bind("mousedown." + s + " touchstart." + s + " pointerdown." + s + " MSPointerDown." + s + " mouseup." + s + " touchend." + s + " pointerup." + s + " MSPointerUp." + s + " mouseout." + s + " pointerout." + s + " MSPointerOut." + s + " click." + s, function (A) {
                A.preventDefault();
                if (!g._mouseBtnLeft(A)) {
                    return
                }
                var z = h(this).attr("class");
                q.type = w.scrollButtons.scrollType;
                switch (A.type) {
                    case"mousedown":
                    case"touchstart":
                    case"pointerdown":
                    case"MSPointerDown":
                        if (q.type === "stepped") {
                            return
                        }
                        o = true;
                        x.tweenRunning = false;
                        y("on", z);
                        break;
                    case"mouseup":
                    case"touchend":
                    case"pointerup":
                    case"MSPointerUp":
                    case"mouseout":
                    case"pointerout":
                    case"MSPointerOut":
                        if (q.type === "stepped") {
                            return
                        }
                        o = false;
                        if (q.dir) {
                            y("off", z)
                        }
                        break;
                    case"click":
                        if (q.type !== "stepped" || x.tweenRunning) {
                            return
                        }
                        y("on", z);
                        break
                }
                function y(B, C) {
                    q.scrollAmount = w.snapAmount || w.scrollButtons.scrollAmount;
                    g._sequentialScroll.call(this, v, B, C)
                }
            })
        }, _keyboard: function () {
            var v = h(this), u = v.data(a), r = u.opt, y = u.sequential, t = a + "_" + u.idx, s = h("#mCSB_" + u.idx),
                x = h("#mCSB_" + u.idx + "_container"), q = x.parent(),
                w = "input,textarea,select,datalist,keygen,[contenteditable='true']";
            s.attr("tabindex", "0").bind("blur." + t + " keydown." + t + " keyup." + t, function (E) {
                switch (E.type) {
                    case"blur":
                        if (u.tweenRunning && y.dir) {
                            z("off", null)
                        }
                        break;
                    case"keydown":
                    case"keyup":
                        var B = E.keyCode ? E.keyCode : E.which, C = "on";
                        if ((r.axis !== "x" && (B === 38 || B === 40)) || (r.axis !== "y" && (B === 37 || B === 39))) {
                            if (((B === 38 || B === 40) && !u.overflowed[0]) || ((B === 37 || B === 39) && !u.overflowed[1])) {
                                return
                            }
                            if (E.type === "keyup") {
                                C = "off"
                            }
                            if (!h(n.activeElement).is(w)) {
                                E.preventDefault();
                                E.stopImmediatePropagation();
                                z(C, B)
                            }
                        } else {
                            if (B === 33 || B === 34) {
                                if (u.overflowed[0] || u.overflowed[1]) {
                                    E.preventDefault();
                                    E.stopImmediatePropagation()
                                }
                                if (E.type === "keyup") {
                                    g._stop(v);
                                    var D = B === 34 ? -1 : 1;
                                    if (r.axis === "x" || (r.axis === "yx" && u.overflowed[1] && !u.overflowed[0])) {
                                        var A = "x", F = Math.abs(x[0].offsetLeft) - (D * (q.width() * 0.9))
                                    } else {
                                        var A = "y", F = Math.abs(x[0].offsetTop) - (D * (q.height() * 0.9))
                                    }
                                    g._scrollTo(v, F.toString(), {dir: A, scrollEasing: "mcsEaseInOut"})
                                }
                            } else {
                                if (B === 35 || B === 36) {
                                    if (!h(n.activeElement).is(w)) {
                                        if (u.overflowed[0] || u.overflowed[1]) {
                                            E.preventDefault();
                                            E.stopImmediatePropagation()
                                        }
                                        if (E.type === "keyup") {
                                            if (r.axis === "x" || (r.axis === "yx" && u.overflowed[1] && !u.overflowed[0])) {
                                                var A = "x",
                                                    F = B === 35 ? Math.abs(q.width() - x.outerWidth(false)) : 0
                                            } else {
                                                var A = "y",
                                                    F = B === 35 ? Math.abs(q.height() - x.outerHeight(false)) : 0
                                            }
                                            g._scrollTo(v, F.toString(), {dir: A, scrollEasing: "mcsEaseInOut"})
                                        }
                                    }
                                }
                            }
                        }
                        break
                }
                function z(G, H) {
                    y.type = r.keyboard.scrollType;
                    y.scrollAmount = r.snapAmount || r.keyboard.scrollAmount;
                    if (y.type === "stepped" && u.tweenRunning) {
                        return
                    }
                    g._sequentialScroll.call(this, v, G, H)
                }
            })
        }, _sequentialScroll: function (s, v, t) {
            var x = s.data(a), r = x.opt, z = x.sequential, y = h("#mCSB_" + x.idx + "_container"),
                q = z.type === "stepped" ? true : false;
            switch (v) {
                case"on":
                    z.dir = [(t === "mCSB_buttonRight" || t === "mCSB_buttonLeft" || t === 39 || t === 37 ? "x" : "y"), (t === "mCSB_buttonUp" || t === "mCSB_buttonLeft" || t === 38 || t === 37 ? -1 : 1)];
                    g._stop(s);
                    if (g._isNumeric(t) && z.type === "stepped") {
                        return
                    }
                    u(q);
                    break;
                case"off":
                    w();
                    if (q || (x.tweenRunning && z.dir)) {
                        u(true)
                    }
                    break
            }
            function u(A) {
                var G = z.type !== "stepped", K = !A ? 1000 / 60 : G ? r.scrollInertia / 1.5 : r.scrollInertia,
                    C = !A ? 2.5 : G ? 7.5 : 40, J = [Math.abs(y[0].offsetTop), Math.abs(y[0].offsetLeft)],
                    F = [x.scrollRatio.y > 10 ? 10 : x.scrollRatio.y, x.scrollRatio.x > 10 ? 10 : x.scrollRatio.x],
                    D = z.dir[0] === "x" ? J[1] + (z.dir[1] * (F[1] * C)) : J[0] + (z.dir[1] * (F[0] * C)),
                    I = z.dir[0] === "x" ? J[1] + (z.dir[1] * parseInt(z.scrollAmount)) : J[0] + (z.dir[1] * parseInt(z.scrollAmount)),
                    H = z.scrollAmount !== "auto" ? I : D, E = !A ? "mcsLinear" : G ? "mcsLinearOut" : "mcsEaseInOut",
                    B = !A ? false : true;
                if (A && K < 17) {
                    H = z.dir[0] === "x" ? J[1] : J[0]
                }
                g._scrollTo(s, H.toString(), {dir: z.dir[0], scrollEasing: E, dur: K, onComplete: B});
                if (A) {
                    z.dir = false;
                    return
                }
                clearTimeout(z.step);
                z.step = setTimeout(function () {
                    u()
                }, K)
            }

            function w() {
                clearTimeout(z.step);
                g._stop(s)
            }
        }, _arr: function (s) {
            var r = h(this).data(a).opt, q = [];
            if (typeof s === "function") {
                s = s()
            }
            if (!(s instanceof Array)) {
                q[0] = s.y ? s.y : s.x || r.axis === "x" ? null : s;
                q[1] = s.x ? s.x : s.y || r.axis === "y" ? null : s
            } else {
                q = s.length > 1 ? [s[0], s[1]] : r.axis === "x" ? [null, s[0]] : [s[0], null]
            }
            if (typeof q[0] === "function") {
                q[0] = q[0]()
            }
            if (typeof q[1] === "function") {
                q[1] = q[1]()
            }
            return q
        }, _to: function (v, w) {
            if (v == null || typeof v == "undefined") {
                return
            }
            var C = h(this), B = C.data(a), u = B.opt, D = h("#mCSB_" + B.idx + "_container"), r = D.parent(),
                F = typeof v;
            if (!w) {
                w = u.axis === "x" ? "x" : "y"
            }
            var q = w === "x" ? D.outerWidth(false) : D.outerHeight(false),
                x = w === "x" ? D.offset().left : D.offset().top, E = w === "x" ? D[0].offsetLeft : D[0].offsetTop,
                z = w === "x" ? "left" : "top";
            switch (F) {
                case"function":
                    return v();
                    break;
                case"object":
                    if (v.nodeType) {
                        var A = w === "x" ? h(v).offset().left : h(v).offset().top
                    } else {
                        if (v.jquery) {
                            if (!v.length) {
                                return
                            }
                            var A = w === "x" ? v.offset().left : v.offset().top
                        }
                    }
                    return A - x;
                    break;
                case"string":
                case"number":
                    if (g._isNumeric.call(null, v)) {
                        return Math.abs(v)
                    } else {
                        if (v.indexOf("%") !== -1) {
                            return Math.abs(q * parseInt(v) / 100)
                        } else {
                            if (v.indexOf("-=") !== -1) {
                                return Math.abs(E - parseInt(v.split("-=")[1]))
                            } else {
                                if (v.indexOf("+=") !== -1) {
                                    var s = (E + parseInt(v.split("+=")[1]));
                                    return s >= 0 ? 0 : Math.abs(s)
                                } else {
                                    if (v.indexOf("px") !== -1 && g._isNumeric.call(null, v.split("px")[0])) {
                                        return Math.abs(v.split("px")[0])
                                    } else {
                                        if (v === "top" || v === "left") {
                                            return 0
                                        } else {
                                            if (v === "bottom") {
                                                return Math.abs(r.height() - D.outerHeight(false))
                                            } else {
                                                if (v === "right") {
                                                    return Math.abs(r.width() - D.outerWidth(false))
                                                } else {
                                                    if (v === "first" || v === "last") {
                                                        var y = D.find(":" + v),
                                                            A = w === "x" ? h(y).offset().left : h(y).offset().top;
                                                        return A - x
                                                    } else {
                                                        if (h(v).length) {
                                                            var A = w === "x" ? h(v).offset().left : h(v).offset().top;
                                                            return A - x
                                                        } else {
                                                            D.css(z, v);
                                                            b.update.call(null, C[0]);
                                                            return
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    break
            }
        }, _autoUpdate: function (r) {
            var u = h(this), G = u.data(a), A = G.opt, w = h("#mCSB_" + G.idx + "_container");
            if (r) {
                clearTimeout(w[0].autoUpdate);
                g._delete.call(null, w[0].autoUpdate);
                return
            }
            var t = w.parent(),
                q = [h("#mCSB_" + G.idx + "_scrollbar_vertical"), h("#mCSB_" + G.idx + "_scrollbar_horizontal")],
                E = function () {
                    return [q[0].is(":visible") ? q[0].outerHeight(true) : 0, q[1].is(":visible") ? q[1].outerWidth(true) : 0]
                }, F = z(), y, v = [w.outerHeight(false), w.outerWidth(false), t.height(), t.width(), E()[0], E()[1]],
                I, C = H(), x;
            D();
            function D() {
                clearTimeout(w[0].autoUpdate);
                w[0].autoUpdate = setTimeout(function () {
                    if (A.advanced.updateOnSelectorChange) {
                        y = z();
                        if (y !== F) {
                            s();
                            F = y;
                            return
                        }
                    }
                    if (A.advanced.updateOnContentResize) {
                        I = [w.outerHeight(false), w.outerWidth(false), t.height(), t.width(), E()[0], E()[1]];
                        if (I[0] !== v[0] || I[1] !== v[1] || I[2] !== v[2] || I[3] !== v[3] || I[4] !== v[4] || I[5] !== v[5]) {
                            s();
                            v = I
                        }
                    }
                    if (A.advanced.updateOnImageLoad) {
                        x = H();
                        if (x !== C) {
                            w.find("img").each(function () {
                                B(this.src)
                            });
                            C = x
                        }
                    }
                    if (A.advanced.updateOnSelectorChange || A.advanced.updateOnContentResize || A.advanced.updateOnImageLoad) {
                        D()
                    }
                }, 60)
            }

            function H() {
                var J = 0;
                if (A.advanced.updateOnImageLoad) {
                    J = w.find("img").length
                }
                return J
            }

            function B(M) {
                var J = new Image();

                function L(N, O) {
                    return function () {
                        return O.apply(N, arguments)
                    }
                }

                function K() {
                    this.onload = null;
                    s()
                }

                J.onload = L(J, K);
                J.src = M
            }

            function z() {
                if (A.advanced.updateOnSelectorChange === true) {
                    A.advanced.updateOnSelectorChange = "*"
                }
                var J = 0, K = w.find(A.advanced.updateOnSelectorChange);
                if (A.advanced.updateOnSelectorChange && K.length > 0) {
                    K.each(function () {
                        J += h(this).height() + h(this).width()
                    })
                }
                return J
            }

            function s() {
                clearTimeout(w[0].autoUpdate);
                b.update.call(null, u[0])
            }
        }, _snapAmount: function (s, q, r) {
            return (Math.round(s / q) * q - r)
        }, _stop: function (q) {
            var s = q.data(a),
                r = h("#mCSB_" + s.idx + "_container,#mCSB_" + s.idx + "_container_wrapper,#mCSB_" + s.idx + "_dragger_vertical,#mCSB_" + s.idx + "_dragger_horizontal");
            r.each(function () {
                g._stopTween.call(this)
            })
        }, _scrollTo: function (r, t, v) {
            var J = r.data(a), F = J.opt, E = {
                    trigger: "internal",
                    dir: "y",
                    scrollEasing: "mcsEaseOut",
                    drag: false,
                    dur: F.scrollInertia,
                    overwrite: "all",
                    callbacks: true,
                    onStart: true,
                    onUpdate: true,
                    onComplete: true
                }, v = h.extend(E, v), H = [v.dur, (v.drag ? 0 : v.dur)], w = h("#mCSB_" + J.idx),
                C = h("#mCSB_" + J.idx + "_container"),
                L = F.callbacks.onTotalScrollOffset ? g._arr.call(r, F.callbacks.onTotalScrollOffset) : [0, 0],
                q = F.callbacks.onTotalScrollBackOffset ? g._arr.call(r, F.callbacks.onTotalScrollBackOffset) : [0, 0];
            J.trigger = v.trigger;
            if (F.snapAmount) {
                t = g._snapAmount(t, F.snapAmount, F.snapOffset)
            }
            switch (v.dir) {
                case"x":
                    var y = h("#mCSB_" + J.idx + "_dragger_horizontal"), A = "left", D = C[0].offsetLeft,
                        I = [w.width() - C.outerWidth(false), y.parent().width() - y.width()],
                        s = [t, (t / J.scrollRatio.x)], M = L[1], K = q[1], B = M > 0 ? M / J.scrollRatio.x : 0,
                        x = K > 0 ? K / J.scrollRatio.x : 0;
                    break;
                case"y":
                    var y = h("#mCSB_" + J.idx + "_dragger_vertical"), A = "top", D = C[0].offsetTop,
                        I = [w.height() - C.outerHeight(false), y.parent().height() - y.height()],
                        s = [t, (t / J.scrollRatio.y)], M = L[0], K = q[0], B = M > 0 ? M / J.scrollRatio.y : 0,
                        x = K > 0 ? K / J.scrollRatio.y : 0;
                    break
            }
            if (s[1] < 0) {
                s = [0, 0]
            } else {
                if (s[1] >= I[1]) {
                    s = [I[0], I[1]]
                } else {
                    s[0] = -s[0]
                }
            }
            clearTimeout(C[0].onCompleteTimeout);
            if (!J.tweenRunning && ((D === 0 && s[0] >= 0) || (D === I[0] && s[0] <= I[0]))) {
                return
            }
            g._tweenTo.call(null, y[0], A, Math.round(s[1]), H[1], v.scrollEasing);
            g._tweenTo.call(null, C[0], A, Math.round(s[0]), H[0], v.scrollEasing, v.overwrite, {
                onStart: function () {
                    if (v.callbacks && v.onStart && !J.tweenRunning) {
                        if (u("onScrollStart")) {
                            G();
                            F.callbacks.onScrollStart.call(r[0])
                        }
                        J.tweenRunning = true;
                        g._onDragClasses(y);
                        J.cbOffsets = z()
                    }
                }, onUpdate: function () {
                    if (v.callbacks && v.onUpdate) {
                        if (u("whileScrolling")) {
                            G();
                            F.callbacks.whileScrolling.call(r[0])
                        }
                    }
                }, onComplete: function () {
                    if (v.callbacks && v.onComplete) {
                        if (F.axis === "yx") {
                            clearTimeout(C[0].onCompleteTimeout)
                        }
                        var N = C[0].idleTimer || 0;
                        C[0].onCompleteTimeout = setTimeout(function () {
                            if (u("onScroll")) {
                                G();
                                F.callbacks.onScroll.call(r[0])
                            }
                            if (u("onTotalScroll") && s[1] >= I[1] - B && J.cbOffsets[0]) {
                                G();
                                F.callbacks.onTotalScroll.call(r[0])
                            }
                            if (u("onTotalScrollBack") && s[1] <= x && J.cbOffsets[1]) {
                                G();
                                F.callbacks.onTotalScrollBack.call(r[0])
                            }
                            J.tweenRunning = false;
                            C[0].idleTimer = 0;
                            g._onDragClasses(y, "hide")
                        }, N)
                    }
                }
            });
            function u(N) {
                return J && F.callbacks[N] && typeof F.callbacks[N] === "function"
            }

            function z() {
                return [F.callbacks.alwaysTriggerOffsets || D >= I[0] + M, F.callbacks.alwaysTriggerOffsets || D <= -K]
            }

            function G() {
                var P = [C[0].offsetTop, C[0].offsetLeft], Q = [y[0].offsetTop, y[0].offsetLeft],
                    N = [C.outerHeight(false), C.outerWidth(false)], O = [w.height(), w.width()];
                r[0].mcs = {
                    content: C,
                    top: P[0],
                    left: P[1],
                    draggerTop: Q[0],
                    draggerLeft: Q[1],
                    topPct: Math.round((100 * Math.abs(P[0])) / (Math.abs(N[0]) - O[0])),
                    leftPct: Math.round((100 * Math.abs(P[1])) / (Math.abs(N[1]) - O[1])),
                    direction: v.dir
                }
            }
        }, _tweenTo: function (s, v, t, r, B, u, K) {
            var K = K || {}, H = K.onStart || function () {
                }, C = K.onUpdate || function () {
                }, I = K.onComplete || function () {
                }, A = g._getTime(), y, w = 0, E = s.offsetTop, F = s.style;
            if (v === "left") {
                E = s.offsetLeft
            }
            var z = t - E;
            s._mcsstop = 0;
            if (u !== "none") {
                D()
            }
            q();
            function J() {
                if (s._mcsstop) {
                    return
                }
                if (!w) {
                    H.call()
                }
                w = g._getTime() - A;
                G();
                if (w >= s._mcstime) {
                    s._mcstime = (w > s._mcstime) ? w + y - (w - s._mcstime) : w + y - 1;
                    if (s._mcstime < w + 1) {
                        s._mcstime = w + 1
                    }
                }
                if (s._mcstime < r) {
                    s._mcsid = _request(J)
                } else {
                    I.call()
                }
            }

            function G() {
                if (r > 0) {
                    s._mcscurrVal = x(s._mcstime, E, z, r, B);
                    F[v] = Math.round(s._mcscurrVal) + "px"
                } else {
                    F[v] = t + "px"
                }
                C.call()
            }

            function q() {
                y = 1000 / 60;
                s._mcstime = w + y;
                _request = (!m.requestAnimationFrame) ? function (L) {
                    G();
                    return setTimeout(L, 0.01)
                } : m.requestAnimationFrame;
                s._mcsid = _request(J)
            }

            function D() {
                if (s._mcsid == null) {
                    return
                }
                if (!m.requestAnimationFrame) {
                    clearTimeout(s._mcsid)
                } else {
                    m.cancelAnimationFrame(s._mcsid)
                }
                s._mcsid = null
            }

            function x(N, M, R, Q, O) {
                switch (O) {
                    case"linear":
                    case"mcsLinear":
                        return R * N / Q + M;
                        break;
                    case"mcsLinearOut":
                        N /= Q;
                        N--;
                        return R * Math.sqrt(1 - N * N) + M;
                        break;
                    case"easeInOutSmooth":
                        N /= Q / 2;
                        if (N < 1) {
                            return R / 2 * N * N + M
                        }
                        N--;
                        return -R / 2 * (N * (N - 2) - 1) + M;
                        break;
                    case"easeInOutStrong":
                        N /= Q / 2;
                        if (N < 1) {
                            return R / 2 * Math.pow(2, 10 * (N - 1)) + M
                        }
                        N--;
                        return R / 2 * (-Math.pow(2, -10 * N) + 2) + M;
                        break;
                    case"easeInOut":
                    case"mcsEaseInOut":
                        N /= Q / 2;
                        if (N < 1) {
                            return R / 2 * N * N * N + M
                        }
                        N -= 2;
                        return R / 2 * (N * N * N + 2) + M;
                        break;
                    case"easeOutSmooth":
                        N /= Q;
                        N--;
                        return -R * (N * N * N * N - 1) + M;
                        break;
                    case"easeOutStrong":
                        return R * (-Math.pow(2, -10 * N / Q) + 1) + M;
                        break;
                    case"easeOut":
                    case"mcsEaseOut":
                    default:
                        var P = (N /= Q) * N, L = P * N;
                        return M + R * (0.499999999999997 * L * P + -2.5 * P * P + 5.5 * L + -6.5 * P + 4 * N)
                }
            }
        }, _getTime: function () {
            if (m.performance && m.performance.now) {
                return m.performance.now()
            } else {
                if (m.performance && m.performance.webkitNow) {
                    return m.performance.webkitNow()
                } else {
                    if (Date.now) {
                        return Date.now()
                    } else {
                        return new Date().getTime()
                    }
                }
            }
        }, _stopTween: function () {
            var q = this;
            if (q._mcsid == null) {
                return
            }
            if (!m.requestAnimationFrame) {
                clearTimeout(q._mcsid)
            } else {
                m.cancelAnimationFrame(q._mcsid)
            }
            q._mcsid = null;
            q._mcsstop = 1
        }, _delete: function (r) {
            try {
                delete r
            } catch (q) {
                r = null
            }
        }, _mouseBtnLeft: function (q) {
            return !(q.which && q.which !== 1)
        }, _pointerTouch: function (r) {
            var q = r.originalEvent.pointerType;
            return !(q && q !== "touch" && q !== 2)
        }, _isNumeric: function (q) {
            return !isNaN(parseFloat(q)) && isFinite(q)
        }
    };
    var i = ("https:" == n.location.protocol) ? "https:" : "http:";
    h.fn[e] = function (q) {
        if (b[q]) {
            return b[q].apply(this, Array.prototype.slice.call(arguments, 1))
        } else {
            if (typeof q === "object" || !q) {
                return b.init.apply(this, arguments)
            } else {
                h.error("Method " + q + " does not exist")
            }
        }
    };
    h[e] = function (q) {
        if (b[q]) {
            return b[q].apply(this, Array.prototype.slice.call(arguments, 1))
        } else {
            if (typeof q === "object" || !q) {
                return b.init.apply(this, arguments)
            } else {
                h.error("Method " + q + " does not exist")
            }
        }
    };
    h[e].defaults = f;
    m[e] = true;
    h(m).load(function () {
        h(l)[e]()
    })
})(jQuery, window, document);